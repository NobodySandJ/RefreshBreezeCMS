const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.es-CuwY592S.js","assets/index-G4WPNwdP.js","assets/index-BPNotfCP.css","assets/api-B1tGtW5E.js","assets/memberUtils-DmuWHEHR.js","assets/sweetalert2.esm.all-AlKuj1Cq.js","assets/index-Cu0b6TYE.js"])))=>i.map(i=>d[i]);
var s2=Object.defineProperty;var a2=(n,t,e)=>t in n?s2(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var Rt=(n,t,e)=>a2(n,typeof t!="symbol"?t+"":t,e);import{_ as Lh,r as ie,j as S,u as o2,R as l2}from"./index-G4WPNwdP.js";import{a as ti}from"./api-B1tGtW5E.js";import{f as wu}from"./memberUtils-DmuWHEHR.js";import{S as Ce}from"./sweetalert2.esm.all-AlKuj1Cq.js";import{A as Ph,m as Rl,h as h0,i as c2,j as h2,k as u2,F as d2,l as f2,d as Ch,n as p2,o as g2,p as sf,q as vc,g as af,r as m2,s as b2,t as Io,u as u0,v as v2}from"./index-Cu0b6TYE.js";function Fc(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e}function y2(n,t,e,i){function r(s){return s instanceof e?s:new e(function(a){a(s)})}return new(e||(e=Promise))(function(s,a){function o(h){try{c(i.next(h))}catch(p){a(p)}}function l(h){try{c(i.throw(h))}catch(p){a(p)}}function c(h){h.done?s(h.value):r(h.value).then(o,l)}c((i=i.apply(n,t||[])).next())})}const w2=n=>n?(...t)=>n(...t):(...t)=>fetch(...t);class Qu extends Error{constructor(t,e="FunctionsError",i){super(t),this.name=e,this.context=i}}class _2 extends Qu{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class of extends Qu{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class lf extends Qu{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var _u;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(_u||(_u={}));class x2{constructor(t,{headers:e={},customFetch:i,region:r=_u.Any}={}){this.url=t,this.headers=e,this.region=r,this.fetch=w2(i)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return y2(this,arguments,void 0,function*(e,i={}){var r;let s,a;try{const{headers:o,method:l,body:c,signal:h,timeout:p}=i;let g={},{region:d}=i;d||(d=this.region);const v=new URL(`${this.url}/${e}`);d&&d!=="any"&&(g["x-region"]=d,v.searchParams.set("forceFunctionRegion",d));let y;c&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(g["Content-Type"]="application/octet-stream",y=c):typeof c=="string"?(g["Content-Type"]="text/plain",y=c):typeof FormData<"u"&&c instanceof FormData?y=c:(g["Content-Type"]="application/json",y=JSON.stringify(c)):c&&typeof c!="string"&&!(typeof Blob<"u"&&c instanceof Blob)&&!(c instanceof ArrayBuffer)&&!(typeof FormData<"u"&&c instanceof FormData)?y=JSON.stringify(c):y=c;let x=h;p&&(a=new AbortController,s=setTimeout(()=>a.abort(),p),h?(x=a.signal,h.addEventListener("abort",()=>a.abort())):x=a.signal);const _=yield this.fetch(v.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},g),this.headers),o),body:y,signal:x}).catch(V=>{throw new _2(V)}),E=_.headers.get("x-relay-error");if(E&&E==="true")throw new of(_);if(!_.ok)throw new lf(_);let O=((r=_.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),T;return O==="application/json"?T=yield _.json():O==="application/octet-stream"||O==="application/pdf"?T=yield _.blob():O==="text/event-stream"?T=_:O==="multipart/form-data"?T=yield _.formData():T=yield _.text(),{data:T,error:null,response:_}}catch(o){return{data:null,error:o,response:o instanceof lf||o instanceof of?o.context:void 0}}finally{s&&clearTimeout(s)}})}}var S2=class extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}},k2=class{constructor(n){var t,e;this.shouldThrowOnError=!1,this.method=n.method,this.url=n.url,this.headers=new Headers(n.headers),this.schema=n.schema,this.body=n.body,this.shouldThrowOnError=(t=n.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=n.signal,this.isMaybeSingle=(e=n.isMaybeSingle)!==null&&e!==void 0?e:!1,n.fetch?this.fetch=n.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(n,t){return this.headers=new Headers(this.headers),this.headers.set(n,t),this}then(n,t){var e=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const i=this.fetch;let r=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{let a=null,o=null,l=null,c=s.status,h=s.statusText;if(s.ok){var p,g;if(e.method!=="HEAD"){var d;const _=await s.text();_===""||(e.headers.get("Accept")==="text/csv"||e.headers.get("Accept")&&(!((d=e.headers.get("Accept"))===null||d===void 0)&&d.includes("application/vnd.pgrst.plan+text"))?o=_:o=JSON.parse(_))}const y=(p=e.headers.get("Prefer"))===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),x=(g=s.headers.get("content-range"))===null||g===void 0?void 0:g.split("/");y&&x&&x.length>1&&(l=parseInt(x[1])),e.isMaybeSingle&&e.method==="GET"&&Array.isArray(o)&&(o.length>1?(a={code:"PGRST116",details:`Results contain ${o.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,l=null,c=406,h="Not Acceptable"):o.length===1?o=o[0]:o=null)}else{var v;const y=await s.text();try{a=JSON.parse(y),Array.isArray(a)&&s.status===404&&(o=[],a=null,c=200,h="OK")}catch{s.status===404&&y===""?(c=204,h="No Content"):a={message:y}}if(a&&e.isMaybeSingle&&(!(a==null||(v=a.details)===null||v===void 0)&&v.includes("0 rows"))&&(a=null,c=200,h="OK"),a&&e.shouldThrowOnError)throw new S2(a)}return{error:a,data:o,count:l,status:c,statusText:h}});return this.shouldThrowOnError||(r=r.catch(s=>{var a;let o="";const l=s==null?void 0:s.cause;if(l){var c,h,p,g;const v=(c=l==null?void 0:l.message)!==null&&c!==void 0?c:"",y=(h=l==null?void 0:l.code)!==null&&h!==void 0?h:"";o=`${(p=s==null?void 0:s.name)!==null&&p!==void 0?p:"FetchError"}: ${s==null?void 0:s.message}`,o+=`

Caused by: ${(g=l==null?void 0:l.name)!==null&&g!==void 0?g:"Error"}: ${v}`,y&&(o+=` (${y})`),l!=null&&l.stack&&(o+=`
${l.stack}`)}else{var d;o=(d=s==null?void 0:s.stack)!==null&&d!==void 0?d:""}return{error:{message:`${(a=s==null?void 0:s.name)!==null&&a!==void 0?a:"FetchError"}: ${s==null?void 0:s.message}`,details:o,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),r.then(n,t)}returns(){return this}overrideTypes(){return this}},A2=class extends k2{select(n){let t=!1;const e=(n??"*").split("").map(i=>/\s/.test(i)&&!t?"":(i==='"'&&(t=!t),i)).join("");return this.url.searchParams.set("select",e),this.headers.append("Prefer","return=representation"),this}order(n,{ascending:t=!0,nullsFirst:e,foreignTable:i,referencedTable:r=i}={}){const s=r?`${r}.order`:"order",a=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${a?`${a},`:""}${n}.${t?"asc":"desc"}${e===void 0?"":e?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:t,referencedTable:e=t}={}){const i=typeof e>"u"?"limit":`${e}.limit`;return this.url.searchParams.set(i,`${n}`),this}range(n,t,{foreignTable:e,referencedTable:i=e}={}){const r=typeof i>"u"?"offset":`${i}.offset`,s=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(r,`${n}`),this.url.searchParams.set(s,`${t-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:n=!1,verbose:t=!1,settings:e=!1,buffers:i=!1,wal:r=!1,format:s="text"}={}){var a;const o=[n?"analyze":null,t?"verbose":null,e?"settings":null,i?"buffers":null,r?"wal":null].filter(Boolean).join("|"),l=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${s}; for="${l}"; options=${o};`),s==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(n){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${n}`),this}};const cf=new RegExp("[,()]");var ba=class extends A2{eq(n,t){return this.url.searchParams.append(n,`eq.${t}`),this}neq(n,t){return this.url.searchParams.append(n,`neq.${t}`),this}gt(n,t){return this.url.searchParams.append(n,`gt.${t}`),this}gte(n,t){return this.url.searchParams.append(n,`gte.${t}`),this}lt(n,t){return this.url.searchParams.append(n,`lt.${t}`),this}lte(n,t){return this.url.searchParams.append(n,`lte.${t}`),this}like(n,t){return this.url.searchParams.append(n,`like.${t}`),this}likeAllOf(n,t){return this.url.searchParams.append(n,`like(all).{${t.join(",")}}`),this}likeAnyOf(n,t){return this.url.searchParams.append(n,`like(any).{${t.join(",")}}`),this}ilike(n,t){return this.url.searchParams.append(n,`ilike.${t}`),this}ilikeAllOf(n,t){return this.url.searchParams.append(n,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(n,t){return this.url.searchParams.append(n,`ilike(any).{${t.join(",")}}`),this}regexMatch(n,t){return this.url.searchParams.append(n,`match.${t}`),this}regexIMatch(n,t){return this.url.searchParams.append(n,`imatch.${t}`),this}is(n,t){return this.url.searchParams.append(n,`is.${t}`),this}isDistinct(n,t){return this.url.searchParams.append(n,`isdistinct.${t}`),this}in(n,t){const e=Array.from(new Set(t)).map(i=>typeof i=="string"&&cf.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(n,`in.(${e})`),this}notIn(n,t){const e=Array.from(new Set(t)).map(i=>typeof i=="string"&&cf.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(n,`not.in.(${e})`),this}contains(n,t){return typeof t=="string"?this.url.searchParams.append(n,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(n,`cs.{${t.join(",")}}`):this.url.searchParams.append(n,`cs.${JSON.stringify(t)}`),this}containedBy(n,t){return typeof t=="string"?this.url.searchParams.append(n,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(n,`cd.{${t.join(",")}}`):this.url.searchParams.append(n,`cd.${JSON.stringify(t)}`),this}rangeGt(n,t){return this.url.searchParams.append(n,`sr.${t}`),this}rangeGte(n,t){return this.url.searchParams.append(n,`nxl.${t}`),this}rangeLt(n,t){return this.url.searchParams.append(n,`sl.${t}`),this}rangeLte(n,t){return this.url.searchParams.append(n,`nxr.${t}`),this}rangeAdjacent(n,t){return this.url.searchParams.append(n,`adj.${t}`),this}overlaps(n,t){return typeof t=="string"?this.url.searchParams.append(n,`ov.${t}`):this.url.searchParams.append(n,`ov.{${t.join(",")}}`),this}textSearch(n,t,{config:e,type:i}={}){let r="";i==="plain"?r="pl":i==="phrase"?r="ph":i==="websearch"&&(r="w");const s=e===void 0?"":`(${e})`;return this.url.searchParams.append(n,`${r}fts${s}.${t}`),this}match(n){return Object.entries(n).forEach(([t,e])=>{this.url.searchParams.append(t,`eq.${e}`)}),this}not(n,t,e){return this.url.searchParams.append(n,`not.${t}.${e}`),this}or(n,{foreignTable:t,referencedTable:e=t}={}){const i=e?`${e}.or`:"or";return this.url.searchParams.append(i,`(${n})`),this}filter(n,t,e){return this.url.searchParams.append(n,`${t}.${e}`),this}},N2=class{constructor(n,{headers:t={},schema:e,fetch:i}){this.url=n,this.headers=new Headers(t),this.schema=e,this.fetch=i}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(n,t){const{head:e=!1,count:i}=t??{},r=e?"HEAD":"GET";let s=!1;const a=(n??"*").split("").map(c=>/\s/.test(c)&&!s?"":(c==='"'&&(s=!s),c)).join(""),{url:o,headers:l}=this.cloneRequestState();return o.searchParams.set("select",a),i&&l.append("Prefer",`count=${i}`),new ba({method:r,url:o,headers:l,schema:this.schema,fetch:this.fetch})}insert(n,{count:t,defaultToNull:e=!0}={}){var i;const r="POST",{url:s,headers:a}=this.cloneRequestState();if(t&&a.append("Prefer",`count=${t}`),e||a.append("Prefer","missing=default"),Array.isArray(n)){const o=n.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);s.searchParams.set("columns",l.join(","))}}return new ba({method:r,url:s,headers:a,schema:this.schema,body:n,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(n,{onConflict:t,ignoreDuplicates:e=!1,count:i,defaultToNull:r=!0}={}){var s;const a="POST",{url:o,headers:l}=this.cloneRequestState();if(l.append("Prefer",`resolution=${e?"ignore":"merge"}-duplicates`),t!==void 0&&o.searchParams.set("on_conflict",t),i&&l.append("Prefer",`count=${i}`),r||l.append("Prefer","missing=default"),Array.isArray(n)){const c=n.reduce((h,p)=>h.concat(Object.keys(p)),[]);if(c.length>0){const h=[...new Set(c)].map(p=>`"${p}"`);o.searchParams.set("columns",h.join(","))}}return new ba({method:a,url:o,headers:l,schema:this.schema,body:n,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}update(n,{count:t}={}){var e;const i="PATCH",{url:r,headers:s}=this.cloneRequestState();return t&&s.append("Prefer",`count=${t}`),new ba({method:i,url:r,headers:s,schema:this.schema,body:n,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}delete({count:n}={}){var t;const e="DELETE",{url:i,headers:r}=this.cloneRequestState();return n&&r.append("Prefer",`count=${n}`),new ba({method:e,url:i,headers:r,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},L2=class d0{constructor(t,{headers:e={},schema:i,fetch:r}={}){this.url=t,this.headers=new Headers(e),this.schemaName=i,this.fetch=r}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new N2(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new d0(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,e={},{head:i=!1,get:r=!1,count:s}={}){var a;let o;const l=new URL(`${this.url}/rpc/${t}`);let c;const h=d=>d!==null&&typeof d=="object"&&(!Array.isArray(d)||d.some(h)),p=i&&Object.values(e).some(h);p?(o="POST",c=e):i||r?(o=i?"HEAD":"GET",Object.entries(e).filter(([d,v])=>v!==void 0).map(([d,v])=>[d,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([d,v])=>{l.searchParams.append(d,v)})):(o="POST",c=e);const g=new Headers(this.headers);return p?g.set("Prefer",s?`count=${s},return=minimal`:"return=minimal"):s&&g.set("Prefer",`count=${s}`),new ba({method:o,url:l,headers:g,schema:this.schemaName,body:c,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};class P2{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const e=globalThis.process;if(e){const i=e.versions;if(i&&i.node){const r=i.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let e=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(e+=`

Suggested solution: ${t.workaround}`),new Error(e)}static createWebSocket(t,e){const i=this.getWebSocketConstructor();return new i(t,e)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const C2="2.93.3",E2=`realtime-js/${C2}`,O2="1.0.0",f0="2.0.0",hf=f0,xu=1e4,j2=1e3,T2=100;var ts;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(ts||(ts={}));var Ln;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Ln||(Ln={}));var zi;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(zi||(zi={}));var Su;(function(n){n.websocket="websocket"})(Su||(Su={}));var Rs;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Rs||(Rs={}));class R2{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,e){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return e(this._binaryEncodeUserBroadcastPush(t));let i=[t.join_ref,t.ref,t.topic,t.event,t.payload];return e(JSON.stringify(i))}_binaryEncodeUserBroadcastPush(t){var e;return this._isArrayBuffer((e=t.payload)===null||e===void 0?void 0:e.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var e,i;const r=(i=(e=t.payload)===null||e===void 0?void 0:e.payload)!==null&&i!==void 0?i:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,r)}_encodeJsonUserBroadcastPush(t){var e,i;const r=(i=(e=t.payload)===null||e===void 0?void 0:e.payload)!==null&&i!==void 0?i:{},a=new TextEncoder().encode(JSON.stringify(r)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,a)}_encodeUserBroadcastPush(t,e,i){var r,s;const a=t.topic,o=(r=t.ref)!==null&&r!==void 0?r:"",l=(s=t.join_ref)!==null&&s!==void 0?s:"",c=t.payload.event,h=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},p=Object.keys(h).length===0?"":JSON.stringify(h);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`ref length ${o.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`topic length ${a.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`userEvent length ${c.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`metadata length ${p.length} exceeds maximum of 255`);const g=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+o.length+a.length+c.length+p.length,d=new ArrayBuffer(this.HEADER_LENGTH+g);let v=new DataView(d),y=0;v.setUint8(y++,this.KINDS.userBroadcastPush),v.setUint8(y++,l.length),v.setUint8(y++,o.length),v.setUint8(y++,a.length),v.setUint8(y++,c.length),v.setUint8(y++,p.length),v.setUint8(y++,e),Array.from(l,_=>v.setUint8(y++,_.charCodeAt(0))),Array.from(o,_=>v.setUint8(y++,_.charCodeAt(0))),Array.from(a,_=>v.setUint8(y++,_.charCodeAt(0))),Array.from(c,_=>v.setUint8(y++,_.charCodeAt(0))),Array.from(p,_=>v.setUint8(y++,_.charCodeAt(0)));var x=new Uint8Array(d.byteLength+i.byteLength);return x.set(new Uint8Array(d),0),x.set(new Uint8Array(i),d.byteLength),x.buffer}decode(t,e){if(this._isArrayBuffer(t)){let i=this._binaryDecode(t);return e(i)}if(typeof t=="string"){const i=JSON.parse(t),[r,s,a,o,l]=i;return e({join_ref:r,ref:s,topic:a,event:o,payload:l})}return e({})}_binaryDecode(t){const e=new DataView(t),i=e.getUint8(0),r=new TextDecoder;switch(i){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,e,r)}}_decodeUserBroadcast(t,e,i){const r=e.getUint8(1),s=e.getUint8(2),a=e.getUint8(3),o=e.getUint8(4);let l=this.HEADER_LENGTH+4;const c=i.decode(t.slice(l,l+r));l=l+r;const h=i.decode(t.slice(l,l+s));l=l+s;const p=i.decode(t.slice(l,l+a));l=l+a;const g=t.slice(l,t.byteLength),d=o===this.JSON_ENCODING?JSON.parse(i.decode(g)):g,v={type:this.BROADCAST_EVENT,event:h,payload:d};return a>0&&(v.meta=JSON.parse(p)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:v}}_isArrayBuffer(t){var e;return t instanceof ArrayBuffer||((e=t==null?void 0:t.constructor)===null||e===void 0?void 0:e.name)==="ArrayBuffer"}_pick(t,e){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([i])=>e.includes(i)))}}class p0{constructor(t,e){this.callback=t,this.timerCalc=e,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=e}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ge;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Ge||(Ge={}));const uf=(n,t,e={})=>{var i;const r=(i=e.skipTypes)!==null&&i!==void 0?i:[];return t?Object.keys(t).reduce((s,a)=>(s[a]=I2(a,n,t,r),s),{}):{}},I2=(n,t,e,i)=>{const r=t.find(o=>o.name===n),s=r==null?void 0:r.type,a=e[n];return s&&!i.includes(s)?g0(s,a):ku(a)},g0=(n,t)=>{if(n.charAt(0)==="_"){const e=n.slice(1,n.length);return B2(t,e)}switch(n){case Ge.bool:return D2(t);case Ge.float4:case Ge.float8:case Ge.int2:case Ge.int4:case Ge.int8:case Ge.numeric:case Ge.oid:return M2(t);case Ge.json:case Ge.jsonb:return F2(t);case Ge.timestamp:return U2(t);case Ge.abstime:case Ge.date:case Ge.daterange:case Ge.int4range:case Ge.int8range:case Ge.money:case Ge.reltime:case Ge.text:case Ge.time:case Ge.timestamptz:case Ge.timetz:case Ge.tsrange:case Ge.tstzrange:return ku(t);default:return ku(t)}},ku=n=>n,D2=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},M2=n=>{if(typeof n=="string"){const t=parseFloat(n);if(!Number.isNaN(t))return t}return n},F2=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch{return n}return n},B2=(n,t)=>{if(typeof n!="string")return n;const e=n.length-1,i=n[e];if(n[0]==="{"&&i==="}"){let s;const a=n.slice(1,e);try{s=JSON.parse("["+a+"]")}catch{s=a?a.split(","):[]}return s.map(o=>g0(t,o))}return n},U2=n=>typeof n=="string"?n.replace(" ","T"):n,m0=n=>{const t=new URL(n);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Eh{constructor(t,e,i={},r=xu){this.channel=t,this.event=e,this.payload=i,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,e){var i;return this._hasReceived(t)&&e((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:t,callback:e}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,e){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:e})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:e}){this.recHooks.filter(i=>i.status===t).forEach(i=>i.callback(e))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var df;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(df||(df={}));class No{constructor(t,e){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(e==null?void 0:e.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},r=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=No.syncState(this.state,r,s,a),this.pendingDiffs.forEach(l=>{this.state=No.syncDiff(this.state,l,s,a)}),this.pendingDiffs=[],o()}),this.channel._on(i.diff,{},r=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=No.syncDiff(this.state,r,s,a),o())}),this.onJoin((r,s,a)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:s,newPresences:a})}),this.onLeave((r,s,a)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:s,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,e,i,r){const s=this.cloneDeep(t),a=this.transformState(e),o={},l={};return this.map(s,(c,h)=>{a[c]||(l[c]=h)}),this.map(a,(c,h)=>{const p=s[c];if(p){const g=h.map(x=>x.presence_ref),d=p.map(x=>x.presence_ref),v=h.filter(x=>d.indexOf(x.presence_ref)<0),y=p.filter(x=>g.indexOf(x.presence_ref)<0);v.length>0&&(o[c]=v),y.length>0&&(l[c]=y)}else o[c]=h}),this.syncDiff(s,{joins:o,leaves:l},i,r)}static syncDiff(t,e,i,r){const{joins:s,leaves:a}={joins:this.transformState(e.joins),leaves:this.transformState(e.leaves)};return i||(i=()=>{}),r||(r=()=>{}),this.map(s,(o,l)=>{var c;const h=(c=t[o])!==null&&c!==void 0?c:[];if(t[o]=this.cloneDeep(l),h.length>0){const p=t[o].map(d=>d.presence_ref),g=h.filter(d=>p.indexOf(d.presence_ref)<0);t[o].unshift(...g)}i(o,h,l)}),this.map(a,(o,l)=>{let c=t[o];if(!c)return;const h=l.map(p=>p.presence_ref);c=c.filter(p=>h.indexOf(p.presence_ref)<0),t[o]=c,r(o,c,l),c.length===0&&delete t[o]}),t}static map(t,e){return Object.getOwnPropertyNames(t).map(i=>e(i,t[i]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((e,i)=>{const r=t[i];return"metas"in r?e[i]=r.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):e[i]=r,e},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ff;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(ff||(ff={}));var Lo;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Lo||(Lo={}));var Cr;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Cr||(Cr={}));class xa{constructor(t,e={config:{}},i){var r,s;if(this.topic=t,this.params=e,this.socket=i,this.bindings={},this.state=Ln.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},e.config),this.timeout=this.socket.timeout,this.joinPush=new Eh(this,zi.join,this.params,this.timeout),this.rejoinTimer=new p0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ln.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ln.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Ln.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ln.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Ln.errored,this.rejoinTimer.scheduleTimeout())}),this._on(zi.reply,{},(a,o)=>{this._trigger(this._replyEventName(o),a)}),this.presence=new No(this),this.broadcastEndpointURL=m0(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(r=this.params.config)===null||r===void 0?void 0:r.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,e=this.timeout){var i,r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Ln.closed){const{config:{broadcast:a,presence:o,private:l}}=this.params,c=(r=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(d=>d.filter))!==null&&r!==void 0?r:[],h=!!this.bindings[Lo.PRESENCE]&&this.bindings[Lo.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,p={},g={broadcast:a,presence:Object.assign(Object.assign({},o),{enabled:h}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(d=>t==null?void 0:t(Cr.CHANNEL_ERROR,d)),this._onClose(()=>t==null?void 0:t(Cr.CLOSED)),this.updateJoinPayload(Object.assign({config:g},p)),this.joinedOnce=!0,this._rejoin(e),this.joinPush.receive("ok",async({postgres_changes:d})=>{var v;if(this.socket._isManualToken()||this.socket.setAuth(),d===void 0){t==null||t(Cr.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,x=(v=y==null?void 0:y.length)!==null&&v!==void 0?v:0,_=[];for(let E=0;E<x;E++){const O=y[E],{filter:{event:T,schema:V,table:Q,filter:J}}=O,$=d&&d[E];if($&&$.event===T&&xa.isFilterValueEqual($.schema,V)&&xa.isFilterValueEqual($.table,Q)&&xa.isFilterValueEqual($.filter,J))_.push(Object.assign(Object.assign({},O),{id:$.id}));else{this.unsubscribe(),this.state=Ln.errored,t==null||t(Cr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=_,t&&t(Cr.SUBSCRIBED);return}}).receive("error",d=>{this.state=Ln.errored,t==null||t(Cr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Cr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,e={}){return await this.send({type:"presence",event:"track",payload:t},e.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,e,i){return this.state===Ln.joined&&t===Lo.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,e,i)}async httpSend(t,e,i={}){var r;if(e==null)return Promise.reject("Payload is required for httpSend()");const s={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(s.Authorization=`Bearer ${this.socket.accessTokenValue}`);const a={method:"POST",headers:s,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:e,private:this.private}]})},o=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(r=i.timeout)!==null&&r!==void 0?r:this.timeout);if(o.status===202)return{success:!0};let l=o.statusText;try{const c=await o.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(t,e={}){var i,r;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:a}=t,o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(i=e.timeout)!==null&&i!==void 0?i:this.timeout);return await((r=c.body)===null||r===void 0?void 0:r.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,o,l;const c=this._push(t.type,t,e.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ln.leaving;const e=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(zi.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(r=>{i=new Eh(this,zi.leave,{},t),i.receive("ok",()=>{e(),r("ok")}).receive("timeout",()=>{e(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ln.closed,this.bindings={}}async _fetchWithTimeout(t,e,i){const r=new AbortController,s=setTimeout(()=>r.abort(),i),a=await this.socket.fetch(t,Object.assign(Object.assign({},e),{signal:r.signal}));return clearTimeout(s),a}_push(t,e,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new Eh(this,t,e,i);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>T2){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(t,e,i){return e}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,e,i){var r,s;const a=t.toLocaleLowerCase(),{close:o,error:l,leave:c,join:h}=zi;if(i&&[o,l,c,h].indexOf(a)>=0&&i!==this._joinRef())return;let g=this._onMessage(a,e,i);if(e&&!g)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(d=>{var v,y,x;return((v=d.filter)===null||v===void 0?void 0:v.event)==="*"||((x=(y=d.filter)===null||y===void 0?void 0:y.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===a}).map(d=>d.callback(g,i)):(s=this.bindings[a])===null||s===void 0||s.filter(d=>{var v,y,x,_,E,O;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in d){const T=d.id,V=(v=d.filter)===null||v===void 0?void 0:v.event;return T&&((y=e.ids)===null||y===void 0?void 0:y.includes(T))&&(V==="*"||(V==null?void 0:V.toLocaleLowerCase())===((x=e.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const T=(E=(_=d==null?void 0:d.filter)===null||_===void 0?void 0:_.event)===null||E===void 0?void 0:E.toLocaleLowerCase();return T==="*"||T===((O=e==null?void 0:e.event)===null||O===void 0?void 0:O.toLocaleLowerCase())}else return d.type.toLocaleLowerCase()===a}).map(d=>{if(typeof g=="object"&&"ids"in g){const v=g.data,{schema:y,table:x,commit_timestamp:_,type:E,errors:O}=v;g=Object.assign(Object.assign({},{schema:y,table:x,commit_timestamp:_,eventType:E,new:{},old:{},errors:O}),this._getPayloadRecords(v))}d.callback(g,i)})}_isClosed(){return this.state===Ln.closed}_isJoined(){return this.state===Ln.joined}_isJoining(){return this.state===Ln.joining}_isLeaving(){return this.state===Ln.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,e,i){const r=t.toLocaleLowerCase(),s={type:r,filter:e,callback:i};return this.bindings[r]?this.bindings[r].push(s):this.bindings[r]=[s],this}_off(t,e){const i=t.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(r=>{var s;return!(((s=r.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===i&&xa.isEqual(r.filter,e))})),this}static isEqual(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const i in t)if(t[i]!==e[i])return!1;return!0}static isFilterValueEqual(t,e){return(t??void 0)===(e??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(zi.close,{},t)}_onError(t){this._on(zi.error,{},e=>t(e))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ln.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const e={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(e.new=uf(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(e.old=uf(t.columns,t.old_record)),e}}const Oh=()=>{},Il={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},q2=[1e3,2e3,5e3,1e4],z2=1e4,$2=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class H2{constructor(t,e){var i;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=xu,this.transport=null,this.heartbeatIntervalMs=Il.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Oh,this.ref=0,this.reconnectTimer=null,this.vsn=hf,this.logger=Oh,this.conn=null,this.sendBuffer=[],this.serializer=new R2,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=r=>r?(...s)=>r(...s):(...s)=>fetch(...s),!(!((i=e==null?void 0:e.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=e.params.apikey,this.endPoint=`${t}/${Su.websocket}`,this.httpEndpoint=m0(t),this._initializeOptions(e),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(e==null?void 0:e.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=P2.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const e=t.message;throw e.includes("Node.js")?new Error(`${e}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${e}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,e){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,e??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const e=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),e}async removeAllChannels(){const t=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,e,i){this.logger(t,e,i)}connectionState(){switch(this.conn&&this.conn.readyState){case ts.connecting:return Rs.Connecting;case ts.open:return Rs.Open;case ts.closing:return Rs.Closing;default:return Rs.Closed}}isConnected(){return this.connectionState()===Rs.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,e={config:{}}){const i=`realtime:${t}`,r=this.getChannels().find(s=>s.topic===i);if(r)return r;{const s=new xa(`realtime:${t}`,e,this);return this.channels.push(s),s}}push(t){const{topic:e,event:i,payload:r,ref:s}=t,a=()=>{this.encode(t,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${e} ${i} (${s})`,r),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(e){this.log("error","error in heartbeat callback",e)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(e){this.log("error","error in heartbeat callback",e)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(j2,"heartbeat timeout"),setTimeout(()=>{var e;this.isConnected()||(e=this.reconnectTimer)===null||e===void 0||e.scheduleTimeout()},Il.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(e){this.log("error","error in heartbeat callback",e)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let e=this.channels.find(i=>i.topic===t&&(i._isJoined()||i._isJoining()));e&&(this.log("transport",`leaving duplicate topic "${t}"`),e.unsubscribe())}_remove(t){this.channels=this.channels.filter(e=>e.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,e=>{if(e.topic==="phoenix"&&e.event==="phx_reply"&&e.ref&&e.ref===this.pendingHeartbeatRef){const c=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(e.payload.status==="ok"?"ok":"error",c)}catch(h){this.log("error","error in heartbeat callback",h)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:i,event:r,payload:s,ref:a}=e,o=a?`(${a})`:"",l=s.status||"";this.log("receive",`${l} ${i} ${r} ${o}`.trim(),s),this.channels.filter(c=>c._isMember(i)).forEach(c=>c._trigger(r,s,a)),this._triggerStateCallbacks("message",e)})}_clearTimer(t){var e;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((e=this.reconnectTimer)===null||e===void 0||e.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===ts.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===ts.open||this.conn.readyState===ts.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(e=>{this.log("error","error waiting for auth on connect",e),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this._terminateWorker()},this.workerRef.onmessage=e=>{e.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var e;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(e=this.reconnectTimer)===null||e===void 0||e.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(e){this.log("error","error in heartbeat callback",e)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(zi.error))}_appendParams(t,e){if(Object.keys(e).length===0)return t;const i=t.match(/\?/)?"&":"?",r=new URLSearchParams(e);return`${t}${i}${r}`}_workerObjectUrl(t){let e;if(t)e=t;else{const i=new Blob([$2],{type:"application/javascript"});e=URL.createObjectURL(i)}return e}_setConnectionState(t,e=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=e)}async _performAuth(t=null){let e,i=!1;if(t)e=t,i=!0;else if(this.accessToken)try{e=await this.accessToken()}catch(r){this.log("error","Error fetching access token from callback",r),e=this.accessTokenValue}else e=this.accessTokenValue;i?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(r=>{const s={access_token:e,version:E2};e&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(zi.access_token,{access_token:e})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(e=>{this.log("error",`Error setting auth in ${t}`,e)})}_triggerStateCallbacks(t,e){try{this.stateChangeCallbacks[t].forEach(i=>{try{i(e)}catch(r){this.log("error",`error in ${t} callback`,r)}})}catch(i){this.log("error",`error triggering ${t} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new p0(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Il.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var e,i,r,s,a,o,l,c,h,p,g,d;switch(this.transport=(e=t==null?void 0:t.transport)!==null&&e!==void 0?e:null,this.timeout=(i=t==null?void 0:t.timeout)!==null&&i!==void 0?i:xu,this.heartbeatIntervalMs=(r=t==null?void 0:t.heartbeatIntervalMs)!==null&&r!==void 0?r:Il.HEARTBEAT_INTERVAL,this.worker=(s=t==null?void 0:t.worker)!==null&&s!==void 0?s:!1,this.accessToken=(a=t==null?void 0:t.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(o=t==null?void 0:t.heartbeatCallback)!==null&&o!==void 0?o:Oh,this.vsn=(l=t==null?void 0:t.vsn)!==null&&l!==void 0?l:hf,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:v=>q2[v-1]||z2,this.vsn){case O2:this.encode=(h=t==null?void 0:t.encode)!==null&&h!==void 0?h:(v,y)=>y(JSON.stringify(v)),this.decode=(p=t==null?void 0:t.decode)!==null&&p!==void 0?p:(v,y)=>y(JSON.parse(v));break;case f0:this.encode=(g=t==null?void 0:t.encode)!==null&&g!==void 0?g:this.serializer.encode.bind(this.serializer),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var Do=class extends Error{constructor(n,t){var e;super(n),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((e=t.icebergType)==null?void 0:e.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function W2(n,t,e){const i=new URL(t,n);if(e)for(const[r,s]of Object.entries(e))s!==void 0&&i.searchParams.set(r,s);return i.toString()}async function V2(n){return!n||n.type==="none"?{}:n.type==="bearer"?{Authorization:`Bearer ${n.token}`}:n.type==="header"?{[n.name]:n.value}:n.type==="custom"?await n.getHeaders():{}}function G2(n){const t=n.fetchImpl??globalThis.fetch;return{async request({method:e,path:i,query:r,body:s,headers:a}){const o=W2(n.baseUrl,i,r),l=await V2(n.auth),c=await t(o,{method:e,headers:{...s?{"Content-Type":"application/json"}:{},...l,...a},body:s?JSON.stringify(s):void 0}),h=await c.text(),p=(c.headers.get("content-type")||"").includes("application/json"),g=p&&h?JSON.parse(h):h;if(!c.ok){const d=p?g:void 0,v=d==null?void 0:d.error;throw new Do((v==null?void 0:v.message)??`Request failed with status ${c.status}`,{status:c.status,icebergType:v==null?void 0:v.type,icebergCode:v==null?void 0:v.code,details:d})}return{status:c.status,headers:c.headers,data:g}}}}function Dl(n){return n.join("")}var K2=class{constructor(n,t=""){this.client=n,this.prefix=t}async listNamespaces(n){const t=n?{parent:Dl(n.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(i=>({namespace:i}))}async createNamespace(n,t){const e={namespace:n.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:e})).data}async dropNamespace(n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Dl(n.namespace)}`})}async loadNamespaceMetadata(n){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Dl(n.namespace)}`})).data.properties}}async namespaceExists(n){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Dl(n.namespace)}`}),!0}catch(t){if(t instanceof Do&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(n,t){try{return await this.createNamespace(n,t)}catch(e){if(e instanceof Do&&e.status===409)return;throw e}}};function aa(n){return n.join("")}var Y2=class{constructor(n,t="",e){this.client=n,this.prefix=t,this.accessDelegation=e}async listTables(n){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${aa(n.namespace)}/tables`})).data.identifiers}async createTable(n,t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${aa(n.namespace)}/tables`,body:t,headers:e})).data.metadata}async updateTable(n,t){const e=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${aa(n.namespace)}/tables/${n.name}`,body:t});return{"metadata-location":e.data["metadata-location"],metadata:e.data.metadata}}async dropTable(n,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${aa(n.namespace)}/tables/${n.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(n){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${aa(n.namespace)}/tables/${n.name}`,headers:t})).data.metadata}async tableExists(n){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${aa(n.namespace)}/tables/${n.name}`,headers:t}),!0}catch(e){if(e instanceof Do&&e.status===404)return!1;throw e}}async createTableIfNotExists(n,t){try{return await this.createTable(n,t)}catch(e){if(e instanceof Do&&e.status===409)return await this.loadTable({namespace:n.namespace,name:t.name});throw e}}},J2=class{constructor(n){var i;let t="v1";n.catalogName&&(t+=`/${n.catalogName}`);const e=n.baseUrl.endsWith("/")?n.baseUrl:`${n.baseUrl}/`;this.client=G2({baseUrl:e,auth:n.auth,fetchImpl:n.fetch}),this.accessDelegation=(i=n.accessDelegation)==null?void 0:i.join(","),this.namespaceOps=new K2(this.client,t),this.tableOps=new Y2(this.client,t,this.accessDelegation)}async listNamespaces(n){return this.namespaceOps.listNamespaces(n)}async createNamespace(n,t){return this.namespaceOps.createNamespace(n,t)}async dropNamespace(n){await this.namespaceOps.dropNamespace(n)}async loadNamespaceMetadata(n){return this.namespaceOps.loadNamespaceMetadata(n)}async listTables(n){return this.tableOps.listTables(n)}async createTable(n,t){return this.tableOps.createTable(n,t)}async updateTable(n,t){return this.tableOps.updateTable(n,t)}async dropTable(n,t){await this.tableOps.dropTable(n,t)}async loadTable(n){return this.tableOps.loadTable(n)}async namespaceExists(n){return this.namespaceOps.namespaceExists(n)}async tableExists(n){return this.tableOps.tableExists(n)}async createNamespaceIfNotExists(n,t){return this.namespaceOps.createNamespaceIfNotExists(n,t)}async createTableIfNotExists(n,t){return this.tableOps.createTableIfNotExists(n,t)}},Bc=class extends Error{constructor(n,t="storage",e,i){super(n),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=e,this.statusCode=i}};function Uc(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var Ml=class extends Bc{constructor(n,t,e,i="storage"){super(n,i,t,e),this.name=i==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=e}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},b0=class extends Bc{constructor(n,t,e="storage"){super(n,e),this.name=e==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};const X2=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),Z2=n=>{if(typeof n!="object"||n===null)return!1;const t=Object.getPrototypeOf(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},Au=n=>{if(Array.isArray(n))return n.map(e=>Au(e));if(typeof n=="function"||n!==Object(n))return n;const t={};return Object.entries(n).forEach(([e,i])=>{const r=e.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));t[r]=Au(i)}),t},Q2=n=>!n||typeof n!="string"||n.length===0||n.length>100||n.trim()!==n||n.includes("/")||n.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(n);function Mo(n){"@babel/helpers - typeof";return Mo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mo(n)}function t5(n,t){if(Mo(n)!="object"||!n)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var i=e.call(n,t);if(Mo(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function e5(n){var t=t5(n,"string");return Mo(t)=="symbol"?t:t+""}function n5(n,t,e){return(t=e5(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function pf(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function ae(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?pf(Object(e),!0).forEach(function(i){n5(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):pf(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}const gf=n=>{var t;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(t=n.error)===null||t===void 0?void 0:t.message)||JSON.stringify(n)},i5=async(n,t,e,i)=>{if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!(e!=null&&e.noResolveJson)){const r=n,s=r.status||500;if(typeof r.json=="function")r.json().then(a=>{const o=(a==null?void 0:a.statusCode)||(a==null?void 0:a.code)||s+"";t(new Ml(gf(a),s,o,i))}).catch(()=>{if(i==="vectors"){const a=s+"";t(new Ml(r.statusText||`HTTP ${s} error`,s,a,i))}else{const a=s+"";t(new Ml(r.statusText||`HTTP ${s} error`,s,a,i))}});else{const a=s+"";t(new Ml(r.statusText||`HTTP ${s} error`,s,a,i))}}else t(new b0(gf(n),n,i))},r5=(n,t,e,i)=>{const r={method:n,headers:(t==null?void 0:t.headers)||{}};return n==="GET"||n==="HEAD"||!i?ae(ae({},r),e):(Z2(i)?(r.headers=ae({"Content-Type":"application/json"},t==null?void 0:t.headers),r.body=JSON.stringify(i)):r.body=i,t!=null&&t.duplex&&(r.duplex=t.duplex),ae(ae({},r),e))};async function fo(n,t,e,i,r,s,a){return new Promise((o,l)=>{n(e,r5(t,i,r,s)).then(c=>{if(!c.ok)throw c;if(i!=null&&i.noResolveJson)return c;if(a==="vectors"){const h=c.headers.get("content-type");if(c.headers.get("content-length")==="0"||c.status===204)return{};if(!h||!h.includes("application/json"))return{}}return c.json()}).then(c=>o(c)).catch(c=>i5(c,l,i,a))})}function v0(n="storage"){return{get:async(t,e,i,r)=>fo(t,"GET",e,i,r,void 0,n),post:async(t,e,i,r,s)=>fo(t,"POST",e,r,s,i,n),put:async(t,e,i,r,s)=>fo(t,"PUT",e,r,s,i,n),head:async(t,e,i,r)=>fo(t,"HEAD",e,ae(ae({},i),{},{noResolveJson:!0}),r,void 0,n),remove:async(t,e,i,r,s)=>fo(t,"DELETE",e,r,s,i,n)}}const s5=v0("storage"),{get:Fo,post:qi,put:Nu,head:a5,remove:td}=s5,pi=v0("vectors");var Ra=class{constructor(n,t={},e,i="storage"){this.shouldThrowOnError=!1,this.url=n,this.headers=t,this.fetch=X2(e),this.namespace=i}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(n){var t=this;try{return{data:await n(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Uc(e))return{data:null,error:e};throw e}}},o5=class{constructor(n,t){this.downloadFn=n,this.shouldThrowOnError=t}then(n,t){return this.execute().then(n,t)}async execute(){var n=this;try{return{data:(await n.downloadFn()).body,error:null}}catch(t){if(n.shouldThrowOnError)throw t;if(Uc(t))return{data:null,error:t};throw t}}};let y0;y0=Symbol.toStringTag;var l5=class{constructor(n,t){this.downloadFn=n,this.shouldThrowOnError=t,this[y0]="BlobDownloadBuilder",this.promise=null}asStream(){return new o5(this.downloadFn,this.shouldThrowOnError)}then(n,t){return this.getPromise().then(n,t)}catch(n){return this.getPromise().catch(n)}finally(n){return this.getPromise().finally(n)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var n=this;try{return{data:await(await n.downloadFn()).blob(),error:null}}catch(t){if(n.shouldThrowOnError)throw t;if(Uc(t))return{data:null,error:t};throw t}}};const c5={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},mf={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var h5=class extends Ra{constructor(n,t={},e,i){super(n,t,i,"storage"),this.bucketId=e}async uploadOrUpdate(n,t,e,i){var r=this;return r.handleOperation(async()=>{let s;const a=ae(ae({},mf),i);let o=ae(ae({},r.headers),n==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&e instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),l&&s.append("metadata",r.encodeMetadata(l)),s.append("",e)):typeof FormData<"u"&&e instanceof FormData?(s=e,s.has("cacheControl")||s.append("cacheControl",a.cacheControl),l&&!s.has("metadata")&&s.append("metadata",r.encodeMetadata(l))):(s=e,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,l&&(o["x-metadata"]=r.toBase64(r.encodeMetadata(l))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!a.duplex&&(a.duplex="half")),i!=null&&i.headers&&(o=ae(ae({},o),i.headers));const c=r._removeEmptyFolders(t),h=r._getFinalPath(c),p=await(n=="PUT"?Nu:qi)(r.fetch,`${r.url}/object/${h}`,s,ae({headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{path:c,id:p.Id,fullPath:p.Key}})}async upload(n,t,e){return this.uploadOrUpdate("POST",n,t,e)}async uploadToSignedUrl(n,t,e,i){var r=this;const s=r._removeEmptyFolders(n),a=r._getFinalPath(s),o=new URL(r.url+`/object/upload/sign/${a}`);return o.searchParams.set("token",t),r.handleOperation(async()=>{let l;const c=ae({upsert:mf.upsert},i),h=ae(ae({},r.headers),{"x-upsert":String(c.upsert)});return typeof Blob<"u"&&e instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",e)):typeof FormData<"u"&&e instanceof FormData?(l=e,l.append("cacheControl",c.cacheControl)):(l=e,h["cache-control"]=`max-age=${c.cacheControl}`,h["content-type"]=c.contentType),{path:s,fullPath:(await Nu(r.fetch,o.toString(),l,{headers:h})).Key}})}async createSignedUploadUrl(n,t){var e=this;return e.handleOperation(async()=>{let i=e._getFinalPath(n);const r=ae({},e.headers);t!=null&&t.upsert&&(r["x-upsert"]="true");const s=await qi(e.fetch,`${e.url}/object/upload/sign/${i}`,{},{headers:r}),a=new URL(e.url+s.url),o=a.searchParams.get("token");if(!o)throw new Bc("No token returned by API");return{signedUrl:a.toString(),path:n,token:o}})}async update(n,t,e){return this.uploadOrUpdate("PUT",n,t,e)}async move(n,t,e){var i=this;return i.handleOperation(async()=>await qi(i.fetch,`${i.url}/object/move`,{bucketId:i.bucketId,sourceKey:n,destinationKey:t,destinationBucket:e==null?void 0:e.destinationBucket},{headers:i.headers}))}async copy(n,t,e){var i=this;return i.handleOperation(async()=>({path:(await qi(i.fetch,`${i.url}/object/copy`,{bucketId:i.bucketId,sourceKey:n,destinationKey:t,destinationBucket:e==null?void 0:e.destinationBucket},{headers:i.headers})).Key}))}async createSignedUrl(n,t,e){var i=this;return i.handleOperation(async()=>{let r=i._getFinalPath(n),s=await qi(i.fetch,`${i.url}/object/sign/${r}`,ae({expiresIn:t},e!=null&&e.transform?{transform:e.transform}:{}),{headers:i.headers});const a=e!=null&&e.download?`&download=${e.download===!0?"":e.download}`:"";return{signedUrl:encodeURI(`${i.url}${s.signedURL}${a}`)}})}async createSignedUrls(n,t,e){var i=this;return i.handleOperation(async()=>{const r=await qi(i.fetch,`${i.url}/object/sign/${i.bucketId}`,{expiresIn:t,paths:n},{headers:i.headers}),s=e!=null&&e.download?`&download=${e.download===!0?"":e.download}`:"";return r.map(a=>ae(ae({},a),{},{signedUrl:a.signedURL?encodeURI(`${i.url}${a.signedURL}${s}`):null}))})}download(n,t){const e=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),r=i?`?${i}`:"",s=this._getFinalPath(n),a=()=>Fo(this.fetch,`${this.url}/${e}/${s}${r}`,{headers:this.headers,noResolveJson:!0});return new l5(a,this.shouldThrowOnError)}async info(n){var t=this;const e=t._getFinalPath(n);return t.handleOperation(async()=>Au(await Fo(t.fetch,`${t.url}/object/info/${e}`,{headers:t.headers})))}async exists(n){var t=this;const e=t._getFinalPath(n);try{return await a5(t.fetch,`${t.url}/object/${e}`,{headers:t.headers}),{data:!0,error:null}}catch(i){if(t.shouldThrowOnError)throw i;if(Uc(i)&&i instanceof b0){const r=i.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:i}}throw i}}getPublicUrl(n,t){const e=this._getFinalPath(n),i=[],r=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";r!==""&&i.push(r);const s=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});a!==""&&i.push(a);let o=i.join("&");return o!==""&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${e}${o}`)}}}async remove(n){var t=this;return t.handleOperation(async()=>await td(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:n},{headers:t.headers}))}async list(n,t,e){var i=this;return i.handleOperation(async()=>{const r=ae(ae(ae({},c5),t),{},{prefix:n||""});return await qi(i.fetch,`${i.url}/object/list/${i.bucketId}`,r,{headers:i.headers},e)})}async listV2(n,t){var e=this;return e.handleOperation(async()=>{const i=ae({},n);return await qi(e.fetch,`${e.url}/object/list-v2/${e.bucketId}`,i,{headers:e.headers},t)})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const t=[];return n.width&&t.push(`width=${n.width}`),n.height&&t.push(`height=${n.height}`),n.resize&&t.push(`resize=${n.resize}`),n.format&&t.push(`format=${n.format}`),n.quality&&t.push(`quality=${n.quality}`),t.join("&")}};const u5="2.93.3",Yo={"X-Client-Info":`storage-js/${u5}`};var d5=class extends Ra{constructor(n,t={},e,i){const r=new URL(n);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(r.hostname)&&!r.hostname.includes("storage.supabase.")&&(r.hostname=r.hostname.replace("supabase.","storage.supabase."));const s=r.href.replace(/\/$/,""),a=ae(ae({},Yo),t);super(s,a,e,"storage")}async listBuckets(n){var t=this;return t.handleOperation(async()=>{const e=t.listBucketOptionsToQueryString(n);return await Fo(t.fetch,`${t.url}/bucket${e}`,{headers:t.headers})})}async getBucket(n){var t=this;return t.handleOperation(async()=>await Fo(t.fetch,`${t.url}/bucket/${n}`,{headers:t.headers}))}async createBucket(n,t={public:!1}){var e=this;return e.handleOperation(async()=>await qi(e.fetch,`${e.url}/bucket`,{id:n,name:n,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:e.headers}))}async updateBucket(n,t){var e=this;return e.handleOperation(async()=>await Nu(e.fetch,`${e.url}/bucket/${n}`,{id:n,name:n,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:e.headers}))}async emptyBucket(n){var t=this;return t.handleOperation(async()=>await qi(t.fetch,`${t.url}/bucket/${n}/empty`,{},{headers:t.headers}))}async deleteBucket(n){var t=this;return t.handleOperation(async()=>await td(t.fetch,`${t.url}/bucket/${n}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(n){const t={};return n&&("limit"in n&&(t.limit=String(n.limit)),"offset"in n&&(t.offset=String(n.offset)),n.search&&(t.search=n.search),n.sortColumn&&(t.sortColumn=n.sortColumn),n.sortOrder&&(t.sortOrder=n.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},f5=class extends Ra{constructor(n,t={},e){const i=n.replace(/\/$/,""),r=ae(ae({},Yo),t);super(i,r,e,"storage")}async createBucket(n){var t=this;return t.handleOperation(async()=>await qi(t.fetch,`${t.url}/bucket`,{name:n},{headers:t.headers}))}async listBuckets(n){var t=this;return t.handleOperation(async()=>{const e=new URLSearchParams;(n==null?void 0:n.limit)!==void 0&&e.set("limit",n.limit.toString()),(n==null?void 0:n.offset)!==void 0&&e.set("offset",n.offset.toString()),n!=null&&n.sortColumn&&e.set("sortColumn",n.sortColumn),n!=null&&n.sortOrder&&e.set("sortOrder",n.sortOrder),n!=null&&n.search&&e.set("search",n.search);const i=e.toString(),r=i?`${t.url}/bucket?${i}`:`${t.url}/bucket`;return await Fo(t.fetch,r,{headers:t.headers})})}async deleteBucket(n){var t=this;return t.handleOperation(async()=>await td(t.fetch,`${t.url}/bucket/${n}`,{},{headers:t.headers}))}from(n){var t=this;if(!Q2(n))throw new Bc("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const e=new J2({baseUrl:this.url,catalogName:n,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),i=this.shouldThrowOnError;return new Proxy(e,{get(r,s){const a=r[s];return typeof a!="function"?a:async(...o)=>{try{return{data:await a.apply(r,o),error:null}}catch(l){if(i)throw l;return{data:null,error:l}}}}})}},p5=class extends Ra{constructor(n,t={},e){const i=n.replace(/\/$/,""),r=ae(ae({},Yo),{},{"Content-Type":"application/json"},t);super(i,r,e,"vectors")}async createIndex(n){var t=this;return t.handleOperation(async()=>await pi.post(t.fetch,`${t.url}/CreateIndex`,n,{headers:t.headers})||{})}async getIndex(n,t){var e=this;return e.handleOperation(async()=>await pi.post(e.fetch,`${e.url}/GetIndex`,{vectorBucketName:n,indexName:t},{headers:e.headers}))}async listIndexes(n){var t=this;return t.handleOperation(async()=>await pi.post(t.fetch,`${t.url}/ListIndexes`,n,{headers:t.headers}))}async deleteIndex(n,t){var e=this;return e.handleOperation(async()=>await pi.post(e.fetch,`${e.url}/DeleteIndex`,{vectorBucketName:n,indexName:t},{headers:e.headers})||{})}},g5=class extends Ra{constructor(n,t={},e){const i=n.replace(/\/$/,""),r=ae(ae({},Yo),{},{"Content-Type":"application/json"},t);super(i,r,e,"vectors")}async putVectors(n){var t=this;if(n.vectors.length<1||n.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await pi.post(t.fetch,`${t.url}/PutVectors`,n,{headers:t.headers})||{})}async getVectors(n){var t=this;return t.handleOperation(async()=>await pi.post(t.fetch,`${t.url}/GetVectors`,n,{headers:t.headers}))}async listVectors(n){var t=this;if(n.segmentCount!==void 0){if(n.segmentCount<1||n.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(n.segmentIndex!==void 0&&(n.segmentIndex<0||n.segmentIndex>=n.segmentCount))throw new Error(`segmentIndex must be between 0 and ${n.segmentCount-1}`)}return t.handleOperation(async()=>await pi.post(t.fetch,`${t.url}/ListVectors`,n,{headers:t.headers}))}async queryVectors(n){var t=this;return t.handleOperation(async()=>await pi.post(t.fetch,`${t.url}/QueryVectors`,n,{headers:t.headers}))}async deleteVectors(n){var t=this;if(n.keys.length<1||n.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await pi.post(t.fetch,`${t.url}/DeleteVectors`,n,{headers:t.headers})||{})}},m5=class extends Ra{constructor(n,t={},e){const i=n.replace(/\/$/,""),r=ae(ae({},Yo),{},{"Content-Type":"application/json"},t);super(i,r,e,"vectors")}async createBucket(n){var t=this;return t.handleOperation(async()=>await pi.post(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:n},{headers:t.headers})||{})}async getBucket(n){var t=this;return t.handleOperation(async()=>await pi.post(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:n},{headers:t.headers}))}async listBuckets(n={}){var t=this;return t.handleOperation(async()=>await pi.post(t.fetch,`${t.url}/ListVectorBuckets`,n,{headers:t.headers}))}async deleteBucket(n){var t=this;return t.handleOperation(async()=>await pi.post(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:n},{headers:t.headers})||{})}},b5=class extends m5{constructor(n,t={}){super(n,t.headers||{},t.fetch)}from(n){return new v5(this.url,this.headers,n,this.fetch)}async createBucket(n){var t=()=>super.createBucket,e=this;return t().call(e,n)}async getBucket(n){var t=()=>super.getBucket,e=this;return t().call(e,n)}async listBuckets(n={}){var t=()=>super.listBuckets,e=this;return t().call(e,n)}async deleteBucket(n){var t=()=>super.deleteBucket,e=this;return t().call(e,n)}},v5=class extends p5{constructor(n,t,e,i){super(n,t,i),this.vectorBucketName=e}async createIndex(n){var t=()=>super.createIndex,e=this;return t().call(e,ae(ae({},n),{},{vectorBucketName:e.vectorBucketName}))}async listIndexes(n={}){var t=()=>super.listIndexes,e=this;return t().call(e,ae(ae({},n),{},{vectorBucketName:e.vectorBucketName}))}async getIndex(n){var t=()=>super.getIndex,e=this;return t().call(e,e.vectorBucketName,n)}async deleteIndex(n){var t=()=>super.deleteIndex,e=this;return t().call(e,e.vectorBucketName,n)}index(n){return new y5(this.url,this.headers,this.vectorBucketName,n,this.fetch)}},y5=class extends g5{constructor(n,t,e,i,r){super(n,t,r),this.vectorBucketName=e,this.indexName=i}async putVectors(n){var t=()=>super.putVectors,e=this;return t().call(e,ae(ae({},n),{},{vectorBucketName:e.vectorBucketName,indexName:e.indexName}))}async getVectors(n){var t=()=>super.getVectors,e=this;return t().call(e,ae(ae({},n),{},{vectorBucketName:e.vectorBucketName,indexName:e.indexName}))}async listVectors(n={}){var t=()=>super.listVectors,e=this;return t().call(e,ae(ae({},n),{},{vectorBucketName:e.vectorBucketName,indexName:e.indexName}))}async queryVectors(n){var t=()=>super.queryVectors,e=this;return t().call(e,ae(ae({},n),{},{vectorBucketName:e.vectorBucketName,indexName:e.indexName}))}async deleteVectors(n){var t=()=>super.deleteVectors,e=this;return t().call(e,ae(ae({},n),{},{vectorBucketName:e.vectorBucketName,indexName:e.indexName}))}},w5=class extends d5{constructor(n,t={},e,i){super(n,t,e,i)}from(n){return new h5(this.url,this.headers,n,this.fetch)}get vectors(){return new b5(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new f5(this.url+"/iceberg",this.headers,this.fetch)}};const w0="2.93.3",va=30*1e3,Lu=3,jh=Lu*va,_5="http://localhost:9999",x5="supabase.auth.token",S5={"X-Client-Info":`gotrue-js/${w0}`},Pu="X-Supabase-Api-Version",_0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},k5=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,A5=10*60*1e3;class Bo extends Error{constructor(t,e,i){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=e,this.code=i}}function Vt(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class N5 extends Bo{constructor(t,e,i){super(t,e,i),this.name="AuthApiError",this.status=e,this.code=i}}function L5(n){return Vt(n)&&n.name==="AuthApiError"}class Is extends Bo{constructor(t,e){super(t),this.name="AuthUnknownError",this.originalError=e}}class Ir extends Bo{constructor(t,e,i,r){super(t,i,r),this.name=e,this.status=i}}class fi extends Ir{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Th(n){return Vt(n)&&n.name==="AuthSessionMissingError"}class oa extends Ir{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Fl extends Ir{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Bl extends Ir{constructor(t,e=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function P5(n){return Vt(n)&&n.name==="AuthImplicitGrantRedirectError"}class bf extends Ir{constructor(t,e=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class C5 extends Ir{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Cu extends Ir{constructor(t,e){super(t,"AuthRetryableFetchError",e,void 0)}}function Rh(n){return Vt(n)&&n.name==="AuthRetryableFetchError"}class vf extends Ir{constructor(t,e,i){super(t,"AuthWeakPasswordError",e,"weak_password"),this.reasons=i}}class Eu extends Ir{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const yc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),yf=` 	
\r=`.split(""),E5=(()=>{const n=new Array(128);for(let t=0;t<n.length;t+=1)n[t]=-1;for(let t=0;t<yf.length;t+=1)n[yf[t].charCodeAt(0)]=-2;for(let t=0;t<yc.length;t+=1)n[yc[t].charCodeAt(0)]=t;return n})();function wf(n,t,e){if(n!==null)for(t.queue=t.queue<<8|n,t.queuedBits+=8;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;e(yc[i]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;e(yc[i]),t.queuedBits-=6}}function x0(n,t,e){const i=E5[n];if(i>-1)for(t.queue=t.queue<<6|i,t.queuedBits+=6;t.queuedBits>=8;)e(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function _f(n){const t=[],e=a=>{t.push(String.fromCodePoint(a))},i={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},s=a=>{T5(a,i,e)};for(let a=0;a<n.length;a+=1)x0(n.charCodeAt(a),r,s);return t.join("")}function O5(n,t){if(n<=127){t(n);return}else if(n<=2047){t(192|n>>6),t(128|n&63);return}else if(n<=65535){t(224|n>>12),t(128|n>>6&63),t(128|n&63);return}else if(n<=1114111){t(240|n>>18),t(128|n>>12&63),t(128|n>>6&63),t(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function j5(n,t){for(let e=0;e<n.length;e+=1){let i=n.charCodeAt(e);if(i>55295&&i<=56319){const r=(i-55296)*1024&65535;i=(n.charCodeAt(e+1)-56320&65535|r)+65536,e+=1}O5(i,t)}}function T5(n,t,e){if(t.utf8seq===0){if(n<=127){e(n);return}for(let i=1;i<6;i+=1)if(!(n>>7-i&1)){t.utf8seq=i;break}if(t.utf8seq===2)t.codepoint=n&31;else if(t.utf8seq===3)t.codepoint=n&15;else if(t.utf8seq===4)t.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|n&63,t.utf8seq-=1,t.utf8seq===0&&e(t.codepoint)}}function ka(n){const t=[],e={queue:0,queuedBits:0},i=r=>{t.push(r)};for(let r=0;r<n.length;r+=1)x0(n.charCodeAt(r),e,i);return new Uint8Array(t)}function R5(n){const t=[];return j5(n,e=>t.push(e)),new Uint8Array(t)}function Ms(n){const t=[],e={queue:0,queuedBits:0},i=r=>{t.push(r)};return n.forEach(r=>wf(r,e,i)),wf(null,e,i),t.join("")}function I5(n){return Math.round(Date.now()/1e3)+n}function D5(){return Symbol("auth-callback")}const Dn=()=>typeof window<"u"&&typeof document<"u",Ns={tested:!1,writable:!1},S0=()=>{if(!Dn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ns.tested)return Ns.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Ns.tested=!0,Ns.writable=!0}catch{Ns.tested=!0,Ns.writable=!1}return Ns.writable};function M5(n){const t={},e=new URL(n);if(e.hash&&e.hash[0]==="#")try{new URLSearchParams(e.hash.substring(1)).forEach((r,s)=>{t[s]=r})}catch{}return e.searchParams.forEach((i,r)=>{t[r]=i}),t}const k0=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),F5=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",ya=async(n,t,e)=>{await n.setItem(t,JSON.stringify(e))},Ls=async(n,t)=>{const e=await n.getItem(t);if(!e)return null;try{return JSON.parse(e)}catch{return e}},In=async(n,t)=>{await n.removeItem(t)};class qc{constructor(){this.promise=new qc.promiseConstructor((t,e)=>{this.resolve=t,this.reject=e})}}qc.promiseConstructor=Promise;function Ul(n){const t=n.split(".");if(t.length!==3)throw new Eu("Invalid JWT structure");for(let i=0;i<t.length;i++)if(!k5.test(t[i]))throw new Eu("JWT not in base64url format");return{header:JSON.parse(_f(t[0])),payload:JSON.parse(_f(t[1])),signature:ka(t[2]),raw:{header:t[0],payload:t[1]}}}async function B5(n){return await new Promise(t=>{setTimeout(()=>t(null),n)})}function U5(n,t){return new Promise((i,r)=>{(async()=>{for(let s=0;s<1/0;s++)try{const a=await n(s);if(!t(s,null,a)){i(a);return}}catch(a){if(!t(s,a)){r(a);return}}})()})}function q5(n){return("0"+n.toString(16)).substr(-2)}function z5(){const t=new Uint32Array(56);if(typeof crypto>"u"){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=e.length;let r="";for(let s=0;s<56;s++)r+=e.charAt(Math.floor(Math.random()*i));return r}return crypto.getRandomValues(t),Array.from(t,q5).join("")}async function $5(n){const e=new TextEncoder().encode(n),i=await crypto.subtle.digest("SHA-256",e),r=new Uint8Array(i);return Array.from(r).map(s=>String.fromCharCode(s)).join("")}async function H5(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const e=await $5(n);return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function la(n,t,e=!1){const i=z5();let r=i;e&&(r+="/PASSWORD_RECOVERY"),await ya(n,`${t}-code-verifier`,r);const s=await H5(i);return[s,i===s?"plain":"s256"]}const W5=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function V5(n){const t=n.headers.get(Pu);if(!t||!t.match(W5))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function G5(n){if(!n)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(n<=t)throw new Error("JWT has expired")}function K5(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Y5=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ca(n){if(!Y5.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ih(){const n={};return new Proxy(n,{get:(t,e)=>{if(e==="__isUserNotAvailableProxy")return!0;if(typeof e=="symbol"){const i=e.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${e}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,e)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${e}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,e)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${e}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function J5(n,t){return new Proxy(n,{get:(e,i,r)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const s=i.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(e,i,r)}return!t.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(e,i,r)}})}function xf(n){return JSON.parse(JSON.stringify(n))}const Os=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),X5=[502,503,504];async function Sf(n){var t;if(!F5(n))throw new Cu(Os(n),0);if(X5.includes(n.status))throw new Cu(Os(n),n.status);let e;try{e=await n.json()}catch(s){throw new Is(Os(s),s)}let i;const r=V5(n);if(r&&r.getTime()>=_0["2024-01-01"].timestamp&&typeof e=="object"&&e&&typeof e.code=="string"?i=e.code:typeof e=="object"&&e&&typeof e.error_code=="string"&&(i=e.error_code),i){if(i==="weak_password")throw new vf(Os(e),n.status,((t=e.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(i==="session_not_found")throw new fi}else if(typeof e=="object"&&e&&typeof e.weak_password=="object"&&e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0))throw new vf(Os(e),n.status,e.weak_password.reasons);throw new N5(Os(e),n.status||500,i)}const Z5=(n,t,e,i)=>{const r={method:n,headers:(t==null?void 0:t.headers)||{}};return n==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),r.body=JSON.stringify(i),Object.assign(Object.assign({},r),e))};async function se(n,t,e,i){var r;const s=Object.assign({},i==null?void 0:i.headers);s[Pu]||(s[Pu]=_0["2024-01-01"].name),i!=null&&i.jwt&&(s.Authorization=`Bearer ${i.jwt}`);const a=(r=i==null?void 0:i.query)!==null&&r!==void 0?r:{};i!=null&&i.redirectTo&&(a.redirect_to=i.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await Q5(n,t,e+o,{headers:s,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(l):{data:Object.assign({},l),error:null}}async function Q5(n,t,e,i,r,s){const a=Z5(t,i,r,s);let o;try{o=await n(e,Object.assign({},a))}catch(l){throw console.error(l),new Cu(Os(l),0)}if(o.ok||await Sf(o),i!=null&&i.noResolveJson)return o;try{return await o.json()}catch(l){await Sf(l)}}function Ui(n){var t;let e=null;nb(n)&&(e=Object.assign({},n),n.expires_at||(e.expires_at=I5(n.expires_in)));const i=(t=n.user)!==null&&t!==void 0?t:n;return{data:{session:e,user:i},error:null}}function kf(n){const t=Ui(n);return!t.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((e,i)=>e&&typeof i=="string",!0)&&(t.data.weak_password=n.weak_password),t}function es(n){var t;return{data:{user:(t=n.user)!==null&&t!==void 0?t:n},error:null}}function tb(n){return{data:n,error:null}}function eb(n){const{action_link:t,email_otp:e,hashed_token:i,redirect_to:r,verification_type:s}=n,a=Fc(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:e,hashed_token:i,redirect_to:r,verification_type:s},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function Af(n){return n}function nb(n){return n.access_token&&n.refresh_token&&n.expires_in}const Dh=["global","local","others"];class ib{constructor({url:t="",headers:e={},fetch:i}){this.url=t,this.headers=e,this.fetch=k0(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,e=Dh[0]){if(Dh.indexOf(e)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Dh.join(", ")}`);try{return await se(this.fetch,"POST",`${this.url}/logout?scope=${e}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(i){if(Vt(i))return{data:null,error:i};throw i}}async inviteUserByEmail(t,e={}){try{return await se(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:e.data},headers:this.headers,redirectTo:e.redirectTo,xform:es})}catch(i){if(Vt(i))return{data:{user:null},error:i};throw i}}async generateLink(t){try{const{options:e}=t,i=Fc(t,["options"]),r=Object.assign(Object.assign({},i),e);return"newEmail"in i&&(r.new_email=i==null?void 0:i.newEmail,delete r.newEmail),await se(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:eb,redirectTo:e==null?void 0:e.redirectTo})}catch(e){if(Vt(e))return{data:{properties:null,user:null},error:e};throw e}}async createUser(t){try{return await se(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:es})}catch(e){if(Vt(e))return{data:{user:null},error:e};throw e}}async listUsers(t){var e,i,r,s,a,o,l;try{const c={nextPage:null,lastPage:0,total:0},h=await se(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(e=t==null?void 0:t.page)===null||e===void 0?void 0:e.toString())!==null&&i!==void 0?i:"",per_page:(s=(r=t==null?void 0:t.perPage)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:""},xform:Af});if(h.error)throw h.error;const p=await h.json(),g=(a=h.headers.get("x-total-count"))!==null&&a!==void 0?a:0,d=(l=(o=h.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return d.length>0&&(d.forEach(v=>{const y=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(v.split(";")[1].split("=")[1]);c[`${x}Page`]=y}),c.total=parseInt(g)),{data:Object.assign(Object.assign({},p),c),error:null}}catch(c){if(Vt(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){ca(t);try{return await se(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:es})}catch(e){if(Vt(e))return{data:{user:null},error:e};throw e}}async updateUserById(t,e){ca(t);try{return await se(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:e,headers:this.headers,xform:es})}catch(i){if(Vt(i))return{data:{user:null},error:i};throw i}}async deleteUser(t,e=!1){ca(t);try{return await se(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:e},xform:es})}catch(i){if(Vt(i))return{data:{user:null},error:i};throw i}}async _listFactors(t){ca(t.userId);try{const{data:e,error:i}=await se(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:e,error:i}}catch(e){if(Vt(e))return{data:null,error:e};throw e}}async _deleteFactor(t){ca(t.userId),ca(t.id);try{return{data:await se(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(e){if(Vt(e))return{data:null,error:e};throw e}}async _listOAuthClients(t){var e,i,r,s,a,o,l;try{const c={nextPage:null,lastPage:0,total:0},h=await se(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(e=t==null?void 0:t.page)===null||e===void 0?void 0:e.toString())!==null&&i!==void 0?i:"",per_page:(s=(r=t==null?void 0:t.perPage)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:""},xform:Af});if(h.error)throw h.error;const p=await h.json(),g=(a=h.headers.get("x-total-count"))!==null&&a!==void 0?a:0,d=(l=(o=h.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return d.length>0&&(d.forEach(v=>{const y=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(v.split(";")[1].split("=")[1]);c[`${x}Page`]=y}),c.total=parseInt(g)),{data:Object.assign(Object.assign({},p),c),error:null}}catch(c){if(Vt(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(t){try{return await se(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(Vt(e))return{data:null,error:e};throw e}}async _getOAuthClient(t){try{return await se(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(Vt(e))return{data:null,error:e};throw e}}async _updateOAuthClient(t,e){try{return await se(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:e,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(Vt(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(t){try{return await se(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(e){if(Vt(e))return{data:null,error:e};throw e}}async _regenerateOAuthClientSecret(t){try{return await se(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(Vt(e))return{data:null,error:e};throw e}}}function Nf(n={}){return{getItem:t=>n[t]||null,setItem:(t,e)=>{n[t]=e},removeItem:t=>{delete n[t]}}}const ha={debug:!!(globalThis&&S0()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class A0 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class rb extends A0{}async function sb(n,t,e){ha.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,t);const i=new globalThis.AbortController;return t>0&&setTimeout(()=>{i.abort(),ha.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async r=>{if(r){ha.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,r.name);try{return await e()}finally{ha.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,r.name)}}else{if(t===0)throw ha.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new rb(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(ha.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await e()}}))}function ab(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function N0(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function ob(n){return parseInt(n,16)}function lb(n){const t=new TextEncoder().encode(n);return"0x"+Array.from(t,i=>i.toString(16).padStart(2,"0")).join("")}function cb(n){var t;const{chainId:e,domain:i,expirationTime:r,issuedAt:s=new Date,nonce:a,notBefore:o,requestId:l,resources:c,scheme:h,uri:p,version:g}=n;{if(!Number.isInteger(e))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${e}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(g!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${g}`);if(!((t=n.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const d=N0(n.address),v=h?`${h}://${i}`:i,y=n.statement?`${n.statement}
`:"",x=`${v} wants you to sign in with your Ethereum account:
${d}

${y}`;let _=`URI: ${p}
Version: ${g}
Chain ID: ${e}${a?`
Nonce: ${a}`:""}
Issued At: ${s.toISOString()}`;if(r&&(_+=`
Expiration Time: ${r.toISOString()}`),o&&(_+=`
Not Before: ${o.toISOString()}`),l&&(_+=`
Request ID: ${l}`),c){let E=`
Resources:`;for(const O of c){if(!O||typeof O!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${O}`);E+=`
- ${O}`}_+=E}return`${x}
${_}`}class yn extends Error{constructor({message:t,code:e,cause:i,name:r}){var s;super(t,{cause:i}),this.__isWebAuthnError=!0,this.name=(s=r??(i instanceof Error?i.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=e}}class wc extends yn{constructor(t,e){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e,message:t}),this.name="WebAuthnUnknownError",this.originalError=e}}function hb({error:n,options:t}){var e,i,r;const{publicKey:s}=t;if(!s)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(t.signal instanceof AbortSignal)return new yn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((e=s.authenticatorSelection)===null||e===void 0?void 0:e.requireResidentKey)===!0)return new yn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(t.mediation==="conditional"&&((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new yn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((r=s.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new yn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new yn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new yn({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return s.pubKeyCredParams.filter(o=>o.type==="public-key").length===0?new yn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new yn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const a=window.location.hostname;if(L0(a)){if(s.rp.id!==a)return new yn({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new yn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new yn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new yn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new yn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function ub({error:n,options:t}){const{publicKey:e}=t;if(!e)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(t.signal instanceof AbortSignal)return new yn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new yn({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const i=window.location.hostname;if(L0(i)){if(e.rpId!==i)return new yn({message:`The RP ID "${e.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new yn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new yn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new yn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class db{createNewAbortSignal(){if(this.controller){const e=new Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const fb=new db;function pb(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:t,user:e,excludeCredentials:i}=n,r=Fc(n,["challenge","user","excludeCredentials"]),s=ka(t).buffer,a=Object.assign(Object.assign({},e),{id:ka(e.id).buffer}),o=Object.assign(Object.assign({},r),{challenge:s,user:a});if(i&&i.length>0){o.excludeCredentials=new Array(i.length);for(let l=0;l<i.length;l++){const c=i[l];o.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:ka(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return o}function gb(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:t,allowCredentials:e}=n,i=Fc(n,["challenge","allowCredentials"]),r=ka(t).buffer,s=Object.assign(Object.assign({},i),{challenge:r});if(e&&e.length>0){s.allowCredentials=new Array(e.length);for(let a=0;a<e.length;a++){const o=e[a];s.allowCredentials[a]=Object.assign(Object.assign({},o),{id:ka(o.id).buffer,type:o.type||"public-key",transports:o.transports})}}return s}function mb(n){var t;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const e=n;return{id:n.id,rawId:n.id,response:{attestationObject:Ms(new Uint8Array(n.response.attestationObject)),clientDataJSON:Ms(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(t=e.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function bb(n){var t;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const e=n,i=n.getClientExtensionResults(),r=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:Ms(new Uint8Array(r.authenticatorData)),clientDataJSON:Ms(new Uint8Array(r.clientDataJSON)),signature:Ms(new Uint8Array(r.signature)),userHandle:r.userHandle?Ms(new Uint8Array(r.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(t=e.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function L0(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function Lf(){var n,t;return!!(Dn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function vb(n){try{const t=await navigator.credentials.create(n);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new wc("Browser returned unexpected credential type",t)}:{data:null,error:new wc("Empty credential response",t)}}catch(t){return{data:null,error:hb({error:t,options:n})}}}async function yb(n){try{const t=await navigator.credentials.get(n);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new wc("Browser returned unexpected credential type",t)}:{data:null,error:new wc("Empty credential response",t)}}catch(t){return{data:null,error:ub({error:t,options:n})}}}const wb={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},_b={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function _c(...n){const t=r=>r!==null&&typeof r=="object"&&!Array.isArray(r),e=r=>r instanceof ArrayBuffer||ArrayBuffer.isView(r),i={};for(const r of n)if(r)for(const s in r){const a=r[s];if(a!==void 0)if(Array.isArray(a))i[s]=a;else if(e(a))i[s]=a;else if(t(a)){const o=i[s];t(o)?i[s]=_c(o,a):i[s]=_c(a)}else i[s]=a}return i}function xb(n,t){return _c(wb,n,t||{})}function Sb(n,t){return _c(_b,n,t||{})}class kb{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:e,friendlyName:i,signal:r},s){var a;try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:e});if(!o)return{data:null,error:l};const c=r??fb.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:h}=o.webauthn.credential_options.publicKey;if(!h.name){const p=i;if(p)h.name=`${h.id}:${p}`;else{const d=(await this.client.getUser()).data.user,v=((a=d==null?void 0:d.user_metadata)===null||a===void 0?void 0:a.name)||(d==null?void 0:d.email)||(d==null?void 0:d.id)||"User";h.name=`${h.id}:${v}`}}h.displayName||(h.displayName=h.name)}switch(o.webauthn.type){case"create":{const h=xb(o.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:p,error:g}=await vb({publicKey:h,signal:c});return p?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:p}},error:null}:{data:null,error:g}}case"request":{const h=Sb(o.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:p,error:g}=await yb(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:h,signal:c}));return p?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:p}},error:null}:{data:null,error:g}}}}catch(o){return Vt(o)?{data:null,error:o}:{data:null,error:new Is("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:e,webauthn:i}){return this.client.mfa.verify({factorId:e,challengeId:t,webauthn:i})}async _authenticate({factorId:t,webauthn:{rpId:e=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:r}={}},s){if(!e)return{data:null,error:new Bo("rpId is required for WebAuthn authentication")};try{if(!Lf())return{data:null,error:new Is("Browser does not support WebAuthn",null)};const{data:a,error:o}=await this.challenge({factorId:t,webauthn:{rpId:e,rpOrigins:i},signal:r},{request:s});if(!a)return{data:null,error:o};const{webauthn:l}=a;return this._verify({factorId:t,challengeId:a.challengeId,webauthn:{type:l.type,rpId:e,rpOrigins:i,credential_response:l.credential_response}})}catch(a){return Vt(a)?{data:null,error:a}:{data:null,error:new Is("Unexpected error in authenticate",a)}}}async _register({friendlyName:t,webauthn:{rpId:e=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:r}={}},s){if(!e)return{data:null,error:new Bo("rpId is required for WebAuthn registration")};try{if(!Lf())return{data:null,error:new Is("Browser does not support WebAuthn",null)};const{data:a,error:o}=await this._enroll({friendlyName:t});if(!a)return await this.client.mfa.listFactors().then(h=>{var p;return(p=h.data)===null||p===void 0?void 0:p.all.find(g=>g.factor_type==="webauthn"&&g.friendly_name===t&&g.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h==null?void 0:h.id}):void 0),{data:null,error:o};const{data:l,error:c}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:e,rpOrigins:i},signal:r},{create:s});return l?this._verify({factorId:a.id,challengeId:l.challengeId,webauthn:{rpId:e,rpOrigins:i,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(a){return Vt(a)?{data:null,error:a}:{data:null,error:new Is("Unexpected error in register",a)}}}}ab();const Ab={url:_5,storageKey:x5,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:S5,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Pf(n,t,e){return await e()}const ua={};class Uo{get jwks(){var t,e;return(e=(t=ua[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&e!==void 0?e:{keys:[]}}set jwks(t){ua[this.storageKey]=Object.assign(Object.assign({},ua[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,e;return(e=(t=ua[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&e!==void 0?e:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){ua[this.storageKey]=Object.assign(Object.assign({},ua[this.storageKey]),{cachedAt:t})}constructor(t){var e,i,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const s=Object.assign(Object.assign({},Ab),t);if(this.storageKey=s.storageKey,this.instanceID=(e=Uo.nextInstanceID[this.storageKey])!==null&&e!==void 0?e:0,Uo.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&Dn()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new ib({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=k0(s.fetch),this.lock=s.lock||Pf,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,this.lockAcquireTimeout=s.lockAcquireTimeout,s.lock?this.lock=s.lock:this.persistSession&&Dn()&&(!((i=globalThis==null?void 0:globalThis.navigator)===null||i===void 0)&&i.locks)?this.lock=sb:this.lock=Pf,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new kb(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:S0()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Nf(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Nf(this.memoryStorage)),Dn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a);try{await this._notifyAllSubscribers(a.data.event,a.data.session,!1)}catch(o){this._debug("#broadcastChannel","error",o)}})}this.initialize().catch(a=>{this._debug("#initialize()","error",a)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${w0}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let e={},i="none";if(Dn()&&(e=M5(window.location.href),this._isImplicitGrantCallback(e)?i="implicit":await this._isPKCECallback(e)&&(i="pkce")),Dn()&&this.detectSessionInUrl&&i!=="none"){const{data:r,error:s}=await this._getSessionFromURL(e,i);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),P5(s)){const l=(t=s.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return{error:s}}const{session:a,redirectType:o}=r;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return Vt(e)?this._returnResult({error:e}):this._returnResult({error:new Is("Unexpected error during initialization",e)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var e,i,r;try{const s=await se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(e=t==null?void 0:t.options)===null||e===void 0?void 0:e.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.captchaToken}},xform:Ui}),{data:a,error:o}=s;if(o||!a)return this._returnResult({data:{user:null,session:null},error:o});const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(s){if(Vt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(t){var e,i,r;try{let s;if("email"in t){const{email:h,password:p,options:g}=t;let d=null,v=null;this.flowType==="pkce"&&([d,v]=await la(this.storage,this.storageKey)),s=await se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:g==null?void 0:g.emailRedirectTo,body:{email:h,password:p,data:(e=g==null?void 0:g.data)!==null&&e!==void 0?e:{},gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:d,code_challenge_method:v},xform:Ui})}else if("phone"in t){const{phone:h,password:p,options:g}=t;s=await se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:p,data:(i=g==null?void 0:g.data)!==null&&i!==void 0?i:{},channel:(r=g==null?void 0:g.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:Ui})}else throw new Fl("You must provide either an email or phone number and a password");const{data:a,error:o}=s;if(o||!a)return await In(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:o});const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(s){if(await In(this.storage,`${this.storageKey}-code-verifier`),Vt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(t){try{let e;if("email"in t){const{email:s,password:a,options:o}=t;e=await se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:kf})}else if("phone"in t){const{phone:s,password:a,options:o}=t;e=await se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:kf})}else throw new Fl("You must provide either an email or phone number and a password");const{data:i,error:r}=e;if(r)return this._returnResult({data:{user:null,session:null},error:r});if(!i||!i.session||!i.user){const s=new oa;return this._returnResult({data:{user:null,session:null},error:s})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:r})}catch(e){if(Vt(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async signInWithOAuth(t){var e,i,r,s;return await this._handleProviderSignIn(t.provider,{redirectTo:(e=t.options)===null||e===void 0?void 0:e.redirectTo,scopes:(i=t.options)===null||i===void 0?void 0:i.scopes,queryParams:(r=t.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(s=t.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:e}=t;switch(e){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${e}"`)}}async signInWithEthereum(t){var e,i,r,s,a,o,l,c,h,p,g;let d,v;if("message"in t)d=t.message,v=t.signature;else{const{chain:y,wallet:x,statement:_,options:E}=t;let O;if(Dn())if(typeof x=="object")O=x;else{const D=window;if("ethereum"in D&&typeof D.ethereum=="object"&&"request"in D.ethereum&&typeof D.ethereum.request=="function")O=D.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(E!=null&&E.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=x}const T=new URL((e=E==null?void 0:E.url)!==null&&e!==void 0?e:window.location.href),V=await O.request({method:"eth_requestAccounts"}).then(D=>D).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!V||V.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const Q=N0(V[0]);let J=(i=E==null?void 0:E.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!J){const D=await O.request({method:"eth_chainId"});J=ob(D)}const $={domain:T.host,address:Q,statement:_,uri:T.href,version:"1",chainId:J,nonce:(r=E==null?void 0:E.signInWithEthereum)===null||r===void 0?void 0:r.nonce,issuedAt:(a=(s=E==null?void 0:E.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(o=E==null?void 0:E.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(l=E==null?void 0:E.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=E==null?void 0:E.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(h=E==null?void 0:E.signInWithEthereum)===null||h===void 0?void 0:h.resources};d=cb($),v=await O.request({method:"personal_sign",params:[lb(d),Q]})}try{const{data:y,error:x}=await se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:d,signature:v},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(g=t.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:Ui});if(x)throw x;if(!y||!y.session||!y.user){const _=new oa;return this._returnResult({data:{user:null,session:null},error:_})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:x})}catch(y){if(Vt(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async signInWithSolana(t){var e,i,r,s,a,o,l,c,h,p,g,d;let v,y;if("message"in t)v=t.message,y=t.signature;else{const{chain:x,wallet:_,statement:E,options:O}=t;let T;if(Dn())if(typeof _=="object")T=_;else{const Q=window;if("solana"in Q&&typeof Q.solana=="object"&&("signIn"in Q.solana&&typeof Q.solana.signIn=="function"||"signMessage"in Q.solana&&typeof Q.solana.signMessage=="function"))T=Q.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!(O!=null&&O.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");T=_}const V=new URL((e=O==null?void 0:O.url)!==null&&e!==void 0?e:window.location.href);if("signIn"in T&&T.signIn){const Q=await T.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},O==null?void 0:O.signInWithSolana),{version:"1",domain:V.host,uri:V.href}),E?{statement:E}:null));let J;if(Array.isArray(Q)&&Q[0]&&typeof Q[0]=="object")J=Q[0];else if(Q&&typeof Q=="object"&&"signedMessage"in Q&&"signature"in Q)J=Q;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in J&&"signature"in J&&(typeof J.signedMessage=="string"||J.signedMessage instanceof Uint8Array)&&J.signature instanceof Uint8Array)v=typeof J.signedMessage=="string"?J.signedMessage:new TextDecoder().decode(J.signedMessage),y=J.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in T)||typeof T.signMessage!="function"||!("publicKey"in T)||typeof T!="object"||!T.publicKey||!("toBase58"in T.publicKey)||typeof T.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${V.host} wants you to sign in with your Solana account:`,T.publicKey.toBase58(),...E?["",E,""]:[""],"Version: 1",`URI: ${V.href}`,`Issued At: ${(r=(i=O==null?void 0:O.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((s=O==null?void 0:O.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${O.signInWithSolana.notBefore}`]:[],...!((a=O==null?void 0:O.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${O.signInWithSolana.expirationTime}`]:[],...!((o=O==null?void 0:O.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${O.signInWithSolana.chainId}`]:[],...!((l=O==null?void 0:O.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${O.signInWithSolana.nonce}`]:[],...!((c=O==null?void 0:O.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${O.signInWithSolana.requestId}`]:[],...!((p=(h=O==null?void 0:O.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||p===void 0)&&p.length?["Resources",...O.signInWithSolana.resources.map(J=>`- ${J}`)]:[]].join(`
`);const Q=await T.signMessage(new TextEncoder().encode(v),"utf8");if(!Q||!(Q instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=Q}}try{const{data:x,error:_}=await se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:Ms(y)},!((g=t.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(d=t.options)===null||d===void 0?void 0:d.captchaToken}}:null),xform:Ui});if(_)throw _;if(!x||!x.session||!x.user){const E=new oa;return this._returnResult({data:{user:null,session:null},error:E})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:_})}catch(x){if(Vt(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async _exchangeCodeForSession(t){const e=await Ls(this.storage,`${this.storageKey}-code-verifier`),[i,r]=(e??"").split("/");try{if(!i&&this.flowType==="pkce")throw new C5;const{data:s,error:a}=await se(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:i},xform:Ui});if(await In(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!s||!s.session||!s.user){const o=new oa;return this._returnResult({data:{user:null,session:null,redirectType:null},error:o})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:r??null}),error:a})}catch(s){if(await In(this.storage,`${this.storageKey}-code-verifier`),Vt(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(t){try{const{options:e,provider:i,token:r,access_token:s,nonce:a}=t,o=await se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:r,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:e==null?void 0:e.captchaToken}},xform:Ui}),{data:l,error:c}=o;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const h=new oa;return this._returnResult({data:{user:null,session:null},error:h})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(e){if(Vt(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async signInWithOtp(t){var e,i,r,s,a;try{if("email"in t){const{email:o,options:l}=t;let c=null,h=null;this.flowType==="pkce"&&([c,h]=await la(this.storage,this.storageKey));const{error:p}=await se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(e=l==null?void 0:l.data)!==null&&e!==void 0?e:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:h},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:p})}if("phone"in t){const{phone:o,options:l}=t,{data:c,error:h}=await se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:h})}throw new Fl("You must provide either an email or phone number.")}catch(o){if(await In(this.storage,`${this.storageKey}-code-verifier`),Vt(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async verifyOtp(t){var e,i;try{let r,s;"options"in t&&(r=(e=t.options)===null||e===void 0?void 0:e.redirectTo,s=(i=t.options)===null||i===void 0?void 0:i.captchaToken);const{data:a,error:o}=await se(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:r,xform:Ui});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,c=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(r){if(Vt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithSSO(t){var e,i,r,s,a;try{let o=null,l=null;this.flowType==="pkce"&&([o,l]=await la(this.storage,this.storageKey));const c=await se(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(i=(e=t.options)===null||e===void 0?void 0:e.redirectTo)!==null&&i!==void 0?i:void 0}),!((r=t==null?void 0:t.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:l}),headers:this.headers,xform:tb});return!((s=c.data)===null||s===void 0)&&s.url&&Dn()&&!(!((a=t.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(o){if(await In(this.storage,`${this.storageKey}-code-verifier`),Vt(o))return this._returnResult({data:null,error:o});throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:e},error:i}=t;if(i)throw i;if(!e)throw new fi;const{error:r}=await se(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:e.access_token});return this._returnResult({data:{user:null,session:null},error:r})})}catch(t){if(Vt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const e=`${this.url}/resend`;if("email"in t){const{email:i,type:r,options:s}=t,{error:a}=await se(this.fetch,"POST",e,{headers:this.headers,body:{email:i,type:r,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in t){const{phone:i,type:r,options:s}=t,{data:a,error:o}=await se(this.fetch,"POST",e,{headers:this.headers,body:{phone:i,type:r,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o})}throw new Fl("You must provide either an email or phone number and a type")}catch(e){if(Vt(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async e=>e))}async _acquireLock(t,e){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await i,await e()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=e();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const e=await this.__loadSession();return await t(e)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const e=await Ls(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",e),e!==null&&(this._isValidSession(e)?t=e:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const i=t.expires_at?t.expires_at*1e3-Date.now()<jh:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",t.expires_at),!i){if(this.userStorage){const a=await Ls(this.userStorage,this.storageKey+"-user");a!=null&&a.user?t.user=a.user:t.user=Ih()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};t.user=J5(t.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:r,error:s}=await this._callRefreshToken(t.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:r},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const e=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return e.data.user&&(this.suppressGetSessionWarning=!0),e}async _getUser(t){try{return t?await se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:es}):await this._useSession(async e=>{var i,r,s;const{data:a,error:o}=e;if(o)throw o;return!(!((i=a.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new fi}:await se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0,xform:es})})}catch(e){if(Vt(e))return Th(e)&&(await this._removeSession(),await In(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:e});throw e}}async updateUser(t,e={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,e))}async _updateUser(t,e={}){try{return await this._useSession(async i=>{const{data:r,error:s}=i;if(s)throw s;if(!r.session)throw new fi;const a=r.session;let o=null,l=null;this.flowType==="pkce"&&t.email!=null&&([o,l]=await la(this.storage,this.storageKey));const{data:c,error:h}=await se(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:e==null?void 0:e.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:es});if(h)throw h;return a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(i){if(await In(this.storage,`${this.storageKey}-code-verifier`),Vt(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new fi;const e=Date.now()/1e3;let i=e,r=!0,s=null;const{payload:a}=Ul(t.access_token);if(a.exp&&(i=a.exp,r=i<=e),r){const{data:o,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!o)return{data:{user:null,session:null},error:null};s=o}else{const{data:o,error:l}=await this._getUser(t.access_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});s={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:i-e,expires_at:i},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(e){if(Vt(e))return this._returnResult({data:{session:null,user:null},error:e});throw e}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async e=>{var i;if(!t){const{data:a,error:o}=e;if(o)throw o;t=(i=a.session)!==null&&i!==void 0?i:void 0}if(!(t!=null&&t.refresh_token))throw new fi;const{data:r,error:s}=await this._callRefreshToken(t.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):r?this._returnResult({data:{user:r.user,session:r},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(e){if(Vt(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async _getSessionFromURL(t,e){try{if(!Dn())throw new Bl("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Bl(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(e){case"implicit":if(this.flowType==="pkce")throw new bf("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Bl("Not a valid implicit grant flow url.");break;default:}if(e==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new bf("No code detected.");const{data:E,error:O}=await this._exchangeCodeForSession(t.code);if(O)throw O;const T=new URL(window.location.href);return T.searchParams.delete("code"),window.history.replaceState(window.history.state,"",T.toString()),{data:{session:E.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:r,access_token:s,refresh_token:a,expires_in:o,expires_at:l,token_type:c}=t;if(!s||!o||!a||!c)throw new Bl("No session defined in URL");const h=Math.round(Date.now()/1e3),p=parseInt(o);let g=h+p;l&&(g=parseInt(l));const d=g-h;d*1e3<=va&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${d}s, should have been closer to ${p}s`);const v=g-p;h-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,g,h):h-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,g,h);const{data:y,error:x}=await this._getUser(s);if(x)throw x;const _={provider_token:i,provider_refresh_token:r,access_token:s,expires_in:p,expires_at:g,refresh_token:a,token_type:c,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:_,redirectType:t.type},error:null})}catch(i){if(Vt(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const e=await Ls(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&e)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async e=>{var i;const{data:r,error:s}=e;if(s&&!Th(s))return this._returnResult({error:s});const a=(i=r.session)===null||i===void 0?void 0:i.access_token;if(a){const{error:o}=await this.admin.signOut(a,t);if(o&&!(L5(o)&&(o.status===404||o.status===401||o.status===403)||Th(o)))return this._returnResult({error:o})}return t!=="others"&&(await this._removeSession(),await In(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const e=D5(),i={id:e,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",e),this.stateChangeEmitters.delete(e)}};return this._debug("#onAuthStateChange()","registered callback with id",e),this.stateChangeEmitters.set(e,i),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(e)})))(),{data:{subscription:i}}}async _emitInitialSession(t){return await this._useSession(async e=>{var i,r;try{const{data:{session:s},error:a}=e;if(a)throw a;await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",t,"session",s)}catch(s){await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",s),console.error(s)}})}async resetPasswordForEmail(t,e={}){let i=null,r=null;this.flowType==="pkce"&&([i,r]=await la(this.storage,this.storageKey,!0));try{return await se(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:i,code_challenge_method:r,gotrue_meta_security:{captcha_token:e.captchaToken}},headers:this.headers,redirectTo:e.redirectTo})}catch(s){if(await In(this.storage,`${this.storageKey}-code-verifier`),Vt(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var t;try{const{data:e,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(t=e.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(e){if(Vt(e))return this._returnResult({data:null,error:e});throw e}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var e;try{const{data:i,error:r}=await this._useSession(async s=>{var a,o,l,c,h;const{data:p,error:g}=s;if(g)throw g;const d=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await se(this.fetch,"GET",d,{headers:this.headers,jwt:(h=(c=p.session)===null||c===void 0?void 0:c.access_token)!==null&&h!==void 0?h:void 0})});if(r)throw r;return Dn()&&!(!((e=t.options)===null||e===void 0)&&e.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),this._returnResult({data:{provider:t.provider,url:i==null?void 0:i.url},error:null})}catch(i){if(Vt(i))return this._returnResult({data:{provider:t.provider,url:null},error:i});throw i}}async linkIdentityIdToken(t){return await this._useSession(async e=>{var i;try{const{error:r,data:{session:s}}=e;if(r)throw r;const{options:a,provider:o,token:l,access_token:c,nonce:h}=t,p=await se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=s==null?void 0:s.access_token)!==null&&i!==void 0?i:void 0,body:{provider:o,id_token:l,access_token:c,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Ui}),{data:g,error:d}=p;return d?this._returnResult({data:{user:null,session:null},error:d}):!g||!g.session||!g.user?this._returnResult({data:{user:null,session:null},error:new oa}):(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("USER_UPDATED",g.session)),this._returnResult({data:g,error:d}))}catch(r){if(await In(this.storage,`${this.storageKey}-code-verifier`),Vt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}async unlinkIdentity(t){try{return await this._useSession(async e=>{var i,r;const{data:s,error:a}=e;if(a)throw a;return await se(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(r=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&r!==void 0?r:void 0})})}catch(e){if(Vt(e))return this._returnResult({data:null,error:e});throw e}}async _refreshAccessToken(t){const e=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(e,"begin");try{const i=Date.now();return await U5(async r=>(r>0&&await B5(200*Math.pow(2,r-1)),this._debug(e,"refreshing attempt",r),await se(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ui})),(r,s)=>{const a=200*Math.pow(2,r);return s&&Rh(s)&&Date.now()+a-i<va})}catch(i){if(this._debug(e,"error",i),Vt(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(e,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,e){const i=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:e.redirectTo,scopes:e.scopes,queryParams:e.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",e,"url",i),Dn()&&!e.skipBrowserRedirect&&window.location.assign(i),{data:{provider:t,url:i},error:null}}async _recoverAndRefresh(){var t,e;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const r=await Ls(this.storage,this.storageKey);if(r&&this.userStorage){let a=await Ls(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:r.user},await ya(this.userStorage,this.storageKey+"-user",a)),r.user=(t=a==null?void 0:a.user)!==null&&t!==void 0?t:Ih()}else if(r&&!r.user&&!r.user){const a=await Ls(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(r.user=a.user,await In(this.storage,this.storageKey+"-user"),await ya(this.storage,this.storageKey,r)):r.user=Ih()}if(this._debug(i,"session from storage",r),!this._isValidSession(r)){this._debug(i,"session is not valid"),r!==null&&await this._removeSession();return}const s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<jh;if(this._debug(i,`session has${s?"":" not"} expired with margin of ${jh}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:a}=await this._callRefreshToken(r.refresh_token);a&&(console.error(a),Rh(a)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(r.user&&r.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:o}=await this._getUser(r.access_token);!o&&(a!=null&&a.user)?(r.user=a.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(i,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(i,"error",r),console.error(r);return}finally{this._debug(i,"end")}}async _callRefreshToken(t){var e,i;if(!t)throw new fi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new qc;const{data:s,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!s.session)throw new fi;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const o={data:s.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(s){if(this._debug(r,"error",s),Vt(s)){const a={data:null,error:s};return Rh(s)||await this._removeSession(),(e=this.refreshingDeferred)===null||e===void 0||e.resolve(a),a}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(s),s}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(t,e,i=!0){const r=`#_notifyAllSubscribers(${t})`;this._debug(r,"begin",e,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:t,session:e});const s=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(t,e)}catch(l){s.push(l)}});if(await Promise.all(a),s.length>0){for(let o=0;o<s.length;o+=1)console.error(s[o]);throw s[0]}}finally{this._debug(r,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await In(this.storage,`${this.storageKey}-code-verifier`);const e=Object.assign({},t),i=e.user&&e.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&e.user&&await ya(this.userStorage,this.storageKey+"-user",{user:e.user});const r=Object.assign({},e);delete r.user;const s=xf(r);await ya(this.storage,this.storageKey,s)}else{const r=xf(e);await ya(this.storage,this.storageKey,r)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await In(this.storage,this.storageKey),await In(this.storage,this.storageKey+"-code-verifier"),await In(this.storage,this.storageKey+"-user"),this.userStorage&&await In(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Dn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(e){console.error("removing visibilitychange callback failed",e)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),va);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const e=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const e=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,e&&clearTimeout(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:i}}=e;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((i.expires_at*1e3-t)/va);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${va}ms, refresh threshold is ${Lu} ticks`),r<=Lu&&await this._callRefreshToken(i.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof A0)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Dn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(t){this._debug("#visibilityChangedCallback","error",t)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const e=`#_onVisibilityChanged(${t})`;this._debug(e,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(e,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,e,i){const r=[`provider=${encodeURIComponent(e)}`];if(i!=null&&i.redirectTo&&r.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&r.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[s,a]=await la(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});r.push(o.toString())}if(i!=null&&i.queryParams){const s=new URLSearchParams(i.queryParams);r.push(s.toString())}return i!=null&&i.skipBrowserRedirect&&r.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${t}?${r.join("&")}`}async _unenroll(t){try{return await this._useSession(async e=>{var i;const{data:r,error:s}=e;return s?this._returnResult({data:null,error:s}):await se(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token})})}catch(e){if(Vt(e))return this._returnResult({data:null,error:e});throw e}}async _enroll(t){try{return await this._useSession(async e=>{var i,r;const{data:s,error:a}=e;if(a)return this._returnResult({data:null,error:a});const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:l,error:c}=await se(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(i=s==null?void 0:s.session)===null||i===void 0?void 0:i.access_token});return c?this._returnResult({data:null,error:c}):(t.factorType==="totp"&&l.type==="totp"&&(!((r=l==null?void 0:l.totp)===null||r===void 0)&&r.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(e){if(Vt(e))return this._returnResult({data:null,error:e});throw e}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async e=>{var i;const{data:r,error:s}=e;if(s)return this._returnResult({data:null,error:s});const a=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?mb(t.webauthn.credential_response):bb(t.webauthn.credential_response)})}:{code:t.code}),{data:o,error:l}=await se(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:a,headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),this._returnResult({data:o,error:l}))})}catch(e){if(Vt(e))return this._returnResult({data:null,error:e});throw e}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async e=>{var i;const{data:r,error:s}=e;if(s)return this._returnResult({data:null,error:s});const a=await se(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token});if(a.error)return a;const{data:o}=a;if(o.type!=="webauthn")return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:pb(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:gb(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(e){if(Vt(e))return this._returnResult({data:null,error:e});throw e}})}async _challengeAndVerify(t){const{data:e,error:i}=await this._challenge({factorId:t.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:t.factorId,challengeId:e.id,code:t.code})}async _listFactors(){var t;const{data:{user:e},error:i}=await this.getUser();if(i)return{data:null,error:i};const r={all:[],phone:[],totp:[],webauthn:[]};for(const s of(t=e==null?void 0:e.factors)!==null&&t!==void 0?t:[])r.all.push(s),s.status==="verified"&&r[s.factor_type].push(s);return{data:r,error:null}}async _getAuthenticatorAssuranceLevel(t){var e,i,r,s;if(t)try{const{payload:d}=Ul(t);let v=null;d.aal&&(v=d.aal);let y=v;const{data:{user:x},error:_}=await this.getUser(t);if(_)return this._returnResult({data:null,error:_});((i=(e=x==null?void 0:x.factors)===null||e===void 0?void 0:e.filter(T=>T.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(y="aal2");const O=d.amr||[];return{data:{currentLevel:v,nextLevel:y,currentAuthenticationMethods:O},error:null}}catch(d){if(Vt(d))return this._returnResult({data:null,error:d});throw d}const{data:{session:a},error:o}=await this.getSession();if(o)return this._returnResult({data:null,error:o});if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Ul(a.access_token);let c=null;l.aal&&(c=l.aal);let h=c;((s=(r=a.user.factors)===null||r===void 0?void 0:r.filter(d=>d.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(h="aal2");const g=l.amr||[];return{data:{currentLevel:c,nextLevel:h,currentAuthenticationMethods:g},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async e=>{const{data:{session:i},error:r}=e;return r?this._returnResult({data:null,error:r}):i?await se(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:i.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new fi})})}catch(e){if(Vt(e))return this._returnResult({data:null,error:e});throw e}}async _approveAuthorization(t,e){try{return await this._useSession(async i=>{const{data:{session:r},error:s}=i;if(s)return this._returnResult({data:null,error:s});if(!r)return this._returnResult({data:null,error:new fi});const a=await se(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"approve"},xform:o=>({data:o,error:null})});return a.data&&a.data.redirect_url&&Dn()&&!(e!=null&&e.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(i){if(Vt(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(t,e){try{return await this._useSession(async i=>{const{data:{session:r},error:s}=i;if(s)return this._returnResult({data:null,error:s});if(!r)return this._returnResult({data:null,error:new fi});const a=await se(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"deny"},xform:o=>({data:o,error:null})});return a.data&&a.data.redirect_url&&Dn()&&!(e!=null&&e.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(i){if(Vt(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:e},error:i}=t;return i?this._returnResult({data:null,error:i}):e?await se(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:e.access_token,xform:r=>({data:r,error:null})}):this._returnResult({data:null,error:new fi})})}catch(t){if(Vt(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async e=>{const{data:{session:i},error:r}=e;return r?this._returnResult({data:null,error:r}):i?(await se(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new fi})})}catch(e){if(Vt(e))return this._returnResult({data:null,error:e});throw e}}async fetchJwk(t,e={keys:[]}){let i=e.keys.find(o=>o.kid===t);if(i)return i;const r=Date.now();if(i=this.jwks.keys.find(o=>o.kid===t),i&&this.jwks_cached_at+A5>r)return i;const{data:s,error:a}=await se(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=r,i=s.keys.find(o=>o.kid===t),!i)?null:i}async getClaims(t,e={}){try{let i=t;if(!i){const{data:d,error:v}=await this.getSession();if(v||!d.session)return this._returnResult({data:null,error:v});i=d.session.access_token}const{header:r,payload:s,signature:a,raw:{header:o,payload:l}}=Ul(i);e!=null&&e.allowExpired||G5(s.exp);const c=!r.alg||r.alg.startsWith("HS")||!r.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(r.kid,e!=null&&e.keys?{keys:e.keys}:e==null?void 0:e.jwks);if(!c){const{error:d}=await this.getUser(i);if(d)throw d;return{data:{claims:s,header:r,signature:a},error:null}}const h=K5(r.alg),p=await crypto.subtle.importKey("jwk",c,h,!0,["verify"]);if(!await crypto.subtle.verify(h,p,a,R5(`${o}.${l}`)))throw new Eu("Invalid JWT signature");return{data:{claims:s,header:r,signature:a},error:null}}catch(i){if(Vt(i))return this._returnResult({data:null,error:i});throw i}}}Uo.nextInstanceID={};const Nb=Uo,Lb="2.93.3";let _o="";typeof Deno<"u"?_o="deno":typeof document<"u"?_o="web":typeof navigator<"u"&&navigator.product==="ReactNative"?_o="react-native":_o="node";const Pb={"X-Client-Info":`supabase-js-${_o}/${Lb}`},Cb={headers:Pb},Eb={schema:"public"},Ob={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},jb={};function qo(n){"@babel/helpers - typeof";return qo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qo(n)}function Tb(n,t){if(qo(n)!="object"||!n)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var i=e.call(n,t);if(qo(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function Rb(n){var t=Tb(n,"string");return qo(t)=="symbol"?t:t+""}function Ib(n,t,e){return(t=Rb(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function Cf(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function an(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Cf(Object(e),!0).forEach(function(i){Ib(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Cf(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}const Db=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),Mb=()=>Headers,Fb=(n,t,e)=>{const i=Db(e),r=Mb();return async(s,a)=>{var o;const l=(o=await t())!==null&&o!==void 0?o:n;let c=new r(a==null?void 0:a.headers);return c.has("apikey")||c.set("apikey",n),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),i(s,an(an({},a),{},{headers:c}))}};function Bb(n){return n.endsWith("/")?n:n+"/"}function Ub(n,t){var e,i;const{db:r,auth:s,realtime:a,global:o}=n,{db:l,auth:c,realtime:h,global:p}=t,g={db:an(an({},l),r),auth:an(an({},c),s),realtime:an(an({},h),a),storage:{},global:an(an(an({},p),o),{},{headers:an(an({},(e=p==null?void 0:p.headers)!==null&&e!==void 0?e:{}),(i=o==null?void 0:o.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return n.accessToken?g.accessToken=n.accessToken:delete g.accessToken,g}function qb(n){const t=n==null?void 0:n.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Bb(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var zb=class extends Nb{constructor(n){super(n)}},$b=class{constructor(n,t,e){var i,r;this.supabaseUrl=n,this.supabaseKey=t;const s=qb(n);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);const a=`sb-${s.hostname.split(".")[0]}-auth-token`,o={db:Eb,realtime:jb,auth:an(an({},Ob),{},{storageKey:a}),global:Cb},l=Ub(e??{},o);if(this.storageKey=(i=l.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(r=l.global.headers)!==null&&r!==void 0?r:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(h,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}});else{var c;this.auth=this._initSupabaseAuthClient((c=l.auth)!==null&&c!==void 0?c:{},this.headers,l.global.fetch)}this.fetch=Fb(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(an({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(h=>this.realtime.setAuth(h)).catch(h=>console.warn("Failed to set initial Realtime auth token:",h)),this.rest=new L2(new URL("rest/v1",s).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new w5(this.storageUrl.href,this.headers,this.fetch,e==null?void 0:e.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new x2(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,t={},e={head:!1,get:!1,count:void 0}){return this.rest.rpc(n,t,e)}channel(n,t={config:{}}){return this.realtime.channel(n,t)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var n=this,t,e;if(n.accessToken)return await n.accessToken();const{data:i}=await n.auth.getSession();return(t=(e=i.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:n.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:t,detectSessionInUrl:e,storage:i,userStorage:r,storageKey:s,flowType:a,lock:o,debug:l,throwOnError:c},h,p){const g={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new zb({url:this.authUrl.href,headers:an(an({},g),h),storageKey:s,autoRefreshToken:n,persistSession:t,detectSessionInUrl:e,storage:i,userStorage:r,flowType:a,lock:o,debug:l,throwOnError:c,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(d=>d.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new H2(this.realtimeUrl.href,an(an({},n),{},{params:an(an({},{apikey:this.supabaseKey}),n==null?void 0:n.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,t)=>{this._handleTokenChanged(n,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(n,t,e){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==e?(this.changedAccessToken=e,this.realtime.setAuth(e)):n==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Hb=(n,t,e)=>new $b(n,t,e);function Wb(){if(typeof window<"u")return!1;const n=globalThis.process;if(!n)return!1;const t=n.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Wb()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");console.warn("Supabase credentials not found in environment variables");const Ef=Hb("","");function Fe(n){"@babel/helpers - typeof";return Fe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fe(n)}var $i=Uint8Array,gi=Uint16Array,ed=Int32Array,nd=new $i([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),id=new $i([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Of=new $i([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),P0=function(n,t){for(var e=new gi(31),i=0;i<31;++i)e[i]=t+=1<<n[i-1];for(var r=new ed(e[30]),i=1;i<30;++i)for(var s=e[i];s<e[i+1];++s)r[s]=s-e[i]<<5|i;return{b:e,r}},C0=P0(nd,2),Vb=C0.b,Ou=C0.r;Vb[28]=258,Ou[258]=28;var Gb=P0(id,0),jf=Gb.r,ju=new gi(32768);for(var Xe=0;Xe<32768;++Xe){var Xr=(Xe&43690)>>1|(Xe&21845)<<1;Xr=(Xr&52428)>>2|(Xr&13107)<<2,Xr=(Xr&61680)>>4|(Xr&3855)<<4,ju[Xe]=((Xr&65280)>>8|(Xr&255)<<8)>>1}var Po=function(n,t,e){for(var i=n.length,r=0,s=new gi(t);r<i;++r)n[r]&&++s[n[r]-1];var a=new gi(t);for(r=1;r<t;++r)a[r]=a[r-1]+s[r-1]<<1;var o;if(e){o=new gi(1<<t);var l=15-t;for(r=0;r<i;++r)if(n[r])for(var c=r<<4|n[r],h=t-n[r],p=a[n[r]-1]++<<h,g=p|(1<<h)-1;p<=g;++p)o[ju[p]>>l]=c}else for(o=new gi(i),r=0;r<i;++r)n[r]&&(o[r]=ju[a[n[r]-1]++]>>15-n[r]);return o},zs=new $i(288);for(var Xe=0;Xe<144;++Xe)zs[Xe]=8;for(var Xe=144;Xe<256;++Xe)zs[Xe]=9;for(var Xe=256;Xe<280;++Xe)zs[Xe]=7;for(var Xe=280;Xe<288;++Xe)zs[Xe]=8;var xc=new $i(32);for(var Xe=0;Xe<32;++Xe)xc[Xe]=5;var Kb=Po(zs,9,0),Yb=Po(xc,5,0),E0=function(n){return(n+7)/8|0},Jb=function(n,t,e){return(e==null||e>n.length)&&(e=n.length),new $i(n.subarray(t,e))},kr=function(n,t,e){e<<=t&7;var i=t/8|0;n[i]|=e,n[i+1]|=e>>8},po=function(n,t,e){e<<=t&7;var i=t/8|0;n[i]|=e,n[i+1]|=e>>8,n[i+2]|=e>>16},Mh=function(n,t){for(var e=[],i=0;i<n.length;++i)n[i]&&e.push({s:i,f:n[i]});var r=e.length,s=e.slice();if(!r)return{t:j0,l:0};if(r==1){var a=new $i(e[0].s+1);return a[e[0].s]=1,{t:a,l:1}}e.sort(function(V,Q){return V.f-Q.f}),e.push({s:-1,f:25001});var o=e[0],l=e[1],c=0,h=1,p=2;for(e[0]={s:-1,f:o.f+l.f,l:o,r:l};h!=r-1;)o=e[e[c].f<e[p].f?c++:p++],l=e[c!=h&&e[c].f<e[p].f?c++:p++],e[h++]={s:-1,f:o.f+l.f,l:o,r:l};for(var g=s[0].s,i=1;i<r;++i)s[i].s>g&&(g=s[i].s);var d=new gi(g+1),v=Tu(e[h-1],d,0);if(v>t){var i=0,y=0,x=v-t,_=1<<x;for(s.sort(function(Q,J){return d[J.s]-d[Q.s]||Q.f-J.f});i<r;++i){var E=s[i].s;if(d[E]>t)y+=_-(1<<v-d[E]),d[E]=t;else break}for(y>>=x;y>0;){var O=s[i].s;d[O]<t?y-=1<<t-d[O]++-1:++i}for(;i>=0&&y;--i){var T=s[i].s;d[T]==t&&(--d[T],++y)}v=t}return{t:new $i(d),l:v}},Tu=function(n,t,e){return n.s==-1?Math.max(Tu(n.l,t,e+1),Tu(n.r,t,e+1)):t[n.s]=e},Tf=function(n){for(var t=n.length;t&&!n[--t];);for(var e=new gi(++t),i=0,r=n[0],s=1,a=function(l){e[i++]=l},o=1;o<=t;++o)if(n[o]==r&&o!=t)++s;else{if(!r&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(r),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(r);s=1,r=n[o]}return{c:e.subarray(0,i),n:t}},go=function(n,t){for(var e=0,i=0;i<t.length;++i)e+=n[i]*t[i];return e},O0=function(n,t,e){var i=e.length,r=E0(t+2);n[r]=i&255,n[r+1]=i>>8,n[r+2]=n[r]^255,n[r+3]=n[r+1]^255;for(var s=0;s<i;++s)n[r+s+4]=e[s];return(r+4+i)*8},Rf=function(n,t,e,i,r,s,a,o,l,c,h){kr(t,h++,e),++r[256];for(var p=Mh(r,15),g=p.t,d=p.l,v=Mh(s,15),y=v.t,x=v.l,_=Tf(g),E=_.c,O=_.n,T=Tf(y),V=T.c,Q=T.n,J=new gi(19),$=0;$<E.length;++$)++J[E[$]&31];for(var $=0;$<V.length;++$)++J[V[$]&31];for(var D=Mh(J,7),Z=D.t,L=D.l,R=19;R>4&&!Z[Of[R-1]];--R);var H=c+5<<3,W=go(r,zs)+go(s,xc)+a,et=go(r,g)+go(s,y)+a+14+3*R+go(J,Z)+2*J[16]+3*J[17]+7*J[18];if(l>=0&&H<=W&&H<=et)return O0(t,h,n.subarray(l,l+c));var ct,ot,rt,ht;if(kr(t,h,1+(et<W)),h+=2,et<W){ct=Po(g,d,0),ot=g,rt=Po(y,x,0),ht=y;var At=Po(Z,L,0);kr(t,h,O-257),kr(t,h+5,Q-1),kr(t,h+10,R-4),h+=14;for(var $=0;$<R;++$)kr(t,h+3*$,Z[Of[$]]);h+=3*R;for(var wt=[E,V],P=0;P<2;++P)for(var q=wt[P],$=0;$<q.length;++$){var z=q[$]&31;kr(t,h,At[z]),h+=Z[z],z>15&&(kr(t,h,q[$]>>5&127),h+=q[$]>>12)}}else ct=Kb,ot=zs,rt=Yb,ht=xc;for(var $=0;$<o;++$){var K=i[$];if(K>255){var z=K>>18&31;po(t,h,ct[z+257]),h+=ot[z+257],z>7&&(kr(t,h,K>>23&31),h+=nd[z]);var X=K&31;po(t,h,rt[X]),h+=ht[X],X>3&&(po(t,h,K>>5&8191),h+=id[X])}else po(t,h,ct[K]),h+=ot[K]}return po(t,h,ct[256]),h+ot[256]},Xb=new ed([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),j0=new $i(0),Zb=function(n,t,e,i,r,s){var a=s.z||n.length,o=new $i(i+a+5*(1+Math.ceil(a/7e3))+r),l=o.subarray(i,o.length-r),c=s.l,h=(s.r||0)&7;if(t){h&&(l[0]=s.r>>3);for(var p=Xb[t-1],g=p>>13,d=p&8191,v=(1<<e)-1,y=s.p||new gi(32768),x=s.h||new gi(v+1),_=Math.ceil(e/3),E=2*_,O=function(zt){return(n[zt]^n[zt+1]<<_^n[zt+2]<<E)&v},T=new ed(25e3),V=new gi(288),Q=new gi(32),J=0,$=0,D=s.i||0,Z=0,L=s.w||0,R=0;D+2<a;++D){var H=O(D),W=D&32767,et=x[H];if(y[W]=et,x[H]=W,L<=D){var ct=a-D;if((J>7e3||Z>24576)&&(ct>423||!c)){h=Rf(n,l,0,T,V,Q,$,Z,R,D-R,h),Z=J=$=0,R=D;for(var ot=0;ot<286;++ot)V[ot]=0;for(var ot=0;ot<30;++ot)Q[ot]=0}var rt=2,ht=0,At=d,wt=W-et&32767;if(ct>2&&H==O(D-wt))for(var P=Math.min(g,ct)-1,q=Math.min(32767,D),z=Math.min(258,ct);wt<=q&&--At&&W!=et;){if(n[D+rt]==n[D+rt-wt]){for(var K=0;K<z&&n[D+K]==n[D+K-wt];++K);if(K>rt){if(rt=K,ht=wt,K>P)break;for(var X=Math.min(wt,K-2),st=0,ot=0;ot<X;++ot){var ut=D-wt+ot&32767,ft=y[ut],vt=ut-ft&32767;vt>st&&(st=vt,et=ut)}}}W=et,et=y[W],wt+=W-et&32767}if(ht){T[Z++]=268435456|Ou[rt]<<18|jf[ht];var Nt=Ou[rt]&31,Ot=jf[ht]&31;$+=nd[Nt]+id[Ot],++V[257+Nt],++Q[Ot],L=D+rt,++J}else T[Z++]=n[D],++V[n[D]]}}for(D=Math.max(D,L);D<a;++D)T[Z++]=n[D],++V[n[D]];h=Rf(n,l,c,T,V,Q,$,Z,R,D-R,h),c||(s.r=h&7|l[h/8|0]<<3,h-=7,s.h=x,s.p=y,s.i=D,s.w=L)}else{for(var D=s.w||0;D<a+c;D+=65535){var jt=D+65535;jt>=a&&(l[h/8|0]=c,jt=a),h=O0(l,h+1,n.subarray(D,jt))}s.i=a}return Jb(o,0,i+E0(h)+r)},T0=function(){var n=1,t=0;return{p:function(e){for(var i=n,r=t,s=e.length|0,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)r+=i+=e[a];i=(i&65535)+15*(i>>16),r=(r&65535)+15*(r>>16)}n=i,t=r},d:function(){return n%=65521,t%=65521,(n&255)<<24|(n&65280)<<8|(t&255)<<8|t>>8}}},Qb=function(n,t,e,i,r){if(!r&&(r={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),a=new $i(s.length+n.length);a.set(s),a.set(n,s.length),n=a,r.w=s.length}return Zb(n,t.level==null?6:t.level,t.mem==null?r.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+t.mem,e,i,r)},R0=function(n,t,e){for(;e;++t)n[t]=e,e>>>=8},tv=function(n,t){var e=t.level,i=e==0?0:e<6?1:e==9?3:2;if(n[0]=120,n[1]=i<<6|(t.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,t.dictionary){var r=T0();r.p(t.dictionary),R0(n,2,r.d())}};function Ru(n,t){t||(t={});var e=T0();e.p(n);var i=Qb(n,t,t.dictionary?6:2,4);return tv(i,t),R0(i,i.length-4,e.d()),i}var ev=typeof TextDecoder<"u"&&new TextDecoder,nv=0;try{ev.decode(j0,{stream:!0}),nv=1}catch{}function iv(n){if(Array.isArray(n))return n}function rv(n,t){var e=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(e!=null){var i,r,s,a,o=[],l=!0,c=!1;try{if(s=(e=e.call(n)).next,t!==0)for(;!(l=(i=s.call(e)).done)&&(o.push(i.value),o.length!==t);l=!0);}catch(h){c=!0,r=h}finally{try{if(!l&&e.return!=null&&(a=e.return(),Object(a)!==a))return}finally{if(c)throw r}}return o}}function If(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,i=Array(t);e<t;e++)i[e]=n[e];return i}function sv(n,t){if(n){if(typeof n=="string")return If(n,t);var e={}.toString.call(n).slice(8,-1);return e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set"?Array.from(n):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?If(n,t):void 0}}function av(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Df(n,t){return iv(n)||rv(n,t)||sv(n,t)||av()}function Mf(n,t="utf8"){return new TextDecoder(t).decode(n)}const ov=new TextEncoder;function lv(n){return ov.encode(n)}const cv=1024*8,hv=(()=>{const n=new Uint8Array(4),t=new Uint32Array(n.buffer);return!((t[0]=1)&n[0])})(),Fh={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class rd{constructor(t=cv,e={}){Rt(this,"buffer");Rt(this,"byteLength");Rt(this,"byteOffset");Rt(this,"length");Rt(this,"offset");Rt(this,"lastWrittenByte");Rt(this,"littleEndian");Rt(this,"_data");Rt(this,"_mark");Rt(this,"_marks");let i=!1;typeof t=="number"?t=new ArrayBuffer(t):(i=!0,this.lastWrittenByte=t.byteLength);const r=e.offset?e.offset>>>0:0,s=t.byteLength-r;let a=r;(ArrayBuffer.isView(t)||t instanceof rd)&&(t.byteLength!==t.buffer.byteLength&&(a=t.byteOffset+r),t=t.buffer),i?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=t,this.length=s,this.byteLength=s,this.byteOffset=a,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,a,s),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const i=(this.offset+t)*2,r=new Uint8Array(i);r.set(new Uint8Array(this.buffer)),this.buffer=r.buffer,this.length=i,this.byteLength=i,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,e){const i=Fh[e].BYTES_PER_ELEMENT*t,r=this.byteOffset+this.offset,s=this.buffer.slice(r,r+i);if(this.littleEndian===hv&&e!=="uint8"&&e!=="int8"){const o=new Uint8Array(this.buffer.slice(r,r+i));o.reverse();const l=new Fh[e](o.buffer);return this.offset+=i,l.reverse(),l}const a=new Fh[e](s);return this.offset+=i,a}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let e="";for(let i=0;i<t;i++)e+=this.readChar();return e}readUtf8(t=1){return Mf(this.readBytes(t))}decodeText(t=1,e="utf8"){return Mf(this.readBytes(t),e)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let e=0;e<t.length;e++)this._data.setUint8(this.offset++,t[e]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let e=0;e<t.length;e++)this.writeUint8(t.charCodeAt(e));return this}writeUtf8(t){return this.writeBytes(lv(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Ia(n){let t=n.length;for(;--t>=0;)n[t]=0}const uv=3,dv=258,I0=29,fv=256,pv=fv+1+I0,D0=30,gv=512,mv=new Array((pv+2)*2);Ia(mv);const bv=new Array(D0*2);Ia(bv);const vv=new Array(gv);Ia(vv);const yv=new Array(dv-uv+1);Ia(yv);const wv=new Array(I0);Ia(wv);const _v=new Array(D0);Ia(_v);const xv=(n,t,e,i)=>{let r=n&65535|0,s=n>>>16&65535|0,a=0;for(;e!==0;){a=e>2e3?2e3:e,e-=a;do r=r+t[i++]|0,s=s+r|0;while(--a);r%=65521,s%=65521}return r|s<<16|0};var Iu=xv;const Sv=()=>{let n,t=[];for(var e=0;e<256;e++){n=e;for(var i=0;i<8;i++)n=n&1?3988292384^n>>>1:n>>>1;t[e]=n}return t},kv=new Uint32Array(Sv()),Av=(n,t,e,i)=>{const r=kv,s=i+e;n^=-1;for(let a=i;a<s;a++)n=n>>>8^r[(n^t[a])&255];return n^-1};var er=Av,Du={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},M0={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const Nv=(n,t)=>Object.prototype.hasOwnProperty.call(n,t);var Lv=function(n){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const e=t.shift();if(e){if(typeof e!="object")throw new TypeError(e+"must be non-object");for(const i in e)Nv(e,i)&&(n[i]=e[i])}}return n},Pv=n=>{let t=0;for(let i=0,r=n.length;i<r;i++)t+=n[i].length;const e=new Uint8Array(t);for(let i=0,r=0,s=n.length;i<s;i++){let a=n[i];e.set(a,r),r+=a.length}return e},F0={assign:Lv,flattenChunks:Pv};let B0=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{B0=!1}const zo=new Uint8Array(256);for(let n=0;n<256;n++)zo[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;zo[254]=zo[254]=1;var Cv=n=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(n);let t,e,i,r,s,a=n.length,o=0;for(r=0;r<a;r++)e=n.charCodeAt(r),(e&64512)===55296&&r+1<a&&(i=n.charCodeAt(r+1),(i&64512)===56320&&(e=65536+(e-55296<<10)+(i-56320),r++)),o+=e<128?1:e<2048?2:e<65536?3:4;for(t=new Uint8Array(o),s=0,r=0;s<o;r++)e=n.charCodeAt(r),(e&64512)===55296&&r+1<a&&(i=n.charCodeAt(r+1),(i&64512)===56320&&(e=65536+(e-55296<<10)+(i-56320),r++)),e<128?t[s++]=e:e<2048?(t[s++]=192|e>>>6,t[s++]=128|e&63):e<65536?(t[s++]=224|e>>>12,t[s++]=128|e>>>6&63,t[s++]=128|e&63):(t[s++]=240|e>>>18,t[s++]=128|e>>>12&63,t[s++]=128|e>>>6&63,t[s++]=128|e&63);return t};const Ev=(n,t)=>{if(t<65534&&n.subarray&&B0)return String.fromCharCode.apply(null,n.length===t?n:n.subarray(0,t));let e="";for(let i=0;i<t;i++)e+=String.fromCharCode(n[i]);return e};var Ov=(n,t)=>{const e=t||n.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,t));let i,r;const s=new Array(e*2);for(r=0,i=0;i<e;){let a=n[i++];if(a<128){s[r++]=a;continue}let o=zo[a];if(o>4){s[r++]=65533,i+=o-1;continue}for(a&=o===2?31:o===3?15:7;o>1&&i<e;)a=a<<6|n[i++]&63,o--;if(o>1){s[r++]=65533;continue}a<65536?s[r++]=a:(a-=65536,s[r++]=55296|a>>10&1023,s[r++]=56320|a&1023)}return Ev(s,r)},jv=(n,t)=>{t=t||n.length,t>n.length&&(t=n.length);let e=t-1;for(;e>=0&&(n[e]&192)===128;)e--;return e<0||e===0?t:e+zo[n[e]]>t?e:t},Mu={string2buf:Cv,buf2string:Ov,utf8border:jv};function Tv(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Rv=Tv;const ql=16209,Iv=16191;var Dv=function(t,e){let i,r,s,a,o,l,c,h,p,g,d,v,y,x,_,E,O,T,V,Q,J,$,D,Z;const L=t.state;i=t.next_in,D=t.input,r=i+(t.avail_in-5),s=t.next_out,Z=t.output,a=s-(e-t.avail_out),o=s+(t.avail_out-257),l=L.dmax,c=L.wsize,h=L.whave,p=L.wnext,g=L.window,d=L.hold,v=L.bits,y=L.lencode,x=L.distcode,_=(1<<L.lenbits)-1,E=(1<<L.distbits)-1;t:do{v<15&&(d+=D[i++]<<v,v+=8,d+=D[i++]<<v,v+=8),O=y[d&_];e:for(;;){if(T=O>>>24,d>>>=T,v-=T,T=O>>>16&255,T===0)Z[s++]=O&65535;else if(T&16){V=O&65535,T&=15,T&&(v<T&&(d+=D[i++]<<v,v+=8),V+=d&(1<<T)-1,d>>>=T,v-=T),v<15&&(d+=D[i++]<<v,v+=8,d+=D[i++]<<v,v+=8),O=x[d&E];n:for(;;){if(T=O>>>24,d>>>=T,v-=T,T=O>>>16&255,T&16){if(Q=O&65535,T&=15,v<T&&(d+=D[i++]<<v,v+=8,v<T&&(d+=D[i++]<<v,v+=8)),Q+=d&(1<<T)-1,Q>l){t.msg="invalid distance too far back",L.mode=ql;break t}if(d>>>=T,v-=T,T=s-a,Q>T){if(T=Q-T,T>h&&L.sane){t.msg="invalid distance too far back",L.mode=ql;break t}if(J=0,$=g,p===0){if(J+=c-T,T<V){V-=T;do Z[s++]=g[J++];while(--T);J=s-Q,$=Z}}else if(p<T){if(J+=c+p-T,T-=p,T<V){V-=T;do Z[s++]=g[J++];while(--T);if(J=0,p<V){T=p,V-=T;do Z[s++]=g[J++];while(--T);J=s-Q,$=Z}}}else if(J+=p-T,T<V){V-=T;do Z[s++]=g[J++];while(--T);J=s-Q,$=Z}for(;V>2;)Z[s++]=$[J++],Z[s++]=$[J++],Z[s++]=$[J++],V-=3;V&&(Z[s++]=$[J++],V>1&&(Z[s++]=$[J++]))}else{J=s-Q;do Z[s++]=Z[J++],Z[s++]=Z[J++],Z[s++]=Z[J++],V-=3;while(V>2);V&&(Z[s++]=Z[J++],V>1&&(Z[s++]=Z[J++]))}}else if(T&64){t.msg="invalid distance code",L.mode=ql;break t}else{O=x[(O&65535)+(d&(1<<T)-1)];continue n}break}}else if(T&64)if(T&32){L.mode=Iv;break t}else{t.msg="invalid literal/length code",L.mode=ql;break t}else{O=y[(O&65535)+(d&(1<<T)-1)];continue e}break}}while(i<r&&s<o);V=v>>3,i-=V,v-=V<<3,d&=(1<<v)-1,t.next_in=i,t.next_out=s,t.avail_in=i<r?5+(r-i):5-(i-r),t.avail_out=s<o?257+(o-s):257-(s-o),L.hold=d,L.bits=v};const da=15,Ff=852,Bf=592,Uf=0,Bh=1,qf=2,Mv=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Fv=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Bv=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Uv=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),qv=(n,t,e,i,r,s,a,o)=>{const l=o.bits;let c=0,h=0,p=0,g=0,d=0,v=0,y=0,x=0,_=0,E=0,O,T,V,Q,J,$=null,D;const Z=new Uint16Array(da+1),L=new Uint16Array(da+1);let R=null,H,W,et;for(c=0;c<=da;c++)Z[c]=0;for(h=0;h<i;h++)Z[t[e+h]]++;for(d=l,g=da;g>=1&&Z[g]===0;g--);if(d>g&&(d=g),g===0)return r[s++]=1<<24|64<<16|0,r[s++]=1<<24|64<<16|0,o.bits=1,0;for(p=1;p<g&&Z[p]===0;p++);for(d<p&&(d=p),x=1,c=1;c<=da;c++)if(x<<=1,x-=Z[c],x<0)return-1;if(x>0&&(n===Uf||g!==1))return-1;for(L[1]=0,c=1;c<da;c++)L[c+1]=L[c]+Z[c];for(h=0;h<i;h++)t[e+h]!==0&&(a[L[t[e+h]]++]=h);if(n===Uf?($=R=a,D=20):n===Bh?($=Mv,R=Fv,D=257):($=Bv,R=Uv,D=0),E=0,h=0,c=p,J=s,v=d,y=0,V=-1,_=1<<d,Q=_-1,n===Bh&&_>Ff||n===qf&&_>Bf)return 1;for(;;){H=c-y,a[h]+1<D?(W=0,et=a[h]):a[h]>=D?(W=R[a[h]-D],et=$[a[h]-D]):(W=96,et=0),O=1<<c-y,T=1<<v,p=T;do T-=O,r[J+(E>>y)+T]=H<<24|W<<16|et|0;while(T!==0);for(O=1<<c-1;E&O;)O>>=1;if(O!==0?(E&=O-1,E+=O):E=0,h++,--Z[c]===0){if(c===g)break;c=t[e+a[h]]}if(c>d&&(E&Q)!==V){for(y===0&&(y=d),J+=p,v=c-y,x=1<<v;v+y<g&&(x-=Z[v+y],!(x<=0));)v++,x<<=1;if(_+=1<<v,n===Bh&&_>Ff||n===qf&&_>Bf)return 1;V=E&Q,r[V]=d<<24|v<<16|J-s|0}}return E!==0&&(r[J+E]=c-y<<24|64<<16|0),o.bits=d,0};var Co=qv;const zv=0,U0=1,q0=2,{Z_FINISH:zf,Z_BLOCK:$v,Z_TREES:zl,Z_OK:$s,Z_STREAM_END:Hv,Z_NEED_DICT:Wv,Z_STREAM_ERROR:Ai,Z_DATA_ERROR:z0,Z_MEM_ERROR:$0,Z_BUF_ERROR:Vv,Z_DEFLATED:$f}=M0,zc=16180,Hf=16181,Wf=16182,Vf=16183,Gf=16184,Kf=16185,Yf=16186,Jf=16187,Xf=16188,Zf=16189,Sc=16190,Ar=16191,Uh=16192,Qf=16193,qh=16194,tp=16195,ep=16196,np=16197,ip=16198,$l=16199,Hl=16200,rp=16201,sp=16202,ap=16203,op=16204,lp=16205,zh=16206,cp=16207,hp=16208,Qe=16209,H0=16210,W0=16211,Gv=852,Kv=592,Yv=15,Jv=Yv,up=n=>(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24);function Xv(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Ws=n=>{if(!n)return 1;const t=n.state;return!t||t.strm!==n||t.mode<zc||t.mode>W0?1:0},V0=n=>{if(Ws(n))return Ai;const t=n.state;return n.total_in=n.total_out=t.total=0,n.msg="",t.wrap&&(n.adler=t.wrap&1),t.mode=zc,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(Gv),t.distcode=t.distdyn=new Int32Array(Kv),t.sane=1,t.back=-1,$s},G0=n=>{if(Ws(n))return Ai;const t=n.state;return t.wsize=0,t.whave=0,t.wnext=0,V0(n)},K0=(n,t)=>{let e;if(Ws(n))return Ai;const i=n.state;return t<0?(e=0,t=-t):(e=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?Ai:(i.window!==null&&i.wbits!==t&&(i.window=null),i.wrap=e,i.wbits=t,G0(n))},Y0=(n,t)=>{if(!n)return Ai;const e=new Xv;n.state=e,e.strm=n,e.window=null,e.mode=zc;const i=K0(n,t);return i!==$s&&(n.state=null),i},Zv=n=>Y0(n,Jv);let dp=!0,$h,Hh;const Qv=n=>{if(dp){$h=new Int32Array(512),Hh=new Int32Array(32);let t=0;for(;t<144;)n.lens[t++]=8;for(;t<256;)n.lens[t++]=9;for(;t<280;)n.lens[t++]=7;for(;t<288;)n.lens[t++]=8;for(Co(U0,n.lens,0,288,$h,0,n.work,{bits:9}),t=0;t<32;)n.lens[t++]=5;Co(q0,n.lens,0,32,Hh,0,n.work,{bits:5}),dp=!1}n.lencode=$h,n.lenbits=9,n.distcode=Hh,n.distbits=5},J0=(n,t,e,i)=>{let r;const s=n.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),i>=s.wsize?(s.window.set(t.subarray(e-s.wsize,e),0),s.wnext=0,s.whave=s.wsize):(r=s.wsize-s.wnext,r>i&&(r=i),s.window.set(t.subarray(e-i,e-i+r),s.wnext),i-=r,i?(s.window.set(t.subarray(e-i,e),0),s.wnext=i,s.whave=s.wsize):(s.wnext+=r,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=r))),0},ty=(n,t)=>{let e,i,r,s,a,o,l,c,h,p,g,d,v,y,x=0,_,E,O,T,V,Q,J,$;const D=new Uint8Array(4);let Z,L;const R=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Ws(n)||!n.output||!n.input&&n.avail_in!==0)return Ai;e=n.state,e.mode===Ar&&(e.mode=Uh),a=n.next_out,r=n.output,l=n.avail_out,s=n.next_in,i=n.input,o=n.avail_in,c=e.hold,h=e.bits,p=o,g=l,$=$s;t:for(;;)switch(e.mode){case zc:if(e.wrap===0){e.mode=Uh;break}for(;h<16;){if(o===0)break t;o--,c+=i[s++]<<h,h+=8}if(e.wrap&2&&c===35615){e.wbits===0&&(e.wbits=15),e.check=0,D[0]=c&255,D[1]=c>>>8&255,e.check=er(e.check,D,2,0),c=0,h=0,e.mode=Hf;break}if(e.head&&(e.head.done=!1),!(e.wrap&1)||(((c&255)<<8)+(c>>8))%31){n.msg="incorrect header check",e.mode=Qe;break}if((c&15)!==$f){n.msg="unknown compression method",e.mode=Qe;break}if(c>>>=4,h-=4,J=(c&15)+8,e.wbits===0&&(e.wbits=J),J>15||J>e.wbits){n.msg="invalid window size",e.mode=Qe;break}e.dmax=1<<e.wbits,e.flags=0,n.adler=e.check=1,e.mode=c&512?Zf:Ar,c=0,h=0;break;case Hf:for(;h<16;){if(o===0)break t;o--,c+=i[s++]<<h,h+=8}if(e.flags=c,(e.flags&255)!==$f){n.msg="unknown compression method",e.mode=Qe;break}if(e.flags&57344){n.msg="unknown header flags set",e.mode=Qe;break}e.head&&(e.head.text=c>>8&1),e.flags&512&&e.wrap&4&&(D[0]=c&255,D[1]=c>>>8&255,e.check=er(e.check,D,2,0)),c=0,h=0,e.mode=Wf;case Wf:for(;h<32;){if(o===0)break t;o--,c+=i[s++]<<h,h+=8}e.head&&(e.head.time=c),e.flags&512&&e.wrap&4&&(D[0]=c&255,D[1]=c>>>8&255,D[2]=c>>>16&255,D[3]=c>>>24&255,e.check=er(e.check,D,4,0)),c=0,h=0,e.mode=Vf;case Vf:for(;h<16;){if(o===0)break t;o--,c+=i[s++]<<h,h+=8}e.head&&(e.head.xflags=c&255,e.head.os=c>>8),e.flags&512&&e.wrap&4&&(D[0]=c&255,D[1]=c>>>8&255,e.check=er(e.check,D,2,0)),c=0,h=0,e.mode=Gf;case Gf:if(e.flags&1024){for(;h<16;){if(o===0)break t;o--,c+=i[s++]<<h,h+=8}e.length=c,e.head&&(e.head.extra_len=c),e.flags&512&&e.wrap&4&&(D[0]=c&255,D[1]=c>>>8&255,e.check=er(e.check,D,2,0)),c=0,h=0}else e.head&&(e.head.extra=null);e.mode=Kf;case Kf:if(e.flags&1024&&(d=e.length,d>o&&(d=o),d&&(e.head&&(J=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Uint8Array(e.head.extra_len)),e.head.extra.set(i.subarray(s,s+d),J)),e.flags&512&&e.wrap&4&&(e.check=er(e.check,i,d,s)),o-=d,s+=d,e.length-=d),e.length))break t;e.length=0,e.mode=Yf;case Yf:if(e.flags&2048){if(o===0)break t;d=0;do J=i[s+d++],e.head&&J&&e.length<65536&&(e.head.name+=String.fromCharCode(J));while(J&&d<o);if(e.flags&512&&e.wrap&4&&(e.check=er(e.check,i,d,s)),o-=d,s+=d,J)break t}else e.head&&(e.head.name=null);e.length=0,e.mode=Jf;case Jf:if(e.flags&4096){if(o===0)break t;d=0;do J=i[s+d++],e.head&&J&&e.length<65536&&(e.head.comment+=String.fromCharCode(J));while(J&&d<o);if(e.flags&512&&e.wrap&4&&(e.check=er(e.check,i,d,s)),o-=d,s+=d,J)break t}else e.head&&(e.head.comment=null);e.mode=Xf;case Xf:if(e.flags&512){for(;h<16;){if(o===0)break t;o--,c+=i[s++]<<h,h+=8}if(e.wrap&4&&c!==(e.check&65535)){n.msg="header crc mismatch",e.mode=Qe;break}c=0,h=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),n.adler=e.check=0,e.mode=Ar;break;case Zf:for(;h<32;){if(o===0)break t;o--,c+=i[s++]<<h,h+=8}n.adler=e.check=up(c),c=0,h=0,e.mode=Sc;case Sc:if(e.havedict===0)return n.next_out=a,n.avail_out=l,n.next_in=s,n.avail_in=o,e.hold=c,e.bits=h,Wv;n.adler=e.check=1,e.mode=Ar;case Ar:if(t===$v||t===zl)break t;case Uh:if(e.last){c>>>=h&7,h-=h&7,e.mode=zh;break}for(;h<3;){if(o===0)break t;o--,c+=i[s++]<<h,h+=8}switch(e.last=c&1,c>>>=1,h-=1,c&3){case 0:e.mode=Qf;break;case 1:if(Qv(e),e.mode=$l,t===zl){c>>>=2,h-=2;break t}break;case 2:e.mode=ep;break;case 3:n.msg="invalid block type",e.mode=Qe}c>>>=2,h-=2;break;case Qf:for(c>>>=h&7,h-=h&7;h<32;){if(o===0)break t;o--,c+=i[s++]<<h,h+=8}if((c&65535)!==(c>>>16^65535)){n.msg="invalid stored block lengths",e.mode=Qe;break}if(e.length=c&65535,c=0,h=0,e.mode=qh,t===zl)break t;case qh:e.mode=tp;case tp:if(d=e.length,d){if(d>o&&(d=o),d>l&&(d=l),d===0)break t;r.set(i.subarray(s,s+d),a),o-=d,s+=d,l-=d,a+=d,e.length-=d;break}e.mode=Ar;break;case ep:for(;h<14;){if(o===0)break t;o--,c+=i[s++]<<h,h+=8}if(e.nlen=(c&31)+257,c>>>=5,h-=5,e.ndist=(c&31)+1,c>>>=5,h-=5,e.ncode=(c&15)+4,c>>>=4,h-=4,e.nlen>286||e.ndist>30){n.msg="too many length or distance symbols",e.mode=Qe;break}e.have=0,e.mode=np;case np:for(;e.have<e.ncode;){for(;h<3;){if(o===0)break t;o--,c+=i[s++]<<h,h+=8}e.lens[R[e.have++]]=c&7,c>>>=3,h-=3}for(;e.have<19;)e.lens[R[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,Z={bits:e.lenbits},$=Co(zv,e.lens,0,19,e.lencode,0,e.work,Z),e.lenbits=Z.bits,$){n.msg="invalid code lengths set",e.mode=Qe;break}e.have=0,e.mode=ip;case ip:for(;e.have<e.nlen+e.ndist;){for(;x=e.lencode[c&(1<<e.lenbits)-1],_=x>>>24,E=x>>>16&255,O=x&65535,!(_<=h);){if(o===0)break t;o--,c+=i[s++]<<h,h+=8}if(O<16)c>>>=_,h-=_,e.lens[e.have++]=O;else{if(O===16){for(L=_+2;h<L;){if(o===0)break t;o--,c+=i[s++]<<h,h+=8}if(c>>>=_,h-=_,e.have===0){n.msg="invalid bit length repeat",e.mode=Qe;break}J=e.lens[e.have-1],d=3+(c&3),c>>>=2,h-=2}else if(O===17){for(L=_+3;h<L;){if(o===0)break t;o--,c+=i[s++]<<h,h+=8}c>>>=_,h-=_,J=0,d=3+(c&7),c>>>=3,h-=3}else{for(L=_+7;h<L;){if(o===0)break t;o--,c+=i[s++]<<h,h+=8}c>>>=_,h-=_,J=0,d=11+(c&127),c>>>=7,h-=7}if(e.have+d>e.nlen+e.ndist){n.msg="invalid bit length repeat",e.mode=Qe;break}for(;d--;)e.lens[e.have++]=J}}if(e.mode===Qe)break;if(e.lens[256]===0){n.msg="invalid code -- missing end-of-block",e.mode=Qe;break}if(e.lenbits=9,Z={bits:e.lenbits},$=Co(U0,e.lens,0,e.nlen,e.lencode,0,e.work,Z),e.lenbits=Z.bits,$){n.msg="invalid literal/lengths set",e.mode=Qe;break}if(e.distbits=6,e.distcode=e.distdyn,Z={bits:e.distbits},$=Co(q0,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,Z),e.distbits=Z.bits,$){n.msg="invalid distances set",e.mode=Qe;break}if(e.mode=$l,t===zl)break t;case $l:e.mode=Hl;case Hl:if(o>=6&&l>=258){n.next_out=a,n.avail_out=l,n.next_in=s,n.avail_in=o,e.hold=c,e.bits=h,Dv(n,g),a=n.next_out,r=n.output,l=n.avail_out,s=n.next_in,i=n.input,o=n.avail_in,c=e.hold,h=e.bits,e.mode===Ar&&(e.back=-1);break}for(e.back=0;x=e.lencode[c&(1<<e.lenbits)-1],_=x>>>24,E=x>>>16&255,O=x&65535,!(_<=h);){if(o===0)break t;o--,c+=i[s++]<<h,h+=8}if(E&&!(E&240)){for(T=_,V=E,Q=O;x=e.lencode[Q+((c&(1<<T+V)-1)>>T)],_=x>>>24,E=x>>>16&255,O=x&65535,!(T+_<=h);){if(o===0)break t;o--,c+=i[s++]<<h,h+=8}c>>>=T,h-=T,e.back+=T}if(c>>>=_,h-=_,e.back+=_,e.length=O,E===0){e.mode=lp;break}if(E&32){e.back=-1,e.mode=Ar;break}if(E&64){n.msg="invalid literal/length code",e.mode=Qe;break}e.extra=E&15,e.mode=rp;case rp:if(e.extra){for(L=e.extra;h<L;){if(o===0)break t;o--,c+=i[s++]<<h,h+=8}e.length+=c&(1<<e.extra)-1,c>>>=e.extra,h-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=sp;case sp:for(;x=e.distcode[c&(1<<e.distbits)-1],_=x>>>24,E=x>>>16&255,O=x&65535,!(_<=h);){if(o===0)break t;o--,c+=i[s++]<<h,h+=8}if(!(E&240)){for(T=_,V=E,Q=O;x=e.distcode[Q+((c&(1<<T+V)-1)>>T)],_=x>>>24,E=x>>>16&255,O=x&65535,!(T+_<=h);){if(o===0)break t;o--,c+=i[s++]<<h,h+=8}c>>>=T,h-=T,e.back+=T}if(c>>>=_,h-=_,e.back+=_,E&64){n.msg="invalid distance code",e.mode=Qe;break}e.offset=O,e.extra=E&15,e.mode=ap;case ap:if(e.extra){for(L=e.extra;h<L;){if(o===0)break t;o--,c+=i[s++]<<h,h+=8}e.offset+=c&(1<<e.extra)-1,c>>>=e.extra,h-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){n.msg="invalid distance too far back",e.mode=Qe;break}e.mode=op;case op:if(l===0)break t;if(d=g-l,e.offset>d){if(d=e.offset-d,d>e.whave&&e.sane){n.msg="invalid distance too far back",e.mode=Qe;break}d>e.wnext?(d-=e.wnext,v=e.wsize-d):v=e.wnext-d,d>e.length&&(d=e.length),y=e.window}else y=r,v=a-e.offset,d=e.length;d>l&&(d=l),l-=d,e.length-=d;do r[a++]=y[v++];while(--d);e.length===0&&(e.mode=Hl);break;case lp:if(l===0)break t;r[a++]=e.length,l--,e.mode=Hl;break;case zh:if(e.wrap){for(;h<32;){if(o===0)break t;o--,c|=i[s++]<<h,h+=8}if(g-=l,n.total_out+=g,e.total+=g,e.wrap&4&&g&&(n.adler=e.check=e.flags?er(e.check,r,g,a-g):Iu(e.check,r,g,a-g)),g=l,e.wrap&4&&(e.flags?c:up(c))!==e.check){n.msg="incorrect data check",e.mode=Qe;break}c=0,h=0}e.mode=cp;case cp:if(e.wrap&&e.flags){for(;h<32;){if(o===0)break t;o--,c+=i[s++]<<h,h+=8}if(e.wrap&4&&c!==(e.total&4294967295)){n.msg="incorrect length check",e.mode=Qe;break}c=0,h=0}e.mode=hp;case hp:$=Hv;break t;case Qe:$=z0;break t;case H0:return $0;case W0:default:return Ai}return n.next_out=a,n.avail_out=l,n.next_in=s,n.avail_in=o,e.hold=c,e.bits=h,(e.wsize||g!==n.avail_out&&e.mode<Qe&&(e.mode<zh||t!==zf))&&J0(n,n.output,n.next_out,g-n.avail_out),p-=n.avail_in,g-=n.avail_out,n.total_in+=p,n.total_out+=g,e.total+=g,e.wrap&4&&g&&(n.adler=e.check=e.flags?er(e.check,r,g,n.next_out-g):Iu(e.check,r,g,n.next_out-g)),n.data_type=e.bits+(e.last?64:0)+(e.mode===Ar?128:0)+(e.mode===$l||e.mode===qh?256:0),(p===0&&g===0||t===zf)&&$===$s&&($=Vv),$},ey=n=>{if(Ws(n))return Ai;let t=n.state;return t.window&&(t.window=null),n.state=null,$s},ny=(n,t)=>{if(Ws(n))return Ai;const e=n.state;return e.wrap&2?(e.head=t,t.done=!1,$s):Ai},iy=(n,t)=>{const e=t.length;let i,r,s;return Ws(n)||(i=n.state,i.wrap!==0&&i.mode!==Sc)?Ai:i.mode===Sc&&(r=1,r=Iu(r,t,e,0),r!==i.check)?z0:(s=J0(n,t,e,e),s?(i.mode=H0,$0):(i.havedict=1,$s))};var ry=G0,sy=K0,ay=V0,oy=Zv,ly=Y0,cy=ty,hy=ey,uy=ny,dy=iy,fy="pako inflate (from Nodeca project)",Er={inflateReset:ry,inflateReset2:sy,inflateResetKeep:ay,inflateInit:oy,inflateInit2:ly,inflate:cy,inflateEnd:hy,inflateGetHeader:uy,inflateSetDictionary:dy,inflateInfo:fy};function py(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var gy=py;const X0=Object.prototype.toString,{Z_NO_FLUSH:my,Z_FINISH:by,Z_OK:$o,Z_STREAM_END:Wh,Z_NEED_DICT:Vh,Z_STREAM_ERROR:vy,Z_DATA_ERROR:fp,Z_MEM_ERROR:yy}=M0;function Jo(n){this.options=F0.assign({chunkSize:1024*64,windowBits:15,to:""},n||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(n&&n.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Rv,this.strm.avail_out=0;let e=Er.inflateInit2(this.strm,t.windowBits);if(e!==$o)throw new Error(Du[e]);if(this.header=new gy,Er.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=Mu.string2buf(t.dictionary):X0.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(e=Er.inflateSetDictionary(this.strm,t.dictionary),e!==$o)))throw new Error(Du[e])}Jo.prototype.push=function(n,t){const e=this.strm,i=this.options.chunkSize,r=this.options.dictionary;let s,a,o;if(this.ended)return!1;for(t===~~t?a=t:a=t===!0?by:my,X0.call(n)==="[object ArrayBuffer]"?e.input=new Uint8Array(n):e.input=n,e.next_in=0,e.avail_in=e.input.length;;){for(e.avail_out===0&&(e.output=new Uint8Array(i),e.next_out=0,e.avail_out=i),s=Er.inflate(e,a),s===Vh&&r&&(s=Er.inflateSetDictionary(e,r),s===$o?s=Er.inflate(e,a):s===fp&&(s=Vh));e.avail_in>0&&s===Wh&&e.state.wrap>0&&n[e.next_in]!==0;)Er.inflateReset(e),s=Er.inflate(e,a);switch(s){case vy:case fp:case Vh:case yy:return this.onEnd(s),this.ended=!0,!1}if(o=e.avail_out,e.next_out&&(e.avail_out===0||s===Wh))if(this.options.to==="string"){let l=Mu.utf8border(e.output,e.next_out),c=e.next_out-l,h=Mu.buf2string(e.output,l);e.next_out=c,e.avail_out=i-c,c&&e.output.set(e.output.subarray(l,l+c),0),this.onData(h)}else this.onData(e.output.length===e.next_out?e.output:e.output.subarray(0,e.next_out));if(!(s===$o&&o===0)){if(s===Wh)return s=Er.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(e.avail_in===0)break}}return!0};Jo.prototype.onData=function(n){this.chunks.push(n)};Jo.prototype.onEnd=function(n){n===$o&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=F0.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function wy(n,t){const e=new Jo(t);if(e.push(n),e.err)throw e.msg||Du[e.err];return e.result}var _y=Jo,xy=wy,Sy={Inflate:_y,inflate:xy};const{Inflate:ky,inflate:Ay}=Sy;var pp=ky,Ny=Ay;const Z0=[];for(let n=0;n<256;n++){let t=n;for(let e=0;e<8;e++)t&1?t=3988292384^t>>>1:t=t>>>1;Z0[n]=t}const gp=4294967295;function Ly(n,t,e){let i=n;for(let r=0;r<e;r++)i=Z0[(i^t[r])&255]^i>>>8;return i}function Py(n,t){return(Ly(gp,n,t)^gp)>>>0}function mp(n,t,e){const i=n.readUint32(),r=Py(new Uint8Array(n.buffer,n.byteOffset+n.offset-t-4,t),t);if(r!==i)throw new Error(`CRC mismatch for chunk ${e}. Expected ${i}, found ${r}`)}function Q0(n,t,e){for(let i=0;i<e;i++)t[i]=n[i]}function tm(n,t,e,i){let r=0;for(;r<i;r++)t[r]=n[r];for(;r<e;r++)t[r]=n[r]+t[r-i]&255}function em(n,t,e,i){let r=0;if(e.length===0)for(;r<i;r++)t[r]=n[r];else for(;r<i;r++)t[r]=n[r]+e[r]&255}function nm(n,t,e,i,r){let s=0;if(e.length===0){for(;s<r;s++)t[s]=n[s];for(;s<i;s++)t[s]=n[s]+(t[s-r]>>1)&255}else{for(;s<r;s++)t[s]=n[s]+(e[s]>>1)&255;for(;s<i;s++)t[s]=n[s]+(t[s-r]+e[s]>>1)&255}}function im(n,t,e,i,r){let s=0;if(e.length===0){for(;s<r;s++)t[s]=n[s];for(;s<i;s++)t[s]=n[s]+t[s-r]&255}else{for(;s<r;s++)t[s]=n[s]+e[s]&255;for(;s<i;s++)t[s]=n[s]+Cy(t[s-r],e[s],e[s-r])&255}}function Cy(n,t,e){const i=n+t-e,r=Math.abs(i-n),s=Math.abs(i-t),a=Math.abs(i-e);return r<=s&&r<=a?n:s<=a?t:e}function Ey(n,t,e,i,r,s){switch(n){case 0:Q0(t,e,r);break;case 1:tm(t,e,r,s);break;case 2:em(t,e,i,r);break;case 3:nm(t,e,i,r,s);break;case 4:im(t,e,i,r,s);break;default:throw new Error(`Unsupported filter: ${n}`)}}const Oy=new Uint16Array([255]),jy=new Uint8Array(Oy.buffer),Ty=jy[0]===255;function Ry(n){const{data:t,width:e,height:i,channels:r,depth:s}=n,a=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(s/8)*r,l=new Uint8Array(i*e*o);let c=0;for(let h=0;h<7;h++){const p=a[h],g=Math.ceil((e-p.x)/p.xStep),d=Math.ceil((i-p.y)/p.yStep);if(g<=0||d<=0)continue;const v=g*o,y=new Uint8Array(v);for(let x=0;x<d;x++){const _=t[c++],E=t.subarray(c,c+v);c+=v;const O=new Uint8Array(v);Ey(_,E,O,y,v,o),y.set(O);for(let T=0;T<g;T++){const V=p.x+T*p.xStep,Q=p.y+x*p.yStep;if(!(V>=e||Q>=i))for(let J=0;J<o;J++)l[(Q*e+V)*o+J]=O[T*o+J]}}}if(s===16){const h=new Uint16Array(l.buffer);if(Ty)for(let p=0;p<h.length;p++)h[p]=Iy(h[p]);return h}else return l}function Iy(n){return(n&255)<<8|n>>8&255}const Dy=new Uint16Array([255]),My=new Uint8Array(Dy.buffer),Fy=My[0]===255,By=new Uint8Array(0);function bp(n){const{data:t,width:e,height:i,channels:r,depth:s}=n,a=Math.ceil(s/8)*r,o=Math.ceil(s/8*r*e),l=new Uint8Array(i*o);let c=By,h=0,p,g;for(let d=0;d<i;d++){switch(p=t.subarray(h+1,h+1+o),g=l.subarray(d*o,(d+1)*o),t[h]){case 0:Q0(p,g,o);break;case 1:tm(p,g,o,a);break;case 2:em(p,g,c,o);break;case 3:nm(p,g,c,o,a);break;case 4:im(p,g,c,o,a);break;default:throw new Error(`Unsupported filter: ${t[h]}`)}c=g,h+=o+1}if(s===16){const d=new Uint16Array(l.buffer);if(Fy)for(let v=0;v<d.length;v++)d[v]=Uy(d[v]);return d}else return l}function Uy(n){return(n&255)<<8|n>>8&255}const oc=Uint8Array.of(137,80,78,71,13,10,26,10);function vp(n){if(!qy(n.readBytes(oc.length)))throw new Error("wrong PNG signature")}function qy(n){if(n.length<oc.length)return!1;for(let t=0;t<oc.length;t++)if(n[t]!==oc[t])return!1;return!0}const zy="tEXt",$y=0,rm=new TextDecoder("latin1");function Hy(n){if(Vy(n),n.length===0||n.length>79)throw new Error("keyword length must be between 1 and 79")}const Wy=/^[\u0000-\u00FF]*$/;function Vy(n){if(!Wy.test(n))throw new Error("invalid latin1 text")}function Gy(n,t,e){const i=sm(t);n[i]=Ky(t,e-i.length-1)}function sm(n){for(n.mark();n.readByte()!==$y;);const t=n.offset;n.reset();const e=rm.decode(n.readBytes(t-n.offset-1));return n.skip(1),Hy(e),e}function Ky(n,t){return rm.decode(n.readBytes(t))}const di={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},Gh={UNKNOWN:-1,DEFLATE:0},yp={UNKNOWN:-1,ADAPTIVE:0},Kh={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Wl={NONE:0,BACKGROUND:1,PREVIOUS:2},Yh={SOURCE:0,OVER:1};class Yy extends rd{constructor(e,i={}){super(e);Rt(this,"_checkCrc");Rt(this,"_inflator");Rt(this,"_png");Rt(this,"_apng");Rt(this,"_end");Rt(this,"_hasPalette");Rt(this,"_palette");Rt(this,"_hasTransparency");Rt(this,"_transparency");Rt(this,"_compressionMethod");Rt(this,"_filterMethod");Rt(this,"_interlaceMethod");Rt(this,"_colorType");Rt(this,"_isAnimated");Rt(this,"_numberOfFrames");Rt(this,"_numberOfPlays");Rt(this,"_frames");Rt(this,"_writingDataChunks");const{checkCrc:r=!1}=i;this._checkCrc=r,this._inflator=new pp,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=Gh.UNKNOWN,this._filterMethod=yp.UNKNOWN,this._interlaceMethod=Kh.UNKNOWN,this._colorType=di.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(vp(this);!this._end;){const e=this.readUint32(),i=this.readChars(4);this.decodeChunk(e,i)}return this.decodeImage(),this._png}decodeApng(){for(vp(this);!this._end;){const e=this.readUint32(),i=this.readChars(4);this.decodeApngChunk(e,i)}return this.decodeApngImage(),this._apng}decodeChunk(e,i){const r=this.offset;switch(i){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case zy:Gy(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${i}`);this._checkCrc?mp(this,e+4,i):this.skip(4)}decodeApngChunk(e,i){const r=this.offset;switch(i!=="fdAT"&&i!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),i){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,i),this.offset=r+e;break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${i}`);this._checkCrc?mp(this,e+4,i):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=Jy(this.readUint8());const i=this.readUint8();this._colorType=i;let r;switch(i){case di.GREYSCALE:r=1;break;case di.TRUECOLOUR:r=3;break;case di.INDEXED_COLOUR:r=1;break;case di.GREYSCALE_ALPHA:r=2;break;case di.TRUECOLOUR_ALPHA:r=4;break;case di.UNKNOWN:default:throw new Error(`Unknown color type: ${i}`)}if(this._png.channels=r,this._compressionMethod=this.readUint8(),this._compressionMethod!==Gh.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const i=e/3;this._hasPalette=!0;const r=[];this._palette=r;for(let s=0;s<i;s++)r.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const i=e,r=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,r,i)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let i=e,r=this.offset+this.byteOffset;if(r+=4,i-=4,this._inflator.push(new Uint8Array(this.buffer,r,i)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case di.GREYSCALE:case di.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let i=0;i<e/2;i++)this._transparency[i]=this.readUint16();break}case di.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let i=0;for(;i<e;i++){const r=this.readByte();this._palette[i].push(r)}for(;i<this._palette.length;i++)this._palette[i].push(255);break}case di.UNKNOWN:case di.GREYSCALE_ALPHA:case di.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){const i=sm(this),r=this.readUint8();if(r!==Gh.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${r}`);const s=this.readBytes(e-i.length-2);this._png.iccEmbeddedProfile={name:i,profile:Ny(s)}}decodepHYs(){const e=this.readUint32(),i=this.readUint32(),r=this.readByte();this._png.resolution={x:e,y:i,unit:r}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const i={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},r=this._frames.at(e);if(r){if(r.data=bp({data:r.data,width:r.width,height:r.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||r.xOffset===0&&r.yOffset===0&&r.width===this._png.width&&r.height===this._png.height)i.data=r.data;else{const s=this._apng.frames.at(e-1);this.disposeFrame(r,s,i),this.addFrameDataToCanvas(i,r)}this._apng.frames.push(i)}}return this._apng}disposeFrame(e,i,r){switch(e.disposeOp){case Wl.NONE:break;case Wl.BACKGROUND:for(let s=0;s<this._png.height;s++)for(let a=0;a<this._png.width;a++){const o=(s*e.width+a)*this._png.channels;for(let l=0;l<this._png.channels;l++)r.data[o+l]=0}break;case Wl.PREVIOUS:r.data.set(i.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,i){const r=1<<this._png.depth,s=(a,o)=>{const l=((a+i.yOffset)*this._png.width+i.xOffset+o)*this._png.channels,c=(a*i.width+o)*this._png.channels;return{index:l,frameIndex:c}};switch(i.blendOp){case Yh.SOURCE:for(let a=0;a<i.height;a++)for(let o=0;o<i.width;o++){const{index:l,frameIndex:c}=s(a,o);for(let h=0;h<this._png.channels;h++)e.data[l+h]=i.data[c+h]}break;case Yh.OVER:for(let a=0;a<i.height;a++)for(let o=0;o<i.width;o++){const{index:l,frameIndex:c}=s(a,o);for(let h=0;h<this._png.channels;h++){const p=i.data[c+this._png.channels-1]/r,g=h%(this._png.channels-1)===0?1:i.data[c+h],d=Math.floor(p*g+(1-p)*e.data[l+h]);e.data[l+h]+=d}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var i;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._isAnimated?((i=this._frames)==null?void 0:i.at(0)).data:this._inflator.result;if(this._filterMethod!==yp.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===Kh.NO_INTERLACE)this._png.data=bp({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===Kh.ADAM7)this._png.data=Ry({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,i=this._frames.at(-1);i?i.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Wl.NONE,blendOp:Yh.SOURCE,data:e}),this._inflator=new pp,this._writingDataChunks=!1}}function Jy(n){if(n!==1&&n!==2&&n!==4&&n!==8&&n!==16)throw new Error(`invalid bit depth: ${n}`);return n}var wp;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.METRE=1]="METRE"})(wp||(wp={}));function Xy(n,t){return new Yy(n,t).decode()}var oe=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Jh(){oe.console&&typeof oe.console.log=="function"&&oe.console.log.apply(oe.console,arguments)}var $e={log:Jh,warn:function(n){oe.console&&(typeof oe.console.warn=="function"?oe.console.warn.apply(oe.console,arguments):Jh.call(null,arguments))},error:function(n){oe.console&&(typeof oe.console.error=="function"?oe.console.error.apply(oe.console,arguments):Jh(n))}};function Xh(n,t,e){var i=new XMLHttpRequest;i.open("GET",n),i.responseType="blob",i.onload=function(){js(i.response,t,e)},i.onerror=function(){$e.error("could not download file")},i.send()}function _p(n){var t=new XMLHttpRequest;t.open("HEAD",n,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Vl(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(t)}}var js=oe.saveAs||((typeof window>"u"?"undefined":Fe(window))!=="object"||window!==oe?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,t,e){var i=oe.URL||oe.webkitURL,r=document.createElement("a");t=t||n.name||"download",r.download=t,r.rel="noopener",typeof n=="string"?(r.href=n,r.origin!==location.origin?_p(r.href)?Xh(n,t,e):Vl(r,r.target="_blank"):Vl(r)):(r.href=i.createObjectURL(n),setTimeout(function(){i.revokeObjectURL(r.href)},4e4),setTimeout(function(){Vl(r)},0))}:"msSaveOrOpenBlob"in navigator?function(n,t,e){if(t=t||n.name||"download",typeof n=="string")if(_p(n))Xh(n,t,e);else{var i=document.createElement("a");i.href=n,i.target="_blank",setTimeout(function(){Vl(i)})}else navigator.msSaveOrOpenBlob(function(r,s){return s===void 0?s={autoBom:!1}:Fe(s)!=="object"&&($e.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(r.type)?new Blob(["\uFEFF",r],{type:r.type}):r}(n,e),t)}:function(n,t,e,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),typeof n=="string")return Xh(n,t,e);var r=n.type==="application/octet-stream",s=/constructor/i.test(oe.HTMLElement)||oe.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||r&&s)&&(typeof FileReader>"u"?"undefined":Fe(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var h=o.result;h=a?h:h.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=h:location=h,i=null},o.readAsDataURL(n)}else{var l=oe.URL||oe.webkitURL,c=l.createObjectURL(n);i?i.location=c:location.href=c,i=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function am(n){var t;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var e=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],i=0;i<e.length;i++){var r=e[i].re,s=e[i].process,a=r.exec(n);a&&(t=s(a),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+o+l+c}}var lc=oe.atob.bind(oe),xp=oe.btoa.bind(oe);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Zh(n,t){var e=n[0],i=n[1],r=n[2],s=n[3];e=Bn(e,i,r,s,t[0],7,-680876936),s=Bn(s,e,i,r,t[1],12,-389564586),r=Bn(r,s,e,i,t[2],17,606105819),i=Bn(i,r,s,e,t[3],22,-1044525330),e=Bn(e,i,r,s,t[4],7,-176418897),s=Bn(s,e,i,r,t[5],12,1200080426),r=Bn(r,s,e,i,t[6],17,-1473231341),i=Bn(i,r,s,e,t[7],22,-45705983),e=Bn(e,i,r,s,t[8],7,1770035416),s=Bn(s,e,i,r,t[9],12,-1958414417),r=Bn(r,s,e,i,t[10],17,-42063),i=Bn(i,r,s,e,t[11],22,-1990404162),e=Bn(e,i,r,s,t[12],7,1804603682),s=Bn(s,e,i,r,t[13],12,-40341101),r=Bn(r,s,e,i,t[14],17,-1502002290),e=Un(e,i=Bn(i,r,s,e,t[15],22,1236535329),r,s,t[1],5,-165796510),s=Un(s,e,i,r,t[6],9,-1069501632),r=Un(r,s,e,i,t[11],14,643717713),i=Un(i,r,s,e,t[0],20,-373897302),e=Un(e,i,r,s,t[5],5,-701558691),s=Un(s,e,i,r,t[10],9,38016083),r=Un(r,s,e,i,t[15],14,-660478335),i=Un(i,r,s,e,t[4],20,-405537848),e=Un(e,i,r,s,t[9],5,568446438),s=Un(s,e,i,r,t[14],9,-1019803690),r=Un(r,s,e,i,t[3],14,-187363961),i=Un(i,r,s,e,t[8],20,1163531501),e=Un(e,i,r,s,t[13],5,-1444681467),s=Un(s,e,i,r,t[2],9,-51403784),r=Un(r,s,e,i,t[7],14,1735328473),e=qn(e,i=Un(i,r,s,e,t[12],20,-1926607734),r,s,t[5],4,-378558),s=qn(s,e,i,r,t[8],11,-2022574463),r=qn(r,s,e,i,t[11],16,1839030562),i=qn(i,r,s,e,t[14],23,-35309556),e=qn(e,i,r,s,t[1],4,-1530992060),s=qn(s,e,i,r,t[4],11,1272893353),r=qn(r,s,e,i,t[7],16,-155497632),i=qn(i,r,s,e,t[10],23,-1094730640),e=qn(e,i,r,s,t[13],4,681279174),s=qn(s,e,i,r,t[0],11,-358537222),r=qn(r,s,e,i,t[3],16,-722521979),i=qn(i,r,s,e,t[6],23,76029189),e=qn(e,i,r,s,t[9],4,-640364487),s=qn(s,e,i,r,t[12],11,-421815835),r=qn(r,s,e,i,t[15],16,530742520),e=zn(e,i=qn(i,r,s,e,t[2],23,-995338651),r,s,t[0],6,-198630844),s=zn(s,e,i,r,t[7],10,1126891415),r=zn(r,s,e,i,t[14],15,-1416354905),i=zn(i,r,s,e,t[5],21,-57434055),e=zn(e,i,r,s,t[12],6,1700485571),s=zn(s,e,i,r,t[3],10,-1894986606),r=zn(r,s,e,i,t[10],15,-1051523),i=zn(i,r,s,e,t[1],21,-2054922799),e=zn(e,i,r,s,t[8],6,1873313359),s=zn(s,e,i,r,t[15],10,-30611744),r=zn(r,s,e,i,t[6],15,-1560198380),i=zn(i,r,s,e,t[13],21,1309151649),e=zn(e,i,r,s,t[4],6,-145523070),s=zn(s,e,i,r,t[11],10,-1120210379),r=zn(r,s,e,i,t[2],15,718787259),i=zn(i,r,s,e,t[9],21,-343485551),n[0]=ns(e,n[0]),n[1]=ns(i,n[1]),n[2]=ns(r,n[2]),n[3]=ns(s,n[3])}function $c(n,t,e,i,r,s){return t=ns(ns(t,n),ns(i,s)),ns(t<<r|t>>>32-r,e)}function Bn(n,t,e,i,r,s,a){return $c(t&e|~t&i,n,t,r,s,a)}function Un(n,t,e,i,r,s,a){return $c(t&i|e&~i,n,t,r,s,a)}function qn(n,t,e,i,r,s,a){return $c(t^e^i,n,t,r,s,a)}function zn(n,t,e,i,r,s,a){return $c(e^(t|~i),n,t,r,s,a)}function om(n){var t,e=n.length,i=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=n.length;t+=64)Zh(i,Zy(n.substring(t-64,t)));n=n.substring(t-64);var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<n.length;t++)r[t>>2]|=n.charCodeAt(t)<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(Zh(i,r),t=0;t<16;t++)r[t]=0;return r[14]=8*e,Zh(i,r),i}function Zy(n){var t,e=[];for(t=0;t<64;t+=4)e[t>>2]=n.charCodeAt(t)+(n.charCodeAt(t+1)<<8)+(n.charCodeAt(t+2)<<16)+(n.charCodeAt(t+3)<<24);return e}var Sp="0123456789abcdef".split("");function Qy(n){for(var t="",e=0;e<4;e++)t+=Sp[n>>8*e+4&15]+Sp[n>>8*e&15];return t}function tw(n){return String.fromCharCode(255&n,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function Fu(n){return om(n).map(tw).join("")}var ew=function(n){for(var t=0;t<n.length;t++)n[t]=Qy(n[t]);return n.join("")}(om("hello"))!="5d41402abc4b2a76b9719d911017c592";function ns(n,t){if(ew){var e=(65535&n)+(65535&t);return(n>>16)+(t>>16)+(e>>16)<<16|65535&e}return n+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Bu(n,t){var e,i,r,s;if(n!==e){for(var a=(r=n,s=1+(256/n.length|0),new Array(s+1).join(r)),o=[],l=0;l<256;l++)o[l]=l;var c=0;for(l=0;l<256;l++){var h=o[l];c=(c+h+a.charCodeAt(l))%256,o[l]=o[c],o[c]=h}e=n,i=o}else o=i;var p=t.length,g=0,d=0,v="";for(l=0;l<p;l++)d=(d+(h=o[g=(g+1)%256]))%256,o[g]=o[d],o[d]=h,a=o[(o[g]+o[d])%256],v+=String.fromCharCode(t.charCodeAt(l)^a);return v}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var kp={print:4,modify:8,copy:16,"annot-forms":32};function wa(n,t,e,i){this.v=1,this.r=2;var r=192;n.forEach(function(o){if(kp.perm!==void 0)throw new Error("Invalid permission: "+o);r+=kp[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(t+this.padding).substr(0,32),a=(e+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,a),this.P=-(1+(255^r)),this.encryptionKey=Fu(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=Bu(this.encryptionKey,this.padding)}function _a(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var t="",e=n.length,i=0;i<e;i++){var r=n.charCodeAt(i);t+=r<33||r===35||r===37||r===40||r===41||r===47||r===60||r===62||r===91||r===93||r===123||r===125||r>126?"#"+("0"+r.toString(16)).slice(-2):n[i]}return t}function Ap(n){if(Fe(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,i,r){if(r=r||!1,typeof e!="string"||typeof i!="function"||typeof r!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var s=Math.random().toString(35);return t[e][s]=[i,!!r],s},this.unsubscribe=function(e){for(var i in t)if(t[i][e])return delete t[i][e],Object.keys(t[i]).length===0&&delete t[i],!0;return!1},this.publish=function(e){if(t.hasOwnProperty(e)){var i=Array.prototype.slice.call(arguments,1),r=[];for(var s in t[e]){var a=t[e][s];try{a[0].apply(n,i)}catch(o){oe.console&&$e.error("jsPDF PubSub Error",o.message,o)}a[1]&&r.push(s)}r.length&&r.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function kc(n){if(!(this instanceof kc))return new kc(n);var t="opacity,stroke-opacity".split(",");for(var e in n)n.hasOwnProperty(e)&&t.indexOf(e)>=0&&(this[e]=n[e]);this.id="",this.objectNumber=-1}function lm(n,t){this.gState=n,this.matrix=t,this.id="",this.objectNumber=-1}function Ds(n,t,e,i,r){if(!(this instanceof Ds))return new Ds(n,t,e,i,r);this.type=n==="axial"?2:3,this.coords=t,this.colors=e,lm.call(this,i,r)}function Sa(n,t,e,i,r){if(!(this instanceof Sa))return new Sa(n,t,e,i,r);this.boundingBox=n,this.xStep=t,this.yStep=e,this.stream="",this.cloneIndex=0,lm.call(this,i,r)}function Yt(n){var t,e=typeof arguments[0]=="string"?arguments[0]:"p",i=arguments[1],r=arguments[2],s=arguments[3],a=[],o=1,l=16,c="S",h=null;Fe(n=n||{})==="object"&&(e=n.orientation,i=n.unit||i,r=n.format||r,s=n.compress||n.compressPdf||s,(h=n.encryption||null)!==null&&(h.userPassword=h.userPassword||"",h.ownerPassword=h.ownerPassword||"",h.userPermissions=h.userPermissions||[]),o=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(t=n.precision),n.floatPrecision!==void 0&&(l=n.floatPrecision),c=n.defaultPathOperation||"S"),a=n.filters||(s===!0?["FlateEncode"]:a),i=i||"mm",e=(""+(e||"P")).toLowerCase();var p=n.putOnlyUsedFonts||!1,g={},d={internal:{},__private__:{}};d.__private__.PubSub=Ap;var v="1.3",y=d.__private__.getPdfVersion=function(){return v};d.__private__.setPdfVersion=function(m){v=m};var x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};d.__private__.getPageFormats=function(){return x};var _=d.__private__.getPageFormat=function(m){return x[m]};r=r||"a4";var E="compat",O="advanced",T=E;function V(){this.saveGraphicsState(),M(new re(de,0,0,-de,0,ms()*de).toString()+" cm"),this.setFontSize(this.getFontSize()/de),c="n",T=O}function Q(){this.restoreGraphicsState(),c="S",T=E}var J=d.__private__.combineFontStyleAndFontWeight=function(m,k){if(m=="bold"&&k=="normal"||m=="bold"&&k==400||m=="normal"&&k=="italic"||m=="bold"&&k=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return k&&(m=k==400||k==="normal"?m==="italic"?"italic":"normal":k!=700&&k!=="bold"||m!=="normal"?(k==700?"bold":k)+""+m:"bold"),m};d.advancedAPI=function(m){var k=T===E;return k&&V.call(this),typeof m!="function"||(m(this),k&&Q.call(this)),this},d.compatAPI=function(m){var k=T===O;return k&&Q.call(this),typeof m!="function"||(m(this),k&&V.call(this)),this},d.isAdvancedAPI=function(){return T===O};var $,D=function(m){if(T!==O)throw new Error(m+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Z=d.roundToPrecision=d.__private__.roundToPrecision=function(m,k){var U=t||k;if(isNaN(m)||isNaN(U))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return m.toFixed(U).replace(/0+$/,"")};$=d.hpf=d.__private__.hpf=typeof l=="number"?function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.hpf");return Z(m,l)}:l==="smart"?function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.hpf");return Z(m,m>-1&&m<1?16:5)}:function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.hpf");return Z(m,16)};var L=d.f2=d.__private__.f2=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.f2");return Z(m,2)},R=d.__private__.f3=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.f3");return Z(m,3)},H=d.scale=d.__private__.scale=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.scale");return T===E?m*de:T===O?m:void 0},W=function(m){return H(function(k){return T===E?ms()-k:T===O?k:void 0}(m))};d.__private__.setPrecision=d.setPrecision=function(m){typeof parseInt(m,10)=="number"&&(t=parseInt(m,10))};var et,ct="00000000000000000000000000000000",ot=d.__private__.getFileId=function(){return ct},rt=d.__private__.setFileId=function(m){return ct=m!==void 0&&/^[a-fA-F0-9]{32}$/.test(m)?m.toUpperCase():ct.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),h!==null&&(_n=new wa(h.userPermissions,h.userPassword,h.ownerPassword,ct)),ct};d.setFileId=function(m){return rt(m),this},d.getFileId=function(){return ot()};var ht=d.__private__.convertDateToPDFDate=function(m){var k=m.getTimezoneOffset(),U=k<0?"+":"-",G=Math.floor(Math.abs(k/60)),nt=Math.abs(k%60),bt=[U,z(G),"'",z(nt),"'"].join("");return["D:",m.getFullYear(),z(m.getMonth()+1),z(m.getDate()),z(m.getHours()),z(m.getMinutes()),z(m.getSeconds()),bt].join("")},At=d.__private__.convertPDFDateToDate=function(m){var k=parseInt(m.substr(2,4),10),U=parseInt(m.substr(6,2),10)-1,G=parseInt(m.substr(8,2),10),nt=parseInt(m.substr(10,2),10),bt=parseInt(m.substr(12,2),10),_t=parseInt(m.substr(14,2),10);return new Date(k,U,G,nt,bt,_t,0)},wt=d.__private__.setCreationDate=function(m){var k;if(m===void 0&&(m=new Date),m instanceof Date)k=ht(m);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(m))throw new Error("Invalid argument passed to jsPDF.setCreationDate");k=m}return et=k},P=d.__private__.getCreationDate=function(m){var k=et;return m==="jsDate"&&(k=At(et)),k};d.setCreationDate=function(m){return wt(m),this},d.getCreationDate=function(m){return P(m)};var q,z=d.__private__.padd2=function(m){return("0"+parseInt(m)).slice(-2)},K=d.__private__.padd2Hex=function(m){return("00"+(m=m.toString())).substr(m.length)},X=0,st=[],ut=[],ft=0,vt=[],Nt=[],Ot=!1,jt=ut;d.__private__.setCustomOutputDestination=function(m){Ot=!0,jt=m};var zt=function(m){Ot||(jt=m)};d.__private__.resetCustomOutputDestination=function(){Ot=!1,jt=ut};var M=d.__private__.out=function(m){return m=m.toString(),ft+=m.length+1,jt.push(m),jt},Pt=d.__private__.write=function(m){return M(arguments.length===1?m.toString():Array.prototype.join.call(arguments," "))},ge=d.__private__.getArrayBuffer=function(m){for(var k=m.length,U=new ArrayBuffer(k),G=new Uint8Array(U);k--;)G[k]=m.charCodeAt(k);return U},Qt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];d.__private__.getStandardFonts=function(){return Qt};var St=n.fontSize||16;d.__private__.setFontSize=d.setFontSize=function(m){return St=T===O?m/de:m,this};var ne,It=d.__private__.getFontSize=d.getFontSize=function(){return T===E?St:St*de},te=n.R2L||!1;d.__private__.setR2L=d.setR2L=function(m){return te=m,this},d.__private__.getR2L=d.getR2L=function(){return te};var Jt,Ee=d.__private__.setZoomMode=function(m){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(m))ne=m;else if(isNaN(m)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(m)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+m+'" is not recognized.');ne=m}else ne=parseInt(m,10)};d.__private__.getZoomMode=function(){return ne};var we,ce=d.__private__.setPageMode=function(m){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(m)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+m+'" is not recognized.');Jt=m};d.__private__.getPageMode=function(){return Jt};var _e=d.__private__.setLayoutMode=function(m){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(m)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+m+'" is not recognized.');we=m};d.__private__.getLayoutMode=function(){return we},d.__private__.setDisplayMode=d.setDisplayMode=function(m,k,U){return Ee(m),_e(k),ce(U),this};var xe={title:"",subject:"",author:"",keywords:"",creator:""};d.__private__.getDocumentProperty=function(m){if(Object.keys(xe).indexOf(m)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return xe[m]},d.__private__.getDocumentProperties=function(){return xe},d.__private__.setDocumentProperties=d.setProperties=d.setDocumentProperties=function(m){for(var k in xe)xe.hasOwnProperty(k)&&m[k]&&(xe[k]=m[k]);return this},d.__private__.setDocumentProperty=function(m,k){if(Object.keys(xe).indexOf(m)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return xe[m]=k};var Bt,de,$t,tn,ke,be={},pt={},Lt=[],dt={},Xt={},Et={},Ht={},Se=null,ee=0,Gt=[],Tt=new Ap(d),on=n.hotfixes||[],Zt={},Ze={},Jn=[],re=function m(k,U,G,nt,bt,_t){if(!(this instanceof m))return new m(k,U,G,nt,bt,_t);isNaN(k)&&(k=1),isNaN(U)&&(U=0),isNaN(G)&&(G=0),isNaN(nt)&&(nt=1),isNaN(bt)&&(bt=0),isNaN(_t)&&(_t=0),this._matrix=[k,U,G,nt,bt,_t]};Object.defineProperty(re.prototype,"sx",{get:function(){return this._matrix[0]},set:function(m){this._matrix[0]=m}}),Object.defineProperty(re.prototype,"shy",{get:function(){return this._matrix[1]},set:function(m){this._matrix[1]=m}}),Object.defineProperty(re.prototype,"shx",{get:function(){return this._matrix[2]},set:function(m){this._matrix[2]=m}}),Object.defineProperty(re.prototype,"sy",{get:function(){return this._matrix[3]},set:function(m){this._matrix[3]=m}}),Object.defineProperty(re.prototype,"tx",{get:function(){return this._matrix[4]},set:function(m){this._matrix[4]=m}}),Object.defineProperty(re.prototype,"ty",{get:function(){return this._matrix[5]},set:function(m){this._matrix[5]=m}}),Object.defineProperty(re.prototype,"a",{get:function(){return this._matrix[0]},set:function(m){this._matrix[0]=m}}),Object.defineProperty(re.prototype,"b",{get:function(){return this._matrix[1]},set:function(m){this._matrix[1]=m}}),Object.defineProperty(re.prototype,"c",{get:function(){return this._matrix[2]},set:function(m){this._matrix[2]=m}}),Object.defineProperty(re.prototype,"d",{get:function(){return this._matrix[3]},set:function(m){this._matrix[3]=m}}),Object.defineProperty(re.prototype,"e",{get:function(){return this._matrix[4]},set:function(m){this._matrix[4]=m}}),Object.defineProperty(re.prototype,"f",{get:function(){return this._matrix[5]},set:function(m){this._matrix[5]=m}}),Object.defineProperty(re.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(re.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(re.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(re.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),re.prototype.join=function(m){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map($).join(m)},re.prototype.multiply=function(m){var k=m.sx*this.sx+m.shy*this.shx,U=m.sx*this.shy+m.shy*this.sy,G=m.shx*this.sx+m.sy*this.shx,nt=m.shx*this.shy+m.sy*this.sy,bt=m.tx*this.sx+m.ty*this.shx+this.tx,_t=m.tx*this.shy+m.ty*this.sy+this.ty;return new re(k,U,G,nt,bt,_t)},re.prototype.decompose=function(){var m=this.sx,k=this.shy,U=this.shx,G=this.sy,nt=this.tx,bt=this.ty,_t=Math.sqrt(m*m+k*k),Ft=(m/=_t)*U+(k/=_t)*G;U-=m*Ft,G-=k*Ft;var Wt=Math.sqrt(U*U+G*G);return Ft/=Wt,m*(G/=Wt)<k*(U/=Wt)&&(m=-m,k=-k,Ft=-Ft,_t=-_t),{scale:new re(_t,0,0,Wt,0,0),translate:new re(1,0,0,1,nt,bt),rotate:new re(m,k,-k,m,0,0),skew:new re(1,0,Ft,1,0,0)}},re.prototype.toString=function(m){return this.join(" ")},re.prototype.inversed=function(){var m=this.sx,k=this.shy,U=this.shx,G=this.sy,nt=this.tx,bt=this.ty,_t=1/(m*G-k*U),Ft=G*_t,Wt=-k*_t,le=-U*_t,me=m*_t;return new re(Ft,Wt,le,me,-Ft*nt-le*bt,-Wt*nt-me*bt)},re.prototype.applyToPoint=function(m){var k=m.x*this.sx+m.y*this.shx+this.tx,U=m.x*this.shy+m.y*this.sy+this.ty;return new fr(k,U)},re.prototype.applyToRectangle=function(m){var k=this.applyToPoint(m),U=this.applyToPoint(new fr(m.x+m.w,m.y+m.h));return new Va(k.x,k.y,U.x-k.x,U.y-k.y)},re.prototype.clone=function(){var m=this.sx,k=this.shy,U=this.shx,G=this.sy,nt=this.tx,bt=this.ty;return new re(m,k,U,G,nt,bt)},d.Matrix=re;var Pi=d.matrixMult=function(m,k){return k.multiply(m)},Ci=new re(1,0,0,1,0,0);d.unitMatrix=d.identityMatrix=Ci;var he=function(m,k){if(!Xt[m]){var U=(k instanceof Ds?"Sh":"P")+(Object.keys(dt).length+1).toString(10);k.id=U,Xt[m]=U,dt[U]=k,Tt.publish("addPattern",k)}};d.ShadingPattern=Ds,d.TilingPattern=Sa,d.addShadingPattern=function(m,k){return D("addShadingPattern()"),he(m,k),this},d.beginTilingPattern=function(m){D("beginTilingPattern()"),Ga(m.boundingBox[0],m.boundingBox[1],m.boundingBox[2]-m.boundingBox[0],m.boundingBox[3]-m.boundingBox[1],m.matrix)},d.endTilingPattern=function(m,k){D("endTilingPattern()"),k.stream=Nt[q].join(`
`),he(m,k),Tt.publish("endTilingPattern",k),Jn.pop().restore()};var Be,Te=d.__private__.newObject=function(){var m=Ue();return wn(m,!0),m},Ue=d.__private__.newObjectDeferred=function(){return X++,st[X]=function(){return ft},X},wn=function(m,k){return k=typeof k=="boolean"&&k,st[m]=ft,k&&M(m+" 0 obj"),m},Vi=d.__private__.newAdditionalObject=function(){var m={objId:Ue(),content:""};return vt.push(m),m},Ei=Ue(),Oi=Ue(),Gi=d.__private__.decodeColorString=function(m){var k=m.split(" ");if(k.length!==2||k[1]!=="g"&&k[1]!=="G")k.length!==5||k[4]!=="k"&&k[4]!=="K"||(k=[(1-k[0])*(1-k[3]),(1-k[1])*(1-k[3]),(1-k[2])*(1-k[3]),"r"]);else{var U=parseFloat(k[0]);k=[U,U,U,"r"]}for(var G="#",nt=0;nt<3;nt++)G+=("0"+Math.floor(255*parseFloat(k[nt])).toString(16)).slice(-2);return G},ji=d.__private__.encodeColorString=function(m){var k;typeof m=="string"&&(m={ch1:m});var U=m.ch1,G=m.ch2,nt=m.ch3,bt=m.ch4,_t=m.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof U=="string"&&U.charAt(0)!=="#"){var Ft=new am(U);if(Ft.ok)U=Ft.toHex();else if(!/^\d*\.?\d*$/.test(U))throw new Error('Invalid color "'+U+'" passed to jsPDF.encodeColorString.')}if(typeof U=="string"&&/^#[0-9A-Fa-f]{3}$/.test(U)&&(U="#"+U[1]+U[1]+U[2]+U[2]+U[3]+U[3]),typeof U=="string"&&/^#[0-9A-Fa-f]{6}$/.test(U)){var Wt=parseInt(U.substr(1),16);U=Wt>>16&255,G=Wt>>8&255,nt=255&Wt}if(G===void 0||bt===void 0&&U===G&&G===nt)k=typeof U=="string"?U+" "+_t[0]:m.precision===2?L(U/255)+" "+_t[0]:R(U/255)+" "+_t[0];else if(bt===void 0||Fe(bt)==="object"){if(bt&&!isNaN(bt.a)&&bt.a===0)return["1.","1.","1.",_t[1]].join(" ");k=typeof U=="string"?[U,G,nt,_t[1]].join(" "):m.precision===2?[L(U/255),L(G/255),L(nt/255),_t[1]].join(" "):[R(U/255),R(G/255),R(nt/255),_t[1]].join(" ")}else k=typeof U=="string"?[U,G,nt,bt,_t[2]].join(" "):m.precision===2?[L(U),L(G),L(nt),L(bt),_t[2]].join(" "):[R(U),R(G),R(nt),R(bt),_t[2]].join(" ");return k},Ti=d.__private__.getFilters=function(){return a},mi=d.__private__.putStream=function(m){var k=(m=m||{}).data||"",U=m.filters||Ti(),G=m.alreadyAppliedFilters||[],nt=m.addLength1||!1,bt=k.length,_t=m.objectId,Ft=function(xn){return xn};if(h!==null&&_t===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");h!==null&&(Ft=_n.encryptor(_t,0));var Wt={};U===!0&&(U=["FlateEncode"]);var le=m.additionalKeyValues||[],me=(Wt=Yt.API.processDataByFilters!==void 0?Yt.API.processDataByFilters(k,U):{data:k,reverseChain:[]}).reverseChain+(Array.isArray(G)?G.join(" "):G.toString());if(Wt.data.length!==0&&(le.push({key:"Length",value:Wt.data.length}),nt===!0&&le.push({key:"Length1",value:bt})),me.length!=0)if(me.split("/").length-1==1)le.push({key:"Filter",value:me});else{le.push({key:"Filter",value:"["+me+"]"});for(var Le=0;Le<le.length;Le+=1)if(le[Le].key==="DecodeParms"){for(var en=[],bn=0;bn<Wt.reverseChain.split("/").length-1;bn+=1)en.push("null");en.push(le[Le].value),le[Le].value="["+en.join(" ")+"]"}}M("<<");for(var We=0;We<le.length;We++)M("/"+le[We].key+" "+le[We].value);M(">>"),Wt.data.length!==0&&(M("stream"),M(Ft(Wt.data)),M("endstream"))},hs=d.__private__.putPage=function(m){var k=m.number,U=m.data,G=m.objId,nt=m.contentsObjId;wn(G,!0),M("<</Type /Page"),M("/Parent "+m.rootDictionaryObjId+" 0 R"),M("/Resources "+m.resourceDictionaryObjId+" 0 R"),M("/MediaBox ["+parseFloat($(m.mediaBox.bottomLeftX))+" "+parseFloat($(m.mediaBox.bottomLeftY))+" "+$(m.mediaBox.topRightX)+" "+$(m.mediaBox.topRightY)+"]"),m.cropBox!==null&&M("/CropBox ["+$(m.cropBox.bottomLeftX)+" "+$(m.cropBox.bottomLeftY)+" "+$(m.cropBox.topRightX)+" "+$(m.cropBox.topRightY)+"]"),m.bleedBox!==null&&M("/BleedBox ["+$(m.bleedBox.bottomLeftX)+" "+$(m.bleedBox.bottomLeftY)+" "+$(m.bleedBox.topRightX)+" "+$(m.bleedBox.topRightY)+"]"),m.trimBox!==null&&M("/TrimBox ["+$(m.trimBox.bottomLeftX)+" "+$(m.trimBox.bottomLeftY)+" "+$(m.trimBox.topRightX)+" "+$(m.trimBox.topRightY)+"]"),m.artBox!==null&&M("/ArtBox ["+$(m.artBox.bottomLeftX)+" "+$(m.artBox.bottomLeftY)+" "+$(m.artBox.topRightX)+" "+$(m.artBox.topRightY)+"]"),typeof m.userUnit=="number"&&m.userUnit!==1&&M("/UserUnit "+m.userUnit),Tt.publish("putPage",{objId:G,pageContext:Gt[k],pageNumber:k,page:U}),M("/Contents "+nt+" 0 R"),M(">>"),M("endobj");var bt=U.join(`
`);return T===O&&(bt+=`
Q`),wn(nt,!0),mi({data:bt,filters:Ti(),objectId:nt}),M("endobj"),G},Ki=d.__private__.putPages=function(){var m,k,U=[];for(m=1;m<=ee;m++)Gt[m].objId=Ue(),Gt[m].contentsObjId=Ue();for(m=1;m<=ee;m++)U.push(hs({number:m,data:Nt[m],objId:Gt[m].objId,contentsObjId:Gt[m].contentsObjId,mediaBox:Gt[m].mediaBox,cropBox:Gt[m].cropBox,bleedBox:Gt[m].bleedBox,trimBox:Gt[m].trimBox,artBox:Gt[m].artBox,userUnit:Gt[m].userUnit,rootDictionaryObjId:Ei,resourceDictionaryObjId:Oi}));wn(Ei,!0),M("<</Type /Pages");var G="/Kids [";for(k=0;k<ee;k++)G+=U[k]+" 0 R ";M(G+"]"),M("/Count "+ee),M(">>"),M("endobj"),Tt.publish("postPutPages")},us=function(m){Tt.publish("putFont",{font:m,out:M,newObject:Te,putStream:mi}),m.isAlreadyPutted!==!0&&(m.objectNumber=Te(),M("<<"),M("/Type /Font"),M("/BaseFont /"+_a(m.postScriptName)),M("/Subtype /Type1"),typeof m.encoding=="string"&&M("/Encoding /"+m.encoding),M("/FirstChar 32"),M("/LastChar 255"),M(">>"),M("endobj"))},Gs=function(m){m.objectNumber=Te();var k=[];k.push({key:"Type",value:"/XObject"}),k.push({key:"Subtype",value:"/Form"}),k.push({key:"BBox",value:"["+[$(m.x),$(m.y),$(m.x+m.width),$(m.y+m.height)].join(" ")+"]"}),k.push({key:"Matrix",value:"["+m.matrix.toString()+"]"});var U=m.pages[1].join(`
`);mi({data:U,additionalKeyValues:k,objectId:m.objectNumber}),M("endobj")},Ks=function(m,k){k||(k=21);var U=Te(),G=function(_t,Ft){var Wt,le=[],me=1/(Ft-1);for(Wt=0;Wt<1;Wt+=me)le.push(Wt);if(le.push(1),_t[0].offset!=0){var Le={offset:0,color:_t[0].color};_t.unshift(Le)}if(_t[_t.length-1].offset!=1){var en={offset:1,color:_t[_t.length-1].color};_t.push(en)}for(var bn="",We=0,xn=0;xn<le.length;xn++){for(Wt=le[xn];Wt>_t[We+1].offset;)We++;var vn=_t[We].offset,En=(Wt-vn)/(_t[We+1].offset-vn),mr=_t[We].color,Ii=_t[We+1].color;bn+=K(Math.round((1-En)*mr[0]+En*Ii[0]).toString(16))+K(Math.round((1-En)*mr[1]+En*Ii[1]).toString(16))+K(Math.round((1-En)*mr[2]+En*Ii[2]).toString(16))}return bn.trim()}(m.colors,k),nt=[];nt.push({key:"FunctionType",value:"0"}),nt.push({key:"Domain",value:"[0.0 1.0]"}),nt.push({key:"Size",value:"["+k+"]"}),nt.push({key:"BitsPerSample",value:"8"}),nt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),nt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),mi({data:G,additionalKeyValues:nt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:U}),M("endobj"),m.objectNumber=Te(),M("<< /ShadingType "+m.type),M("/ColorSpace /DeviceRGB");var bt="/Coords ["+$(parseFloat(m.coords[0]))+" "+$(parseFloat(m.coords[1]))+" ";m.type===2?bt+=$(parseFloat(m.coords[2]))+" "+$(parseFloat(m.coords[3])):bt+=$(parseFloat(m.coords[2]))+" "+$(parseFloat(m.coords[3]))+" "+$(parseFloat(m.coords[4]))+" "+$(parseFloat(m.coords[5])),M(bt+="]"),m.matrix&&M("/Matrix ["+m.matrix.toString()+"]"),M("/Function "+U+" 0 R"),M("/Extend [true true]"),M(">>"),M("endobj")},Ys=function(m,k){var U=Ue(),G=Te();k.push({resourcesOid:U,objectOid:G}),m.objectNumber=G;var nt=[];nt.push({key:"Type",value:"/Pattern"}),nt.push({key:"PatternType",value:"1"}),nt.push({key:"PaintType",value:"1"}),nt.push({key:"TilingType",value:"1"}),nt.push({key:"BBox",value:"["+m.boundingBox.map($).join(" ")+"]"}),nt.push({key:"XStep",value:$(m.xStep)}),nt.push({key:"YStep",value:$(m.yStep)}),nt.push({key:"Resources",value:U+" 0 R"}),m.matrix&&nt.push({key:"Matrix",value:"["+m.matrix.toString()+"]"}),mi({data:m.stream,additionalKeyValues:nt,objectId:m.objectNumber}),M("endobj")},Yc=function(m){for(var k in m.objectNumber=Te(),M("<<"),m)switch(k){case"opacity":M("/ca "+L(m[k]));break;case"stroke-opacity":M("/CA "+L(m[k]))}M(">>"),M("endobj")},Fa=function(m){wn(m.resourcesOid,!0),M("<<"),M("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var k in M("/Font <<"),be)be.hasOwnProperty(k)&&(p===!1||p===!0&&g.hasOwnProperty(k))&&M("/"+k+" "+be[k].objectNumber+" 0 R");M(">>")}(),function(){if(Object.keys(dt).length>0){for(var k in M("/Shading <<"),dt)dt.hasOwnProperty(k)&&dt[k]instanceof Ds&&dt[k].objectNumber>=0&&M("/"+k+" "+dt[k].objectNumber+" 0 R");Tt.publish("putShadingPatternDict"),M(">>")}}(),function(k){if(Object.keys(dt).length>0){for(var U in M("/Pattern <<"),dt)dt.hasOwnProperty(U)&&dt[U]instanceof d.TilingPattern&&dt[U].objectNumber>=0&&dt[U].objectNumber<k&&M("/"+U+" "+dt[U].objectNumber+" 0 R");Tt.publish("putTilingPatternDict"),M(">>")}}(m.objectOid),function(){if(Object.keys(Et).length>0){var k;for(k in M("/ExtGState <<"),Et)Et.hasOwnProperty(k)&&Et[k].objectNumber>=0&&M("/"+k+" "+Et[k].objectNumber+" 0 R");Tt.publish("putGStateDict"),M(">>")}}(),function(){for(var k in M("/XObject <<"),Zt)Zt.hasOwnProperty(k)&&Zt[k].objectNumber>=0&&M("/"+k+" "+Zt[k].objectNumber+" 0 R");Tt.publish("putXobjectDict"),M(">>")}(),M(">>"),M("endobj")},Zo=function(m){pt[m.fontName]=pt[m.fontName]||{},pt[m.fontName][m.fontStyle]=m.id},Qo=function(m,k,U,G,nt){var bt={id:"F"+(Object.keys(be).length+1).toString(10),postScriptName:m,fontName:k,fontStyle:U,encoding:G,isStandardFont:nt||!1,metadata:{}};return Tt.publish("addFont",{font:bt,instance:this}),be[bt.id]=bt,Zo(bt),bt.id},bi=d.__private__.pdfEscape=d.pdfEscape=function(m,k){return function(U,G){var nt,bt,_t,Ft,Wt,le,me,Le,en;if(_t=(G=G||{}).sourceEncoding||"Unicode",Wt=G.outputEncoding,(G.autoencode||Wt)&&be[Bt].metadata&&be[Bt].metadata[_t]&&be[Bt].metadata[_t].encoding&&(Ft=be[Bt].metadata[_t].encoding,!Wt&&be[Bt].encoding&&(Wt=be[Bt].encoding),!Wt&&Ft.codePages&&(Wt=Ft.codePages[0]),typeof Wt=="string"&&(Wt=Ft[Wt]),Wt)){for(me=!1,le=[],nt=0,bt=U.length;nt<bt;nt++)(Le=Wt[U.charCodeAt(nt)])?le.push(String.fromCharCode(Le)):le.push(U[nt]),le[nt].charCodeAt(0)>>8&&(me=!0);U=le.join("")}for(nt=U.length;me===void 0&&nt!==0;)U.charCodeAt(nt-1)>>8&&(me=!0),nt--;if(!me)return U;for(le=G.noBOM?[]:[254,255],nt=0,bt=U.length;nt<bt;nt++){if((en=(Le=U.charCodeAt(nt))>>8)>>8)throw new Error("Character at position "+nt+" of string '"+U+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");le.push(en),le.push(Le-(en<<8))}return String.fromCharCode.apply(void 0,le)}(m,k).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ba=d.__private__.beginPage=function(m){Nt[++ee]=[],Gt[ee]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(m[0]),topRightY:Number(m[1])}},el(ee),zt(Nt[q])},tl=function(m,k){var U,G,nt;switch(e=k||e,typeof m=="string"&&(U=_(m.toLowerCase()),Array.isArray(U)&&(G=U[0],nt=U[1])),Array.isArray(m)&&(G=m[0]*de,nt=m[1]*de),isNaN(G)&&(G=r[0],nt=r[1]),(G>14400||nt>14400)&&($e.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),G=Math.min(14400,G),nt=Math.min(14400,nt)),r=[G,nt],e.substr(0,1)){case"l":nt>G&&(r=[nt,G]);break;case"p":G>nt&&(r=[nt,G])}Ba(r),ue(za),M(Qs),Ha!==0&&M(Ha+" J"),Wa!==0&&M(Wa+" j"),Tt.publish("addPage",{pageNumber:ee})},Ua=function(m){m>0&&m<=ee&&(Nt.splice(m,1),Gt.splice(m,1),ee--,q>ee&&(q=ee),this.setPage(q))},el=function(m){m>0&&m<=ee&&(q=m)},nl=d.__private__.getNumberOfPages=d.getNumberOfPages=function(){return Nt.length-1},il=function(m,k,U){var G,nt=void 0;return U=U||{},m=m!==void 0?m:be[Bt].fontName,k=k!==void 0?k:be[Bt].fontStyle,G=m.toLowerCase(),pt[G]!==void 0&&pt[G][k]!==void 0?nt=pt[G][k]:pt[m]!==void 0&&pt[m][k]!==void 0?nt=pt[m][k]:U.disableWarning===!1&&$e.warn("Unable to look up font label for font '"+m+"', '"+k+"'. Refer to getFontList() for available fonts."),nt||U.noFallback||(nt=pt.times[k])==null&&(nt=pt.times.normal),nt},Yi=d.__private__.putInfo=function(){var m=Te(),k=function(G){return G};for(var U in h!==null&&(k=_n.encryptor(m,0)),M("<<"),M("/Producer ("+bi(k("jsPDF "+Yt.version))+")"),xe)xe.hasOwnProperty(U)&&xe[U]&&M("/"+U.substr(0,1).toUpperCase()+U.substr(1)+" ("+bi(k(xe[U]))+")");M("/CreationDate ("+bi(k(et))+")"),M(">>"),M("endobj")},Js=d.__private__.putCatalog=function(m){var k=(m=m||{}).rootDictionaryObjId||Ei;switch(Te(),M("<<"),M("/Type /Catalog"),M("/Pages "+k+" 0 R"),ne||(ne="fullwidth"),ne){case"fullwidth":M("/OpenAction [3 0 R /FitH null]");break;case"fullheight":M("/OpenAction [3 0 R /FitV null]");break;case"fullpage":M("/OpenAction [3 0 R /Fit]");break;case"original":M("/OpenAction [3 0 R /XYZ null null 1]");break;default:var U=""+ne;U.substr(U.length-1)==="%"&&(ne=parseInt(ne)/100),typeof ne=="number"&&M("/OpenAction [3 0 R /XYZ null null "+L(ne)+"]")}switch(we||(we="continuous"),we){case"continuous":M("/PageLayout /OneColumn");break;case"single":M("/PageLayout /SinglePage");break;case"two":case"twoleft":M("/PageLayout /TwoColumnLeft");break;case"tworight":M("/PageLayout /TwoColumnRight")}Jt&&M("/PageMode /"+Jt),Tt.publish("putCatalog"),M(">>"),M("endobj")},Jc=d.__private__.putTrailer=function(){M("trailer"),M("<<"),M("/Size "+(X+1)),M("/Root "+X+" 0 R"),M("/Info "+(X-1)+" 0 R"),h!==null&&M("/Encrypt "+_n.oid+" 0 R"),M("/ID [ <"+ct+"> <"+ct+"> ]"),M(">>")},mn=d.__private__.putHeader=function(){M("%PDF-"+v),M("%")},rl=d.__private__.putXRef=function(){var m="0000000000";M("xref"),M("0 "+(X+1)),M("0000000000 65535 f ");for(var k=1;k<=X;k++)typeof st[k]=="function"?M((m+st[k]()).slice(-10)+" 00000 n "):st[k]!==void 0?M((m+st[k]).slice(-10)+" 00000 n "):M("0000000000 00000 n ")},Ji=d.__private__.buildDocument=function(){var m;X=0,ft=0,ut=[],st=[],vt=[],Ei=Ue(),Oi=Ue(),zt(ut),Tt.publish("buildDocument"),mn(),Ki(),function(){Tt.publish("putAdditionalObjects");for(var U=0;U<vt.length;U++){var G=vt[U];wn(G.objId,!0),M(G.content),M("endobj")}Tt.publish("postPutAdditionalObjects")}(),m=[],function(){for(var U in be)be.hasOwnProperty(U)&&(p===!1||p===!0&&g.hasOwnProperty(U))&&us(be[U])}(),function(){var U;for(U in Et)Et.hasOwnProperty(U)&&Yc(Et[U])}(),function(){for(var U in Zt)Zt.hasOwnProperty(U)&&Gs(Zt[U])}(),function(U){var G;for(G in dt)dt.hasOwnProperty(G)&&(dt[G]instanceof Ds?Ks(dt[G]):dt[G]instanceof Sa&&Ys(dt[G],U))}(m),Tt.publish("putResources"),m.forEach(Fa),Fa({resourcesOid:Oi,objectOid:Number.MAX_SAFE_INTEGER}),Tt.publish("postPutResources"),h!==null&&(_n.oid=Te(),M("<<"),M("/Filter /Standard"),M("/V "+_n.v),M("/R "+_n.r),M("/U <"+_n.toHexString(_n.U)+">"),M("/O <"+_n.toHexString(_n.O)+">"),M("/P "+_n.P),M(">>"),M("endobj")),Yi(),Js();var k=ft;return rl(),Jc(),M("startxref"),M(""+k),M("%%EOF"),zt(Nt[q]),ut.join(`
`)},Xs=d.__private__.getBlob=function(m){return new Blob([ge(m)],{type:"application/pdf"})},sl=d.output=d.__private__.output=(Be=function(m,k){switch(typeof(k=k||{})=="string"?k={filename:k}:k.filename=k.filename||"generated.pdf",m){case void 0:return Ji();case"save":d.save(k.filename);break;case"arraybuffer":return ge(Ji());case"blob":return Xs(Ji());case"bloburi":case"bloburl":if(oe.URL!==void 0&&typeof oe.URL.createObjectURL=="function")return oe.URL&&oe.URL.createObjectURL(Xs(Ji()))||void 0;$e.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var U="",G=Ji();try{U=xp(G)}catch{U=xp(unescape(encodeURIComponent(G)))}return"data:application/pdf;filename="+k.filename+";base64,"+U;case"pdfobjectnewwindow":if(Object.prototype.toString.call(oe)==="[object Window]"){var nt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",bt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';k.pdfObjectUrl&&(nt=k.pdfObjectUrl,bt="");var _t='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+nt+'"'+bt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(k)+");<\/script></body></html>",Ft=oe.open();return Ft!==null&&Ft.document.write(_t),Ft}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(oe)==="[object Window]"){var Wt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(k.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+k.filename+'" width="500px" height="400px" /></body></html>',le=oe.open();if(le!==null){le.document.write(Wt);var me=this;le.document.documentElement.querySelector("#pdfViewer").onload=function(){le.document.title=k.filename,le.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(me.output("bloburl"))}}return le}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(oe)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Le='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",k)+'"></iframe></body></html>',en=oe.open();if(en!==null&&(en.document.write(Le),en.document.title=k.filename),en||typeof safari>"u")return en;break;case"datauri":case"dataurl":return oe.document.location.href=this.output("datauristring",k);default:return null}},Be.foo=function(){try{return Be.apply(this,arguments)}catch(U){var m=U.stack||"";~m.indexOf(" at ")&&(m=m.split(" at ")[1]);var k="Error in function "+m.split(`
`)[0].split("<")[0]+": "+U.message;if(!oe.console)throw new Error(k);oe.console.error(k,U),oe.alert&&alert(k)}},Be.foo.bar=Be,Be.foo),vi=function(m){return Array.isArray(on)===!0&&on.indexOf(m)>-1};switch(i){case"pt":de=1;break;case"mm":de=72/25.4;break;case"cm":de=72/2.54;break;case"in":de=72;break;case"px":de=vi("px_scaling")==1?.75:96/72;break;case"pc":case"em":de=12;break;case"ex":de=6;break;default:if(typeof i!="number")throw new Error("Invalid unit: "+i);de=i}var _n=null;wt(),rt();var cr=d.__private__.getPageInfo=d.getPageInfo=function(m){if(isNaN(m)||m%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Gt[m].objId,pageNumber:m,pageContext:Gt[m]}},al=d.__private__.getPageInfoByObjId=function(m){if(isNaN(m)||m%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var k in Gt)if(Gt[k].objId===m)break;return cr(k)},Xc=d.__private__.getCurrentPageInfo=d.getCurrentPageInfo=function(){return{objId:Gt[q].objId,pageNumber:q,pageContext:Gt[q]}};d.addPage=function(){return tl.apply(this,arguments),this},d.setPage=function(){return el.apply(this,arguments),zt.call(this,Nt[q]),this},d.insertPage=function(m){return this.addPage(),this.movePage(q,m),this},d.movePage=function(m,k){var U,G;if(m>k){U=Nt[m],G=Gt[m];for(var nt=m;nt>k;nt--)Nt[nt]=Nt[nt-1],Gt[nt]=Gt[nt-1];Nt[k]=U,Gt[k]=G,this.setPage(k)}else if(m<k){U=Nt[m],G=Gt[m];for(var bt=m;bt<k;bt++)Nt[bt]=Nt[bt+1],Gt[bt]=Gt[bt+1];Nt[k]=U,Gt[k]=G,this.setPage(k)}return this},d.deletePage=function(){return Ua.apply(this,arguments),this},d.__private__.text=d.text=function(m,k,U,G,nt){var bt,_t,Ft,Wt,le,me,Le,en,bn,We=(G=G||{}).scope||this;if(typeof m=="number"&&typeof k=="number"&&(typeof U=="string"||Array.isArray(U))){var xn=U;U=k,k=m,m=xn}if(arguments[3]instanceof re==0?(Ft=arguments[4],Wt=arguments[5],Fe(Le=arguments[3])==="object"&&Le!==null||(typeof Ft=="string"&&(Wt=Ft,Ft=null),typeof Le=="string"&&(Wt=Le,Le=null),typeof Le=="number"&&(Ft=Le,Le=null),G={flags:Le,angle:Ft,align:Wt})):(D("The transform parameter of text() with a Matrix value"),bn=nt),isNaN(k)||isNaN(U)||m==null)throw new Error("Invalid arguments passed to jsPDF.text");if(m.length===0)return We;var vn,En="",mr=typeof G.lineHeightFactor=="number"?G.lineHeightFactor:fs,Ii=We.internal.scaleFactor;function br(Re){return Re=Re.split("	").join(Array(G.TabLen||9).join(" ")),bi(Re,Le)}function Ya(Re){for(var qe,cn=Re.concat(),Sn=[],wr=cn.length;wr--;)typeof(qe=cn.shift())=="string"?Sn.push(qe):Array.isArray(Re)&&(qe.length===1||qe[1]===void 0&&qe[2]===void 0)?Sn.push(qe[0]):Sn.push([qe[0],qe[1],qe[2]]);return Sn}function ea(Re,qe){var cn;if(typeof Re=="string")cn=qe(Re)[0];else if(Array.isArray(Re)){for(var Sn,wr,so=Re.concat(),ra=[],bl=so.length;bl--;)typeof(Sn=so.shift())=="string"?ra.push(qe(Sn)[0]):Array.isArray(Sn)&&typeof Sn[0]=="string"&&(wr=qe(Sn[0],Sn[1],Sn[2]),ra.push([wr[0],wr[1],wr[2]]));cn=ra}return cn}var Dr=!1,bs=!0;if(typeof m=="string")Dr=!0;else if(Array.isArray(m)){var vs=m.concat();_t=[];for(var Mr,On=vs.length;On--;)(typeof(Mr=vs.shift())!="string"||Array.isArray(Mr)&&typeof Mr[0]!="string")&&(bs=!1);Dr=bs}if(Dr===!1)throw new Error('Type of text must be string or Array. "'+m+'" is not recognized.');typeof m=="string"&&(m=m.match(/[\r?\n]/)?m.split(/\r\n|\r|\n/g):[m]);var ys=St/We.internal.scaleFactor,ws=ys*(mr-1);switch(G.baseline){case"bottom":U-=ws;break;case"top":U+=ys-ws;break;case"hanging":U+=ys-2*ws;break;case"middle":U+=ys/2-ws}if((me=G.maxWidth||0)>0&&(typeof m=="string"?m=We.splitTextToSize(m,me):Object.prototype.toString.call(m)==="[object Array]"&&(m=m.reduce(function(Re,qe){return Re.concat(We.splitTextToSize(qe,me))},[]))),bt={text:m,x:k,y:U,options:G,mutex:{pdfEscape:bi,activeFontKey:Bt,fonts:be,activeFontSize:St}},Tt.publish("preProcessText",bt),m=bt.text,Ft=(G=bt.options).angle,bn instanceof re==0&&Ft&&typeof Ft=="number"){Ft*=Math.PI/180,G.rotationDirection===0&&(Ft=-Ft),T===O&&(Ft=-Ft);var Ja=Math.cos(Ft),Xa=Math.sin(Ft);bn=new re(Ja,Xa,-Xa,Ja,0,0)}else Ft&&Ft instanceof re&&(bn=Ft);T!==O||bn||(bn=Ci),(le=G.charSpace||dr)!==void 0&&(En+=$(H(le))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(en=G.horizontalScale)!==void 0&&(En+=$(100*en)+` Tz
`),G.lang;var Wn=-1,vr=G.renderingMode!==void 0?G.renderingMode:G.stroke,na=We.internal.getCurrentPageInfo().pageContext;switch(vr){case 0:case!1:case"fill":Wn=0;break;case 1:case!0:case"stroke":Wn=1;break;case 2:case"fillThenStroke":Wn=2;break;case 3:case"invisible":Wn=3;break;case 4:case"fillAndAddForClipping":Wn=4;break;case 5:case"strokeAndAddPathForClipping":Wn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Wn=6;break;case 7:case"addToPathForClipping":Wn=7}var gl=na.usedRenderingMode!==void 0?na.usedRenderingMode:-1;Wn!==-1?En+=Wn+` Tr
`:gl!==-1&&(En+=`0 Tr
`),Wn!==-1&&(na.usedRenderingMode=Wn),Wt=G.align||"left";var yi,_s=St*mr,Za=We.internal.pageSize.getWidth(),Qa=be[Bt];le=G.charSpace||dr,me=G.maxWidth||0,Le=Object.assign({autoencode:!0,noBOM:!0},G.flags);var Fr=[],xs=function(Re){return We.getStringUnitWidth(Re,{font:Qa,charSpace:le,fontSize:St,doKerning:!1})*St/Ii};if(Object.prototype.toString.call(m)==="[object Array]"){var ri;_t=Ya(m),Wt!=="left"&&(yi=_t.map(xs));var si,Br=0;if(Wt==="right"){k-=yi[0],m=[],On=_t.length;for(var yr=0;yr<On;yr++)yr===0?(si=hr(k),ri=ur(U)):(si=H(Br-yi[yr]),ri=-_s),m.push([_t[yr],si,ri]),Br=yi[yr]}else if(Wt==="center"){k-=yi[0]/2,m=[],On=_t.length;for(var Ur=0;Ur<On;Ur++)Ur===0?(si=hr(k),ri=ur(U)):(si=H((Br-yi[Ur])/2),ri=-_s),m.push([_t[Ur],si,ri]),Br=yi[Ur]}else if(Wt==="left"){m=[],On=_t.length;for(var to=0;to<On;to++)m.push(_t[to])}else if(Wt==="justify"&&Qa.encoding==="Identity-H"){m=[],On=_t.length,me=me!==0?me:Za;for(var ia=0,ln=0;ln<On;ln++)if(ri=ln===0?ur(U):-_s,si=ln===0?hr(k):ia,ln<On-1){var ml=H((me-yi[ln])/(_t[ln].split(" ").length-1)),Zi=_t[ln].split(" ");m.push([Zi[0]+" ",si,ri]),ia=0;for(var Qi=1;Qi<Zi.length;Qi++){var eo=(xs(Zi[Qi-1]+" "+Zi[Qi])-xs(Zi[Qi]))*Ii+ml;Qi==Zi.length-1?m.push([Zi[Qi],eo,0]):m.push([Zi[Qi]+" ",eo,0]),ia-=eo}}else m.push([_t[ln],si,ri]);m.push(["",ia,0])}else{if(Wt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(m=[],On=_t.length,me=me!==0?me:Za,ln=0;ln<On;ln++){ri=ln===0?ur(U):-_s,si=ln===0?hr(k):0;var no=_t[ln].split(" ").length-1,io=no>0?(me-yi[ln])/no:0;ln<On-1?Fr.push($(H(io))):Fr.push(0),m.push([_t[ln],si,ri])}}}(typeof G.R2L=="boolean"?G.R2L:te)===!0&&(m=ea(m,function(Re,qe,cn){return[Re.split("").reverse().join(""),qe,cn]})),bt={text:m,x:k,y:U,options:G,mutex:{pdfEscape:bi,activeFontKey:Bt,fonts:be,activeFontSize:St}},Tt.publish("postProcessText",bt),m=bt.text,vn=bt.mutex.isHex||!1;var ro=be[Bt].encoding;ro!=="WinAnsiEncoding"&&ro!=="StandardEncoding"||(m=ea(m,function(Re,qe,cn){return[br(Re),qe,cn]})),_t=Ya(m),m=[];for(var qr,zr,$r,Ss=Array.isArray(_t[0])?1:0,Hr="",ks=function(Re,qe,cn){var Sn="";return cn instanceof re?(cn=typeof G.angle=="number"?Pi(cn,new re(1,0,0,1,Re,qe)):Pi(new re(1,0,0,1,Re,qe),cn),T===O&&(cn=Pi(new re(1,0,0,-1,0,0),cn)),Sn=cn.join(" ")+` Tm
`):Sn=$(Re)+" "+$(qe)+` Td
`,Sn},wi=0;wi<_t.length;wi++){switch(Hr="",Ss){case 1:$r=(vn?"<":"(")+_t[wi][0]+(vn?">":")"),qr=parseFloat(_t[wi][1]),zr=parseFloat(_t[wi][2]);break;case 0:$r=(vn?"<":"(")+_t[wi]+(vn?">":")"),qr=hr(k),zr=ur(U)}Fr!==void 0&&Fr[wi]!==void 0&&(Hr=Fr[wi]+` Tw
`),wi===0?m.push(Hr+ks(qr,zr,bn)+$r):Ss===0?m.push(Hr+$r):Ss===1&&m.push(Hr+ks(qr,zr,bn)+$r)}m=Ss===0?m.join(` Tj
T* `):m.join(` Tj
`),m+=` Tj
`;var tr=`BT
/`;return tr+=Bt+" "+St+` Tf
`,tr+=$(St*mr)+` TL
`,tr+=ps+`
`,tr+=En,tr+=m,M(tr+="ET"),g[Bt]=!0,We};var Zc=d.__private__.clip=d.clip=function(m){return M(m==="evenodd"?"W*":"W"),this};d.clipEvenOdd=function(){return Zc("evenodd")},d.__private__.discardPath=d.discardPath=function(){return M("n"),this};var Xi=d.__private__.isValidStyle=function(m){var k=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(m)!==-1&&(k=!0),k};d.__private__.setDefaultPathOperation=d.setDefaultPathOperation=function(m){return Xi(m)&&(c=m),this};var ol=d.__private__.getStyle=d.getStyle=function(m){var k=c;switch(m){case"D":case"S":k="S";break;case"F":k="f";break;case"FD":case"DF":k="B";break;case"f":case"f*":case"B":case"B*":k=m}return k},ll=d.close=function(){return M("h"),this};d.stroke=function(){return M("S"),this},d.fill=function(m){return Zs("f",m),this},d.fillEvenOdd=function(m){return Zs("f*",m),this},d.fillStroke=function(m){return Zs("B",m),this},d.fillStrokeEvenOdd=function(m){return Zs("B*",m),this};var Zs=function(m,k){Fe(k)==="object"?th(k,m):M(m)},ds=function(m){m===null||T===O&&m===void 0||(m=ol(m),M(m))};function Qc(m,k,U,G,nt){var bt=new Sa(k||this.boundingBox,U||this.xStep,G||this.yStep,this.gState,nt||this.matrix);bt.stream=this.stream;var _t=m+"$$"+this.cloneIndex+++"$$";return he(_t,bt),bt}var th=function(m,k){var U=Xt[m.key],G=dt[U];if(G instanceof Ds)M("q"),M(eh(k)),G.gState&&d.setGState(G.gState),M(m.matrix.toString()+" cm"),M("/"+U+" sh"),M("Q");else if(G instanceof Sa){var nt=new re(1,0,0,-1,0,ms());m.matrix&&(nt=nt.multiply(m.matrix||Ci),U=Qc.call(G,m.key,m.boundingBox,m.xStep,m.yStep,nt).id),M("q"),M("/Pattern cs"),M("/"+U+" scn"),G.gState&&d.setGState(G.gState),M(k),M("Q")}},eh=function(m){switch(m){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},qa=d.moveTo=function(m,k){return M($(H(m))+" "+$(W(k))+" m"),this},cl=d.lineTo=function(m,k){return M($(H(m))+" "+$(W(k))+" l"),this},Ri=d.curveTo=function(m,k,U,G,nt,bt){return M([$(H(m)),$(W(k)),$(H(U)),$(W(G)),$(H(nt)),$(W(bt)),"c"].join(" ")),this};d.__private__.line=d.line=function(m,k,U,G,nt){if(isNaN(m)||isNaN(k)||isNaN(U)||isNaN(G)||!Xi(nt))throw new Error("Invalid arguments passed to jsPDF.line");return T===E?this.lines([[U-m,G-k]],m,k,[1,1],nt||"S"):this.lines([[U-m,G-k]],m,k,[1,1]).stroke()},d.__private__.lines=d.lines=function(m,k,U,G,nt,bt){var _t,Ft,Wt,le,me,Le,en,bn,We,xn,vn,En;if(typeof m=="number"&&(En=U,U=k,k=m,m=En),G=G||[1,1],bt=bt||!1,isNaN(k)||isNaN(U)||!Array.isArray(m)||!Array.isArray(G)||!Xi(nt)||typeof bt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(qa(k,U),_t=G[0],Ft=G[1],le=m.length,xn=k,vn=U,Wt=0;Wt<le;Wt++)(me=m[Wt]).length===2?(xn=me[0]*_t+xn,vn=me[1]*Ft+vn,cl(xn,vn)):(Le=me[0]*_t+xn,en=me[1]*Ft+vn,bn=me[2]*_t+xn,We=me[3]*Ft+vn,xn=me[4]*_t+xn,vn=me[5]*Ft+vn,Ri(Le,en,bn,We,xn,vn));return bt&&ll(),ds(nt),this},d.path=function(m){for(var k=0;k<m.length;k++){var U=m[k],G=U.c;switch(U.op){case"m":qa(G[0],G[1]);break;case"l":cl(G[0],G[1]);break;case"c":Ri.apply(this,G);break;case"h":ll()}}return this},d.__private__.rect=d.rect=function(m,k,U,G,nt){if(isNaN(m)||isNaN(k)||isNaN(U)||isNaN(G)||!Xi(nt))throw new Error("Invalid arguments passed to jsPDF.rect");return T===E&&(G=-G),M([$(H(m)),$(W(k)),$(H(U)),$(H(G)),"re"].join(" ")),ds(nt),this},d.__private__.triangle=d.triangle=function(m,k,U,G,nt,bt,_t){if(isNaN(m)||isNaN(k)||isNaN(U)||isNaN(G)||isNaN(nt)||isNaN(bt)||!Xi(_t))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[U-m,G-k],[nt-U,bt-G],[m-nt,k-bt]],m,k,[1,1],_t,!0),this},d.__private__.roundedRect=d.roundedRect=function(m,k,U,G,nt,bt,_t){if(isNaN(m)||isNaN(k)||isNaN(U)||isNaN(G)||isNaN(nt)||isNaN(bt)||!Xi(_t))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ft=4/3*(Math.SQRT2-1);return nt=Math.min(nt,.5*U),bt=Math.min(bt,.5*G),this.lines([[U-2*nt,0],[nt*Ft,0,nt,bt-bt*Ft,nt,bt],[0,G-2*bt],[0,bt*Ft,-nt*Ft,bt,-nt,bt],[2*nt-U,0],[-nt*Ft,0,-nt,-bt*Ft,-nt,-bt],[0,2*bt-G],[0,-bt*Ft,nt*Ft,-bt,nt,-bt]],m+nt,k,[1,1],_t,!0),this},d.__private__.ellipse=d.ellipse=function(m,k,U,G,nt){if(isNaN(m)||isNaN(k)||isNaN(U)||isNaN(G)||!Xi(nt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var bt=4/3*(Math.SQRT2-1)*U,_t=4/3*(Math.SQRT2-1)*G;return qa(m+U,k),Ri(m+U,k-_t,m+bt,k-G,m,k-G),Ri(m-bt,k-G,m-U,k-_t,m-U,k),Ri(m-U,k+_t,m-bt,k+G,m,k+G),Ri(m+bt,k+G,m+U,k+_t,m+U,k),ds(nt),this},d.__private__.circle=d.circle=function(m,k,U,G){if(isNaN(m)||isNaN(k)||isNaN(U)||!Xi(G))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(m,k,U,U,G)},d.setFont=function(m,k,U){return U&&(k=J(k,U)),Bt=il(m,k,{disableWarning:!1}),this};var nh=d.__private__.getFont=d.getFont=function(){return be[il.apply(d,arguments)]};d.__private__.getFontList=d.getFontList=function(){var m,k,U={};for(m in pt)if(pt.hasOwnProperty(m))for(k in U[m]=[],pt[m])pt[m].hasOwnProperty(k)&&U[m].push(k);return U},d.addFont=function(m,k,U,G,nt){var bt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&bt.indexOf(arguments[3])!==-1?nt=arguments[3]:arguments[3]&&bt.indexOf(arguments[3])==-1&&(U=J(U,G)),Qo.call(this,m,k,U,nt=nt||"Identity-H")};var fs,za=n.lineWidth||.200025,ih=d.__private__.getLineWidth=d.getLineWidth=function(){return za},ue=d.__private__.setLineWidth=d.setLineWidth=function(m){return za=m,M($(H(m))+" w"),this};d.__private__.setLineDash=Yt.API.setLineDash=Yt.API.setLineDashPattern=function(m,k){if(m=m||[],k=k||0,isNaN(k)||!Array.isArray(m))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return m=m.map(function(U){return $(H(U))}).join(" "),k=$(H(k)),M("["+m+"] "+k+" d"),this};var rh=d.__private__.getLineHeight=d.getLineHeight=function(){return St*fs};d.__private__.getLineHeight=d.getLineHeight=function(){return St*fs};var sh=d.__private__.setLineHeightFactor=d.setLineHeightFactor=function(m){return typeof(m=m||1.15)=="number"&&(fs=m),this},ah=d.__private__.getLineHeightFactor=d.getLineHeightFactor=function(){return fs};sh(n.lineHeight);var hr=d.__private__.getHorizontalCoordinate=function(m){return H(m)},ur=d.__private__.getVerticalCoordinate=function(m){return T===O?m:Gt[q].mediaBox.topRightY-Gt[q].mediaBox.bottomLeftY-H(m)},oh=d.__private__.getHorizontalCoordinateString=d.getHorizontalCoordinateString=function(m){return $(hr(m))},lh=d.__private__.getVerticalCoordinateString=d.getVerticalCoordinateString=function(m){return $(ur(m))},Qs=n.strokeColor||"0 G";d.__private__.getStrokeColor=d.getDrawColor=function(){return Gi(Qs)},d.__private__.setStrokeColor=d.setDrawColor=function(m,k,U,G){return Qs=ji({ch1:m,ch2:k,ch3:U,ch4:G,pdfColorType:"draw",precision:2}),M(Qs),this};var $a=n.fillColor||"0 g";d.__private__.getFillColor=d.getFillColor=function(){return Gi($a)},d.__private__.setFillColor=d.setFillColor=function(m,k,U,G){return $a=ji({ch1:m,ch2:k,ch3:U,ch4:G,pdfColorType:"fill",precision:2}),M($a),this};var ps=n.textColor||"0 g",ch=d.__private__.getTextColor=d.getTextColor=function(){return Gi(ps)};d.__private__.setTextColor=d.setTextColor=function(m,k,U,G){return ps=ji({ch1:m,ch2:k,ch3:U,ch4:G,pdfColorType:"text",precision:3}),this};var dr=n.charSpace,hh=d.__private__.getCharSpace=d.getCharSpace=function(){return parseFloat(dr||0)};d.__private__.setCharSpace=d.setCharSpace=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return dr=m,this};var Ha=0;d.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},d.__private__.setLineCap=d.setLineCap=function(m){var k=d.CapJoinStyles[m];if(k===void 0)throw new Error("Line cap style of '"+m+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ha=k,M(k+" J"),this};var Wa=0;d.__private__.setLineJoin=d.setLineJoin=function(m){var k=d.CapJoinStyles[m];if(k===void 0)throw new Error("Line join style of '"+m+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Wa=k,M(k+" j"),this},d.__private__.setLineMiterLimit=d.__private__.setMiterLimit=d.setLineMiterLimit=d.setMiterLimit=function(m){if(m=m||0,isNaN(m))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return M($(H(m))+" M"),this},d.GState=kc,d.setGState=function(m){(m=typeof m=="string"?Et[Ht[m]]:hl(null,m)).equals(Se)||(M("/"+m.id+" gs"),Se=m)};var hl=function(m,k){if(!m||!Ht[m]){var U=!1;for(var G in Et)if(Et.hasOwnProperty(G)&&Et[G].equals(k)){U=!0;break}if(U)k=Et[G];else{var nt="GS"+(Object.keys(Et).length+1).toString(10);Et[nt]=k,k.id=nt}return m&&(Ht[m]=k.id),Tt.publish("addGState",k),k}};d.addGState=function(m,k){return hl(m,k),this},d.saveGraphicsState=function(){return M("q"),Lt.push({key:Bt,size:St,color:ps}),this},d.restoreGraphicsState=function(){M("Q");var m=Lt.pop();return Bt=m.key,St=m.size,ps=m.color,Se=null,this},d.setCurrentTransformationMatrix=function(m){return M(m.toString()+" cm"),this},d.comment=function(m){return M("#"+m),this};var fr=function(m,k){var U=m||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return U},set:function(bt){isNaN(bt)||(U=parseFloat(bt))}});var G=k||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return G},set:function(bt){isNaN(bt)||(G=parseFloat(bt))}});var nt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return nt},set:function(bt){nt=bt.toString()}}),this},Va=function(m,k,U,G){fr.call(this,m,k),this.type="rect";var nt=U||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return nt},set:function(_t){isNaN(_t)||(nt=parseFloat(_t))}});var bt=G||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return bt},set:function(_t){isNaN(_t)||(bt=parseFloat(_t))}}),this},ta=function(){this.page=ee,this.currentPage=q,this.pages=Nt.slice(0),this.pagesContext=Gt.slice(0),this.x=$t,this.y=tn,this.matrix=ke,this.width=Ka(q),this.height=dl(q),this.outputDestination=jt,this.id="",this.objectNumber=-1};ta.prototype.restore=function(){ee=this.page,q=this.currentPage,Gt=this.pagesContext,Nt=this.pages,$t=this.x,tn=this.y,ke=this.matrix,ul(q,this.width),pr(q,this.height),jt=this.outputDestination};var Ga=function(m,k,U,G,nt){Jn.push(new ta),ee=q=0,Nt=[],$t=m,tn=k,ke=nt,Ba([U,G])};for(var gs in d.beginFormObject=function(m,k,U,G,nt){return Ga(m,k,U,G,nt),this},d.endFormObject=function(m){return function(k){if(Ze[k])Jn.pop().restore();else{var U=new ta,G="Xo"+(Object.keys(Zt).length+1).toString(10);U.id=G,Ze[k]=G,Zt[G]=U,Tt.publish("addFormObject",U),Jn.pop().restore()}}(m),this},d.doFormObject=function(m,k){var U=Zt[Ze[m]];return M("q"),M(k.toString()+" cm"),M("/"+U.id+" Do"),M("Q"),this},d.getFormObject=function(m){var k=Zt[Ze[m]];return{x:k.x,y:k.y,width:k.width,height:k.height,matrix:k.matrix}},d.save=function(m,k){return m=m||"generated.pdf",(k=k||{}).returnPromise=k.returnPromise||!1,k.returnPromise===!1?(js(Xs(Ji()),m),typeof js.unload=="function"&&oe.setTimeout&&setTimeout(js.unload,911),this):new Promise(function(U,G){try{var nt=js(Xs(Ji()),m);typeof js.unload=="function"&&oe.setTimeout&&setTimeout(js.unload,911),U(nt)}catch(bt){G(bt.message)}})},Yt.API)Yt.API.hasOwnProperty(gs)&&(gs==="events"&&Yt.API.events.length?function(m,k){var U,G,nt;for(nt=k.length-1;nt!==-1;nt--)U=k[nt][0],G=k[nt][1],m.subscribe.apply(m,[U].concat(typeof G=="function"?[G]:G))}(Tt,Yt.API.events):d[gs]=Yt.API[gs]);function Ka(m){return Gt[m].mediaBox.topRightX-Gt[m].mediaBox.bottomLeftX}function ul(m,k){Gt[m].mediaBox.topRightX=k+Gt[m].mediaBox.bottomLeftX}function dl(m){return Gt[m].mediaBox.topRightY-Gt[m].mediaBox.bottomLeftY}function pr(m,k){Gt[m].mediaBox.topRightY=k+Gt[m].mediaBox.bottomLeftY}var gr=d.getPageWidth=function(m){return Ka(m=m||q)/de},fl=d.setPageWidth=function(m,k){ul(m,k*de)},ms=d.getPageHeight=function(m){return dl(m=m||q)/de},pl=d.setPageHeight=function(m,k){pr(m,k*de)};return d.internal={pdfEscape:bi,getStyle:ol,getFont:nh,getFontSize:It,getCharSpace:hh,getTextColor:ch,getLineHeight:rh,getLineHeightFactor:ah,getLineWidth:ih,write:Pt,getHorizontalCoordinate:hr,getVerticalCoordinate:ur,getCoordinateString:oh,getVerticalCoordinateString:lh,collections:{},newObject:Te,newAdditionalObject:Vi,newObjectDeferred:Ue,newObjectDeferredBegin:wn,getFilters:Ti,putStream:mi,events:Tt,scaleFactor:de,pageSize:{getWidth:function(){return gr(q)},setWidth:function(m){fl(q,m)},getHeight:function(){return ms(q)},setHeight:function(m){pl(q,m)}},encryptionOptions:h,encryption:_n,getEncryptor:function(m){return h!==null?_n.encryptor(m,0):function(k){return k}},output:sl,getNumberOfPages:nl,get pages(){return Nt},out:M,f2:L,f3:R,getPageInfo:cr,getPageInfoByObjId:al,getCurrentPageInfo:Xc,getPDFVersion:y,Point:fr,Rectangle:Va,Matrix:re,hasHotfix:vi},Object.defineProperty(d.internal.pageSize,"width",{get:function(){return gr(q)},set:function(m){fl(q,m)},enumerable:!0,configurable:!0}),Object.defineProperty(d.internal.pageSize,"height",{get:function(){return ms(q)},set:function(m){pl(q,m)},enumerable:!0,configurable:!0}),(function(m){for(var k=0,U=Qt.length;k<U;k++){var G=Qo.call(this,m[k][0],m[k][1],m[k][2],Qt[k][3],!0);p===!1&&(g[G]=!0);var nt=m[k][0].split("-");Zo({id:G,fontName:nt[0],fontStyle:nt[1]||""})}Tt.publish("addFonts",{fonts:be,dictionary:pt})}).call(d,Qt),Bt="F1",tl(r,e),Tt.publish("initialized"),d}wa.prototype.lsbFirstWord=function(n){return String.fromCharCode(255&n,n>>8&255,n>>16&255,n>>24&255)},wa.prototype.toHexString=function(n){return n.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},wa.prototype.hexToBytes=function(n){for(var t=[],e=0;e<n.length;e+=2)t.push(String.fromCharCode(parseInt(n.substr(e,2),16)));return t.join("")},wa.prototype.processOwnerPassword=function(n,t){return Bu(Fu(t).substr(0,5),n)},wa.prototype.encryptor=function(n,t){var e=Fu(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&t,t>>8&255)).substr(0,10);return function(i){return Bu(e,i)}},kc.prototype.equals=function(n){var t,e="id,objectNumber,equals";if(!n||Fe(n)!==Fe(this))return!1;var i=0;for(t in this)if(!(e.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!n.hasOwnProperty(t)||this[t]!==n[t])return!1;i++}for(t in n)n.hasOwnProperty(t)&&e.indexOf(t)<0&&i--;return i===0},Yt.API={events:[]},Yt.version="4.1.0";var sn=Yt.API,sd=1,Vs=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},fa=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Ac=function(n){return n.toString().replace(/#/g,"#23").replace(/[\s\n\r()<>[\]{}\/%]/g,function(t){var e=t.charCodeAt(0).toString(16).toUpperCase();return"#"+(e.length===1?"0"+e:e)})},fe=function(n){return n.toFixed(2)},Zr=function(n){return n.toFixed(5)};sn.__acroform__={};var ii=function(n,t){n.prototype=Object.create(t.prototype),n.prototype.constructor=n},Np=function(n){return n*sd},ir=function(n){var t=new hm,e=Mt.internal.getHeight(n)||0,i=Mt.internal.getWidth(n)||0;return t.BBox=[0,0,Number(fe(i)),Number(fe(e))],t},nw=sn.__acroform__.setBit=function(n,t){if(n=n||0,t=t||0,isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|1<<t},iw=sn.__acroform__.clearBit=function(n,t){if(n=n||0,t=t||0,isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&~(1<<t)},rw=sn.__acroform__.getBit=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<t?1:0},dn=sn.__acroform__.getBitForPdf=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return rw(n,t-1)},fn=sn.__acroform__.setBitForPdf=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return nw(n,t-1)},pn=sn.__acroform__.clearBitForPdf=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return iw(n,t-1)},sw=sn.__acroform__.calculateCoordinates=function(n,t){var e=t.internal.getHorizontalCoordinate,i=t.internal.getVerticalCoordinate,r=n[0],s=n[1],a=n[2],o=n[3],l={};return l.lowerLeft_X=e(r)||0,l.lowerLeft_Y=i(s+o)||0,l.upperRight_X=e(r+a)||0,l.upperRight_Y=i(s)||0,[Number(fe(l.lowerLeft_X)),Number(fe(l.lowerLeft_Y)),Number(fe(l.upperRight_X)),Number(fe(l.upperRight_Y))]},aw=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var t=[],e=n._V||n.DV,i=Uu(n,e),r=n.scope.internal.getFont(n.fontName,n.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(n.scope.__private__.encodeColorString(n.color)),t.push("/"+r+" "+fe(i.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(i.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=ir(n);return s.scope=n.scope,s.stream=t.join(`
`),s}},Uu=function(n,t){var e=n.fontSize===0?n.maxFontSize:n.fontSize,i={text:"",fontSize:""},r=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");r=n.multiline?r.map(function(L){return L.split(`
`)}):r.map(function(L){return[L]});var s=e,a=Mt.internal.getHeight(n)||0;a=a<0?-a:a;var o=Mt.internal.getWidth(n)||0;o=o<0?-o:o;var l=function(L,R,H){if(L+1<r.length){var W=R+" "+r[L+1][0];return Gl(W,n,H).width<=o-4}return!1};s++;t:for(;s>0;){t="",s--;var c,h,p=Gl("3",n,s).height,g=n.multiline?a-s:(a-p)/2,d=g+=2,v=0,y=0,x=0;if(s<=0){t=`(...) Tj
`,t+="% Width of Text: "+Gl(t,n,s=12).width+", FieldWidth:"+o+`
`;break}for(var _="",E=0,O=0;O<r.length;O++)if(r.hasOwnProperty(O)){var T=!1;if(r[O].length!==1&&x!==r[O].length-1){if((p+2)*(E+2)+2>a)continue t;_+=r[O][x],T=!0,y=O,O--}else{_=(_+=r[O][x]+" ").substr(_.length-1)==" "?_.substr(0,_.length-1):_;var V=parseInt(O),Q=l(V,_,s),J=O>=r.length-1;if(Q&&!J){_+=" ",x=0;continue}if(Q||J){if(J)y=V;else if(n.multiline&&(p+2)*(E+2)+2>a)continue t}else{if(!n.multiline||(p+2)*(E+2)+2>a)continue t;y=V}}for(var $="",D=v;D<=y;D++){var Z=r[D];if(n.multiline){if(D===y){$+=Z[x]+" ",x=(x+1)%Z.length;continue}if(D===v){$+=Z[Z.length-1]+" ";continue}}$+=Z[0]+" "}switch($=$.substr($.length-1)==" "?$.substr(0,$.length-1):$,h=Gl($,n,s).width,n.textAlign){case"right":c=o-h-2;break;case"center":c=(o-h)/2;break;default:c=2}t+=fe(c)+" "+fe(d)+` Td
`,t+="("+Vs($)+`) Tj
`,t+=-fe(c)+` 0 Td
`,d=-(s+2),h=0,v=T?y:y+1,E++,_=""}break}return i.text=t,i.fontSize=s,i},Gl=function(n,t,e){var i=t.scope.internal.getFont(t.fontName,t.fontStyle),r=t.scope.getStringUnitWidth(n,{font:i,fontSize:parseFloat(e),charSpace:0})*parseFloat(e);return{height:t.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(e),charSpace:0})*parseFloat(e)*1.5,width:r}},ow={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},lw=function(n,t){var e={type:"reference",object:n};t.internal.getPageInfo(n.page).pageContext.annotations.find(function(i){return i.type===e.type&&i.object===e.object})===void 0&&t.internal.getPageInfo(n.page).pageContext.annotations.push(e)},cw=function(n,t){if(t.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(Hi.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(ow)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");sd=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new um,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(e){e.internal.events.unsubscribe(e.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete e.internal.acroformPlugin.acroFormDictionaryRoot._eventID,e.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var r in i)if(i.hasOwnProperty(r)){var s=i[r];s.objId=void 0,s.hasAnnotation&&lw(s,e)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(e){if(e.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(e){(function(i,r){var s=!i;for(var a in i||(r.internal.newObjectDeferredBegin(r.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),r.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||r.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(a)){var o=i[a],l=[],c=o.Rect;if(o.Rect&&(o.Rect=sw(o.Rect,r)),r.internal.newObjectDeferredBegin(o.objId,!0),o.DA=Mt.createDefaultAppearanceStream(o),Fe(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=c,o.hasAppearanceStream&&!o.appearanceStreamContent){var h=aw(o);l.push({key:"AP",value:"<</N "+h+">>"}),r.internal.acroformPlugin.xForms.push(h)}if(o.appearanceStreamContent){var p="";for(var g in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(g)){var d=o.appearanceStreamContent[g];if(p+="/"+g+" ",p+="<<",Object.keys(d).length>=1||Array.isArray(d)){for(var a in d)if(d.hasOwnProperty(a)){var v=d[a];typeof v=="function"&&(v=v.call(r,o)),p+="/"+a+" "+v+" ",r.internal.acroformPlugin.xForms.indexOf(v)>=0||r.internal.acroformPlugin.xForms.push(v)}}else typeof(v=d)=="function"&&(v=v.call(r,o)),p+="/"+a+" "+v,r.internal.acroformPlugin.xForms.indexOf(v)>=0||r.internal.acroformPlugin.xForms.push(v);p+=">>"}l.push({key:"AP",value:`<<
`+p+">>"})}r.internal.putStream({additionalKeyValues:l,objectId:o.objId}),r.internal.out("endobj")}s&&function(y,x){for(var _ in y)if(y.hasOwnProperty(_)){var E=_,O=y[_];x.internal.newObjectDeferredBegin(O.objId,!0),Fe(O)==="object"&&typeof O.putStream=="function"&&O.putStream(),delete y[E]}}(r.internal.acroformPlugin.xForms,r)})(e,n)}),n.internal.acroformPlugin.isInitialized=!0}},cm=sn.__acroform__.arrayToPdfArray=function(n,t,e){var i=function(a){return a};if(Array.isArray(n)){for(var r="[",s=0;s<n.length;s++)switch(s!==0&&(r+=" "),Fe(n[s])){case"boolean":case"number":case"object":r+=n[s].toString();break;case"string":n[s].substr(0,1)==="/"?r+="/"+Ac(n[s].substr(1)):(t!==void 0&&e&&(i=e.internal.getEncryptor(t)),r+="("+Vs(i(n[s].toString()))+")")}return r+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Qh=function(n,t,e){var i=function(r){return r};return t!==void 0&&e&&(i=e.internal.getEncryptor(t)),(n=n||"").toString(),"("+Vs(i(n))+")"},or=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};or.prototype.toString=function(){return this.objId+" 0 R"},or.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},or.prototype.getKeyValueListForStream=function(){var n=[],t=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var e in t)if(Object.getOwnPropertyDescriptor(this,t[e]).configurable===!1){var i=t[e],r=this[i];r&&(Array.isArray(r)?n.push({key:i,value:cm(r,this.objId,this.scope)}):r instanceof or?(r.scope=this.scope,n.push({key:i,value:r.objId+" 0 R"})):typeof r!="function"&&n.push({key:i,value:r}))}return n};var hm=function(){or.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(e){n=e.trim()},get:function(){return n||null}})};ii(hm,or);var um=function(){or.call(this);var n,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var e=function(i){return i};return this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),"("+Vs(e(n))+")"}},set:function(e){n=e}})};ii(um,or);var Hi=function n(){or.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute F supplied.');t=_}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!dn(t,3)},set:function(_){_?this.F=fn(t,3):this.F=pn(t,3)}});var e=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return e},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute Ff supplied.');e=_}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(i.length!==0)return i},set:function(_){i=_!==void 0?_:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(_){i[0]=_}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(_){i[1]=_}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(_){i[2]=_}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(_){i[3]=_}});var r="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return r},set:function(_){switch(_){case"/Btn":case"/Tx":case"/Ch":case"/Sig":r=_;break;default:throw new Error('Invalid value "'+_+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Nc)return;s="FieldObject"+n.FieldNum++}var _=function(E){return E};return this.scope&&(_=this.scope.internal.getEncryptor(this.objId)),"("+Vs(_(s))+")"},set:function(_){s=_.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(_){s=_}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(_){a=_}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(_){o=_}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(_){l=_}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/sd:c},set:function(_){c=_}});var h="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return h},set:function(_){h=_}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof Nc||this instanceof Us))return Qh(p,this.objId,this.scope)},set:function(_){_=_.toString(),p=_}});var g=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Cn==0?Qh(g,this.objId,this.scope):g},set:function(_){_=_.toString(),g=this instanceof Cn==0?_.substr(0,1)==="("?fa(_.substr(1,_.length-2)):fa(_):_}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Cn==1?fa(g.substr(1,g.length-1)):g},set:function(_){_=_.toString(),g=this instanceof Cn==1?"/"+Ac(_):_}});var d=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(d)return d},set:function(_){this.V=_}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(d)return this instanceof Cn==0?Qh(d,this.objId,this.scope):d},set:function(_){_=_.toString(),d=this instanceof Cn==0?_.substr(0,1)==="("?fa(_.substr(1,_.length-2)):fa(_):_}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Cn==1?fa(d.substr(1,d.length-1)):d},set:function(_){_=_.toString(),d=this instanceof Cn==1?"/"+Ac(_):_}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var v,y=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return y},set:function(_){_=!!_,y=_}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(v)return v},set:function(_){v=_}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,1)},set:function(_){_?this.Ff=fn(this.Ff,1):this.Ff=pn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,2)},set:function(_){_?this.Ff=fn(this.Ff,2):this.Ff=pn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,3)},set:function(_){_?this.Ff=fn(this.Ff,3):this.Ff=pn(this.Ff,3)}});var x=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(x!==null)return x},set:function(_){if([0,1,2].indexOf(_)===-1)throw new Error('Invalid value "'+_+'" for attribute Q supplied.');x=_}}),Object.defineProperty(this,"textAlign",{get:function(){var _;switch(x){case 0:default:_="left";break;case 1:_="center";break;case 2:_="right"}return _},configurable:!0,enumerable:!0,set:function(_){switch(_){case"right":case 2:x=2;break;case"center":case 1:x=1;break;default:x=0}}})};ii(Hi,or);var Aa=function(){Hi.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){n=e}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return cm(t,this.objId,this.scope)},set:function(e){var i,r;r=[],typeof(i=e)=="string"&&(r=function(s,a,o){o||(o=1);for(var l,c=[];l=a.exec(s);)c.push(l[o]);return c}(i,/\((.*?)\)/g)),t=r}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,i){for(i=i||!1,e=(e=e||"").toString();t.indexOf(e)!==-1&&(t.splice(t.indexOf(e),1),i!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,18)},set:function(e){e?this.Ff=fn(this.Ff,18):this.Ff=pn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,19)},set:function(e){this.combo===!0&&(e?this.Ff=fn(this.Ff,19):this.Ff=pn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,20)},set:function(e){e?(this.Ff=fn(this.Ff,20),t.sort()):this.Ff=pn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,22)},set:function(e){e?this.Ff=fn(this.Ff,22):this.Ff=pn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,23)},set:function(e){e?this.Ff=fn(this.Ff,23):this.Ff=pn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,27)},set:function(e){e?this.Ff=fn(this.Ff,27):this.Ff=pn(this.Ff,27)}}),this.hasAppearanceStream=!1};ii(Aa,Hi);var Na=function(){Aa.call(this),this.fontName="helvetica",this.combo=!1};ii(Na,Aa);var La=function(){Na.call(this),this.combo=!0};ii(La,Na);var cc=function(){La.call(this),this.edit=!0};ii(cc,La);var Cn=function(){Hi.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,15)},set:function(e){e?this.Ff=fn(this.Ff,15):this.Ff=pn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,16)},set:function(e){e?this.Ff=fn(this.Ff,16):this.Ff=pn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,17)},set:function(e){e?this.Ff=fn(this.Ff,17):this.Ff=pn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,26)},set:function(e){e?this.Ff=fn(this.Ff,26):this.Ff=pn(this.Ff,26)}});var n,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(s){return s};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var i,r=[];for(i in r.push("<<"),t)r.push("/"+i+" ("+Vs(e(t[i]))+")");return r.push(">>"),r.join(`
`)}},set:function(e){Fe(e)==="object"&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){typeof e=="string"&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(e){n="/"+Ac(e)}})};ii(Cn,Hi);var hc=function(){Cn.call(this),this.pushButton=!0};ii(hc,Cn);var Pa=function(){Cn.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t!==void 0?t:[]}})};ii(Pa,Cn);var Nc=function(){var n,t;Hi.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(r){n=r}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(r){t=r}});var e,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(o){return o};this.scope&&(r=this.scope.internal.getEncryptor(this.objId));var s,a=[];for(s in a.push("<<"),i)a.push("/"+s+" ("+Vs(r(i[s]))+")");return a.push(">>"),a.join(`
`)},set:function(r){Fe(r)==="object"&&(i=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(r){typeof r=="string"&&(i.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Mt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ii(Nc,Hi),Pa.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var e=this.Kids[t];e.appearanceStreamContent=n.createAppearanceStream(e.optionName),e.caption=n.getCA()}},Pa.prototype.createOption=function(n){var t=new Nc;return t.Parent=this,t.optionName=n,this.Kids.push(t),hw.call(this.scope,t),t};var uc=function(){Cn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Mt.CheckBox.createAppearanceStream()};ii(uc,Cn);var Us=function(){Hi.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,13)},set:function(t){t?this.Ff=fn(this.Ff,13):this.Ff=pn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,21)},set:function(t){t?this.Ff=fn(this.Ff,21):this.Ff=pn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,23)},set:function(t){t?this.Ff=fn(this.Ff,23):this.Ff=pn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,24)},set:function(t){t?this.Ff=fn(this.Ff,24):this.Ff=pn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,25)},set:function(t){t?this.Ff=fn(this.Ff,25):this.Ff=pn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,26)},set:function(t){t?this.Ff=fn(this.Ff,26):this.Ff=pn(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){Number.isInteger(t)&&(n=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ii(Us,Hi);var dc=function(){Us.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,14)},set:function(n){n?this.Ff=fn(this.Ff,14):this.Ff=pn(this.Ff,14)}}),this.password=!0};ii(dc,Us);var Mt={CheckBox:{createAppearanceStream:function(){return{N:{On:Mt.CheckBox.YesNormal},D:{On:Mt.CheckBox.YesPushDown,Off:Mt.CheckBox.OffPushDown}}},YesPushDown:function(n){var t=ir(n);t.scope=n.scope;var e=[],i=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),s=Uu(n,n.caption);return e.push("0.749023 g"),e.push("0 0 "+fe(Mt.internal.getWidth(n))+" "+fe(Mt.internal.getHeight(n))+" re"),e.push("f"),e.push("BMC"),e.push("q"),e.push("0 0 1 rg"),e.push("/"+i+" "+fe(s.fontSize)+" Tf "+r),e.push("BT"),e.push(s.text),e.push("ET"),e.push("Q"),e.push("EMC"),t.stream=e.join(`
`),t},YesNormal:function(n){var t=ir(n);t.scope=n.scope;var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),r=[],s=Mt.internal.getHeight(n),a=Mt.internal.getWidth(n),o=Uu(n,n.caption);return r.push("1 g"),r.push("0 0 "+fe(a)+" "+fe(s)+" re"),r.push("f"),r.push("q"),r.push("0 0 1 rg"),r.push("0 0 "+fe(a-1)+" "+fe(s-1)+" re"),r.push("W"),r.push("n"),r.push("0 g"),r.push("BT"),r.push("/"+e+" "+fe(o.fontSize)+" Tf "+i),r.push(o.text),r.push("ET"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(n){var t=ir(n);t.scope=n.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+fe(Mt.internal.getWidth(n))+" "+fe(Mt.internal.getHeight(n))+" re"),e.push("f"),t.stream=e.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(n){var t={D:{Off:Mt.RadioButton.Circle.OffPushDown},N:{}};return t.N[n]=Mt.RadioButton.Circle.YesNormal,t.D[n]=Mt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(n){var t=ir(n);t.scope=n.scope;var e=[],i=Mt.internal.getWidth(n)<=Mt.internal.getHeight(n)?Mt.internal.getWidth(n)/4:Mt.internal.getHeight(n)/4;i=Number((.9*i).toFixed(5));var r=Mt.internal.Bezier_C,s=Number((i*r).toFixed(5));return e.push("q"),e.push("1 0 0 1 "+Zr(Mt.internal.getWidth(n)/2)+" "+Zr(Mt.internal.getHeight(n)/2)+" cm"),e.push(i+" 0 m"),e.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),e.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),e.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),e.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t},YesPushDown:function(n){var t=ir(n);t.scope=n.scope;var e=[],i=Mt.internal.getWidth(n)<=Mt.internal.getHeight(n)?Mt.internal.getWidth(n)/4:Mt.internal.getHeight(n)/4;i=Number((.9*i).toFixed(5));var r=Number((2*i).toFixed(5)),s=Number((r*Mt.internal.Bezier_C).toFixed(5)),a=Number((i*Mt.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+Zr(Mt.internal.getWidth(n)/2)+" "+Zr(Mt.internal.getHeight(n)/2)+" cm"),e.push(r+" 0 m"),e.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),e.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),e.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),e.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),e.push("f"),e.push("Q"),e.push("0 g"),e.push("q"),e.push("1 0 0 1 "+Zr(Mt.internal.getWidth(n)/2)+" "+Zr(Mt.internal.getHeight(n)/2)+" cm"),e.push(i+" 0 m"),e.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),e.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),e.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),e.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t},OffPushDown:function(n){var t=ir(n);t.scope=n.scope;var e=[],i=Mt.internal.getWidth(n)<=Mt.internal.getHeight(n)?Mt.internal.getWidth(n)/4:Mt.internal.getHeight(n)/4;i=Number((.9*i).toFixed(5));var r=Number((2*i).toFixed(5)),s=Number((r*Mt.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+Zr(Mt.internal.getWidth(n)/2)+" "+Zr(Mt.internal.getHeight(n)/2)+" cm"),e.push(r+" 0 m"),e.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),e.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),e.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),e.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t}},Cross:{createAppearanceStream:function(n){var t={D:{Off:Mt.RadioButton.Cross.OffPushDown},N:{}};return t.N[n]=Mt.RadioButton.Cross.YesNormal,t.D[n]=Mt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(n){var t=ir(n);t.scope=n.scope;var e=[],i=Mt.internal.calculateCross(n);return e.push("q"),e.push("1 1 "+fe(Mt.internal.getWidth(n)-2)+" "+fe(Mt.internal.getHeight(n)-2)+" re"),e.push("W"),e.push("n"),e.push(fe(i.x1.x)+" "+fe(i.x1.y)+" m"),e.push(fe(i.x2.x)+" "+fe(i.x2.y)+" l"),e.push(fe(i.x4.x)+" "+fe(i.x4.y)+" m"),e.push(fe(i.x3.x)+" "+fe(i.x3.y)+" l"),e.push("s"),e.push("Q"),t.stream=e.join(`
`),t},YesPushDown:function(n){var t=ir(n);t.scope=n.scope;var e=Mt.internal.calculateCross(n),i=[];return i.push("0.749023 g"),i.push("0 0 "+fe(Mt.internal.getWidth(n))+" "+fe(Mt.internal.getHeight(n))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+fe(Mt.internal.getWidth(n)-2)+" "+fe(Mt.internal.getHeight(n)-2)+" re"),i.push("W"),i.push("n"),i.push(fe(e.x1.x)+" "+fe(e.x1.y)+" m"),i.push(fe(e.x2.x)+" "+fe(e.x2.y)+" l"),i.push(fe(e.x4.x)+" "+fe(e.x4.y)+" m"),i.push(fe(e.x3.x)+" "+fe(e.x3.y)+" l"),i.push("s"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(n){var t=ir(n);t.scope=n.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+fe(Mt.internal.getWidth(n))+" "+fe(Mt.internal.getHeight(n))+" re"),e.push("f"),t.stream=e.join(`
`),t}}},createDefaultAppearanceStream:function(n){var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,e=n.scope.__private__.encodeColorString(n.color);return"/"+t+" "+n.fontSize+" Tf "+e}};Mt.internal={Bezier_C:.551915024494,calculateCross:function(n){var t=Mt.internal.getWidth(n),e=Mt.internal.getHeight(n),i=Math.min(t,e);return{x1:{x:(t-i)/2,y:(e-i)/2+i},x2:{x:(t-i)/2+i,y:(e-i)/2},x3:{x:(t-i)/2,y:(e-i)/2},x4:{x:(t-i)/2+i,y:(e-i)/2+i}}}},Mt.internal.getWidth=function(n){var t=0;return Fe(n)==="object"&&(t=Np(n.Rect[2])),t},Mt.internal.getHeight=function(n){var t=0;return Fe(n)==="object"&&(t=Np(n.Rect[3])),t};var hw=sn.addField=function(n){if(cw(this,n),!(n instanceof Hi))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=n).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};sn.AcroFormChoiceField=Aa,sn.AcroFormListBox=Na,sn.AcroFormComboBox=La,sn.AcroFormEditBox=cc,sn.AcroFormButton=Cn,sn.AcroFormPushButton=hc,sn.AcroFormRadioButton=Pa,sn.AcroFormCheckBox=uc,sn.AcroFormTextField=Us,sn.AcroFormPasswordField=dc,sn.AcroFormAppearance=Mt,sn.AcroForm={ChoiceField:Aa,ListBox:Na,ComboBox:La,EditBox:cc,Button:Cn,PushButton:hc,RadioButton:Pa,CheckBox:uc,TextField:Us,PasswordField:dc,Appearance:Mt},Yt.AcroForm={ChoiceField:Aa,ListBox:Na,ComboBox:La,EditBox:cc,Button:Cn,PushButton:hc,RadioButton:Pa,CheckBox:uc,TextField:Us,PasswordField:dc,Appearance:Mt};Yt.AcroForm;function dm(n){return n.reduce(function(t,e,i){return t[e]=i,t},{})}(function(n){var t="addImage_";n.__addimage__={};var e="UNKNOWN",i={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=n.__addimage__.getImageFileTypeByImageData=function(L,R){var H,W,et,ct,ot,rt=e;if((R=R||e)==="RGBA"||L.data!==void 0&&L.data instanceof Uint8ClampedArray&&"height"in L&&"width"in L)return"RGBA";if(Q(L))for(ot in i)for(et=i[ot],H=0;H<et.length;H+=1){for(ct=!0,W=0;W<et[H].length;W+=1)if(et[H][W]!==void 0&&et[H][W]!==L[W]){ct=!1;break}if(ct===!0){rt=ot;break}}else for(ot in i)for(et=i[ot],H=0;H<et.length;H+=1){for(ct=!0,W=0;W<et[H].length;W+=1)if(et[H][W]!==void 0&&et[H][W]!==L.charCodeAt(W)){ct=!1;break}if(ct===!0){rt=ot;break}}return rt===e&&R!==e&&(rt=R),rt},s=function L(R){for(var H=this.internal.write,W=this.internal.putStream,et=(0,this.internal.getFilters)();et.indexOf("FlateEncode")!==-1;)et.splice(et.indexOf("FlateEncode"),1);R.objectId=this.internal.newObject();var ct=[];if(ct.push({key:"Type",value:"/XObject"}),ct.push({key:"Subtype",value:"/Image"}),ct.push({key:"Width",value:R.width}),ct.push({key:"Height",value:R.height}),R.colorSpace===_.INDEXED?ct.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(R.palette.length/3-1)+" "+("sMask"in R&&R.sMask!==void 0?R.objectId+2:R.objectId+1)+" 0 R]"}):(ct.push({key:"ColorSpace",value:"/"+R.colorSpace}),R.colorSpace===_.DEVICE_CMYK&&ct.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ct.push({key:"BitsPerComponent",value:R.bitsPerComponent}),"decodeParameters"in R&&R.decodeParameters!==void 0&&ct.push({key:"DecodeParms",value:"<<"+R.decodeParameters+">>"}),"transparency"in R&&Array.isArray(R.transparency)&&R.transparency.length>0){for(var ot="",rt=0,ht=R.transparency.length;rt<ht;rt++)ot+=R.transparency[rt]+" "+R.transparency[rt]+" ";ct.push({key:"Mask",value:"["+ot+"]"})}R.sMask!==void 0&&ct.push({key:"SMask",value:R.objectId+1+" 0 R"});var At=R.filter!==void 0?["/"+R.filter]:void 0;if(W({data:R.data,additionalKeyValues:ct,alreadyAppliedFilters:At,objectId:R.objectId}),H("endobj"),"sMask"in R&&R.sMask!==void 0){var wt,P=(wt=R.sMaskBitsPerComponent)!==null&&wt!==void 0?wt:R.bitsPerComponent,q={width:R.width,height:R.height,colorSpace:"DeviceGray",bitsPerComponent:P,data:R.sMask};"filter"in R&&(q.decodeParameters="/Predictor ".concat(R.predictor," /Colors 1 /BitsPerComponent ").concat(P," /Columns ").concat(R.width),q.filter=R.filter),L.call(this,q)}if(R.colorSpace===_.INDEXED){var z=this.internal.newObject();W({data:$(new Uint8Array(R.palette)),objectId:z}),H("endobj")}},a=function(){var L=this.internal.collections[t+"images"];for(var R in L)s.call(this,L[R])},o=function(){var L,R=this.internal.collections[t+"images"],H=this.internal.write;for(var W in R)H("/I"+(L=R[W]).index,L.objectId,"0","R")},l=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var L=this.internal.collections[t+"images"];return l.call(this),L},h=function(){return Object.keys(this.internal.collections[t+"images"]).length},p=function(L){return typeof n["process"+L.toUpperCase()]=="function"},g=function(L){return Fe(L)==="object"&&L.nodeType===1},d=function(L,R){if(L.nodeName==="IMG"&&L.hasAttribute("src")){var H=""+L.getAttribute("src");if(H.indexOf("data:image/")===0)return lc(unescape(H).split("base64,").pop());var W=n.loadFile(H,!0);if(W!==void 0)return W}if(L.nodeName==="CANVAS"){if(L.width===0||L.height===0)throw new Error("Given canvas must have data. Canvas width: "+L.width+", height: "+L.height);var et;switch(R){case"PNG":et="image/png";break;case"WEBP":et="image/webp";break;default:et="image/jpeg"}return lc(L.toDataURL(et,1).split("base64,").pop())}},v=function(L){var R=this.internal.collections[t+"images"];if(R){for(var H in R)if(L===R[H].alias)return R[H]}},y=function(L,R,H){return L||R||(L=-96,R=-96),L<0&&(L=-1*H.width*72/L/this.internal.scaleFactor),R<0&&(R=-1*H.height*72/R/this.internal.scaleFactor),L===0&&(L=R*H.width/H.height),R===0&&(R=L*H.height/H.width),[L,R]},x=function(L,R,H,W,et,ct){var ot=y.call(this,H,W,et),rt=this.internal.getCoordinateString,ht=this.internal.getVerticalCoordinateString,At=c.call(this);if(H=ot[0],W=ot[1],At[et.index]=et,ct){ct*=Math.PI/180;var wt=Math.cos(ct),P=Math.sin(ct),q=function(K){return K.toFixed(4)},z=[q(wt),q(P),q(-1*P),q(wt),0,0,"cm"]}this.internal.write("q"),ct?(this.internal.write([1,"0","0",1,rt(L),ht(R+W),"cm"].join(" ")),this.internal.write(z.join(" ")),this.internal.write([rt(H),"0","0",rt(W),"0","0","cm"].join(" "))):this.internal.write([rt(H),"0","0",rt(W),rt(L),ht(R+W),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+et.index+" Do"),this.internal.write("Q")},_=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var E=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},O=n.__addimage__.sHashCode=function(L){var R,H,W=0;if(typeof L=="string")for(H=L.length,R=0;R<H;R++)W=(W<<5)-W+L.charCodeAt(R),W|=0;else if(Q(L))for(H=L.byteLength/2,R=0;R<H;R++)W=(W<<5)-W+L[R],W|=0;return W},T=n.__addimage__.validateStringAsBase64=function(L){(L=L||"").toString().trim();var R=!0;return L.length===0&&(R=!1),L.length%4!=0&&(R=!1),/^[A-Za-z0-9+/]+$/.test(L.substr(0,L.length-2))===!1&&(R=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(L.substr(-2))===!1&&(R=!1),R},V=n.__addimage__.extractImageFromDataUrl=function(L){if(L==null||!(L=L.trim()).startsWith("data:"))return null;var R=L.indexOf(",");return R<0?null:L.substring(0,R).trim().endsWith("base64")?L.substring(R+1):null};n.__addimage__.isArrayBuffer=function(L){return L instanceof ArrayBuffer};var Q=n.__addimage__.isArrayBufferView=function(L){return L instanceof Int8Array||L instanceof Uint8Array||L instanceof Uint8ClampedArray||L instanceof Int16Array||L instanceof Uint16Array||L instanceof Int32Array||L instanceof Uint32Array||L instanceof Float32Array||L instanceof Float64Array},J=n.__addimage__.binaryStringToUint8Array=function(L){for(var R=L.length,H=new Uint8Array(R),W=0;W<R;W++)H[W]=L.charCodeAt(W);return H},$=n.__addimage__.arrayBufferToBinaryString=function(L){for(var R="",H=Q(L)?L:new Uint8Array(L),W=0;W<H.length;W+=8192)R+=String.fromCharCode.apply(null,H.subarray(W,W+8192));return R};n.addImage=function(){var L,R,H,W,et,ct,ot,rt,ht;if(typeof arguments[1]=="number"?(R=e,H=arguments[1],W=arguments[2],et=arguments[3],ct=arguments[4],ot=arguments[5],rt=arguments[6],ht=arguments[7]):(R=arguments[1],H=arguments[2],W=arguments[3],et=arguments[4],ct=arguments[5],ot=arguments[6],rt=arguments[7],ht=arguments[8]),Fe(L=arguments[0])==="object"&&!g(L)&&"imageData"in L){var At=L;L=At.imageData,R=At.format||R||e,H=At.x||H||0,W=At.y||W||0,et=At.w||At.width||et,ct=At.h||At.height||ct,ot=At.alias||ot,rt=At.compression||rt,ht=At.rotation||At.angle||ht}var wt=this.internal.getFilters();if(rt===void 0&&wt.indexOf("FlateEncode")!==-1&&(rt="SLOW"),isNaN(H)||isNaN(W))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var P=D.call(this,L,R,ot,rt);return x.call(this,H,W,et,ct,P,ht),this};var D=function(L,R,H,W){var et,ct,ot;if(typeof L=="string"&&r(L)===e){L=unescape(L);var rt=Z(L,!1);(rt!==""||(rt=n.loadFile(L,!0))!==void 0)&&(L=rt)}if(g(L)&&(L=d(L,R)),R=r(L,R),!p(R))throw new Error("addImage does not support files of type '"+R+"', please ensure that a plugin for '"+R+"' support is added.");if(((ot=H)==null||ot.length===0)&&(H=function(ht){return typeof ht=="string"||Q(ht)?O(ht):Q(ht.data)?O(ht.data):null}(L)),(et=v.call(this,H))||(L instanceof Uint8Array||R==="RGBA"||(ct=L,L=J(L)),et=this["process"+R.toUpperCase()](L,h.call(this),H,function(ht){return ht&&typeof ht=="string"&&(ht=ht.toUpperCase()),ht in n.image_compression?ht:E.NONE}(W),ct)),!et)throw new Error("An unknown error occurred whilst processing the image.");return et},Z=n.__addimage__.convertBase64ToBinaryString=function(L,R){R=typeof R!="boolean"||R;var H,W="";if(typeof L=="string"){var et;H=(et=V(L))!==null&&et!==void 0?et:L;try{W=lc(H)}catch(ct){if(R)throw T(H)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ct.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return W};n.getImageProperties=function(L){var R,H,W="";if(g(L)&&(L=d(L)),typeof L=="string"&&r(L)===e&&((W=Z(L,!1))===""&&(W=n.loadFile(L)||""),L=W),H=r(L),!p(H))throw new Error("addImage does not support files of type '"+H+"', please ensure that a plugin for '"+H+"' support is added.");if(L instanceof Uint8Array||(L=J(L)),!(R=this["process"+H.toUpperCase()](L)))throw new Error("An unknown error occurred whilst processing the image");return R.fileType=H,R}})(Yt.API),function(n){var t=function(e){if(e!==void 0&&e!="")return!0};Yt.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(e){for(var i,r,s,a=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(e.objId),c=e.pageContext.annotations,h=!1,p=0;p<c.length&&!h;p++)switch((i=c[p]).type){case"link":(t(i.options.url)||t(i.options.pageNumber))&&(h=!0);break;case"reference":case"text":case"freetext":h=!0}if(h!=0){this.internal.write("/Annots [");for(var g=0;g<c.length;g++){i=c[g];var d=this.internal.pdfEscape,v=this.internal.getEncryptor(e.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var y=this.internal.newAdditionalObject(),x=this.internal.newAdditionalObject(),_=this.internal.getEncryptor(y.objId),E=i.title||"Note";s="<</Type /Annot /Subtype /Text "+(r="/Rect ["+a(i.bounds.x)+" "+o(i.bounds.y+i.bounds.h)+" "+a(i.bounds.x+i.bounds.w)+" "+o(i.bounds.y)+"] ")+"/Contents ("+d(_(i.contents))+")",s+=" /Popup "+x.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+d(_(E))+") >>",y.content=s;var O=y.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(r="/Rect ["+a(i.bounds.x+30)+" "+o(i.bounds.y+i.bounds.h)+" "+a(i.bounds.x+i.bounds.w+30)+" "+o(i.bounds.y)+"] ")+" /Parent "+O,i.open&&(s+=" /Open true"),s+=" >>",x.content=s,this.internal.write(y.objId,"0 R",x.objId,"0 R");break;case"freetext":r="/Rect ["+a(i.bounds.x)+" "+o(i.bounds.y)+" "+a(i.bounds.x+i.bounds.w)+" "+o(i.bounds.y+i.bounds.h)+"] ";var T=i.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+r+"/Contents ("+d(v(i.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+T+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(i.options.name){var V=this.annotations._nameMap[i.options.name];i.options.pageNumber=V.page,i.options.top=V.y}else i.options.top||(i.options.top=0);if(r="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",s="",i.options.url)s="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /A <</S /URI /URI ("+d(v(i.options.url))+") >>";else if(i.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,s+=" /FitV "+i.options.left+"]";break;default:var Q=o(i.options.top);i.options.left=i.options.left||0,i.options.zoom===void 0&&(i.options.zoom=0),s+=" /XYZ "+i.options.left+" "+Q+" "+i.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),n.createAnnotation=function(e){var i=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":i.pageContext.annotations.push(e)}},n.link=function(e,i,r,s,a){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(e),y:c(i),w:l(e+r),h:c(i+s)},options:a,type:"link"})},n.textWithLink=function(e,i,r,s){var a,o,l=this.getTextWidth(e),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){o=s.maxWidth;var h=this.splitTextToSize(e,o).length;a=Math.ceil(c*h)}else o=l,a=c;return this.text(e,i,r,s),r+=.2*c,s.align==="center"&&(i-=l/2),s.align==="right"&&(i-=l),this.link(i,r-c,o,a,s),l},n.getTextWidth=function(e){var i=this.internal.getFontSize();return this.getStringUnitWidth(e)*i/this.internal.scaleFactor}}(Yt.API),function(n){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},e={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},r=[1570,1571,1573,1575];n.__arabicParser__={};var s=n.__arabicParser__.isInArabicSubstitutionA=function(y){return t[y.charCodeAt(0)]!==void 0},a=n.__arabicParser__.isArabicLetter=function(y){return typeof y=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(y)},o=n.__arabicParser__.isArabicEndLetter=function(y){return a(y)&&s(y)&&t[y.charCodeAt(0)].length<=2},l=n.__arabicParser__.isArabicAlfLetter=function(y){return a(y)&&r.indexOf(y.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(y){return a(y)&&s(y)&&t[y.charCodeAt(0)].length>=1};var c=n.__arabicParser__.arabicLetterHasFinalForm=function(y){return a(y)&&s(y)&&t[y.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(y){return a(y)&&s(y)&&t[y.charCodeAt(0)].length>=3};var h=n.__arabicParser__.arabicLetterHasMedialForm=function(y){return a(y)&&s(y)&&t[y.charCodeAt(0)].length==4},p=n.__arabicParser__.resolveLigatures=function(y){var x=0,_=e,E="",O=0;for(x=0;x<y.length;x+=1)_[y.charCodeAt(x)]!==void 0?(O++,typeof(_=_[y.charCodeAt(x)])=="number"&&(E+=String.fromCharCode(_),_=e,O=0),x===y.length-1&&(_=e,E+=y.charAt(x-(O-1)),x-=O-1,O=0)):(_=e,E+=y.charAt(x-O),x-=O,O=0);return E};n.__arabicParser__.isArabicDiacritic=function(y){return y!==void 0&&i[y.charCodeAt(0)]!==void 0};var g=n.__arabicParser__.getCorrectForm=function(y,x,_){return a(y)?s(y)===!1?-1:!c(y)||!a(x)&&!a(_)||!a(_)&&o(x)||o(y)&&!a(x)||o(y)&&l(x)||o(y)&&o(x)?0:h(y)&&a(x)&&!o(x)&&a(_)&&c(_)?3:o(y)||!a(_)?1:2:-1},d=function(y){var x=0,_=0,E=0,O="",T="",V="",Q=(y=y||"").split("\\s+"),J=[];for(x=0;x<Q.length;x+=1){for(J.push(""),_=0;_<Q[x].length;_+=1)O=Q[x][_],T=Q[x][_-1],V=Q[x][_+1],a(O)?(E=g(O,T,V),J[x]+=E!==-1?String.fromCharCode(t[O.charCodeAt(0)][E]):O):J[x]+=O;J[x]=p(J[x])}return J.join(" ")},v=n.__arabicParser__.processArabic=n.processArabic=function(){var y,x=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,_=[];if(Array.isArray(x)){var E=0;for(_=[],E=0;E<x.length;E+=1)Array.isArray(x[E])?_.push([d(x[E][0]),x[E][1],x[E][2]]):_.push([d(x[E])]);y=_}else y=d(x);return typeof arguments[0]=="string"?y:(arguments[0].text=y,arguments[0])};n.events.push(["preProcessText",v])}(Yt.API),Yt.API.autoPrint=function(n){var t;return(n=n||{}).variant=n.variant||"non-conform",n.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},function(n){var t=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(o){e=o}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(o){i=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var r=300;Object.defineProperty(this,"height",{get:function(){return r},set:function(o){r=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=r+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(o){s=o}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(o){a=o}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(e,i){var r;if((e=e||"2d")!=="2d")return null;for(r in i)this.pdf.context2d.hasOwnProperty(r)&&(this.pdf.context2d[r]=i[r]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Yt.API),function(n){var t={left:0,top:0,bottom:0,right:0},e=!1,i=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),r.call(this))},r=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(y){l=y}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(y){c=y}});var h=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return h},set:function(y){h=y}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(y){p=y}});var g=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return g},set:function(y){g=y}});var d=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return d},set:function(y){d=y}});var v=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return v},set:function(y){v=y}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(l){return i.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},n.getTextDimensions=function(l,c){i.call(this);var h=(c=c||{}).fontSize||this.getFontSize(),p=c.font||this.getFont(),g=c.scaleFactor||this.internal.scaleFactor,d=0,v=0,y=0,x=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var _=c.maxWidth;_>0?typeof l=="string"?l=this.splitTextToSize(l,_):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(O,T){return O.concat(x.splitTextToSize(T,_))},[])):l=Array.isArray(l)?l:[l];for(var E=0;E<l.length;E++)d<(y=this.getStringUnitWidth(l[E],{font:p})*h)&&(d=y);return d!==0&&(v=l.length),{w:d/=g,h:Math.max((v*h*this.getLineHeightFactor()-h*(this.getLineHeightFactor()-1))/g,0)}},n.cellAddPage=function(){i.call(this),this.addPage();var l=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=n.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),i.call(this);var c=this.internal.__cell__.lastCell,h=this.internal.__cell__.padding,p=this.internal.__cell__.margins||t,g=this.internal.__cell__.tableHeaderRow,d=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=p.top,d&&g&&(this.printHeaderRow(l.lineNumber,!0),l.y+=g[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,e===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-h,l.y+h,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+h,{align:"center",baseline:"top",maxWidth:l.width-h-h}):this.text(l.text,l.x+h,l.y+h,{align:"left",baseline:"top",maxWidth:l.width-h-h})),this.internal.__cell__.lastCell=l,this};n.table=function(l,c,h,p,g){if(i.call(this),!h)throw new Error("No data for PDF table.");var d,v,y,x,_=[],E=[],O=[],T={},V={},Q=[],J=[],$=(g=g||{}).autoSize||!1,D=g.printHeaders!==!1,Z=g.css&&g.css["font-size"]!==void 0?16*g.css["font-size"]:g.fontSize||12,L=g.margins||Object.assign({width:this.getPageWidth()},t),R=typeof g.padding=="number"?g.padding:3,H=g.headerBackgroundColor||"#c8c8c8",W=g.headerTextColor||"#000";if(r.call(this),this.internal.__cell__.printHeaders=D,this.internal.__cell__.margins=L,this.internal.__cell__.table_font_size=Z,this.internal.__cell__.padding=R,this.internal.__cell__.headerBackgroundColor=H,this.internal.__cell__.headerTextColor=W,this.setFontSize(Z),p==null)E=_=Object.keys(h[0]),O=_.map(function(){return"left"});else if(Array.isArray(p)&&Fe(p[0])==="object")for(_=p.map(function(At){return At.name}),E=p.map(function(At){return At.prompt||At.name||""}),O=p.map(function(At){return At.align||"left"}),d=0;d<p.length;d+=1)V[p[d].name]=.7499990551181103*p[d].width;else Array.isArray(p)&&typeof p[0]=="string"&&(E=_=p,O=_.map(function(){return"left"}));if($||Array.isArray(p)&&typeof p[0]=="string")for(d=0;d<_.length;d+=1){for(T[x=_[d]]=h.map(function(At){return At[x]}),this.setFont(void 0,"bold"),Q.push(this.getTextDimensions(E[d],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),v=T[x],this.setFont(void 0,"normal"),y=0;y<v.length;y+=1)Q.push(this.getTextDimensions(v[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);V[x]=Math.max.apply(null,Q)+R+R,Q=[]}if(D){var et={};for(d=0;d<_.length;d+=1)et[_[d]]={},et[_[d]].text=E[d],et[_[d]].align=O[d];var ct=o.call(this,et,V);J=_.map(function(At){return new s(l,c,V[At],ct,et[At].text,void 0,et[At].align)}),this.setTableHeaderRow(J),this.printHeaderRow(1,!1)}var ot=p.reduce(function(At,wt){return At[wt.name]=wt.align,At},{});for(d=0;d<h.length;d+=1){"rowStart"in g&&g.rowStart instanceof Function&&g.rowStart({row:d,data:h[d]},this);var rt=o.call(this,h[d],V);for(y=0;y<_.length;y+=1){var ht=h[d][_[y]];"cellStart"in g&&g.cellStart instanceof Function&&g.cellStart({row:d,col:y,data:ht},this),a.call(this,new s(l,c,V[_[y]],rt,ht,d+2,ot[_[y]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var o=function(l,c){var h=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,g=this.internal.scaleFactor;return Object.keys(l).map(function(d){var v=l[d];return this.splitTextToSize(v.hasOwnProperty("text")?v.text:v,c[d]-h-h)},this).map(function(d){return this.getLineHeightFactor()*d.length*p/g+h+h},this).reduce(function(d,v){return Math.max(d,v)},0)};n.setTableHeaderRow=function(l){i.call(this),this.internal.__cell__.tableHeaderRow=l},n.printHeaderRow=function(l,c){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var h;if(e=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var g=[],d=0;d<this.internal.__cell__.tableHeaderRow.length;d+=1){h=this.internal.__cell__.tableHeaderRow[d].clone(),c&&(h.y=this.internal.__cell__.margins.top||0,g.push(h)),h.lineNumber=l;var v=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,h),this.setTextColor(v)}g.length>0&&this.setTableHeaderRow(g),this.setFont(void 0,"normal"),e=!1}}(Yt.API);var fm={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},pm=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],qu=dm(pm),gm=[100,200,300,400,500,600,700,800,900],uw=dm(gm);function tu(n){var t=n.family.replace(/"|'/g,"").toLowerCase(),e=function(s){return fm[s=s||"normal"]?s:"normal"}(n.style),i=function(s){return s?typeof s=="number"?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):s==="bold"?700:400:400}(n.weight),r=function(s){return typeof qu[s=s||"normal"]=="number"?s:"normal"}(n.stretch);return{family:t,style:e,weight:i,stretch:r,src:n.src||[],ref:n.ref||{name:t,style:[r,e,i].join(" ")}}}function Lp(n,t,e,i){var r;for(r=e;r>=0&&r<t.length;r+=i)if(n[t[r]])return n[t[r]];for(r=e;r>=0&&r<t.length;r-=i)if(n[t[r]])return n[t[r]]}var dw={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Pp={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Cp(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function Ep(n){return n.trimLeft()}function fw(n,t){for(var e=0;e<n.length;){if(n.charAt(e)===t)return[n.substring(0,e),n.substring(e+1)];e+=1}return null}function pw(n){var t=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],n.substring(t[0].length)]}var pa,Kl,Op,jp,Tp,eu=["times"];function Rp(n,t,e,i,r){var s=4,a=Dp;switch(r){case Yt.API.image_compression.FAST:s=1,a=Ip;break;case Yt.API.image_compression.MEDIUM:s=6,a=Mp;break;case Yt.API.image_compression.SLOW:s=9,a=Fp}n=function(l,c,h,p){for(var g,d=l.length/c,v=new Uint8Array(l.length+d),y=[gw,Ip,Dp,Mp,Fp],x=0;x<d;x+=1){var _=x*c,E=l.subarray(_,_+c);if(p)v.set(p(E,h,g),_+x);else{for(var O=y.length,T=[],V=0;V<O;V+=1)T[V]=y[V](E,h,g);var Q=bw(T.concat());v.set(T[Q],_+x)}g=E}return v}(n,t,Math.ceil(e*i/8),a);var o=Ru(n,{level:s});return Yt.API.__addimage__.arrayBufferToBinaryString(o)}function gw(n){var t=Array.apply([],n);return t.unshift(0),t}function Ip(n,t){var e=n.length,i=[];i[0]=1;for(var r=0;r<e;r+=1){var s=n[r-t]||0;i[r+1]=n[r]-s+256&255}return i}function Dp(n,t,e){var i=n.length,r=[];r[0]=2;for(var s=0;s<i;s+=1){var a=e&&e[s]||0;r[s+1]=n[s]-a+256&255}return r}function Mp(n,t,e){var i=n.length,r=[];r[0]=3;for(var s=0;s<i;s+=1){var a=n[s-t]||0,o=e&&e[s]||0;r[s+1]=n[s]+256-(a+o>>>1)&255}return r}function Fp(n,t,e){var i=n.length,r=[];r[0]=4;for(var s=0;s<i;s+=1){var a=mw(n[s-t]||0,e&&e[s]||0,e&&e[s-t]||0);r[s+1]=n[s]-a+256&255}return r}function mw(n,t,e){if(n===t&&t===e)return n;var i=Math.abs(t-e),r=Math.abs(n-e),s=Math.abs(n+t-e-e);return i<=r&&i<=s?n:r<=s?t:e}function bw(n){var t=n.map(function(e){return e.reduce(function(i,r){return i+Math.abs(r)},0)});return t.indexOf(Math.min.apply(null,t))}function nu(n,t,e){var i=t*e,r=Math.floor(i/8),s=16-(i-8*r+e),a=(1<<e)-1;return mm(n,r)>>s&a}function Bp(n,t,e,i){var r=e*i,s=Math.floor(r/8),a=16-(r-8*s+i),o=(1<<i)-1,l=(t&o)<<a;(function(c,h,p){if(h+1<c.byteLength)c.setUint16(h,p,!1);else{var g=p>>8&255;c.setUint8(h,g)}})(n,s,mm(n,s)&~(o<<a)&65535|l)}function mm(n,t){return t+1<n.byteLength?n.getUint16(t,!1):n.getUint8(t)<<8}function vw(n){var t=0;if(n[t++]!==71||n[t++]!==73||n[t++]!==70||n[t++]!==56||(n[t++]+1&253)!=56||n[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var e=n[t++]|n[t++]<<8,i=n[t++]|n[t++]<<8,r=n[t++],s=r>>7,a=1<<1+(7&r);n[t++],n[t++];var o=null,l=null;s&&(o=t,l=a,t+=3*a);var c=!0,h=[],p=0,g=null,d=0,v=null;for(this.width=e,this.height=i;c&&t<n.length;)switch(n[t++]){case 33:switch(n[t++]){case 255:if(n[t]!==11||n[t+1]==78&&n[t+2]==69&&n[t+3]==84&&n[t+4]==83&&n[t+5]==67&&n[t+6]==65&&n[t+7]==80&&n[t+8]==69&&n[t+9]==50&&n[t+10]==46&&n[t+11]==48&&n[t+12]==3&&n[t+13]==1&&n[t+16]==0)t+=14,v=n[t++]|n[t++]<<8,t++;else for(t+=12;;){if(!((L=n[t++])>=0))throw Error("Invalid block size");if(L===0)break;t+=L}break;case 249:if(n[t++]!==4||n[t+4]!==0)throw new Error("Invalid graphics extension block.");var y=n[t++];p=n[t++]|n[t++]<<8,g=n[t++],1&y||(g=null),d=y>>2&7,t++;break;case 254:for(;;){if(!((L=n[t++])>=0))throw Error("Invalid block size");if(L===0)break;t+=L}break;default:throw new Error("Unknown graphic control label: 0x"+n[t-1].toString(16))}break;case 44:var x=n[t++]|n[t++]<<8,_=n[t++]|n[t++]<<8,E=n[t++]|n[t++]<<8,O=n[t++]|n[t++]<<8,T=n[t++],V=T>>6&1,Q=1<<1+(7&T),J=o,$=l,D=!1;T>>7&&(D=!0,J=t,$=Q,t+=3*Q);var Z=t;for(t++;;){var L;if(!((L=n[t++])>=0))throw Error("Invalid block size");if(L===0)break;t+=L}h.push({x,y:_,width:E,height:O,has_local_palette:D,palette_offset:J,palette_size:$,data_offset:Z,data_length:t-Z,transparent_index:g,interlaced:!!V,delay:p,disposal:d});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+n[t-1].toString(16))}this.numFrames=function(){return h.length},this.loopCount=function(){return v},this.frameInfo=function(R){if(R<0||R>=h.length)throw new Error("Frame index out of range.");return h[R]},this.decodeAndBlitFrameBGRA=function(R,H){var W=this.frameInfo(R),et=W.width*W.height,ct=new Uint8Array(et);Up(n,W.data_offset,ct,et);var ot=W.palette_offset,rt=W.transparent_index;rt===null&&(rt=256);var ht=W.width,At=e-ht,wt=ht,P=4*(W.y*e+W.x),q=4*((W.y+W.height)*e+W.x),z=P,K=4*At;W.interlaced===!0&&(K+=4*e*7);for(var X=8,st=0,ut=ct.length;st<ut;++st){var ft=ct[st];if(wt===0&&(wt=ht,(z+=K)>=q&&(K=4*At+4*e*(X-1),z=P+(ht+At)*(X<<1),X>>=1)),ft===rt)z+=4;else{var vt=n[ot+3*ft],Nt=n[ot+3*ft+1],Ot=n[ot+3*ft+2];H[z++]=Ot,H[z++]=Nt,H[z++]=vt,H[z++]=255}--wt}},this.decodeAndBlitFrameRGBA=function(R,H){var W=this.frameInfo(R),et=W.width*W.height,ct=new Uint8Array(et);Up(n,W.data_offset,ct,et);var ot=W.palette_offset,rt=W.transparent_index;rt===null&&(rt=256);var ht=W.width,At=e-ht,wt=ht,P=4*(W.y*e+W.x),q=4*((W.y+W.height)*e+W.x),z=P,K=4*At;W.interlaced===!0&&(K+=4*e*7);for(var X=8,st=0,ut=ct.length;st<ut;++st){var ft=ct[st];if(wt===0&&(wt=ht,(z+=K)>=q&&(K=4*At+4*e*(X-1),z=P+(ht+At)*(X<<1),X>>=1)),ft===rt)z+=4;else{var vt=n[ot+3*ft],Nt=n[ot+3*ft+1],Ot=n[ot+3*ft+2];H[z++]=vt,H[z++]=Nt,H[z++]=Ot,H[z++]=255}--wt}}}function Up(n,t,e,i){for(var r=n[t++],s=1<<r,a=s+1,o=a+1,l=r+1,c=(1<<l)-1,h=0,p=0,g=0,d=n[t++],v=new Int32Array(4096),y=null;;){for(;h<16&&d!==0;)p|=n[t++]<<h,h+=8,d===1?d=n[t++]:--d;if(h<l)break;var x=p&c;if(p>>=l,h-=l,x!==s){if(x===a)break;for(var _=x<o?x:y,E=0,O=_;O>s;)O=v[O]>>8,++E;var T=O;if(g+E+(_!==x?1:0)>i)return void $e.log("Warning, gif stream longer than expected.");e[g++]=T;var V=g+=E;for(_!==x&&(e[g++]=T),O=_;E--;)O=v[O],e[--V]=255&O,O>>=8;y!==null&&o<4096&&(v[o++]=y<<8|T,o>=c+1&&l<12&&(++l,c=c<<1|1)),y=x}else o=a+1,c=(1<<(l=r+1))-1,y=null}return g!==i&&$e.log("Warning, gif stream shorter than expected."),e}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function iu(n){var t,e,i,r,s,a=Math.floor,o=new Array(64),l=new Array(64),c=new Array(64),h=new Array(64),p=new Array(65535),g=new Array(65535),d=new Array(64),v=new Array(64),y=[],x=0,_=7,E=new Array(64),O=new Array(64),T=new Array(64),V=new Array(256),Q=new Array(2048),J=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],$=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],D=[0,1,2,3,4,5,6,7,8,9,10,11],Z=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],L=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],R=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],H=[0,1,2,3,4,5,6,7,8,9,10,11],W=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],et=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ct(P,q){for(var z=0,K=0,X=new Array,st=1;st<=16;st++){for(var ut=1;ut<=P[st];ut++)X[q[K]]=[],X[q[K]][0]=z,X[q[K]][1]=st,K++,z++;z*=2}return X}function ot(P){for(var q=P[0],z=P[1]-1;z>=0;)q&1<<z&&(x|=1<<_),z--,--_<0&&(x==255?(rt(255),rt(0)):rt(x),_=7,x=0)}function rt(P){y.push(P)}function ht(P){rt(P>>8&255),rt(255&P)}function At(P,q,z,K,X){for(var st,ut=X[0],ft=X[240],vt=function(St,ne){var It,te,Jt,Ee,we,ce,_e,xe,Bt,de,$t=0;for(Bt=0;Bt<8;++Bt){It=St[$t],te=St[$t+1],Jt=St[$t+2],Ee=St[$t+3],we=St[$t+4],ce=St[$t+5],_e=St[$t+6];var tn=It+(xe=St[$t+7]),ke=It-xe,be=te+_e,pt=te-_e,Lt=Jt+ce,dt=Jt-ce,Xt=Ee+we,Et=Ee-we,Ht=tn+Xt,Se=tn-Xt,ee=be+Lt,Gt=be-Lt;St[$t]=Ht+ee,St[$t+4]=Ht-ee;var Tt=.707106781*(Gt+Se);St[$t+2]=Se+Tt,St[$t+6]=Se-Tt;var on=.382683433*((Ht=Et+dt)-(Gt=pt+ke)),Zt=.5411961*Ht+on,Ze=1.306562965*Gt+on,Jn=.707106781*(ee=dt+pt),re=ke+Jn,Pi=ke-Jn;St[$t+5]=Pi+Zt,St[$t+3]=Pi-Zt,St[$t+1]=re+Ze,St[$t+7]=re-Ze,$t+=8}for($t=0,Bt=0;Bt<8;++Bt){It=St[$t],te=St[$t+8],Jt=St[$t+16],Ee=St[$t+24],we=St[$t+32],ce=St[$t+40],_e=St[$t+48];var Ci=It+(xe=St[$t+56]),he=It-xe,Be=te+_e,Te=te-_e,Ue=Jt+ce,wn=Jt-ce,Vi=Ee+we,Ei=Ee-we,Oi=Ci+Vi,Gi=Ci-Vi,ji=Be+Ue,Ti=Be-Ue;St[$t]=Oi+ji,St[$t+32]=Oi-ji;var mi=.707106781*(Ti+Gi);St[$t+16]=Gi+mi,St[$t+48]=Gi-mi;var hs=.382683433*((Oi=Ei+wn)-(Ti=Te+he)),Ki=.5411961*Oi+hs,us=1.306562965*Ti+hs,Gs=.707106781*(ji=wn+Te),Ks=he+Gs,Ys=he-Gs;St[$t+40]=Ys+Ki,St[$t+24]=Ys-Ki,St[$t+8]=Ks+us,St[$t+56]=Ks-us,$t++}for(Bt=0;Bt<64;++Bt)de=St[Bt]*ne[Bt],d[Bt]=de>0?de+.5|0:de-.5|0;return d}(P,q),Nt=0;Nt<64;++Nt)v[J[Nt]]=vt[Nt];var Ot=v[0]-z;z=v[0],Ot==0?ot(K[0]):(ot(K[g[st=32767+Ot]]),ot(p[st]));for(var jt=63;jt>0&&v[jt]==0;)jt--;if(jt==0)return ot(ut),z;for(var zt,M=1;M<=jt;){for(var Pt=M;v[M]==0&&M<=jt;)++M;var ge=M-Pt;if(ge>=16){zt=ge>>4;for(var Qt=1;Qt<=zt;++Qt)ot(ft);ge&=15}st=32767+v[M],ot(X[(ge<<4)+g[st]]),ot(p[st]),M++}return jt!=63&&ot(ut),z}function wt(P){P=Math.min(Math.max(P,1),100),s!=P&&(function(q){for(var z=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],K=0;K<64;K++){var X=a((z[K]*q+50)/100);X=Math.min(Math.max(X,1),255),o[J[K]]=X}for(var st=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ut=0;ut<64;ut++){var ft=a((st[ut]*q+50)/100);ft=Math.min(Math.max(ft,1),255),l[J[ut]]=ft}for(var vt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Nt=0,Ot=0;Ot<8;Ot++)for(var jt=0;jt<8;jt++)c[Nt]=1/(o[J[Nt]]*vt[Ot]*vt[jt]*8),h[Nt]=1/(l[J[Nt]]*vt[Ot]*vt[jt]*8),Nt++}(P<50?Math.floor(5e3/P):Math.floor(200-2*P)),s=P)}this.encode=function(P,q){q&&wt(q),y=new Array,x=0,_=7,ht(65496),ht(65504),ht(16),rt(74),rt(70),rt(73),rt(70),rt(0),rt(1),rt(1),rt(0),ht(1),ht(1),rt(0),rt(0),function(){ht(65499),ht(132),rt(0);for(var te=0;te<64;te++)rt(o[te]);rt(1);for(var Jt=0;Jt<64;Jt++)rt(l[Jt])}(),function(te,Jt){ht(65472),ht(17),rt(8),ht(Jt),ht(te),rt(3),rt(1),rt(17),rt(0),rt(2),rt(17),rt(1),rt(3),rt(17),rt(1)}(P.width,P.height),function(){ht(65476),ht(418),rt(0);for(var te=0;te<16;te++)rt($[te+1]);for(var Jt=0;Jt<=11;Jt++)rt(D[Jt]);rt(16);for(var Ee=0;Ee<16;Ee++)rt(Z[Ee+1]);for(var we=0;we<=161;we++)rt(L[we]);rt(1);for(var ce=0;ce<16;ce++)rt(R[ce+1]);for(var _e=0;_e<=11;_e++)rt(H[_e]);rt(17);for(var xe=0;xe<16;xe++)rt(W[xe+1]);for(var Bt=0;Bt<=161;Bt++)rt(et[Bt])}(),ht(65498),ht(12),rt(3),rt(1),rt(0),rt(2),rt(17),rt(3),rt(17),rt(0),rt(63),rt(0);var z=0,K=0,X=0;x=0,_=7,this.encode.displayName="_encode_";for(var st,ut,ft,vt,Nt,Ot,jt,zt,M,Pt=P.data,ge=P.width,Qt=P.height,St=4*ge,ne=0;ne<Qt;){for(st=0;st<St;){for(Nt=St*ne+st,jt=-1,zt=0,M=0;M<64;M++)Ot=Nt+(zt=M>>3)*St+(jt=4*(7&M)),ne+zt>=Qt&&(Ot-=St*(ne+1+zt-Qt)),st+jt>=St&&(Ot-=st+jt-St+4),ut=Pt[Ot++],ft=Pt[Ot++],vt=Pt[Ot++],E[M]=(Q[ut]+Q[ft+256|0]+Q[vt+512|0]>>16)-128,O[M]=(Q[ut+768|0]+Q[ft+1024|0]+Q[vt+1280|0]>>16)-128,T[M]=(Q[ut+1280|0]+Q[ft+1536|0]+Q[vt+1792|0]>>16)-128;z=At(E,c,z,t,i),K=At(O,h,K,e,r),X=At(T,h,X,e,r),st+=32}ne+=8}if(_>=0){var It=[];It[1]=_+1,It[0]=(1<<_+1)-1,ot(It)}return ht(65497),new Uint8Array(y)},n=n||50,function(){for(var P=String.fromCharCode,q=0;q<256;q++)V[q]=P(q)}(),t=ct($,D),e=ct(R,H),i=ct(Z,L),r=ct(W,et),function(){for(var P=1,q=2,z=1;z<=15;z++){for(var K=P;K<q;K++)g[32767+K]=z,p[32767+K]=[],p[32767+K][1]=z,p[32767+K][0]=K;for(var X=-(q-1);X<=-P;X++)g[32767+X]=z,p[32767+X]=[],p[32767+X][1]=z,p[32767+X][0]=q-1+X;P<<=1,q<<=1}}(),function(){for(var P=0;P<256;P++)Q[P]=19595*P,Q[P+256|0]=38470*P,Q[P+512|0]=7471*P+32768,Q[P+768|0]=-11059*P,Q[P+1024|0]=-21709*P,Q[P+1280|0]=32768*P+8421375,Q[P+1536|0]=-27439*P,Q[P+1792|0]=-5329*P}(),wt(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Bi(n,t){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function qp(n){function t(D){if(!D)throw Error("assert :P")}function e(D,Z,L){for(var R=0;4>R;R++)if(D[Z+R]!=L.charCodeAt(R))return!0;return!1}function i(D,Z,L,R,H){for(var W=0;W<H;W++)D[Z+W]=L[R+W]}function r(D,Z,L,R){for(var H=0;H<R;H++)D[Z+H]=L}function s(D){return new Int32Array(D)}function a(D,Z){for(var L=[],R=0;R<D;R++)L.push(new Z);return L}function o(D,Z){var L=[];return function R(H,W,et){for(var ct=et[W],ot=0;ot<ct&&(H.push(et.length>W+1?[]:new Z),!(et.length<W+1));ot++)R(H[ot],W+1,et)}(L,0,D),L}var l=function(){var D=this;function Z(u,f){for(var b=1<<f-1>>>0;u&b;)b>>>=1;return b?(u&b-1)+b:u}function L(u,f,b,w,A){t(!(w%b));do u[f+(w-=b)]=A;while(0<w)}function R(u,f,b,w,A){if(t(2328>=A),512>=A)var N=s(512);else if((N=s(A))==null)return 0;return function(C,j,I,F,Y,lt){var B,tt,it=j,gt=1<<I,at=s(16),mt=s(16);for(t(Y!=0),t(F!=null),t(C!=null),t(0<I),tt=0;tt<Y;++tt){if(15<F[tt])return 0;++at[F[tt]]}if(at[0]==Y)return 0;for(mt[1]=0,B=1;15>B;++B){if(at[B]>1<<B)return 0;mt[B+1]=mt[B]+at[B]}for(tt=0;tt<Y;++tt)B=F[tt],0<F[tt]&&(lt[mt[B]++]=tt);if(mt[15]==1)return(F=new H).g=0,F.value=lt[0],L(C,it,1,gt,F),gt;var yt,kt=-1,xt=gt-1,Kt=0,Dt=1,ve=1,Ut=1<<I;for(tt=0,B=1,Y=2;B<=I;++B,Y<<=1){if(Dt+=ve<<=1,0>(ve-=at[B]))return 0;for(;0<at[B];--at[B])(F=new H).g=B,F.value=lt[tt++],L(C,it+Kt,Y,Ut,F),Kt=Z(Kt,B)}for(B=I+1,Y=2;15>=B;++B,Y<<=1){if(Dt+=ve<<=1,0>(ve-=at[B]))return 0;for(;0<at[B];--at[B]){if(F=new H,(Kt&xt)!=kt){for(it+=Ut,yt=1<<(kt=B)-I;15>kt&&!(0>=(yt-=at[kt]));)++kt,yt<<=1;gt+=Ut=1<<(yt=kt-I),C[j+(kt=Kt&xt)].g=yt+I,C[j+kt].value=it-j-kt}F.g=B-I,F.value=lt[tt++],L(C,it+(Kt>>I),Y,Ut,F),Kt=Z(Kt,B)}}return Dt!=2*mt[15]-1?0:gt}(u,f,b,w,A,N)}function H(){this.value=this.g=0}function W(){this.value=this.g=0}function et(){this.G=a(5,H),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(xs,W)}function ct(u,f,b,w){t(u!=null),t(f!=null),t(2147483648>w),u.Ca=254,u.I=0,u.b=-8,u.Ka=0,u.oa=f,u.pa=b,u.Jd=f,u.Yc=b+w,u.Zc=4<=w?b+w-4+1:b,ut(u)}function ot(u,f){for(var b=0;0<f--;)b|=vt(u,128)<<f;return b}function rt(u,f){var b=ot(u,f);return ft(u)?-b:b}function ht(u,f,b,w){var A,N=0;for(t(u!=null),t(f!=null),t(4294967288>w),u.Sb=w,u.Ra=0,u.u=0,u.h=0,4<w&&(w=4),A=0;A<w;++A)N+=f[b+A]<<8*A;u.Ra=N,u.bb=w,u.oa=f,u.pa=b}function At(u){for(;8<=u.u&&u.bb<u.Sb;)u.Ra>>>=8,u.Ra+=u.oa[u.pa+u.bb]<<Br-8>>>0,++u.bb,u.u-=8;K(u)&&(u.h=1,u.u=0)}function wt(u,f){if(t(0<=f),!u.h&&f<=si){var b=z(u)&ri[f];return u.u+=f,At(u),b}return u.h=1,u.u=0}function P(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function q(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function z(u){return u.Ra>>>(u.u&Br-1)>>>0}function K(u){return t(u.bb<=u.Sb),u.h||u.bb==u.Sb&&u.u>Br}function X(u,f){u.u=f,u.h=K(u)}function st(u){u.u>=yr&&(t(u.u>=yr),At(u))}function ut(u){t(u!=null&&u.oa!=null),u.pa<u.Zc?(u.I=(u.oa[u.pa++]|u.I<<8)>>>0,u.b+=8):(t(u!=null&&u.oa!=null),u.pa<u.Yc?(u.b+=8,u.I=u.oa[u.pa++]|u.I<<8):u.Ka?u.b=0:(u.I<<=8,u.b+=8,u.Ka=1))}function ft(u){return ot(u,1)}function vt(u,f){var b=u.Ca;0>u.b&&ut(u);var w=u.b,A=b*f>>>8,N=(u.I>>>w>A)+0;for(N?(b-=A,u.I-=A+1<<w>>>0):b=A+1,w=b,A=0;256<=w;)A+=8,w>>=8;return w=7^A+Ur[w],u.b-=w,u.Ca=(b<<w)-1,N}function Nt(u,f,b){u[f+0]=b>>24&255,u[f+1]=b>>16&255,u[f+2]=b>>8&255,u[f+3]=255&b}function Ot(u,f){return u[f+0]|u[f+1]<<8}function jt(u,f){return Ot(u,f)|u[f+2]<<16}function zt(u,f){return Ot(u,f)|Ot(u,f+2)<<16}function M(u,f){var b=1<<f;return t(u!=null),t(0<f),u.X=s(b),u.X==null?0:(u.Mb=32-f,u.Xa=f,1)}function Pt(u,f){t(u!=null),t(f!=null),t(u.Xa==f.Xa),i(f.X,0,u.X,0,1<<f.Xa)}function ge(){this.X=[],this.Xa=this.Mb=0}function Qt(u,f,b,w){t(b!=null),t(w!=null);var A=b[0],N=w[0];return A==0&&(A=(u*N+f/2)/f),N==0&&(N=(f*A+u/2)/u),0>=A||0>=N?0:(b[0]=A,w[0]=N,1)}function St(u,f){return u+(1<<f)-1>>>f}function ne(u,f){return((4278255360&u)+(4278255360&f)>>>0&4278255360)+((16711935&u)+(16711935&f)>>>0&16711935)>>>0}function It(u,f){D[f]=function(b,w,A,N,C,j,I){var F;for(F=0;F<C;++F){var Y=D[u](j[I+F-1],A,N+F);j[I+F]=ne(b[w+F],Y)}}}function te(){this.ud=this.hd=this.jd=0}function Jt(u,f){return((4278124286&(u^f))>>>1)+(u&f)>>>0}function Ee(u){return 0<=u&&256>u?u:0>u?0:255<u?255:void 0}function we(u,f){return Ee(u+(u-f+.5>>1))}function ce(u,f,b){return Math.abs(f-b)-Math.abs(u-b)}function _e(u,f,b,w,A,N,C){for(w=N[C-1],b=0;b<A;++b)N[C+b]=w=ne(u[f+b],w)}function xe(u,f,b,w,A){var N;for(N=0;N<b;++N){var C=u[f+N],j=C>>8&255,I=16711935&(I=(I=16711935&C)+((j<<16)+j));w[A+N]=(4278255360&C)+I>>>0}}function Bt(u,f){f.jd=255&u,f.hd=u>>8&255,f.ud=u>>16&255}function de(u,f,b,w,A,N){var C;for(C=0;C<w;++C){var j=f[b+C],I=j>>>8,F=j,Y=255&(Y=(Y=j>>>16)+((u.jd<<24>>24)*(I<<24>>24)>>>5));F=255&(F=(F+=(u.hd<<24>>24)*(I<<24>>24)>>>5)+((u.ud<<24>>24)*(Y<<24>>24)>>>5)),A[N+C]=(4278255360&j)+(Y<<16)+F}}function $t(u,f,b,w,A){D[f]=function(N,C,j,I,F,Y,lt,B,tt){for(I=lt;I<B;++I)for(lt=0;lt<tt;++lt)F[Y++]=A(j[w(N[C++])])},D[u]=function(N,C,j,I,F,Y,lt){var B=8>>N.b,tt=N.Ea,it=N.K[0],gt=N.w;if(8>B)for(N=(1<<N.b)-1,gt=(1<<B)-1;C<j;++C){var at,mt=0;for(at=0;at<tt;++at)at&N||(mt=w(I[F++])),Y[lt++]=A(it[mt&gt]),mt>>=B}else D["VP8LMapColor"+b](I,F,it,gt,Y,lt,C,j,tt)}}function tn(u,f,b,w,A){for(b=f+b;f<b;){var N=u[f++];w[A++]=N>>16&255,w[A++]=N>>8&255,w[A++]=255&N}}function ke(u,f,b,w,A){for(b=f+b;f<b;){var N=u[f++];w[A++]=N>>16&255,w[A++]=N>>8&255,w[A++]=255&N,w[A++]=N>>24&255}}function be(u,f,b,w,A){for(b=f+b;f<b;){var N=(C=u[f++])>>16&240|C>>12&15,C=240&C|C>>28&15;w[A++]=N,w[A++]=C}}function pt(u,f,b,w,A){for(b=f+b;f<b;){var N=(C=u[f++])>>16&248|C>>13&7,C=C>>5&224|C>>3&31;w[A++]=N,w[A++]=C}}function Lt(u,f,b,w,A){for(b=f+b;f<b;){var N=u[f++];w[A++]=255&N,w[A++]=N>>8&255,w[A++]=N>>16&255}}function dt(u,f,b,w,A,N){if(N==0)for(b=f+b;f<b;)Nt(w,((N=u[f++])[0]>>24|N[1]>>8&65280|N[2]<<8&16711680|N[3]<<24)>>>0),A+=32;else i(w,A,u,f,b)}function Xt(u,f){D[f][0]=D[u+"0"],D[f][1]=D[u+"1"],D[f][2]=D[u+"2"],D[f][3]=D[u+"3"],D[f][4]=D[u+"4"],D[f][5]=D[u+"5"],D[f][6]=D[u+"6"],D[f][7]=D[u+"7"],D[f][8]=D[u+"8"],D[f][9]=D[u+"9"],D[f][10]=D[u+"10"],D[f][11]=D[u+"11"],D[f][12]=D[u+"12"],D[f][13]=D[u+"13"],D[f][14]=D[u+"0"],D[f][15]=D[u+"0"]}function Et(u){return u==fh||u==ph||u==Sl||u==gh}function Ht(){this.eb=[],this.size=this.A=this.fb=0}function Se(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ee(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ht,this.f.kb=new Se,this.sd=null}function Gt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Tt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function on(u){return alert("todo:WebPSamplerProcessPlane"),u.T}function Zt(u,f){var b=u.T,w=f.ba.f.RGBA,A=w.eb,N=w.fb+u.ka*w.A,C=xi[f.ba.S],j=u.y,I=u.O,F=u.f,Y=u.N,lt=u.ea,B=u.W,tt=f.cc,it=f.dc,gt=f.Mc,at=f.Nc,mt=u.ka,yt=u.ka+u.T,kt=u.U,xt=kt+1>>1;for(mt==0?C(j,I,null,null,F,Y,lt,B,F,Y,lt,B,A,N,null,null,kt):(C(f.ec,f.fc,j,I,tt,it,gt,at,F,Y,lt,B,A,N-w.A,A,N,kt),++b);mt+2<yt;mt+=2)tt=F,it=Y,gt=lt,at=B,Y+=u.Rc,B+=u.Rc,N+=2*w.A,C(j,(I+=2*u.fa)-u.fa,j,I,tt,it,gt,at,F,Y,lt,B,A,N-w.A,A,N,kt);return I+=u.fa,u.j+yt<u.o?(i(f.ec,f.fc,j,I,kt),i(f.cc,f.dc,F,Y,xt),i(f.Mc,f.Nc,lt,B,xt),b--):1&yt||C(j,I,null,null,F,Y,lt,B,F,Y,lt,B,A,N+w.A,null,null,kt),b}function Ze(u,f,b){var w=u.F,A=[u.J];if(w!=null){var N=u.U,C=f.ba.S,j=C==xl||C==Sl;f=f.ba.f.RGBA;var I=[0],F=u.ka;I[0]=u.T,u.Kb&&(F==0?--I[0]:(--F,A[0]-=u.width),u.j+u.ka+u.T==u.o&&(I[0]=u.o-u.j-F));var Y=f.eb;F=f.fb+F*f.A,u=Pd(w,A[0],u.width,N,I,Y,F+(j?0:3),f.A),t(b==I),u&&Et(C)&&ao(Y,F,j,N,I,f.A)}return 0}function Jn(u){var f=u.ma,b=f.ba.S,w=11>b,A=b==wl||b==_l||b==xl||b==dh||b==12||Et(b);if(f.memory=null,f.Ib=null,f.Jb=null,f.Nd=null,!Za(f.Oa,u,A?11:12))return 0;if(A&&Et(b)&&Ya(),u.da)alert("todo:use_scaling");else{if(w){if(f.Ib=on,u.Kb){if(b=u.U+1>>1,f.memory=s(u.U+2*b),f.memory==null)return 0;f.ec=f.memory,f.fc=0,f.cc=f.ec,f.dc=f.fc+u.U,f.Mc=f.cc,f.Nc=f.dc+b,f.Ib=Zt,Ya()}}else alert("todo:EmitYUV");A&&(f.Jb=Ze,w&&Ii())}if(w&&!Hd){for(u=0;256>u;++u)U1[u]=89858*(u-128)+Al>>kl,$1[u]=-22014*(u-128)+Al,z1[u]=-45773*(u-128),q1[u]=113618*(u-128)+Al>>kl;for(u=lo;u<vh;++u)f=76283*(u-16)+Al>>kl,H1[u-lo]=Yi(f,255),W1[u-lo]=Yi(f+8>>4,15);Hd=1}return 1}function re(u){var f=u.ma,b=u.U,w=u.T;return t(!(1&u.ka)),0>=b||0>=w?0:(b=f.Ib(u,f),f.Jb!=null&&f.Jb(u,f,b),f.Dc+=b,1)}function Pi(u){u.ma.memory=null}function Ci(u,f,b,w){return wt(u,8)!=47?0:(f[0]=wt(u,14)+1,b[0]=wt(u,14)+1,w[0]=wt(u,1),wt(u,3)!=0?0:!u.h)}function he(u,f){if(4>u)return u+1;var b=u-2>>1;return(2+(1&u)<<b)+wt(f,b)+1}function Be(u,f){return 120<f?f-120:1<=(b=((b=N1[f-1])>>4)*u+(8-(15&b)))?b:1;var b}function Te(u,f,b){var w=z(b),A=u[f+=255&w].g-8;return 0<A&&(X(b,b.u+8),w=z(b),f+=u[f].value,f+=w&(1<<A)-1),X(b,b.u+u[f].g),u[f].value}function Ue(u,f,b){return b.g+=u.g,b.value+=u.value<<f>>>0,t(8>=b.g),u.g}function wn(u,f,b){var w=u.xc;return t((f=w==0?0:u.vc[u.md*(b>>w)+(f>>w)])<u.Wb),u.Ya[f]}function Vi(u,f,b,w){var A=u.ab,N=u.c*f,C=u.C;f=C+f;var j=b,I=w;for(w=u.Ta,b=u.Ua;0<A--;){var F=u.gc[A],Y=C,lt=f,B=j,tt=I,it=(I=w,j=b,F.Ea);switch(t(Y<lt),t(lt<=F.nc),F.hc){case 2:ln(B,tt,(lt-Y)*it,I,j);break;case 0:var gt=Y,at=lt,mt=I,yt=j,kt=(Ut=F).Ea;gt==0&&(to(B,tt,null,null,1,mt,yt),_e(B,tt+1,0,0,kt-1,mt,yt+1),tt+=kt,yt+=kt,++gt);for(var xt=1<<Ut.b,Kt=xt-1,Dt=St(kt,Ut.b),ve=Ut.K,Ut=Ut.w+(gt>>Ut.b)*Dt;gt<at;){var Ae=ve,kn=Ut,ye=1;for(ia(B,tt,mt,yt-kt,1,mt,yt);ye<kt;){var qt=(ye&~Kt)+xt;qt>kt&&(qt=kt),(0,no[Ae[kn++]>>8&15])(B,tt+ +ye,mt,yt+ye-kt,qt-ye,mt,yt+ye),ye=qt}tt+=kt,yt+=kt,++gt&Kt||(Ut+=Dt)}lt!=F.nc&&i(I,j-it,I,j+(lt-Y-1)*it,it);break;case 1:for(it=B,at=tt,kt=(B=F.Ea)-(yt=B&~(mt=(tt=1<<F.b)-1)),gt=St(B,F.b),xt=F.K,F=F.w+(Y>>F.b)*gt;Y<lt;){for(Kt=xt,Dt=F,ve=new te,Ut=at+yt,Ae=at+B;at<Ut;)Bt(Kt[Dt++],ve),io(ve,it,at,tt,I,j),at+=tt,j+=tt;at<Ae&&(Bt(Kt[Dt++],ve),io(ve,it,at,kt,I,j),at+=kt,j+=kt),++Y&mt||(F+=gt)}break;case 3:if(B==I&&tt==j&&0<F.b){for(at=I,B=it=j+(lt-Y)*it-(yt=(lt-Y)*St(F.Ea,F.b)),tt=I,mt=j,gt=[],yt=(kt=yt)-1;0<=yt;--yt)gt[yt]=tt[mt+yt];for(yt=kt-1;0<=yt;--yt)at[B+yt]=gt[yt];ml(F,Y,lt,I,it,I,j)}else ml(F,Y,lt,B,tt,I,j)}j=w,I=b}I!=b&&i(w,b,j,I,N)}function Ei(u,f){var b=u.V,w=u.Ba+u.c*u.C,A=f-u.C;if(t(f<=u.l.o),t(16>=A),0<A){var N=u.l,C=u.Ta,j=u.Ua,I=N.width;if(Vi(u,A,b,w),A=j=[j],t((b=u.C)<(w=f)),t(N.v<N.va),w>N.o&&(w=N.o),b<N.j){var F=N.j-b;b=N.j,A[0]+=F*I}if(b>=w?b=0:(A[0]+=4*N.v,N.ka=b-N.j,N.U=N.va-N.v,N.T=w-b,b=1),b){if(j=j[0],11>(b=u.ca).S){var Y=b.f.RGBA,lt=(w=b.S,A=N.U,N=N.T,F=Y.eb,Y.A),B=N;for(Y=Y.fb+u.Ma*Y.A;0<B--;){var tt=C,it=j,gt=A,at=F,mt=Y;switch(w){case yl:ro(tt,it,gt,at,mt);break;case wl:qr(tt,it,gt,at,mt);break;case fh:qr(tt,it,gt,at,mt),ao(at,mt,0,gt,1,0);break;case Id:Ss(tt,it,gt,at,mt);break;case _l:dt(tt,it,gt,at,mt,1);break;case ph:dt(tt,it,gt,at,mt,1),ao(at,mt,0,gt,1,0);break;case xl:dt(tt,it,gt,at,mt,0);break;case Sl:dt(tt,it,gt,at,mt,0),ao(at,mt,1,gt,1,0);break;case dh:zr(tt,it,gt,at,mt);break;case gh:zr(tt,it,gt,at,mt),Ld(at,mt,gt,1,0);break;case Dd:$r(tt,it,gt,at,mt);break;default:t(0)}j+=I,Y+=lt}u.Ma+=N}else alert("todo:EmitRescaledRowsYUVA");t(u.Ma<=b.height)}}u.C=f,t(u.C<=u.i)}function Oi(u){var f;if(0<u.ua)return 0;for(f=0;f<u.Wb;++f){var b=u.Ya[f].G,w=u.Ya[f].H;if(0<b[1][w[1]+0].g||0<b[2][w[2]+0].g||0<b[3][w[3]+0].g)return 0}return 1}function Gi(u,f,b,w,A,N){if(u.Z!=0){var C=u.qd,j=u.rd;for(t(Vr[u.Z]!=null);f<b;++f)Vr[u.Z](C,j,w,A,w,A,N),C=w,j=A,A+=N;u.qd=C,u.rd=j}}function ji(u,f){var b=u.l.ma,w=b.Z==0||b.Z==1?u.l.j:u.C;if(w=u.C<w?w:u.C,t(f<=u.l.o),f>w){var A=u.l.width,N=b.ca,C=b.tb+A*w,j=u.V,I=u.Ba+u.c*w,F=u.gc;t(u.ab==1),t(F[0].hc==3),Qi(F[0],w,f,j,I,N,C),Gi(b,w,f,N,C,A)}u.C=u.Ma=f}function Ti(u,f,b,w,A,N,C){var j=u.$/w,I=u.$%w,F=u.m,Y=u.s,lt=b+u.$,B=lt;A=b+w*A;var tt=b+w*N,it=280+Y.ua,gt=u.Pb?j:16777216,at=0<Y.ua?Y.Wa:null,mt=Y.wc,yt=lt<tt?wn(Y,I,j):null;t(u.C<N),t(tt<=A);var kt=!1;t:for(;;){for(;kt||lt<tt;){var xt=0;if(j>=gt){var Kt=lt-b;t((gt=u).Pb),gt.wd=gt.m,gt.xd=Kt,0<gt.s.ua&&Pt(gt.s.Wa,gt.s.vb),gt=j+P1}if(I&mt||(yt=wn(Y,I,j)),t(yt!=null),yt.Qb&&(f[lt]=yt.qb,kt=!0),!kt)if(st(F),yt.jc){xt=F,Kt=f;var Dt=lt,ve=yt.pd[z(xt)&xs-1];t(yt.jc),256>ve.g?(X(xt,xt.u+ve.g),Kt[Dt]=ve.value,xt=0):(X(xt,xt.u+ve.g-256),t(256<=ve.value),xt=ve.value),xt==0&&(kt=!0)}else xt=Te(yt.G[0],yt.H[0],F);if(F.h)break;if(kt||256>xt){if(!kt)if(yt.nd)f[lt]=(yt.qb|xt<<8)>>>0;else{if(st(F),kt=Te(yt.G[1],yt.H[1],F),st(F),Kt=Te(yt.G[2],yt.H[2],F),Dt=Te(yt.G[3],yt.H[3],F),F.h)break;f[lt]=(Dt<<24|kt<<16|xt<<8|Kt)>>>0}if(kt=!1,++lt,++I>=w&&(I=0,++j,C!=null&&j<=N&&!(j%16)&&C(u,j),at!=null))for(;B<lt;)xt=f[B++],at.X[(506832829*xt&4294967295)>>>at.Mb]=xt}else if(280>xt){if(xt=he(xt-256,F),Kt=Te(yt.G[4],yt.H[4],F),st(F),Kt=Be(w,Kt=he(Kt,F)),F.h)break;if(lt-b<Kt||A-lt<xt)break t;for(Dt=0;Dt<xt;++Dt)f[lt+Dt]=f[lt+Dt-Kt];for(lt+=xt,I+=xt;I>=w;)I-=w,++j,C!=null&&j<=N&&!(j%16)&&C(u,j);if(t(lt<=A),I&mt&&(yt=wn(Y,I,j)),at!=null)for(;B<lt;)xt=f[B++],at.X[(506832829*xt&4294967295)>>>at.Mb]=xt}else{if(!(xt<it))break t;for(kt=xt-280,t(at!=null);B<lt;)xt=f[B++],at.X[(506832829*xt&4294967295)>>>at.Mb]=xt;xt=lt,t(!(kt>>>(Kt=at).Xa)),f[xt]=Kt.X[kt],kt=!0}kt||t(F.h==K(F))}if(u.Pb&&F.h&&lt<A)t(u.m.h),u.a=5,u.m=u.wd,u.$=u.xd,0<u.s.ua&&Pt(u.s.vb,u.s.Wa);else{if(F.h)break t;C!=null&&C(u,j>N?N:j),u.a=0,u.$=lt-b}return 1}return u.a=3,0}function mi(u){t(u!=null),u.vc=null,u.yc=null,u.Ya=null;var f=u.Wa;f!=null&&(f.X=null),u.vb=null,t(u!=null)}function hs(){var u=new le;return u==null?null:(u.a=0,u.xb=Bd,Xt("Predictor","VP8LPredictors"),Xt("Predictor","VP8LPredictors_C"),Xt("PredictorAdd","VP8LPredictorsAdd"),Xt("PredictorAdd","VP8LPredictorsAdd_C"),ln=xe,io=de,ro=tn,qr=ke,zr=be,$r=pt,Ss=Lt,D.VP8LMapColor32b=Zi,D.VP8LMapColor8b=eo,u)}function Ki(u,f,b,w,A){var N=1,C=[u],j=[f],I=w.m,F=w.s,Y=null,lt=0;t:for(;;){if(b)for(;N&&wt(I,1);){var B=C,tt=j,it=w,gt=1,at=it.m,mt=it.gc[it.ab],yt=wt(at,2);if(it.Oc&1<<yt)N=0;else{switch(it.Oc|=1<<yt,mt.hc=yt,mt.Ea=B[0],mt.nc=tt[0],mt.K=[null],++it.ab,t(4>=it.ab),yt){case 0:case 1:mt.b=wt(at,3)+2,gt=Ki(St(mt.Ea,mt.b),St(mt.nc,mt.b),0,it,mt.K),mt.K=mt.K[0];break;case 3:var kt,xt=wt(at,8)+1,Kt=16<xt?0:4<xt?1:2<xt?2:3;if(B[0]=St(mt.Ea,Kt),mt.b=Kt,kt=gt=Ki(xt,1,0,it,mt.K)){var Dt,ve=xt,Ut=mt,Ae=1<<(8>>Ut.b),kn=s(Ae);if(kn==null)kt=0;else{var ye=Ut.K[0],qt=Ut.w;for(kn[0]=Ut.K[0][0],Dt=1;Dt<1*ve;++Dt)kn[Dt]=ne(ye[qt+Dt],kn[Dt-1]);for(;Dt<4*Ae;++Dt)kn[Dt]=0;Ut.K[0]=null,Ut.K[0]=kn,kt=1}}gt=kt;break;case 2:break;default:t(0)}N=gt}}if(C=C[0],j=j[0],N&&wt(I,1)&&!(N=1<=(lt=wt(I,4))&&11>=lt)){w.a=3;break t}var Ct;if(Ct=N)e:{var hn,pe,Ne,Ke=w,jn=C,Vn=j,nn=lt,Fn=b,Gn=Ke.m,An=Ke.s,Pe=[null],Ie=1,rn=0,De=L1[nn];n:for(;;){if(Fn&&wt(Gn,1)){var Tn=wt(Gn,3)+2,Mi=St(jn,Tn),un=St(Vn,Tn),Xn=Mi*un;if(!Ki(Mi,un,0,Ke,Pe))break n;for(Pe=Pe[0],An.xc=Tn,hn=0;hn<Xn;++hn){var ze=Pe[hn]>>8&65535;Pe[hn]=ze,ze>=Ie&&(Ie=ze+1)}}if(Gn.h)break n;for(pe=0;5>pe;++pe){var Nn=Md[pe];!pe&&0<nn&&(Nn+=1<<nn),rn<Nn&&(rn=Nn)}var oi=a(Ie*De,H),Kn=Ie,li=a(Kn,et);if(li==null)var ci=null;else t(65536>=Kn),ci=li;var Zn=s(rn);if(ci==null||Zn==null||oi==null){Ke.a=1;break n}var hi=oi;for(hn=Ne=0;hn<Ie;++hn){var Ve=ci[hn],ui=Ve.G,Fi=Ve.H,As=0,xr=1,Rn=0;for(pe=0;5>pe;++pe){Nn=Md[pe],ui[pe]=hi,Fi[pe]=Ne,!pe&&0<nn&&(Nn+=1<<nn);r:{var Ll,yh=Nn,Pl=Ke,co=Zn,K1=hi,Y1=Ne,wh=0,Gr=Pl.m,J1=wt(Gr,1);if(r(co,0,0,yh),J1){var X1=wt(Gr,1)+1,Z1=wt(Gr,1),Gd=wt(Gr,Z1==0?1:8);co[Gd]=1,X1==2&&(co[Gd=wt(Gr,8)]=1);var Cl=1}else{var Kd=s(19),Yd=wt(Gr,4)+4;if(19<Yd){Pl.a=3;var El=0;break r}for(Ll=0;Ll<Yd;++Ll)Kd[A1[Ll]]=wt(Gr,3);var _h=void 0,ho=void 0,Jd=Pl,Q1=Kd,Ol=yh,Xd=co,xh=0,Kr=Jd.m,Zd=8,Qd=a(128,H);i:for(;R(Qd,0,7,Q1,19);){if(wt(Kr,1)){var t2=2+2*wt(Kr,3);if((_h=2+wt(Kr,t2))>Ol)break i}else _h=Ol;for(ho=0;ho<Ol&&_h--;){st(Kr);var tf=Qd[0+(127&z(Kr))];X(Kr,Kr.u+tf.g);var sa=tf.value;if(16>sa)Xd[ho++]=sa,sa!=0&&(Zd=sa);else{var e2=sa==16,ef=sa-16,n2=S1[ef],nf=wt(Kr,x1[ef])+n2;if(ho+nf>Ol)break i;for(var i2=e2?Zd:0;0<nf--;)Xd[ho++]=i2}}xh=1;break i}xh||(Jd.a=3),Cl=xh}(Cl=Cl&&!Gr.h)&&(wh=R(K1,Y1,8,co,yh)),Cl&&wh!=0?El=wh:(Pl.a=3,El=0)}if(El==0)break n;if(xr&&k1[pe]==1&&(xr=hi[Ne].g==0),As+=hi[Ne].g,Ne+=El,3>=pe){var uo,Sh=Zn[0];for(uo=1;uo<Nn;++uo)Zn[uo]>Sh&&(Sh=Zn[uo]);Rn+=Sh}}if(Ve.nd=xr,Ve.Qb=0,xr&&(Ve.qb=(ui[3][Fi[3]+0].value<<24|ui[1][Fi[1]+0].value<<16|ui[2][Fi[2]+0].value)>>>0,As==0&&256>ui[0][Fi[0]+0].value&&(Ve.Qb=1,Ve.qb+=ui[0][Fi[0]+0].value<<8)),Ve.jc=!Ve.Qb&&6>Rn,Ve.jc){var jl,Sr=Ve;for(jl=0;jl<xs;++jl){var Yr=jl,Jr=Sr.pd[Yr],Tl=Sr.G[0][Sr.H[0]+Yr];256<=Tl.value?(Jr.g=Tl.g+256,Jr.value=Tl.value):(Jr.g=0,Jr.value=0,Yr>>=Ue(Tl,8,Jr),Yr>>=Ue(Sr.G[1][Sr.H[1]+Yr],16,Jr),Yr>>=Ue(Sr.G[2][Sr.H[2]+Yr],0,Jr),Ue(Sr.G[3][Sr.H[3]+Yr],24,Jr))}}}An.vc=Pe,An.Wb=Ie,An.Ya=ci,An.yc=oi,Ct=1;break e}Ct=0}if(!(N=Ct)){w.a=3;break t}if(0<lt){if(F.ua=1<<lt,!M(F.Wa,lt)){w.a=1,N=0;break t}}else F.ua=0;var kh=w,rf=C,r2=j,Ah=kh.s,Nh=Ah.xc;if(kh.c=rf,kh.i=r2,Ah.md=St(rf,Nh),Ah.wc=Nh==0?-1:(1<<Nh)-1,b){w.xb=I1;break t}if((Y=s(C*j))==null){w.a=1,N=0;break t}N=(N=Ti(w,Y,0,C,j,j,null))&&!I.h;break t}return N?(A!=null?A[0]=Y:(t(Y==null),t(b)),w.$=0,b||mi(F)):mi(F),N}function us(u,f){var b=u.c*u.i,w=b+f+16*f;return t(u.c<=f),u.V=s(w),u.V==null?(u.Ta=null,u.Ua=0,u.a=1,0):(u.Ta=u.V,u.Ua=u.Ba+b+f,1)}function Gs(u,f){var b=u.C,w=f-b,A=u.V,N=u.Ba+u.c*b;for(t(f<=u.l.o);0<w;){var C=16<w?16:w,j=u.l.ma,I=u.l.width,F=I*C,Y=j.ca,lt=j.tb+I*b,B=u.Ta,tt=u.Ua;Vi(u,C,A,N),Cd(B,tt,Y,lt,F),Gi(j,b,b+C,Y,lt,I),w-=C,A+=C*u.c,b+=C}t(b==f),u.C=u.Ma=f}function Ks(){this.ub=this.yd=this.td=this.Rb=0}function Ys(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Yc(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Fa(){this.Yb=function(){var u=[];return function f(b,w,A){for(var N=A[w],C=0;C<N&&(b.push(A.length>w+1?[]:0),!(A.length<w+1));C++)f(b[C],w+1,A)}(u,0,[3,11]),u}()}function Zo(){this.jb=s(3),this.Wc=o([4,8],Fa),this.Xc=o([4,17],Fa)}function Qo(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function bi(){this.ld=this.La=this.dd=this.tc=0}function Ba(){this.Na=this.la=0}function tl(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ua(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function el(){this.uc=this.M=this.Nb=0,this.wa=Array(new bi),this.Y=0,this.ya=Array(new Ua),this.aa=0,this.l=new Js}function nl(){this.y=s(16),this.f=s(8),this.ea=s(8)}function il(){this.cb=this.a=0,this.sc="",this.m=new P,this.Od=new Ks,this.Kc=new Ys,this.ed=new Qo,this.Qa=new Yc,this.Ic=this.$c=this.Aa=0,this.D=new el,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,P),this.ia=0,this.pb=a(4,tl),this.Pa=new Zo,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new nl),this.Hd=0,this.rb=Array(new Ba),this.sb=0,this.wa=Array(new bi),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ua),this.L=this.aa=0,this.gd=o([4,2],bi),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Yi(u,f){return 0>u?0:u>f?f:u}function Js(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Jc(){var u=new il;return u!=null&&(u.a=0,u.sc="OK",u.cb=0,u.Xb=0,oo||(oo=Xs)),u}function mn(u,f,b){return u.a==0&&(u.a=f,u.sc=b,u.cb=0),0}function rl(u,f,b){return 3<=b&&u[f+0]==157&&u[f+1]==1&&u[f+2]==42}function Ji(u,f){if(u==null)return 0;if(u.a=0,u.sc="OK",f==null)return mn(u,2,"null VP8Io passed to VP8GetHeaders()");var b=f.data,w=f.w,A=f.ha;if(4>A)return mn(u,7,"Truncated header.");var N=b[w+0]|b[w+1]<<8|b[w+2]<<16,C=u.Od;if(C.Rb=!(1&N),C.td=N>>1&7,C.yd=N>>4&1,C.ub=N>>5,3<C.td)return mn(u,3,"Incorrect keyframe parameters.");if(!C.yd)return mn(u,4,"Frame not displayable.");w+=3,A-=3;var j=u.Kc;if(C.Rb){if(7>A)return mn(u,7,"cannot parse picture header");if(!rl(b,w,A))return mn(u,3,"Bad code word");j.c=16383&(b[w+4]<<8|b[w+3]),j.Td=b[w+4]>>6,j.i=16383&(b[w+6]<<8|b[w+5]),j.Ud=b[w+6]>>6,w+=7,A-=7,u.za=j.c+15>>4,u.Ub=j.i+15>>4,f.width=j.c,f.height=j.i,f.Da=0,f.j=0,f.v=0,f.va=f.width,f.o=f.height,f.da=0,f.ib=f.width,f.hb=f.height,f.U=f.width,f.T=f.height,r((N=u.Pa).jb,0,255,N.jb.length),t((N=u.Qa)!=null),N.Cb=0,N.Bb=0,N.Fb=1,r(N.Zb,0,0,N.Zb.length),r(N.Lb,0,0,N.Lb)}if(C.ub>A)return mn(u,7,"bad partition length");ct(N=u.m,b,w,C.ub),w+=C.ub,A-=C.ub,C.Rb&&(j.Ld=ft(N),j.Kd=ft(N)),j=u.Qa;var I,F=u.Pa;if(t(N!=null),t(j!=null),j.Cb=ft(N),j.Cb){if(j.Bb=ft(N),ft(N)){for(j.Fb=ft(N),I=0;4>I;++I)j.Zb[I]=ft(N)?rt(N,7):0;for(I=0;4>I;++I)j.Lb[I]=ft(N)?rt(N,6):0}if(j.Bb)for(I=0;3>I;++I)F.jb[I]=ft(N)?ot(N,8):255}else j.Bb=0;if(N.Ka)return mn(u,3,"cannot parse segment header");if((j=u.ed).zd=ft(N),j.Tb=ot(N,6),j.wb=ot(N,3),j.Pc=ft(N),j.Pc&&ft(N)){for(F=0;4>F;++F)ft(N)&&(j.vd[F]=rt(N,6));for(F=0;4>F;++F)ft(N)&&(j.od[F]=rt(N,6))}if(u.L=j.Tb==0?0:j.zd?1:2,N.Ka)return mn(u,3,"cannot parse filter header");var Y=A;if(A=I=w,w=I+Y,j=Y,u.Xb=(1<<ot(u.m,2))-1,Y<3*(F=u.Xb))b=7;else{for(I+=3*F,j-=3*F,Y=0;Y<F;++Y){var lt=b[A+0]|b[A+1]<<8|b[A+2]<<16;lt>j&&(lt=j),ct(u.Jc[+Y],b,I,lt),I+=lt,j-=lt,A+=3}ct(u.Jc[+F],b,I,j),b=I<w?0:5}if(b!=0)return mn(u,b,"cannot parse partitions");for(b=ot(I=u.m,7),A=ft(I)?rt(I,4):0,w=ft(I)?rt(I,4):0,j=ft(I)?rt(I,4):0,F=ft(I)?rt(I,4):0,I=ft(I)?rt(I,4):0,Y=u.Qa,lt=0;4>lt;++lt){if(Y.Cb){var B=Y.Zb[lt];Y.Fb||(B+=b)}else{if(0<lt){u.pb[lt]=u.pb[0];continue}B=b}var tt=u.pb[lt];tt.Sc[0]=mh[Yi(B+A,127)],tt.Sc[1]=bh[Yi(B+0,127)],tt.Eb[0]=2*mh[Yi(B+w,127)],tt.Eb[1]=101581*bh[Yi(B+j,127)]>>16,8>tt.Eb[1]&&(tt.Eb[1]=8),tt.Qc[0]=mh[Yi(B+F,117)],tt.Qc[1]=bh[Yi(B+I,127)],tt.lc=B+I}if(!C.Rb)return mn(u,4,"Not a key frame.");for(ft(N),C=u.Pa,b=0;4>b;++b){for(A=0;8>A;++A)for(w=0;3>w;++w)for(j=0;11>j;++j)F=vt(N,T1[b][A][w][j])?ot(N,8):O1[b][A][w][j],C.Wc[b][A].Yb[w][j]=F;for(A=0;17>A;++A)C.Xc[b][A]=C.Wc[b][R1[A]]}return u.kc=ft(N),u.kc&&(u.Bd=ot(N,8)),u.cb=1}function Xs(u,f,b,w,A,N,C){var j=f[A].Yb[b];for(b=0;16>A;++A){if(!vt(u,j[b+0]))return A;for(;!vt(u,j[b+1]);)if(j=f[++A].Yb[0],b=0,A==16)return 16;var I=f[A+1].Yb;if(vt(u,j[b+2])){var F=u,Y=0;if(vt(F,(B=j)[(lt=b)+3]))if(vt(F,B[lt+6])){for(j=0,lt=2*(Y=vt(F,B[lt+8]))+(B=vt(F,B[lt+9+Y])),Y=0,B=C1[lt];B[j];++j)Y+=Y+vt(F,B[j]);Y+=3+(8<<lt)}else vt(F,B[lt+7])?(Y=7+2*vt(F,165),Y+=vt(F,145)):Y=5+vt(F,159);else Y=vt(F,B[lt+4])?3+vt(F,B[lt+5]):2;j=I[2]}else Y=1,j=I[1];I=C+E1[A],0>(F=u).b&&ut(F);var lt,B=F.b,tt=(lt=F.Ca>>1)-(F.I>>B)>>31;--F.b,F.Ca+=tt,F.Ca|=1,F.I-=(lt+1&tt)<<B,N[I]=((Y^tt)-tt)*w[(0<A)+0]}return 16}function sl(u){var f=u.rb[u.sb-1];f.la=0,f.Na=0,r(u.zc,0,0,u.zc.length),u.ja=0}function vi(u,f,b,w,A){A=u[f+b+32*w]+(A>>3),u[f+b+32*w]=-256&A?0>A?0:255:A}function _n(u,f,b,w,A,N){vi(u,f,0,b,w+A),vi(u,f,1,b,w+N),vi(u,f,2,b,w-N),vi(u,f,3,b,w-A)}function cr(u){return(20091*u>>16)+u}function al(u,f,b,w){var A,N=0,C=s(16);for(A=0;4>A;++A){var j=u[f+0]+u[f+8],I=u[f+0]-u[f+8],F=(35468*u[f+4]>>16)-cr(u[f+12]),Y=cr(u[f+4])+(35468*u[f+12]>>16);C[N+0]=j+Y,C[N+1]=I+F,C[N+2]=I-F,C[N+3]=j-Y,N+=4,f++}for(A=N=0;4>A;++A)j=(u=C[N+0]+4)+C[N+8],I=u-C[N+8],F=(35468*C[N+4]>>16)-cr(C[N+12]),vi(b,w,0,0,j+(Y=cr(C[N+4])+(35468*C[N+12]>>16))),vi(b,w,1,0,I+F),vi(b,w,2,0,I-F),vi(b,w,3,0,j-Y),N++,w+=32}function Xc(u,f,b,w){var A=u[f+0]+4,N=35468*u[f+4]>>16,C=cr(u[f+4]),j=35468*u[f+1]>>16;_n(b,w,0,A+C,u=cr(u[f+1]),j),_n(b,w,1,A+N,u,j),_n(b,w,2,A-N,u,j),_n(b,w,3,A-C,u,j)}function Zc(u,f,b,w,A){al(u,f,b,w),A&&al(u,f+16,b,w+4)}function Xi(u,f,b,w){ks(u,f+0,b,w,1),ks(u,f+32,b,w+128,1)}function ol(u,f,b,w){var A;for(u=u[f+0]+4,A=0;4>A;++A)for(f=0;4>f;++f)vi(b,w,f,A,u)}function ll(u,f,b,w){u[f+0]&&Re(u,f+0,b,w),u[f+16]&&Re(u,f+16,b,w+4),u[f+32]&&Re(u,f+32,b,w+128),u[f+48]&&Re(u,f+48,b,w+128+4)}function Zs(u,f,b,w){var A,N=s(16);for(A=0;4>A;++A){var C=u[f+0+A]+u[f+12+A],j=u[f+4+A]+u[f+8+A],I=u[f+4+A]-u[f+8+A],F=u[f+0+A]-u[f+12+A];N[0+A]=C+j,N[8+A]=C-j,N[4+A]=F+I,N[12+A]=F-I}for(A=0;4>A;++A)C=(u=N[0+4*A]+3)+N[3+4*A],j=N[1+4*A]+N[2+4*A],I=N[1+4*A]-N[2+4*A],F=u-N[3+4*A],b[w+0]=C+j>>3,b[w+16]=F+I>>3,b[w+32]=C-j>>3,b[w+48]=F-I>>3,w+=64}function ds(u,f,b){var w,A=f-32,N=ai,C=255-u[A-1];for(w=0;w<b;++w){var j,I=N,F=C+u[f-1];for(j=0;j<b;++j)u[f+j]=I[F+u[A+j]];f+=32}}function Qc(u,f){ds(u,f,4)}function th(u,f){ds(u,f,8)}function eh(u,f){ds(u,f,16)}function qa(u,f){var b;for(b=0;16>b;++b)i(u,f+32*b,u,f-32,16)}function cl(u,f){var b;for(b=16;0<b;--b)r(u,f,u[f-1],16),f+=32}function Ri(u,f,b){var w;for(w=0;16>w;++w)r(f,b+32*w,u,16)}function nh(u,f){var b,w=16;for(b=0;16>b;++b)w+=u[f-1+32*b]+u[f+b-32];Ri(w>>5,u,f)}function fs(u,f){var b,w=8;for(b=0;16>b;++b)w+=u[f-1+32*b];Ri(w>>4,u,f)}function za(u,f){var b,w=8;for(b=0;16>b;++b)w+=u[f+b-32];Ri(w>>4,u,f)}function ih(u,f){Ri(128,u,f)}function ue(u,f,b){return u+2*f+b+2>>2}function rh(u,f){var b,w=f-32;for(w=new Uint8Array([ue(u[w-1],u[w+0],u[w+1]),ue(u[w+0],u[w+1],u[w+2]),ue(u[w+1],u[w+2],u[w+3]),ue(u[w+2],u[w+3],u[w+4])]),b=0;4>b;++b)i(u,f+32*b,w,0,w.length)}function sh(u,f){var b=u[f-1],w=u[f-1+32],A=u[f-1+64],N=u[f-1+96];Nt(u,f+0,16843009*ue(u[f-1-32],b,w)),Nt(u,f+32,16843009*ue(b,w,A)),Nt(u,f+64,16843009*ue(w,A,N)),Nt(u,f+96,16843009*ue(A,N,N))}function ah(u,f){var b,w=4;for(b=0;4>b;++b)w+=u[f+b-32]+u[f-1+32*b];for(w>>=3,b=0;4>b;++b)r(u,f+32*b,w,4)}function hr(u,f){var b=u[f-1+0],w=u[f-1+32],A=u[f-1+64],N=u[f-1-32],C=u[f+0-32],j=u[f+1-32],I=u[f+2-32],F=u[f+3-32];u[f+0+96]=ue(w,A,u[f-1+96]),u[f+1+96]=u[f+0+64]=ue(b,w,A),u[f+2+96]=u[f+1+64]=u[f+0+32]=ue(N,b,w),u[f+3+96]=u[f+2+64]=u[f+1+32]=u[f+0+0]=ue(C,N,b),u[f+3+64]=u[f+2+32]=u[f+1+0]=ue(j,C,N),u[f+3+32]=u[f+2+0]=ue(I,j,C),u[f+3+0]=ue(F,I,j)}function ur(u,f){var b=u[f+1-32],w=u[f+2-32],A=u[f+3-32],N=u[f+4-32],C=u[f+5-32],j=u[f+6-32],I=u[f+7-32];u[f+0+0]=ue(u[f+0-32],b,w),u[f+1+0]=u[f+0+32]=ue(b,w,A),u[f+2+0]=u[f+1+32]=u[f+0+64]=ue(w,A,N),u[f+3+0]=u[f+2+32]=u[f+1+64]=u[f+0+96]=ue(A,N,C),u[f+3+32]=u[f+2+64]=u[f+1+96]=ue(N,C,j),u[f+3+64]=u[f+2+96]=ue(C,j,I),u[f+3+96]=ue(j,I,I)}function oh(u,f){var b=u[f-1+0],w=u[f-1+32],A=u[f-1+64],N=u[f-1-32],C=u[f+0-32],j=u[f+1-32],I=u[f+2-32],F=u[f+3-32];u[f+0+0]=u[f+1+64]=N+C+1>>1,u[f+1+0]=u[f+2+64]=C+j+1>>1,u[f+2+0]=u[f+3+64]=j+I+1>>1,u[f+3+0]=I+F+1>>1,u[f+0+96]=ue(A,w,b),u[f+0+64]=ue(w,b,N),u[f+0+32]=u[f+1+96]=ue(b,N,C),u[f+1+32]=u[f+2+96]=ue(N,C,j),u[f+2+32]=u[f+3+96]=ue(C,j,I),u[f+3+32]=ue(j,I,F)}function lh(u,f){var b=u[f+0-32],w=u[f+1-32],A=u[f+2-32],N=u[f+3-32],C=u[f+4-32],j=u[f+5-32],I=u[f+6-32],F=u[f+7-32];u[f+0+0]=b+w+1>>1,u[f+1+0]=u[f+0+64]=w+A+1>>1,u[f+2+0]=u[f+1+64]=A+N+1>>1,u[f+3+0]=u[f+2+64]=N+C+1>>1,u[f+0+32]=ue(b,w,A),u[f+1+32]=u[f+0+96]=ue(w,A,N),u[f+2+32]=u[f+1+96]=ue(A,N,C),u[f+3+32]=u[f+2+96]=ue(N,C,j),u[f+3+64]=ue(C,j,I),u[f+3+96]=ue(j,I,F)}function Qs(u,f){var b=u[f-1+0],w=u[f-1+32],A=u[f-1+64],N=u[f-1+96];u[f+0+0]=b+w+1>>1,u[f+2+0]=u[f+0+32]=w+A+1>>1,u[f+2+32]=u[f+0+64]=A+N+1>>1,u[f+1+0]=ue(b,w,A),u[f+3+0]=u[f+1+32]=ue(w,A,N),u[f+3+32]=u[f+1+64]=ue(A,N,N),u[f+3+64]=u[f+2+64]=u[f+0+96]=u[f+1+96]=u[f+2+96]=u[f+3+96]=N}function $a(u,f){var b=u[f-1+0],w=u[f-1+32],A=u[f-1+64],N=u[f-1+96],C=u[f-1-32],j=u[f+0-32],I=u[f+1-32],F=u[f+2-32];u[f+0+0]=u[f+2+32]=b+C+1>>1,u[f+0+32]=u[f+2+64]=w+b+1>>1,u[f+0+64]=u[f+2+96]=A+w+1>>1,u[f+0+96]=N+A+1>>1,u[f+3+0]=ue(j,I,F),u[f+2+0]=ue(C,j,I),u[f+1+0]=u[f+3+32]=ue(b,C,j),u[f+1+32]=u[f+3+64]=ue(w,b,C),u[f+1+64]=u[f+3+96]=ue(A,w,b),u[f+1+96]=ue(N,A,w)}function ps(u,f){var b;for(b=0;8>b;++b)i(u,f+32*b,u,f-32,8)}function ch(u,f){var b;for(b=0;8>b;++b)r(u,f,u[f-1],8),f+=32}function dr(u,f,b){var w;for(w=0;8>w;++w)r(f,b+32*w,u,8)}function hh(u,f){var b,w=8;for(b=0;8>b;++b)w+=u[f+b-32]+u[f-1+32*b];dr(w>>4,u,f)}function Ha(u,f){var b,w=4;for(b=0;8>b;++b)w+=u[f+b-32];dr(w>>3,u,f)}function Wa(u,f){var b,w=4;for(b=0;8>b;++b)w+=u[f-1+32*b];dr(w>>3,u,f)}function hl(u,f){dr(128,u,f)}function fr(u,f,b){var w=u[f-b],A=u[f+0],N=3*(A-w)+uh[1020+u[f-2*b]-u[f+b]],C=vl[112+(N+4>>3)];u[f-b]=ai[255+w+vl[112+(N+3>>3)]],u[f+0]=ai[255+A-C]}function Va(u,f,b,w){var A=u[f+0],N=u[f+b];return _i[255+u[f-2*b]-u[f-b]]>w||_i[255+N-A]>w}function ta(u,f,b,w){return 4*_i[255+u[f-b]-u[f+0]]+_i[255+u[f-2*b]-u[f+b]]<=w}function Ga(u,f,b,w,A){var N=u[f-3*b],C=u[f-2*b],j=u[f-b],I=u[f+0],F=u[f+b],Y=u[f+2*b],lt=u[f+3*b];return 4*_i[255+j-I]+_i[255+C-F]>w?0:_i[255+u[f-4*b]-N]<=A&&_i[255+N-C]<=A&&_i[255+C-j]<=A&&_i[255+lt-Y]<=A&&_i[255+Y-F]<=A&&_i[255+F-I]<=A}function gs(u,f,b,w){var A=2*w+1;for(w=0;16>w;++w)ta(u,f+w,b,A)&&fr(u,f+w,b)}function Ka(u,f,b,w){var A=2*w+1;for(w=0;16>w;++w)ta(u,f+w*b,1,A)&&fr(u,f+w*b,1)}function ul(u,f,b,w){var A;for(A=3;0<A;--A)gs(u,f+=4*b,b,w)}function dl(u,f,b,w){var A;for(A=3;0<A;--A)Ka(u,f+=4,b,w)}function pr(u,f,b,w,A,N,C,j){for(N=2*N+1;0<A--;){if(Ga(u,f,b,N,C))if(Va(u,f,b,j))fr(u,f,b);else{var I=u,F=f,Y=b,lt=I[F-2*Y],B=I[F-Y],tt=I[F+0],it=I[F+Y],gt=I[F+2*Y],at=27*(yt=uh[1020+3*(tt-B)+uh[1020+lt-it]])+63>>7,mt=18*yt+63>>7,yt=9*yt+63>>7;I[F-3*Y]=ai[255+I[F-3*Y]+yt],I[F-2*Y]=ai[255+lt+mt],I[F-Y]=ai[255+B+at],I[F+0]=ai[255+tt-at],I[F+Y]=ai[255+it-mt],I[F+2*Y]=ai[255+gt-yt]}f+=w}}function gr(u,f,b,w,A,N,C,j){for(N=2*N+1;0<A--;){if(Ga(u,f,b,N,C))if(Va(u,f,b,j))fr(u,f,b);else{var I=u,F=f,Y=b,lt=I[F-Y],B=I[F+0],tt=I[F+Y],it=vl[112+(4+(gt=3*(B-lt))>>3)],gt=vl[112+(gt+3>>3)],at=it+1>>1;I[F-2*Y]=ai[255+I[F-2*Y]+at],I[F-Y]=ai[255+lt+gt],I[F+0]=ai[255+B-it],I[F+Y]=ai[255+tt-at]}f+=w}}function fl(u,f,b,w,A,N){pr(u,f,b,1,16,w,A,N)}function ms(u,f,b,w,A,N){pr(u,f,1,b,16,w,A,N)}function pl(u,f,b,w,A,N){var C;for(C=3;0<C;--C)gr(u,f+=4*b,b,1,16,w,A,N)}function m(u,f,b,w,A,N){var C;for(C=3;0<C;--C)gr(u,f+=4,1,b,16,w,A,N)}function k(u,f,b,w,A,N,C,j){pr(u,f,A,1,8,N,C,j),pr(b,w,A,1,8,N,C,j)}function U(u,f,b,w,A,N,C,j){pr(u,f,1,A,8,N,C,j),pr(b,w,1,A,8,N,C,j)}function G(u,f,b,w,A,N,C,j){gr(u,f+4*A,A,1,8,N,C,j),gr(b,w+4*A,A,1,8,N,C,j)}function nt(u,f,b,w,A,N,C,j){gr(u,f+4,1,A,8,N,C,j),gr(b,w+4,1,A,8,N,C,j)}function bt(){this.ba=new ee,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Tt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function _t(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ft(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Wt(){this.ua=0,this.Wa=new ge,this.vb=new ge,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new et,this.yc=new H}function le(){this.xb=this.a=0,this.l=new Js,this.ca=new ee,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new q,this.Pb=0,this.wd=new q,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Wt,this.ab=0,this.gc=a(4,Ft),this.Oc=0}function me(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Js,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Le(u,f,b,w,A,N,C){for(u=u==null?0:u[f+0],f=0;f<C;++f)A[N+f]=u+b[w+f]&255,u=A[N+f]}function en(u,f,b,w,A,N,C){var j;if(u==null)Le(null,null,b,w,A,N,C);else for(j=0;j<C;++j)A[N+j]=u[f+j]+b[w+j]&255}function bn(u,f,b,w,A,N,C){if(u==null)Le(null,null,b,w,A,N,C);else{var j,I=u[f+0],F=I,Y=I;for(j=0;j<C;++j)F=Y+(I=u[f+j])-F,Y=b[w+j]+(-256&F?0>F?0:255:F)&255,F=I,A[N+j]=Y}}function We(u,f,b,w){var A=f.width,N=f.o;if(t(u!=null&&f!=null),0>b||0>=w||b+w>N)return null;if(!u.Cc){if(u.ga==null){var C;if(u.ga=new me,(C=u.ga==null)||(C=f.width*f.o,t(u.Gb.length==0),u.Gb=s(C),u.Uc=0,u.Gb==null?C=0:(u.mb=u.Gb,u.nb=u.Uc,u.rc=null,C=1),C=!C),!C){C=u.ga;var j=u.Fa,I=u.P,F=u.qc,Y=u.mb,lt=u.nb,B=I+1,tt=F-1,it=C.l;if(t(j!=null&&Y!=null&&f!=null),Vr[0]=null,Vr[1]=Le,Vr[2]=en,Vr[3]=bn,C.ca=Y,C.tb=lt,C.c=f.width,C.i=f.height,t(0<C.c&&0<C.i),1>=F)f=0;else if(C.$a=3&j[I+0],C.Z=j[I+0]>>2&3,C.Lc=j[I+0]>>4&3,I=j[I+0]>>6&3,0>C.$a||1<C.$a||4<=C.Z||1<C.Lc||I)f=0;else if(it.put=re,it.ac=Jn,it.bc=Pi,it.ma=C,it.width=f.width,it.height=f.height,it.Da=f.Da,it.v=f.v,it.va=f.va,it.j=f.j,it.o=f.o,C.$a)t:{t(C.$a==1),f=hs();e:for(;;){if(f==null){f=0;break t}if(t(C!=null),C.mc=f,f.c=C.c,f.i=C.i,f.l=C.l,f.l.ma=C,f.l.width=C.c,f.l.height=C.i,f.a=0,ht(f.m,j,B,tt),!Ki(C.c,C.i,1,f,null)||(f.ab==1&&f.gc[0].hc==3&&Oi(f.s)?(C.ic=1,j=f.c*f.i,f.Ta=null,f.Ua=0,f.V=s(j),f.Ba=0,f.V==null?(f.a=1,f=0):f=1):(C.ic=0,f=us(f,C.c)),!f))break e;f=1;break t}C.mc=null,f=0}else f=tt>=C.c*C.i;C=!f}if(C)return null;u.ga.Lc!=1?u.Ga=0:w=N-b}t(u.ga!=null),t(b+w<=N);t:{if(f=(j=u.ga).c,N=j.l.o,j.$a==0){if(B=u.rc,tt=u.Vc,it=u.Fa,I=u.P+1+b*f,F=u.mb,Y=u.nb+b*f,t(I<=u.P+u.qc),j.Z!=0)for(t(Vr[j.Z]!=null),C=0;C<w;++C)Vr[j.Z](B,tt,it,I,F,Y,f),B=F,tt=Y,Y+=f,I+=f;else for(C=0;C<w;++C)i(F,Y,it,I,f),B=F,tt=Y,Y+=f,I+=f;u.rc=B,u.Vc=tt}else{if(t(j.mc!=null),f=b+w,t((C=j.mc)!=null),t(f<=C.i),C.C>=f)f=1;else if(j.ic||Ii(),j.ic){j=C.V,B=C.Ba,tt=C.c;var gt=C.i,at=(it=1,I=C.$/tt,F=C.$%tt,Y=C.m,lt=C.s,C.$),mt=tt*gt,yt=tt*f,kt=lt.wc,xt=at<yt?wn(lt,F,I):null;t(at<=mt),t(f<=gt),t(Oi(lt));e:for(;;){for(;!Y.h&&at<yt;){if(F&kt||(xt=wn(lt,F,I)),t(xt!=null),st(Y),256>(gt=Te(xt.G[0],xt.H[0],Y)))j[B+at]=gt,++at,++F>=tt&&(F=0,++I<=f&&!(I%16)&&ji(C,I));else{if(!(280>gt)){it=0;break e}gt=he(gt-256,Y);var Kt,Dt=Te(xt.G[4],xt.H[4],Y);if(st(Y),!(at>=(Dt=Be(tt,Dt=he(Dt,Y)))&&mt-at>=gt)){it=0;break e}for(Kt=0;Kt<gt;++Kt)j[B+at+Kt]=j[B+at+Kt-Dt];for(at+=gt,F+=gt;F>=tt;)F-=tt,++I<=f&&!(I%16)&&ji(C,I);at<yt&&F&kt&&(xt=wn(lt,F,I))}t(Y.h==K(Y))}ji(C,I>f?f:I);break e}!it||Y.h&&at<mt?(it=0,C.a=Y.h?5:3):C.$=at,f=it}else f=Ti(C,C.V,C.Ba,C.c,C.i,f,Gs);if(!f){w=0;break t}}b+w>=N&&(u.Cc=1),w=1}if(!w)return null;if(u.Cc&&((w=u.ga)!=null&&(w.mc=null),u.ga=null,0<u.Ga))return alert("todo:WebPDequantizeLevels"),null}return u.nb+b*A}function xn(u,f,b,w,A,N){for(;0<A--;){var C,j=u,I=f+(b?1:0),F=u,Y=f+(b?0:3);for(C=0;C<w;++C){var lt=F[Y+4*C];lt!=255&&(lt*=32897,j[I+4*C+0]=j[I+4*C+0]*lt>>23,j[I+4*C+1]=j[I+4*C+1]*lt>>23,j[I+4*C+2]=j[I+4*C+2]*lt>>23)}f+=N}}function vn(u,f,b,w,A){for(;0<w--;){var N;for(N=0;N<b;++N){var C=u[f+2*N+0],j=15&(F=u[f+2*N+1]),I=4369*j,F=(240&F|F>>4)*I>>16;u[f+2*N+0]=(240&C|C>>4)*I>>16&240|(15&C|C<<4)*I>>16>>4&15,u[f+2*N+1]=240&F|j}f+=A}}function En(u,f,b,w,A,N,C,j){var I,F,Y=255;for(F=0;F<A;++F){for(I=0;I<w;++I){var lt=u[f+I];N[C+4*I]=lt,Y&=lt}f+=b,C+=j}return Y!=255}function mr(u,f,b,w,A){var N;for(N=0;N<A;++N)b[w+N]=u[f+N]>>8}function Ii(){ao=xn,Ld=vn,Pd=En,Cd=mr}function br(u,f,b){D[u]=function(w,A,N,C,j,I,F,Y,lt,B,tt,it,gt,at,mt,yt,kt){var xt,Kt=kt-1>>1,Dt=j[I+0]|F[Y+0]<<16,ve=lt[B+0]|tt[it+0]<<16;t(w!=null);var Ut=3*Dt+ve+131074>>2;for(f(w[A+0],255&Ut,Ut>>16,gt,at),N!=null&&(Ut=3*ve+Dt+131074>>2,f(N[C+0],255&Ut,Ut>>16,mt,yt)),xt=1;xt<=Kt;++xt){var Ae=j[I+xt]|F[Y+xt]<<16,kn=lt[B+xt]|tt[it+xt]<<16,ye=Dt+Ae+ve+kn+524296,qt=ye+2*(Ae+ve)>>3;Ut=qt+Dt>>1,Dt=(ye=ye+2*(Dt+kn)>>3)+Ae>>1,f(w[A+2*xt-1],255&Ut,Ut>>16,gt,at+(2*xt-1)*b),f(w[A+2*xt-0],255&Dt,Dt>>16,gt,at+(2*xt-0)*b),N!=null&&(Ut=ye+ve>>1,Dt=qt+kn>>1,f(N[C+2*xt-1],255&Ut,Ut>>16,mt,yt+(2*xt-1)*b),f(N[C+2*xt+0],255&Dt,Dt>>16,mt,yt+(2*xt+0)*b)),Dt=Ae,ve=kn}1&kt||(Ut=3*Dt+ve+131074>>2,f(w[A+kt-1],255&Ut,Ut>>16,gt,at+(kt-1)*b),N!=null&&(Ut=3*ve+Dt+131074>>2,f(N[C+kt-1],255&Ut,Ut>>16,mt,yt+(kt-1)*b)))}}function Ya(){xi[yl]=D1,xi[wl]=Ud,xi[Id]=M1,xi[_l]=qd,xi[xl]=zd,xi[dh]=$d,xi[Dd]=F1,xi[fh]=Ud,xi[ph]=qd,xi[Sl]=zd,xi[gh]=$d}function ea(u){return u&-16384?0>u?0:255:u>>B1}function Dr(u,f){return ea((19077*u>>8)+(26149*f>>8)-14234)}function bs(u,f,b){return ea((19077*u>>8)-(6419*f>>8)-(13320*b>>8)+8708)}function vs(u,f){return ea((19077*u>>8)+(33050*f>>8)-17685)}function Mr(u,f,b,w,A){w[A+0]=Dr(u,b),w[A+1]=bs(u,f,b),w[A+2]=vs(u,f)}function On(u,f,b,w,A){w[A+0]=vs(u,f),w[A+1]=bs(u,f,b),w[A+2]=Dr(u,b)}function ys(u,f,b,w,A){var N=bs(u,f,b);f=N<<3&224|vs(u,f)>>3,w[A+0]=248&Dr(u,b)|N>>5,w[A+1]=f}function ws(u,f,b,w,A){var N=240&vs(u,f)|15;w[A+0]=240&Dr(u,b)|bs(u,f,b)>>4,w[A+1]=N}function Ja(u,f,b,w,A){w[A+0]=255,Mr(u,f,b,w,A+1)}function Xa(u,f,b,w,A){On(u,f,b,w,A),w[A+3]=255}function Wn(u,f,b,w,A){Mr(u,f,b,w,A),w[A+3]=255}function vr(u,f,b){D[u]=function(w,A,N,C,j,I,F,Y,lt){for(var B=Y+(-2&lt)*b;Y!=B;)f(w[A+0],N[C+0],j[I+0],F,Y),f(w[A+1],N[C+0],j[I+0],F,Y+b),A+=2,++C,++I,Y+=2*b;1&lt&&f(w[A+0],N[C+0],j[I+0],F,Y)}}function na(u,f,b){return b==0?u==0?f==0?6:5:f==0?4:0:b}function gl(u,f,b,w,A){switch(u>>>30){case 3:ks(f,b,w,A,0);break;case 2:wi(f,b,w,A);break;case 1:Re(f,b,w,A)}}function yi(u,f){var b,w,A=f.M,N=f.Nb,C=u.oc,j=u.pc+40,I=u.oc,F=u.pc+584,Y=u.oc,lt=u.pc+600;for(b=0;16>b;++b)C[j+32*b-1]=129;for(b=0;8>b;++b)I[F+32*b-1]=129,Y[lt+32*b-1]=129;for(0<A?C[j-1-32]=I[F-1-32]=Y[lt-1-32]=129:(r(C,j-32-1,127,21),r(I,F-32-1,127,9),r(Y,lt-32-1,127,9)),w=0;w<u.za;++w){var B=f.ya[f.aa+w];if(0<w){for(b=-1;16>b;++b)i(C,j+32*b-4,C,j+32*b+12,4);for(b=-1;8>b;++b)i(I,F+32*b-4,I,F+32*b+4,4),i(Y,lt+32*b-4,Y,lt+32*b+4,4)}var tt=u.Gd,it=u.Hd+w,gt=B.ad,at=B.Hc;if(0<A&&(i(C,j-32,tt[it].y,0,16),i(I,F-32,tt[it].f,0,8),i(Y,lt-32,tt[it].ea,0,8)),B.Za){var mt=C,yt=j-32+16;for(0<A&&(w>=u.za-1?r(mt,yt,tt[it].y[15],4):i(mt,yt,tt[it+1].y,0,4)),b=0;4>b;b++)mt[yt+128+b]=mt[yt+256+b]=mt[yt+384+b]=mt[yt+0+b];for(b=0;16>b;++b,at<<=2)mt=C,yt=j+Wd[b],Di[B.Ob[b]](mt,yt),gl(at,gt,16*+b,mt,yt)}else if(mt=na(w,A,B.Ob[0]),Wr[mt](C,j),at!=0)for(b=0;16>b;++b,at<<=2)gl(at,gt,16*+b,C,j+Wd[b]);for(b=B.Gc,mt=na(w,A,B.Dd),_r[mt](I,F),_r[mt](Y,lt),at=gt,mt=I,yt=F,255&(B=0|b)&&(170&B?tr(at,256,mt,yt):qe(at,256,mt,yt)),B=Y,at=lt,255&(b>>=8)&&(170&b?tr(gt,320,B,at):qe(gt,320,B,at)),A<u.Ub-1&&(i(tt[it].y,0,C,j+480,16),i(tt[it].f,0,I,F+224,8),i(tt[it].ea,0,Y,lt+224,8)),b=8*N*u.B,tt=u.sa,it=u.ta+16*w+16*N*u.R,gt=u.qa,B=u.ra+8*w+b,at=u.Ha,mt=u.Ia+8*w+b,b=0;16>b;++b)i(tt,it+b*u.R,C,j+32*b,16);for(b=0;8>b;++b)i(gt,B+b*u.B,I,F+32*b,8),i(at,mt+b*u.B,Y,lt+32*b,8)}}function _s(u,f,b,w,A,N,C,j,I){var F=[0],Y=[0],lt=0,B=I!=null?I.kd:0,tt=I??new _t;if(u==null||12>b)return 7;tt.data=u,tt.w=f,tt.ha=b,f=[f],b=[b],tt.gb=[tt.gb];t:{var it=f,gt=b,at=tt.gb;if(t(u!=null),t(gt!=null),t(at!=null),at[0]=0,12<=gt[0]&&!e(u,it[0],"RIFF")){if(e(u,it[0]+8,"WEBP")){at=3;break t}var mt=zt(u,it[0]+4);if(12>mt||4294967286<mt){at=3;break t}if(B&&mt>gt[0]-8){at=7;break t}at[0]=mt,it[0]+=12,gt[0]-=12}at=0}if(at!=0)return at;for(mt=0<tt.gb[0],b=b[0];;){t:{var yt=u;gt=f,at=b;var kt=F,xt=Y,Kt=it=[0];if((Ut=lt=[lt])[0]=0,8>at[0])at=7;else{if(!e(yt,gt[0],"VP8X")){if(zt(yt,gt[0]+4)!=10){at=3;break t}if(18>at[0]){at=7;break t}var Dt=zt(yt,gt[0]+8),ve=1+jt(yt,gt[0]+12);if(2147483648<=ve*(yt=1+jt(yt,gt[0]+15))){at=3;break t}Kt!=null&&(Kt[0]=Dt),kt!=null&&(kt[0]=ve),xt!=null&&(xt[0]=yt),gt[0]+=18,at[0]-=18,Ut[0]=1}at=0}}if(lt=lt[0],it=it[0],at!=0)return at;if(gt=!!(2&it),!mt&&lt)return 3;if(N!=null&&(N[0]=!!(16&it)),C!=null&&(C[0]=gt),j!=null&&(j[0]=0),C=F[0],it=Y[0],lt&&gt&&I==null){at=0;break}if(4>b){at=7;break}if(mt&&lt||!mt&&!lt&&!e(u,f[0],"ALPH")){b=[b],tt.na=[tt.na],tt.P=[tt.P],tt.Sa=[tt.Sa];t:{Dt=u,at=f,mt=b;var Ut=tt.gb;kt=tt.na,xt=tt.P,Kt=tt.Sa,ve=22,t(Dt!=null),t(mt!=null),yt=at[0];var Ae=mt[0];for(t(kt!=null),t(Kt!=null),kt[0]=null,xt[0]=null,Kt[0]=0;;){if(at[0]=yt,mt[0]=Ae,8>Ae){at=7;break t}var kn=zt(Dt,yt+4);if(4294967286<kn){at=3;break t}var ye=8+kn+1&-2;if(ve+=ye,0<Ut&&ve>Ut){at=3;break t}if(!e(Dt,yt,"VP8 ")||!e(Dt,yt,"VP8L")){at=0;break t}if(Ae[0]<ye){at=7;break t}e(Dt,yt,"ALPH")||(kt[0]=Dt,xt[0]=yt+8,Kt[0]=kn),yt+=ye,Ae-=ye}}if(b=b[0],tt.na=tt.na[0],tt.P=tt.P[0],tt.Sa=tt.Sa[0],at!=0)break}b=[b],tt.Ja=[tt.Ja],tt.xa=[tt.xa];t:if(Ut=u,at=f,mt=b,kt=tt.gb[0],xt=tt.Ja,Kt=tt.xa,Dt=at[0],yt=!e(Ut,Dt,"VP8 "),ve=!e(Ut,Dt,"VP8L"),t(Ut!=null),t(mt!=null),t(xt!=null),t(Kt!=null),8>mt[0])at=7;else{if(yt||ve){if(Ut=zt(Ut,Dt+4),12<=kt&&Ut>kt-12){at=3;break t}if(B&&Ut>mt[0]-8){at=7;break t}xt[0]=Ut,at[0]+=8,mt[0]-=8,Kt[0]=ve}else Kt[0]=5<=mt[0]&&Ut[Dt+0]==47&&!(Ut[Dt+4]>>5),xt[0]=mt[0];at=0}if(b=b[0],tt.Ja=tt.Ja[0],tt.xa=tt.xa[0],f=f[0],at!=0)break;if(4294967286<tt.Ja)return 3;if(j==null||gt||(j[0]=tt.xa?2:1),C=[C],it=[it],tt.xa){if(5>b){at=7;break}j=C,B=it,gt=N,u==null||5>b?u=0:5<=b&&u[f+0]==47&&!(u[f+4]>>5)?(mt=[0],Ut=[0],kt=[0],ht(xt=new q,u,f,b),Ci(xt,mt,Ut,kt)?(j!=null&&(j[0]=mt[0]),B!=null&&(B[0]=Ut[0]),gt!=null&&(gt[0]=kt[0]),u=1):u=0):u=0}else{if(10>b){at=7;break}j=it,u==null||10>b||!rl(u,f+3,b-3)?u=0:(B=u[f+0]|u[f+1]<<8|u[f+2]<<16,gt=16383&(u[f+7]<<8|u[f+6]),u=16383&(u[f+9]<<8|u[f+8]),1&B||3<(B>>1&7)||!(B>>4&1)||B>>5>=tt.Ja||!gt||!u?u=0:(C&&(C[0]=gt),j&&(j[0]=u),u=1))}if(!u||(C=C[0],it=it[0],lt&&(F[0]!=C||Y[0]!=it)))return 3;I!=null&&(I[0]=tt,I.offset=f-I.w,t(4294967286>f-I.w),t(I.offset==I.ha-b));break}return at==0||at==7&&lt&&I==null?(N!=null&&(N[0]|=tt.na!=null&&0<tt.na.length),w!=null&&(w[0]=C),A!=null&&(A[0]=it),0):at}function Za(u,f,b){var w=f.width,A=f.height,N=0,C=0,j=w,I=A;if(f.Da=u!=null&&0<u.Da,f.Da&&(j=u.cd,I=u.bd,N=u.v,C=u.j,11>b||(N&=-2,C&=-2),0>N||0>C||0>=j||0>=I||N+j>w||C+I>A))return 0;if(f.v=N,f.j=C,f.va=N+j,f.o=C+I,f.U=j,f.T=I,f.da=u!=null&&0<u.da,f.da){if(!Qt(j,I,b=[u.ib],N=[u.hb]))return 0;f.ib=b[0],f.hb=N[0]}return f.ob=u!=null&&u.ob,f.Kb=u==null||!u.Sd,f.da&&(f.ob=f.ib<3*w/4&&f.hb<3*A/4,f.Kb=0),1}function Qa(u){if(u==null)return 2;if(11>u.S){var f=u.f.RGBA;f.fb+=(u.height-1)*f.A,f.A=-f.A}else f=u.f.kb,u=u.height,f.O+=(u-1)*f.fa,f.fa=-f.fa,f.N+=(u-1>>1)*f.Ab,f.Ab=-f.Ab,f.W+=(u-1>>1)*f.Db,f.Db=-f.Db,f.F!=null&&(f.J+=(u-1)*f.lb,f.lb=-f.lb);return 0}function Fr(u,f,b,w){if(w==null||0>=u||0>=f)return 2;if(b!=null){if(b.Da){var A=b.cd,N=b.bd,C=-2&b.v,j=-2&b.j;if(0>C||0>j||0>=A||0>=N||C+A>u||j+N>f)return 2;u=A,f=N}if(b.da){if(!Qt(u,f,A=[b.ib],N=[b.hb]))return 2;u=A[0],f=N[0]}}w.width=u,w.height=f;t:{var I=w.width,F=w.height;if(u=w.S,0>=I||0>=F||!(u>=yl&&13>u))u=2;else{if(0>=w.Rd&&w.sd==null){C=N=A=f=0;var Y=(j=I*Vd[u])*F;if(11>u||(N=(F+1)/2*(f=(I+1)/2),u==12&&(C=(A=I)*F)),(F=s(Y+2*N+C))==null){u=1;break t}w.sd=F,11>u?((I=w.f.RGBA).eb=F,I.fb=0,I.A=j,I.size=Y):((I=w.f.kb).y=F,I.O=0,I.fa=j,I.Fd=Y,I.f=F,I.N=0+Y,I.Ab=f,I.Cd=N,I.ea=F,I.W=0+Y+N,I.Db=f,I.Ed=N,u==12&&(I.F=F,I.J=0+Y+2*N),I.Tc=C,I.lb=A)}if(f=1,A=w.S,N=w.width,C=w.height,A>=yl&&13>A)if(11>A)u=w.f.RGBA,f&=(j=Math.abs(u.A))*(C-1)+N<=u.size,f&=j>=N*Vd[A],f&=u.eb!=null;else{u=w.f.kb,j=(N+1)/2,Y=(C+1)/2,I=Math.abs(u.fa),F=Math.abs(u.Ab);var lt=Math.abs(u.Db),B=Math.abs(u.lb),tt=B*(C-1)+N;f&=I*(C-1)+N<=u.Fd,f&=F*(Y-1)+j<=u.Cd,f=(f&=lt*(Y-1)+j<=u.Ed)&I>=N&F>=j&lt>=j,f&=u.y!=null,f&=u.f!=null,f&=u.ea!=null,A==12&&(f&=B>=N,f&=tt<=u.Tc,f&=u.F!=null)}else f=0;u=f?0:2}}return u!=0||b!=null&&b.fd&&(u=Qa(w)),u}var xs=64,ri=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],si=24,Br=32,yr=8,Ur=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];It("Predictor0","PredictorAdd0"),D.Predictor0=function(){return 4278190080},D.Predictor1=function(u){return u},D.Predictor2=function(u,f,b){return f[b+0]},D.Predictor3=function(u,f,b){return f[b+1]},D.Predictor4=function(u,f,b){return f[b-1]},D.Predictor5=function(u,f,b){return Jt(Jt(u,f[b+1]),f[b+0])},D.Predictor6=function(u,f,b){return Jt(u,f[b-1])},D.Predictor7=function(u,f,b){return Jt(u,f[b+0])},D.Predictor8=function(u,f,b){return Jt(f[b-1],f[b+0])},D.Predictor9=function(u,f,b){return Jt(f[b+0],f[b+1])},D.Predictor10=function(u,f,b){return Jt(Jt(u,f[b-1]),Jt(f[b+0],f[b+1]))},D.Predictor11=function(u,f,b){var w=f[b+0];return 0>=ce(w>>24&255,u>>24&255,(f=f[b-1])>>24&255)+ce(w>>16&255,u>>16&255,f>>16&255)+ce(w>>8&255,u>>8&255,f>>8&255)+ce(255&w,255&u,255&f)?w:u},D.Predictor12=function(u,f,b){var w=f[b+0];return(Ee((u>>24&255)+(w>>24&255)-((f=f[b-1])>>24&255))<<24|Ee((u>>16&255)+(w>>16&255)-(f>>16&255))<<16|Ee((u>>8&255)+(w>>8&255)-(f>>8&255))<<8|Ee((255&u)+(255&w)-(255&f)))>>>0},D.Predictor13=function(u,f,b){var w=f[b-1];return(we((u=Jt(u,f[b+0]))>>24&255,w>>24&255)<<24|we(u>>16&255,w>>16&255)<<16|we(u>>8&255,w>>8&255)<<8|we(255&u,255&w))>>>0};var to=D.PredictorAdd0;D.PredictorAdd1=_e,It("Predictor2","PredictorAdd2"),It("Predictor3","PredictorAdd3"),It("Predictor4","PredictorAdd4"),It("Predictor5","PredictorAdd5"),It("Predictor6","PredictorAdd6"),It("Predictor7","PredictorAdd7"),It("Predictor8","PredictorAdd8"),It("Predictor9","PredictorAdd9"),It("Predictor10","PredictorAdd10"),It("Predictor11","PredictorAdd11"),It("Predictor12","PredictorAdd12"),It("Predictor13","PredictorAdd13");var ia=D.PredictorAdd2;$t("ColorIndexInverseTransform","MapARGB","32b",function(u){return u>>8&255},function(u){return u}),$t("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(u){return u},function(u){return u>>8&255});var ln,ml=D.ColorIndexInverseTransform,Zi=D.MapARGB,Qi=D.VP8LColorIndexInverseTransformAlpha,eo=D.MapAlpha,no=D.VP8LPredictorsAdd=[];no.length=16,(D.VP8LPredictors=[]).length=16,(D.VP8LPredictorsAdd_C=[]).length=16,(D.VP8LPredictors_C=[]).length=16;var io,ro,qr,zr,$r,Ss,Hr,ks,wi,tr,Re,qe,cn,Sn,wr,so,ra,bl,_d,xd,Sd,kd,Ad,Nd,ao,Ld,Pd,Cd,Ed=s(511),Od=s(2041),jd=s(225),Td=s(767),Rd=0,uh=Od,vl=jd,ai=Td,_i=Ed,yl=0,wl=1,Id=2,_l=3,xl=4,dh=5,Dd=6,fh=7,ph=8,Sl=9,gh=10,x1=[2,3,7],S1=[3,3,11],Md=[280,256,256,256,40],k1=[0,1,1,1,0],A1=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],N1=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],L1=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],P1=8,mh=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],bh=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],oo=null,C1=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],E1=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Fd=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],O1=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],j1=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],T1=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],R1=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Wr=[],Di=[],_r=[],I1=1,Bd=2,Vr=[],xi=[];br("UpsampleRgbLinePair",Mr,3),br("UpsampleBgrLinePair",On,3),br("UpsampleRgbaLinePair",Wn,4),br("UpsampleBgraLinePair",Xa,4),br("UpsampleArgbLinePair",Ja,4),br("UpsampleRgba4444LinePair",ws,2),br("UpsampleRgb565LinePair",ys,2);var D1=D.UpsampleRgbLinePair,M1=D.UpsampleBgrLinePair,Ud=D.UpsampleRgbaLinePair,qd=D.UpsampleBgraLinePair,zd=D.UpsampleArgbLinePair,$d=D.UpsampleRgba4444LinePair,F1=D.UpsampleRgb565LinePair,kl=16,Al=1<<kl-1,lo=-227,vh=482,B1=6,Hd=0,U1=s(256),q1=s(256),z1=s(256),$1=s(256),H1=s(vh-lo),W1=s(vh-lo);vr("YuvToRgbRow",Mr,3),vr("YuvToBgrRow",On,3),vr("YuvToRgbaRow",Wn,4),vr("YuvToBgraRow",Xa,4),vr("YuvToArgbRow",Ja,4),vr("YuvToRgba4444Row",ws,2),vr("YuvToRgb565Row",ys,2);var Wd=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Nl=[0,2,8],V1=[8,7,6,4,4,2,2,2,1,1,1,1],G1=1;this.WebPDecodeRGBA=function(u,f,b,w,A){var N=wl,C=new bt,j=new ee;C.ba=j,j.S=N,j.width=[j.width],j.height=[j.height];var I=j.width,F=j.height,Y=new Gt;if(Y==null||u==null)var lt=2;else t(Y!=null),lt=_s(u,f,b,Y.width,Y.height,Y.Pd,Y.Qd,Y.format,null);if(lt!=0?I=0:(I!=null&&(I[0]=Y.width[0]),F!=null&&(F[0]=Y.height[0]),I=1),I){j.width=j.width[0],j.height=j.height[0],w!=null&&(w[0]=j.width),A!=null&&(A[0]=j.height);t:{if(w=new Js,(A=new _t).data=u,A.w=f,A.ha=b,A.kd=1,f=[0],t(A!=null),((u=_s(A.data,A.w,A.ha,null,null,null,f,null,A))==0||u==7)&&f[0]&&(u=4),(f=u)==0){if(t(C!=null),w.data=A.data,w.w=A.w+A.offset,w.ha=A.ha-A.offset,w.put=re,w.ac=Jn,w.bc=Pi,w.ma=C,A.xa){if((u=hs())==null){C=1;break t}if(function(B,tt){var it=[0],gt=[0],at=[0];e:for(;;){if(B==null)return 0;if(tt==null)return B.a=2,0;if(B.l=tt,B.a=0,ht(B.m,tt.data,tt.w,tt.ha),!Ci(B.m,it,gt,at)){B.a=3;break e}if(B.xb=Bd,tt.width=it[0],tt.height=gt[0],!Ki(it[0],gt[0],1,B,null))break e;return 1}return t(B.a!=0),0}(u,w)){if(w=(f=Fr(w.width,w.height,C.Oa,C.ba))==0){e:{w=u;n:for(;;){if(w==null){w=0;break e}if(t(w.s.yc!=null),t(w.s.Ya!=null),t(0<w.s.Wb),t((b=w.l)!=null),t((A=b.ma)!=null),w.xb!=0){if(w.ca=A.ba,w.tb=A.tb,t(w.ca!=null),!Za(A.Oa,b,_l)){w.a=2;break n}if(!us(w,b.width)||b.da)break n;if((b.da||Et(w.ca.S))&&Ii(),11>w.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),w.ca.f.kb.F!=null&&Ii()),w.Pb&&0<w.s.ua&&w.s.vb.X==null&&!M(w.s.vb,w.s.Wa.Xa)){w.a=1;break n}w.xb=0}if(!Ti(w,w.V,w.Ba,w.c,w.i,b.o,Ei))break n;A.Dc=w.Ma,w=1;break e}t(w.a!=0),w=0}w=!w}w&&(f=u.a)}else f=u.a}else{if((u=new Jc)==null){C=1;break t}if(u.Fa=A.na,u.P=A.P,u.qc=A.Sa,Ji(u,w)){if((f=Fr(w.width,w.height,C.Oa,C.ba))==0){if(u.Aa=0,b=C.Oa,t((A=u)!=null),b!=null){if(0<(I=0>(I=b.Md)?0:100<I?255:255*I/100)){for(F=Y=0;4>F;++F)12>(lt=A.pb[F]).lc&&(lt.ia=I*V1[0>lt.lc?0:lt.lc]>>3),Y|=lt.ia;Y&&(alert("todo:VP8InitRandom"),A.ia=1)}A.Ga=b.Id,100<A.Ga?A.Ga=100:0>A.Ga&&(A.Ga=0)}(function(B,tt){if(B==null)return 0;if(tt==null)return mn(B,2,"NULL VP8Io parameter in VP8Decode().");if(!B.cb&&!Ji(B,tt))return 0;if(t(B.cb),tt.ac==null||tt.ac(tt)){tt.ob&&(B.L=0);var it=Nl[B.L];if(B.L==2?(B.yb=0,B.zb=0):(B.yb=tt.v-it>>4,B.zb=tt.j-it>>4,0>B.yb&&(B.yb=0),0>B.zb&&(B.zb=0)),B.Va=tt.o+15+it>>4,B.Hb=tt.va+15+it>>4,B.Hb>B.za&&(B.Hb=B.za),B.Va>B.Ub&&(B.Va=B.Ub),0<B.L){var gt=B.ed;for(it=0;4>it;++it){var at;if(B.Qa.Cb){var mt=B.Qa.Lb[it];B.Qa.Fb||(mt+=gt.Tb)}else mt=gt.Tb;for(at=0;1>=at;++at){var yt=B.gd[it][at],kt=mt;if(gt.Pc&&(kt+=gt.vd[0],at&&(kt+=gt.od[0])),0<(kt=0>kt?0:63<kt?63:kt)){var xt=kt;0<gt.wb&&(xt=4<gt.wb?xt>>2:xt>>1)>9-gt.wb&&(xt=9-gt.wb),1>xt&&(xt=1),yt.dd=xt,yt.tc=2*kt+xt,yt.ld=40<=kt?2:15<=kt?1:0}else yt.tc=0;yt.La=at}}}it=0}else mn(B,6,"Frame setup failed"),it=B.a;if(it=it==0){if(it){B.$c=0,0<B.Aa||(B.Ic=G1);e:{it=B.Ic,gt=4*(xt=B.za);var Kt=32*xt,Dt=xt+1,ve=0<B.L?xt*(0<B.Aa?2:1):0,Ut=(B.Aa==2?2:1)*xt;if((yt=gt+832+(at=3*(16*it+Nl[B.L])/2*Kt)+(mt=B.Fa!=null&&0<B.Fa.length?B.Kc.c*B.Kc.i:0))!=yt)it=0;else{if(yt>B.Vb){if(B.Vb=0,B.Ec=s(yt),B.Fc=0,B.Ec==null){it=mn(B,1,"no memory during frame initialization.");break e}B.Vb=yt}yt=B.Ec,kt=B.Fc,B.Ac=yt,B.Bc=kt,kt+=gt,B.Gd=a(Kt,nl),B.Hd=0,B.rb=a(Dt+1,Ba),B.sb=1,B.wa=ve?a(ve,bi):null,B.Y=0,B.D.Nb=0,B.D.wa=B.wa,B.D.Y=B.Y,0<B.Aa&&(B.D.Y+=xt),t(!0),B.oc=yt,B.pc=kt,kt+=832,B.ya=a(Ut,Ua),B.aa=0,B.D.ya=B.ya,B.D.aa=B.aa,B.Aa==2&&(B.D.aa+=xt),B.R=16*xt,B.B=8*xt,xt=(Kt=Nl[B.L])*B.R,Kt=Kt/2*B.B,B.sa=yt,B.ta=kt+xt,B.qa=B.sa,B.ra=B.ta+16*it*B.R+Kt,B.Ha=B.qa,B.Ia=B.ra+8*it*B.B+Kt,B.$c=0,kt+=at,B.mb=mt?yt:null,B.nb=mt?kt:null,t(kt+mt<=B.Fc+B.Vb),sl(B),r(B.Ac,B.Bc,0,gt),it=1}}if(it){if(tt.ka=0,tt.y=B.sa,tt.O=B.ta,tt.f=B.qa,tt.N=B.ra,tt.ea=B.Ha,tt.Vd=B.Ia,tt.fa=B.R,tt.Rc=B.B,tt.F=null,tt.J=0,!Rd){for(it=-255;255>=it;++it)Ed[255+it]=0>it?-it:it;for(it=-1020;1020>=it;++it)Od[1020+it]=-128>it?-128:127<it?127:it;for(it=-112;112>=it;++it)jd[112+it]=-16>it?-16:15<it?15:it;for(it=-255;510>=it;++it)Td[255+it]=0>it?0:255<it?255:it;Rd=1}Hr=Zs,ks=Zc,tr=Xi,Re=ol,qe=ll,wi=Xc,cn=fl,Sn=ms,wr=k,so=U,ra=pl,bl=m,_d=G,xd=nt,Sd=gs,kd=Ka,Ad=ul,Nd=dl,Di[0]=ah,Di[1]=Qc,Di[2]=rh,Di[3]=sh,Di[4]=hr,Di[5]=oh,Di[6]=ur,Di[7]=lh,Di[8]=$a,Di[9]=Qs,Wr[0]=nh,Wr[1]=eh,Wr[2]=qa,Wr[3]=cl,Wr[4]=fs,Wr[5]=za,Wr[6]=ih,_r[0]=hh,_r[1]=th,_r[2]=ps,_r[3]=ch,_r[4]=Wa,_r[5]=Ha,_r[6]=hl,it=1}else it=0}it&&(it=function(Ae,kn){for(Ae.M=0;Ae.M<Ae.Va;++Ae.M){var ye,qt=Ae.Jc[Ae.M&Ae.Xb],Ct=Ae.m,hn=Ae;for(ye=0;ye<hn.za;++ye){var pe=Ct,Ne=hn,Ke=Ne.Ac,jn=Ne.Bc+4*ye,Vn=Ne.zc,nn=Ne.ya[Ne.aa+ye];if(Ne.Qa.Bb?nn.$b=vt(pe,Ne.Pa.jb[0])?2+vt(pe,Ne.Pa.jb[2]):vt(pe,Ne.Pa.jb[1]):nn.$b=0,Ne.kc&&(nn.Ad=vt(pe,Ne.Bd)),nn.Za=!vt(pe,145)+0,nn.Za){var Fn=nn.Ob,Gn=0;for(Ne=0;4>Ne;++Ne){var An,Pe=Vn[0+Ne];for(An=0;4>An;++An){Pe=j1[Ke[jn+An]][Pe];for(var Ie=Fd[vt(pe,Pe[0])];0<Ie;)Ie=Fd[2*Ie+vt(pe,Pe[Ie])];Pe=-Ie,Ke[jn+An]=Pe}i(Fn,Gn,Ke,jn,4),Gn+=4,Vn[0+Ne]=Pe}}else Pe=vt(pe,156)?vt(pe,128)?1:3:vt(pe,163)?2:0,nn.Ob[0]=Pe,r(Ke,jn,Pe,4),r(Vn,0,Pe,4);nn.Dd=vt(pe,142)?vt(pe,114)?vt(pe,183)?1:3:2:0}if(hn.m.Ka)return mn(Ae,7,"Premature end-of-partition0 encountered.");for(;Ae.ja<Ae.za;++Ae.ja){if(hn=qt,pe=(Ct=Ae).rb[Ct.sb-1],Ke=Ct.rb[Ct.sb+Ct.ja],ye=Ct.ya[Ct.aa+Ct.ja],jn=Ct.kc?ye.Ad:0)pe.la=Ke.la=0,ye.Za||(pe.Na=Ke.Na=0),ye.Hc=0,ye.Gc=0,ye.ia=0;else{var rn,De;if(pe=Ke,Ke=hn,jn=Ct.Pa.Xc,Vn=Ct.ya[Ct.aa+Ct.ja],nn=Ct.pb[Vn.$b],Ne=Vn.ad,Fn=0,Gn=Ct.rb[Ct.sb-1],Pe=An=0,r(Ne,Fn,0,384),Vn.Za)var Tn=0,Mi=jn[3];else{Ie=s(16);var un=pe.Na+Gn.Na;if(un=oo(Ke,jn[1],un,nn.Eb,0,Ie,0),pe.Na=Gn.Na=(0<un)+0,1<un)Hr(Ie,0,Ne,Fn);else{var Xn=Ie[0]+3>>3;for(Ie=0;256>Ie;Ie+=16)Ne[Fn+Ie]=Xn}Tn=1,Mi=jn[0]}var ze=15&pe.la,Nn=15&Gn.la;for(Ie=0;4>Ie;++Ie){var oi=1&Nn;for(Xn=De=0;4>Xn;++Xn)ze=ze>>1|(oi=(un=oo(Ke,Mi,un=oi+(1&ze),nn.Sc,Tn,Ne,Fn))>Tn)<<7,De=De<<2|(3<un?3:1<un?2:Ne[Fn+0]!=0),Fn+=16;ze>>=4,Nn=Nn>>1|oi<<7,An=(An<<8|De)>>>0}for(Mi=ze,Tn=Nn>>4,rn=0;4>rn;rn+=2){for(De=0,ze=pe.la>>4+rn,Nn=Gn.la>>4+rn,Ie=0;2>Ie;++Ie){for(oi=1&Nn,Xn=0;2>Xn;++Xn)un=oi+(1&ze),ze=ze>>1|(oi=0<(un=oo(Ke,jn[2],un,nn.Qc,0,Ne,Fn)))<<3,De=De<<2|(3<un?3:1<un?2:Ne[Fn+0]!=0),Fn+=16;ze>>=2,Nn=Nn>>1|oi<<5}Pe|=De<<4*rn,Mi|=ze<<4<<rn,Tn|=(240&Nn)<<rn}pe.la=Mi,Gn.la=Tn,Vn.Hc=An,Vn.Gc=Pe,Vn.ia=43690&Pe?0:nn.ia,jn=!(An|Pe)}if(0<Ct.L&&(Ct.wa[Ct.Y+Ct.ja]=Ct.gd[ye.$b][ye.Za],Ct.wa[Ct.Y+Ct.ja].La|=!jn),hn.Ka)return mn(Ae,7,"Premature end-of-file encountered.")}if(sl(Ae),Ct=kn,hn=1,ye=(qt=Ae).D,pe=0<qt.L&&qt.M>=qt.zb&&qt.M<=qt.Va,qt.Aa==0)e:{if(ye.M=qt.M,ye.uc=pe,yi(qt,ye),hn=1,ye=(De=qt.D).Nb,pe=(Pe=Nl[qt.L])*qt.R,Ke=Pe/2*qt.B,Ie=16*ye*qt.R,Xn=8*ye*qt.B,jn=qt.sa,Vn=qt.ta-pe+Ie,nn=qt.qa,Ne=qt.ra-Ke+Xn,Fn=qt.Ha,Gn=qt.Ia-Ke+Xn,Nn=(ze=De.M)==0,An=ze>=qt.Va-1,qt.Aa==2&&yi(qt,De),De.uc)for(oi=(un=qt).D.M,t(un.D.uc),De=un.yb;De<un.Hb;++De){Tn=De,Mi=oi;var Kn=(li=(Rn=un).D).Nb;rn=Rn.R;var li=li.wa[li.Y+Tn],ci=Rn.sa,Zn=Rn.ta+16*Kn*rn+16*Tn,hi=li.dd,Ve=li.tc;if(Ve!=0)if(t(3<=Ve),Rn.L==1)0<Tn&&kd(ci,Zn,rn,Ve+4),li.La&&Nd(ci,Zn,rn,Ve),0<Mi&&Sd(ci,Zn,rn,Ve+4),li.La&&Ad(ci,Zn,rn,Ve);else{var ui=Rn.B,Fi=Rn.qa,As=Rn.ra+8*Kn*ui+8*Tn,xr=Rn.Ha,Rn=Rn.Ia+8*Kn*ui+8*Tn;Kn=li.ld,0<Tn&&(Sn(ci,Zn,rn,Ve+4,hi,Kn),so(Fi,As,xr,Rn,ui,Ve+4,hi,Kn)),li.La&&(bl(ci,Zn,rn,Ve,hi,Kn),xd(Fi,As,xr,Rn,ui,Ve,hi,Kn)),0<Mi&&(cn(ci,Zn,rn,Ve+4,hi,Kn),wr(Fi,As,xr,Rn,ui,Ve+4,hi,Kn)),li.La&&(ra(ci,Zn,rn,Ve,hi,Kn),_d(Fi,As,xr,Rn,ui,Ve,hi,Kn))}}if(qt.ia&&alert("todo:DitherRow"),Ct.put!=null){if(De=16*ze,ze=16*(ze+1),Nn?(Ct.y=qt.sa,Ct.O=qt.ta+Ie,Ct.f=qt.qa,Ct.N=qt.ra+Xn,Ct.ea=qt.Ha,Ct.W=qt.Ia+Xn):(De-=Pe,Ct.y=jn,Ct.O=Vn,Ct.f=nn,Ct.N=Ne,Ct.ea=Fn,Ct.W=Gn),An||(ze-=Pe),ze>Ct.o&&(ze=Ct.o),Ct.F=null,Ct.J=null,qt.Fa!=null&&0<qt.Fa.length&&De<ze&&(Ct.J=We(qt,Ct,De,ze-De),Ct.F=qt.mb,Ct.F==null&&Ct.F.length==0)){hn=mn(qt,3,"Could not decode alpha data.");break e}De<Ct.j&&(Pe=Ct.j-De,De=Ct.j,t(!(1&Pe)),Ct.O+=qt.R*Pe,Ct.N+=qt.B*(Pe>>1),Ct.W+=qt.B*(Pe>>1),Ct.F!=null&&(Ct.J+=Ct.width*Pe)),De<ze&&(Ct.O+=Ct.v,Ct.N+=Ct.v>>1,Ct.W+=Ct.v>>1,Ct.F!=null&&(Ct.J+=Ct.v),Ct.ka=De-Ct.j,Ct.U=Ct.va-Ct.v,Ct.T=ze-De,hn=Ct.put(Ct))}ye+1!=qt.Ic||An||(i(qt.sa,qt.ta-pe,jn,Vn+16*qt.R,pe),i(qt.qa,qt.ra-Ke,nn,Ne+8*qt.B,Ke),i(qt.Ha,qt.Ia-Ke,Fn,Gn+8*qt.B,Ke))}if(!hn)return mn(Ae,6,"Output aborted.")}return 1}(B,tt)),tt.bc!=null&&tt.bc(tt),it&=1}return it?(B.cb=0,it):0})(u,w)||(f=u.a)}}else f=u.a}f==0&&C.Oa!=null&&C.Oa.fd&&(f=Qa(C.ba))}C=f}N=C!=0?null:11>N?j.f.RGBA.eb:j.f.kb.y}else N=null;return N};var Vd=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(D,Z){for(var L="",R=0;R<4;R++)L+=String.fromCharCode(D[Z++]);return L}function h(D,Z){return D[Z+0]|D[Z+1]<<8}function p(D,Z){return(D[Z+0]|D[Z+1]<<8|D[Z+2]<<16)>>>0}function g(D,Z){return(D[Z+0]|D[Z+1]<<8|D[Z+2]<<16|D[Z+3]<<24)>>>0}new l;var d=[0],v=[0],y=[],x=new l,_=n,E=function(D,Z){var L={},R=0,H=!1,W=0,et=0;if(L.frames=[],!function(P,q){for(var z=0;z<4;z++)if(P[q+z]!="RIFF".charCodeAt(z))return!0;return!1}(D,Z)){for(g(D,Z+=4),Z+=8;Z<D.length;){var ct=c(D,Z),ot=g(D,Z+=4);Z+=4;var rt=ot+(1&ot);switch(ct){case"VP8 ":case"VP8L":L.frames[R]===void 0&&(L.frames[R]={}),(wt=L.frames[R]).src_off=H?et:Z-8,wt.src_size=W+ot+8,R++,H&&(H=!1,W=0,et=0);break;case"VP8X":(wt=L.header={}).feature_flags=D[Z];var ht=Z+4;wt.canvas_width=1+p(D,ht),ht+=3,wt.canvas_height=1+p(D,ht),ht+=3;break;case"ALPH":H=!0,W=rt+8,et=Z-8;break;case"ANIM":(wt=L.header).bgcolor=g(D,Z),ht=Z+4,wt.loop_count=h(D,ht),ht+=2;break;case"ANMF":var At,wt;(wt=L.frames[R]={}).offset_x=2*p(D,Z),Z+=3,wt.offset_y=2*p(D,Z),Z+=3,wt.width=1+p(D,Z),Z+=3,wt.height=1+p(D,Z),Z+=3,wt.duration=p(D,Z),Z+=3,At=D[Z++],wt.dispose=1&At,wt.blend=At>>1&1}ct!="ANMF"&&(Z+=rt)}return L}}(_,0);E.response=_,E.rgbaoutput=!0,E.dataurl=!1;var O=E.header?E.header:null,T=E.frames?E.frames:null;if(O){O.loop_counter=O.loop_count,d=[O.canvas_height],v=[O.canvas_width];for(var V=0;V<T.length&&T[V].blend!=0;V++);}var Q=T[0],J=x.WebPDecodeRGBA(_,Q.src_off,Q.src_size,v,d);Q.rgba=J,Q.imgwidth=v[0],Q.imgheight=d[0];for(var $=0;$<v[0]*d[0]*4;$++)y[$]=J[$];return this.width=v,this.height=d,this.data=y,this}/** ====================================================================
 * @license
 * jsPDF XMP metadata plugin
 * Copyright (c) 2016 Jussi Utunen, u-jussi@suomi24.fi
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 */function yw(){var n,t=this.internal.__metadata__.metadata,e=unescape(encodeURIComponent(t));n=this.internal.__metadata__.rawXml?e:'<x:xmpmeta xmlns:x="adobe:ns:meta/"><rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceUri+'"><jspdf:metadata>'+e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")+"</jspdf:metadata></rdf:Description></rdf:RDF></x:xmpmeta>",this.internal.__metadata__.metadataObjectNumber=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+n.length+" >>"),this.internal.write("stream"),this.internal.write(n),this.internal.write("endstream"),this.internal.write("endobj")}function ww(){this.internal.__metadata__.metadataObjectNumber&&this.internal.write("/Metadata "+this.internal.__metadata__.metadataObjectNumber+" 0 R")}(function(n){var t,e,i,r,s,a,o,l,c,h=function(P){return P=P||{},this.isStrokeTransparent=P.isStrokeTransparent||!1,this.strokeOpacity=P.strokeOpacity||1,this.strokeStyle=P.strokeStyle||"#000000",this.fillStyle=P.fillStyle||"#000000",this.isFillTransparent=P.isFillTransparent||!1,this.fillOpacity=P.fillOpacity||1,this.font=P.font||"10px sans-serif",this.textBaseline=P.textBaseline||"alphabetic",this.textAlign=P.textAlign||"left",this.lineWidth=P.lineWidth||1,this.lineJoin=P.lineJoin||"miter",this.lineCap=P.lineCap||"butt",this.path=P.path||[],this.transform=P.transform!==void 0?P.transform.clone():new l,this.globalCompositeOperation=P.globalCompositeOperation||"normal",this.globalAlpha=P.globalAlpha||1,this.clip_path=P.clip_path||[],this.currentPoint=P.currentPoint||new a,this.miterLimit=P.miterLimit||10,this.lastPoint=P.lastPoint||new a,this.lineDashOffset=P.lineDashOffset||0,this.lineDash=P.lineDash||[],this.margin=P.margin||[0,0,0,0],this.prevPageLastElemOffset=P.prevPageLastElemOffset||0,this.ignoreClearRect=typeof P.ignoreClearRect!="boolean"||P.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new p(this),t=this.internal.f2,e=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,r=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,a=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,c=new h}]);var p=function(P){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var q=P;Object.defineProperty(this,"pdf",{get:function(){return q}});var z=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return z},set:function(M){z=!!M}});var K=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return K},set:function(M){K=!!M}});var X=0;Object.defineProperty(this,"posX",{get:function(){return X},set:function(M){isNaN(M)||(X=M)}});var st=0;Object.defineProperty(this,"posY",{get:function(){return st},set:function(M){isNaN(M)||(st=M)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(M){var Pt;typeof M=="number"?Pt=[M,M,M,M]:((Pt=new Array(4))[0]=M[0],Pt[1]=M.length>=2?M[1]:Pt[0],Pt[2]=M.length>=3?M[2]:Pt[0],Pt[3]=M.length>=4?M[3]:Pt[1]),c.margin=Pt}});var ut=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ut},set:function(M){ut=M}});var ft=0;Object.defineProperty(this,"lastBreak",{get:function(){return ft},set:function(M){ft=M}});var vt=[];Object.defineProperty(this,"pageBreaks",{get:function(){return vt},set:function(M){vt=M}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(M){M instanceof h&&(c=M)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(M){c.path=M}});var Nt=[];Object.defineProperty(this,"ctxStack",{get:function(){return Nt},set:function(M){Nt=M}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(M){var Pt;Pt=g(M),this.ctx.fillStyle=Pt.style,this.ctx.isFillTransparent=Pt.a===0,this.ctx.fillOpacity=Pt.a,this.pdf.setFillColor(Pt.r,Pt.g,Pt.b,{a:Pt.a}),this.pdf.setTextColor(Pt.r,Pt.g,Pt.b,{a:Pt.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(M){var Pt=g(M);this.ctx.strokeStyle=Pt.style,this.ctx.isStrokeTransparent=Pt.a===0,this.ctx.strokeOpacity=Pt.a,Pt.a===0?this.pdf.setDrawColor(255,255,255):(Pt.a,this.pdf.setDrawColor(Pt.r,Pt.g,Pt.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(M){["butt","round","square"].indexOf(M)!==-1&&(this.ctx.lineCap=M,this.pdf.setLineCap(M))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(M){isNaN(M)||(this.ctx.lineWidth=M,this.pdf.setLineWidth(M))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(M){["bevel","round","miter"].indexOf(M)!==-1&&(this.ctx.lineJoin=M,this.pdf.setLineJoin(M))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(M){isNaN(M)||(this.ctx.miterLimit=M,this.pdf.setMiterLimit(M))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(M){this.ctx.textBaseline=M}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(M){["right","end","center","left","start"].indexOf(M)!==-1&&(this.ctx.textAlign=M)}});var Ot=null,jt=null,zt=null;Object.defineProperty(this,"fontFaces",{get:function(){return zt},set:function(M){Ot=null,jt=null,zt=M}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(M){var Pt;if(this.ctx.font=M,(Pt=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(M))!==null){var ge=Pt[1];Pt[2];var Qt=Pt[3],St=Pt[4];Pt[5];var ne=Pt[6],It=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(St)[2];St=Math.floor(It==="px"?parseFloat(St)*this.pdf.internal.scaleFactor:It==="em"?parseFloat(St)*this.pdf.getFontSize():parseFloat(St)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(St);var te=function($t){var tn,ke,be=[],pt=$t.trim();if(pt==="")return eu;if(pt in Pp)return[Pp[pt]];for(;pt!=="";){switch(ke=null,tn=(pt=Ep(pt)).charAt(0)){case'"':case"'":ke=fw(pt.substring(1),tn);break;default:ke=pw(pt)}if(ke===null||(be.push(ke[0]),(pt=Ep(ke[1]))!==""&&pt.charAt(0)!==","))return eu;pt=pt.replace(/^,/,"")}return be}(ne);if(this.fontFaces){var Jt=function($t,tn){var ke=$t.getFontList(),be=JSON.stringify(ke);if(Ot===null||jt!==be){var pt=function(Lt){var dt=[];return Object.keys(Lt).forEach(function(Xt){Lt[Xt].forEach(function(Et){var Ht=null;switch(Et){case"bold":Ht={family:Xt,weight:"bold"};break;case"italic":Ht={family:Xt,style:"italic"};break;case"bolditalic":Ht={family:Xt,weight:"bold",style:"italic"};break;case"":case"normal":Ht={family:Xt}}Ht!==null&&(Ht.ref={name:Xt,style:Et},dt.push(Ht))})}),dt}(ke);Ot=function(Lt){for(var dt={},Xt=0;Xt<Lt.length;++Xt){var Et=tu(Lt[Xt]),Ht=Et.family,Se=Et.stretch,ee=Et.style,Gt=Et.weight;dt[Ht]=dt[Ht]||{},dt[Ht][Se]=dt[Ht][Se]||{},dt[Ht][Se][ee]=dt[Ht][Se][ee]||{},dt[Ht][Se][ee][Gt]=Et}return dt}(pt.concat(tn)),jt=be}return Ot}(this.pdf,this.fontFaces),Ee=te.map(function($t){return{family:$t,stretch:"normal",weight:Qt,style:ge}}),we=function($t,tn,ke){for(var be=(ke=ke||{}).defaultFontFamily||"times",pt=Object.assign({},dw,ke.genericFontFamilies||{}),Lt=null,dt=null,Xt=0;Xt<tn.length;++Xt)if(pt[(Lt=tu(tn[Xt])).family]&&(Lt.family=pt[Lt.family]),$t.hasOwnProperty(Lt.family)){dt=$t[Lt.family];break}if(!(dt=dt||$t[be]))throw new Error("Could not find a font-family for the rule '"+Cp(Lt)+"' and default family '"+be+"'.");if(dt=function(Et,Ht){if(Ht[Et])return Ht[Et];var Se=qu[Et],ee=Se<=qu.normal?-1:1,Gt=Lp(Ht,pm,Se,ee);if(!Gt)throw new Error("Could not find a matching font-stretch value for "+Et);return Gt}(Lt.stretch,dt),dt=function(Et,Ht){if(Ht[Et])return Ht[Et];for(var Se=fm[Et],ee=0;ee<Se.length;++ee)if(Ht[Se[ee]])return Ht[Se[ee]];throw new Error("Could not find a matching font-style for "+Et)}(Lt.style,dt),!(dt=function(Et,Ht){if(Ht[Et])return Ht[Et];if(Et===400&&Ht[500])return Ht[500];if(Et===500&&Ht[400])return Ht[400];var Se=uw[Et],ee=Lp(Ht,gm,Se,Et<400?-1:1);if(!ee)throw new Error("Could not find a matching font-weight for value "+Et);return ee}(Lt.weight,dt)))throw new Error("Failed to resolve a font for the rule '"+Cp(Lt)+"'.");return dt}(Jt,Ee);this.pdf.setFont(we.ref.name,we.ref.style)}else{var ce="";(Qt==="bold"||parseInt(Qt,10)>=700||ge==="bold")&&(ce="bold"),ge==="italic"&&(ce+="italic"),ce.length===0&&(ce="normal");for(var _e="",xe={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Bt=0;Bt<te.length;Bt++){if(this.pdf.internal.getFont(te[Bt],ce,{noFallback:!0,disableWarning:!0})!==void 0){_e=te[Bt];break}if(ce==="bolditalic"&&this.pdf.internal.getFont(te[Bt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)_e=te[Bt],ce="bold";else if(this.pdf.internal.getFont(te[Bt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){_e=te[Bt],ce="normal";break}}if(_e===""){for(var de=0;de<te.length;de++)if(xe[te[de]]){_e=xe[te[de]];break}}_e=_e===""?"Times":_e,this.pdf.setFont(_e,ce)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(M){this.ctx.globalCompositeOperation=M}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(M){this.ctx.globalAlpha=M}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(M){this.ctx.lineDashOffset=M,wt.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(M){this.ctx.lineDash=M,wt.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(M){this.ctx.ignoreClearRect=!!M}})};p.prototype.setLineDash=function(P){this.lineDash=P},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){T.call(this,"fill",!1)},p.prototype.stroke=function(){T.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(P,q){if(isNaN(P)||isNaN(q))throw $e.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var z=this.ctx.transform.applyToPoint(new a(P,q));this.path.push({type:"mt",x:z.x,y:z.y}),this.ctx.lastPoint=new a(P,q)},p.prototype.closePath=function(){var P=new a(0,0),q=0;for(q=this.path.length-1;q!==-1;q--)if(this.path[q].type==="begin"&&Fe(this.path[q+1])==="object"&&typeof this.path[q+1].x=="number"){P=new a(this.path[q+1].x,this.path[q+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(P.x,P.y)},p.prototype.lineTo=function(P,q){if(isNaN(P)||isNaN(q))throw $e.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var z=this.ctx.transform.applyToPoint(new a(P,q));this.path.push({type:"lt",x:z.x,y:z.y}),this.ctx.lastPoint=new a(z.x,z.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),T.call(this,null,!0)},p.prototype.quadraticCurveTo=function(P,q,z,K){if(isNaN(z)||isNaN(K)||isNaN(P)||isNaN(q))throw $e.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var X=this.ctx.transform.applyToPoint(new a(z,K)),st=this.ctx.transform.applyToPoint(new a(P,q));this.path.push({type:"qct",x1:st.x,y1:st.y,x:X.x,y:X.y}),this.ctx.lastPoint=new a(X.x,X.y)},p.prototype.bezierCurveTo=function(P,q,z,K,X,st){if(isNaN(X)||isNaN(st)||isNaN(P)||isNaN(q)||isNaN(z)||isNaN(K))throw $e.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ut=this.ctx.transform.applyToPoint(new a(X,st)),ft=this.ctx.transform.applyToPoint(new a(P,q)),vt=this.ctx.transform.applyToPoint(new a(z,K));this.path.push({type:"bct",x1:ft.x,y1:ft.y,x2:vt.x,y2:vt.y,x:ut.x,y:ut.y}),this.ctx.lastPoint=new a(ut.x,ut.y)},p.prototype.arc=function(P,q,z,K,X,st){if(isNaN(P)||isNaN(q)||isNaN(z)||isNaN(K)||isNaN(X))throw $e.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(st=!!st,!this.ctx.transform.isIdentity){var ut=this.ctx.transform.applyToPoint(new a(P,q));P=ut.x,q=ut.y;var ft=this.ctx.transform.applyToPoint(new a(0,z)),vt=this.ctx.transform.applyToPoint(new a(0,0));z=Math.sqrt(Math.pow(ft.x-vt.x,2)+Math.pow(ft.y-vt.y,2))}Math.abs(X-K)>=2*Math.PI&&(K=0,X=2*Math.PI),this.path.push({type:"arc",x:P,y:q,radius:z,startAngle:K,endAngle:X,counterclockwise:st})},p.prototype.arcTo=function(P,q,z,K,X){throw new Error("arcTo not implemented.")},p.prototype.rect=function(P,q,z,K){if(isNaN(P)||isNaN(q)||isNaN(z)||isNaN(K))throw $e.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(P,q),this.lineTo(P+z,q),this.lineTo(P+z,q+K),this.lineTo(P,q+K),this.lineTo(P,q),this.lineTo(P+z,q),this.lineTo(P,q)},p.prototype.fillRect=function(P,q,z,K){if(isNaN(P)||isNaN(q)||isNaN(z)||isNaN(K))throw $e.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!d.call(this)){var X={};this.lineCap!=="butt"&&(X.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(X.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(P,q,z,K),this.fill(),X.hasOwnProperty("lineCap")&&(this.lineCap=X.lineCap),X.hasOwnProperty("lineJoin")&&(this.lineJoin=X.lineJoin)}},p.prototype.strokeRect=function(P,q,z,K){if(isNaN(P)||isNaN(q)||isNaN(z)||isNaN(K))throw $e.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");v.call(this)||(this.beginPath(),this.rect(P,q,z,K),this.stroke())},p.prototype.clearRect=function(P,q,z,K){if(isNaN(P)||isNaN(q)||isNaN(z)||isNaN(K))throw $e.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(P,q,z,K))},p.prototype.save=function(P){P=typeof P!="boolean"||P;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,z=0;z<this.pdf.internal.getNumberOfPages();z++)this.pdf.setPage(z+1),this.pdf.internal.out("q");if(this.pdf.setPage(q),P){this.ctx.fontSize=this.pdf.internal.getFontSize();var K=new h(this.ctx);this.ctxStack.push(this.ctx),this.ctx=K}},p.prototype.restore=function(P){P=typeof P!="boolean"||P;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,z=0;z<this.pdf.internal.getNumberOfPages();z++)this.pdf.setPage(z+1),this.pdf.internal.out("Q");this.pdf.setPage(q),P&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var g=function(P){var q,z,K,X;if(P.isCanvasGradient===!0&&(P=P.getColor()),!P)return{r:0,g:0,b:0,a:0,style:P};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(P))q=0,z=0,K=0,X=0;else{var st=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(P);if(st!==null)q=parseInt(st[1]),z=parseInt(st[2]),K=parseInt(st[3]),X=1;else if((st=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(P))!==null)q=parseInt(st[1]),z=parseInt(st[2]),K=parseInt(st[3]),X=parseFloat(st[4]);else{if(X=1,typeof P=="string"&&P.charAt(0)!=="#"){var ut=new am(P);P=ut.ok?ut.toHex():"#000000"}P.length===4?(q=P.substring(1,2),q+=q,z=P.substring(2,3),z+=z,K=P.substring(3,4),K+=K):(q=P.substring(1,3),z=P.substring(3,5),K=P.substring(5,7)),q=parseInt(q,16),z=parseInt(z,16),K=parseInt(K,16)}}return{r:q,g:z,b:K,a:X,style:P}},d=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},v=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(P,q,z,K){if(isNaN(q)||isNaN(z)||typeof P!="string")throw $e.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(K=isNaN(K)?void 0:K,!d.call(this)){var X=rt(this.ctx.transform.rotation),st=this.ctx.transform.scaleX;R.call(this,{text:P,x:q,y:z,scale:st,angle:X,align:this.textAlign,maxWidth:K})}},p.prototype.strokeText=function(P,q,z,K){if(isNaN(q)||isNaN(z)||typeof P!="string")throw $e.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!v.call(this)){K=isNaN(K)?void 0:K;var X=rt(this.ctx.transform.rotation),st=this.ctx.transform.scaleX;R.call(this,{text:P,x:q,y:z,scale:st,renderingMode:"stroke",angle:X,align:this.textAlign,maxWidth:K})}},p.prototype.measureText=function(P){if(typeof P!="string")throw $e.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var q=this.pdf,z=this.pdf.internal.scaleFactor,K=q.internal.getFontSize(),X=q.getStringUnitWidth(P)*K/q.internal.scaleFactor;return new function(st){var ut=(st=st||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ut}}),this}({width:X*=Math.round(96*z/72*1e4)/1e4})},p.prototype.scale=function(P,q){if(isNaN(P)||isNaN(q))throw $e.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var z=new l(P,0,0,q,0,0);this.ctx.transform=this.ctx.transform.multiply(z)},p.prototype.rotate=function(P){if(isNaN(P))throw $e.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var q=new l(Math.cos(P),Math.sin(P),-Math.sin(P),Math.cos(P),0,0);this.ctx.transform=this.ctx.transform.multiply(q)},p.prototype.translate=function(P,q){if(isNaN(P)||isNaN(q))throw $e.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var z=new l(1,0,0,1,P,q);this.ctx.transform=this.ctx.transform.multiply(z)},p.prototype.transform=function(P,q,z,K,X,st){if(isNaN(P)||isNaN(q)||isNaN(z)||isNaN(K)||isNaN(X)||isNaN(st))throw $e.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ut=new l(P,q,z,K,X,st);this.ctx.transform=this.ctx.transform.multiply(ut)},p.prototype.setTransform=function(P,q,z,K,X,st){P=isNaN(P)?1:P,q=isNaN(q)?0:q,z=isNaN(z)?0:z,K=isNaN(K)?1:K,X=isNaN(X)?0:X,st=isNaN(st)?0:st,this.ctx.transform=new l(P,q,z,K,X,st)};var y=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(P,q,z,K,X,st,ut,ft,vt){var Nt=this.pdf.getImageProperties(P),Ot=1,jt=1,zt=1,M=1;K!==void 0&&ft!==void 0&&(zt=ft/K,M=vt/X,Ot=Nt.width/K*ft/K,jt=Nt.height/X*vt/X),st===void 0&&(st=q,ut=z,q=0,z=0),K!==void 0&&ft===void 0&&(ft=K,vt=X),K===void 0&&ft===void 0&&(ft=Nt.width,vt=Nt.height);var Pt=this.ctx.transform.decompose(),ge=rt(Pt.rotate.shx),Qt=new l,St=(Qt=(Qt=(Qt=Qt.multiply(Pt.translate)).multiply(Pt.skew)).multiply(Pt.scale)).applyToRectangle(new o(st-q*zt,ut-z*M,K*Ot,X*jt));if(this.autoPaging){for(var ne,It=x.call(this,St),te=[],Jt=0;Jt<It.length;Jt+=1)te.indexOf(It[Jt])===-1&&te.push(It[Jt]);O(te);for(var Ee=te[0],we=te[te.length-1],ce=Ee;ce<we+1;ce++){this.pdf.setPage(ce);var _e=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],xe=ce===1?this.posY+this.margin[0]:this.margin[0],Bt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],de=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],$t=ce===1?0:Bt+(ce-2)*de;if(this.ctx.clip_path.length!==0){var tn=this.path;ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=E(ne,this.posX+this.margin[3],-$t+xe+this.ctx.prevPageLastElemOffset),V.call(this,"fill",!0),this.path=tn}var ke=JSON.parse(JSON.stringify(St));ke=E([ke],this.posX+this.margin[3],-$t+xe+this.ctx.prevPageLastElemOffset)[0];var be=(ce>Ee||ce<we)&&y.call(this);be&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],_e,de,null).clip().discardPath()),this.pdf.addImage(P,"JPEG",ke.x,ke.y,ke.w,ke.h,null,null,ge),be&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(P,"JPEG",St.x,St.y,St.w,St.h,null,null,ge)};var x=function(P,q,z){var K=[];q=q||this.pdf.internal.pageSize.width,z=z||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var X=this.posY+this.ctx.prevPageLastElemOffset;switch(P.type){default:case"mt":case"lt":K.push(Math.floor((P.y+X)/z)+1);break;case"arc":K.push(Math.floor((P.y+X-P.radius)/z)+1),K.push(Math.floor((P.y+X+P.radius)/z)+1);break;case"qct":var st=ht(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x,P.y);K.push(Math.floor((st.y+X)/z)+1),K.push(Math.floor((st.y+st.h+X)/z)+1);break;case"bct":var ut=At(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x2,P.y2,P.x,P.y);K.push(Math.floor((ut.y+X)/z)+1),K.push(Math.floor((ut.y+ut.h+X)/z)+1);break;case"rect":K.push(Math.floor((P.y+X)/z)+1),K.push(Math.floor((P.y+P.h+X)/z)+1)}for(var ft=0;ft<K.length;ft+=1)for(;this.pdf.internal.getNumberOfPages()<K[ft];)_.call(this);return K},_=function(){var P=this.fillStyle,q=this.strokeStyle,z=this.font,K=this.lineCap,X=this.lineWidth,st=this.lineJoin;this.pdf.addPage(),this.fillStyle=P,this.strokeStyle=q,this.font=z,this.lineCap=K,this.lineWidth=X,this.lineJoin=st},E=function(P,q,z){for(var K=0;K<P.length;K++)switch(P[K].type){case"bct":P[K].x2+=q,P[K].y2+=z;case"qct":P[K].x1+=q,P[K].y1+=z;default:P[K].x+=q,P[K].y+=z}return P},O=function(P){return P.sort(function(q,z){return q-z})},T=function(P,q){var z=this.fillStyle,K=this.strokeStyle,X=this.lineCap,st=this.lineWidth,ut=Math.abs(st*this.ctx.transform.scaleX),ft=this.lineJoin;if(this.autoPaging){for(var vt,Nt,Ot=JSON.parse(JSON.stringify(this.path)),jt=JSON.parse(JSON.stringify(this.path)),zt=[],M=0;M<jt.length;M++)if(jt[M].x!==void 0)for(var Pt=x.call(this,jt[M]),ge=0;ge<Pt.length;ge+=1)zt.indexOf(Pt[ge])===-1&&zt.push(Pt[ge]);for(var Qt=0;Qt<zt.length;Qt++)for(;this.pdf.internal.getNumberOfPages()<zt[Qt];)_.call(this);O(zt);for(var St=zt[0],ne=zt[zt.length-1],It=St;It<ne+1;It++){this.pdf.setPage(It),this.fillStyle=z,this.strokeStyle=K,this.lineCap=X,this.lineWidth=ut,this.lineJoin=ft;var te=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Jt=It===1?this.posY+this.margin[0]:this.margin[0],Ee=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],we=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ce=It===1?0:Ee+(It-2)*we;if(this.ctx.clip_path.length!==0){var _e=this.path;vt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=E(vt,this.posX+this.margin[3],-ce+Jt+this.ctx.prevPageLastElemOffset),V.call(this,P,!0),this.path=_e}if(Nt=JSON.parse(JSON.stringify(Ot)),this.path=E(Nt,this.posX+this.margin[3],-ce+Jt+this.ctx.prevPageLastElemOffset),q===!1||It===0){var xe=(It>St||It<ne)&&y.call(this);xe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],te,we,null).clip().discardPath()),V.call(this,P,q),xe&&this.pdf.restoreGraphicsState()}this.lineWidth=st}this.path=Ot}else this.lineWidth=ut,V.call(this,P,q),this.lineWidth=st},V=function(P,q){if((P!=="stroke"||q||!v.call(this))&&(P==="stroke"||q||!d.call(this))){for(var z,K,X=[],st=this.path,ut=0;ut<st.length;ut++){var ft=st[ut];switch(ft.type){case"begin":X.push({begin:!0});break;case"close":X.push({close:!0});break;case"mt":X.push({start:ft,deltas:[],abs:[]});break;case"lt":var vt=X.length;if(st[ut-1]&&!isNaN(st[ut-1].x)&&(z=[ft.x-st[ut-1].x,ft.y-st[ut-1].y],vt>0)){for(;vt>=0;vt--)if(X[vt-1].close!==!0&&X[vt-1].begin!==!0){X[vt-1].deltas.push(z),X[vt-1].abs.push(ft);break}}break;case"bct":z=[ft.x1-st[ut-1].x,ft.y1-st[ut-1].y,ft.x2-st[ut-1].x,ft.y2-st[ut-1].y,ft.x-st[ut-1].x,ft.y-st[ut-1].y],X[X.length-1].deltas.push(z);break;case"qct":var Nt=st[ut-1].x+2/3*(ft.x1-st[ut-1].x),Ot=st[ut-1].y+2/3*(ft.y1-st[ut-1].y),jt=ft.x+2/3*(ft.x1-ft.x),zt=ft.y+2/3*(ft.y1-ft.y),M=ft.x,Pt=ft.y;z=[Nt-st[ut-1].x,Ot-st[ut-1].y,jt-st[ut-1].x,zt-st[ut-1].y,M-st[ut-1].x,Pt-st[ut-1].y],X[X.length-1].deltas.push(z);break;case"arc":X.push({deltas:[],abs:[],arc:!0}),Array.isArray(X[X.length-1].abs)&&X[X.length-1].abs.push(ft)}}K=q?null:P==="stroke"?"stroke":"fill";for(var ge=!1,Qt=0;Qt<X.length;Qt++)if(X[Qt].arc)for(var St=X[Qt].abs,ne=0;ne<St.length;ne++){var It=St[ne];It.type==="arc"?$.call(this,It.x,It.y,It.radius,It.startAngle,It.endAngle,It.counterclockwise,void 0,q,!ge):H.call(this,It.x,It.y),ge=!0}else if(X[Qt].close===!0)this.pdf.internal.out("h"),ge=!1;else if(X[Qt].begin!==!0){var te=X[Qt].start.x,Jt=X[Qt].start.y;W.call(this,X[Qt].deltas,te,Jt),ge=!0}K&&D.call(this,K),q&&Z.call(this)}},Q=function(P){var q=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,z=q*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return P-z;case"top":return P+q-z;case"hanging":return P+q-2*z;case"middle":return P+q/2-z;default:return P}},J=function(P){return P+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var P=function(){};return P.colorStops=[],P.addColorStop=function(q,z){this.colorStops.push([q,z])},P.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},P.isCanvasGradient=!0,P},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var $=function(P,q,z,K,X,st,ut,ft,vt){for(var Nt=ct.call(this,z,K,X,st),Ot=0;Ot<Nt.length;Ot++){var jt=Nt[Ot];Ot===0&&(vt?L.call(this,jt.x1+P,jt.y1+q):H.call(this,jt.x1+P,jt.y1+q)),et.call(this,P,q,jt.x2,jt.y2,jt.x3,jt.y3,jt.x4,jt.y4)}ft?Z.call(this):D.call(this,ut)},D=function(P){switch(P){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Z=function(){this.pdf.clip(),this.pdf.discardPath()},L=function(P,q){this.pdf.internal.out(e(P)+" "+i(q)+" m")},R=function(P){var q;switch(P.align){case"right":case"end":q="right";break;case"center":q="center";break;default:q="left"}var z,K,X,st=this.pdf.getTextDimensions(P.text),ut=Q.call(this,P.y),ft=J.call(this,ut)-st.h,vt=this.ctx.transform.applyToPoint(new a(P.x,ut));if(this.autoPaging){var Nt=this.ctx.transform.decompose(),Ot=new l;Ot=(Ot=(Ot=Ot.multiply(Nt.translate)).multiply(Nt.skew)).multiply(Nt.scale);for(var jt=this.ctx.transform.applyToRectangle(new o(P.x,ut,st.w,st.h)),zt=Ot.applyToRectangle(new o(P.x,ft,st.w,st.h)),M=x.call(this,zt),Pt=[],ge=0;ge<M.length;ge+=1)Pt.indexOf(M[ge])===-1&&Pt.push(M[ge]);O(Pt);for(var Qt=Pt[0],St=Pt[Pt.length-1],ne=Qt;ne<St+1;ne++){this.pdf.setPage(ne);var It=ne===1?this.posY+this.margin[0]:this.margin[0],te=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Jt=this.pdf.internal.pageSize.height-this.margin[2],Ee=Jt-this.margin[0],we=this.pdf.internal.pageSize.width-this.margin[1],ce=we-this.margin[3],_e=ne===1?0:te+(ne-2)*Ee;if(this.ctx.clip_path.length!==0){var xe=this.path;z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=E(z,this.posX+this.margin[3],-1*_e+It),V.call(this,"fill",!0),this.path=xe}var Bt=E([JSON.parse(JSON.stringify(zt))],this.posX+this.margin[3],-_e+It+this.ctx.prevPageLastElemOffset)[0];P.scale>=.01&&(K=this.pdf.internal.getFontSize(),this.pdf.setFontSize(K*P.scale),X=this.lineWidth,this.lineWidth=X*P.scale);var de=this.autoPaging!=="text";if(de||Bt.y+Bt.h<=Jt){if(de||Bt.y>=It&&Bt.x<=we){var $t=de?P.text:this.pdf.splitTextToSize(P.text,P.maxWidth||we-Bt.x)[0],tn=E([JSON.parse(JSON.stringify(jt))],this.posX+this.margin[3],-_e+It+this.ctx.prevPageLastElemOffset)[0],ke=de&&(ne>Qt||ne<St)&&y.call(this);ke&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ce,Ee,null).clip().discardPath()),this.pdf.text($t,tn.x,tn.y,{angle:P.angle,align:q,renderingMode:P.renderingMode}),ke&&this.pdf.restoreGraphicsState()}}else Bt.y<Jt&&(this.ctx.prevPageLastElemOffset+=Jt-Bt.y);P.scale>=.01&&(this.pdf.setFontSize(K),this.lineWidth=X)}}else P.scale>=.01&&(K=this.pdf.internal.getFontSize(),this.pdf.setFontSize(K*P.scale),X=this.lineWidth,this.lineWidth=X*P.scale),this.pdf.text(P.text,vt.x+this.posX,vt.y+this.posY,{angle:P.angle,align:q,renderingMode:P.renderingMode,maxWidth:P.maxWidth}),P.scale>=.01&&(this.pdf.setFontSize(K),this.lineWidth=X)},H=function(P,q,z,K){z=z||0,K=K||0,this.pdf.internal.out(e(P+z)+" "+i(q+K)+" l")},W=function(P,q,z){return this.pdf.lines(P,q,z,null,null)},et=function(P,q,z,K,X,st,ut,ft){this.pdf.internal.out([t(r(z+P)),t(s(K+q)),t(r(X+P)),t(s(st+q)),t(r(ut+P)),t(s(ft+q)),"c"].join(" "))},ct=function(P,q,z,K){for(var X=2*Math.PI,st=Math.PI/2;q>z;)q-=X;var ut=Math.abs(z-q);ut<X&&K&&(ut=X-ut);for(var ft=[],vt=K?-1:1,Nt=q;ut>1e-5;){var Ot=Nt+vt*Math.min(ut,st);ft.push(ot.call(this,P,Nt,Ot)),ut-=Math.abs(Ot-Nt),Nt=Ot}return ft},ot=function(P,q,z){var K=(z-q)/2,X=P*Math.cos(K),st=P*Math.sin(K),ut=X,ft=-st,vt=ut*ut+ft*ft,Nt=vt+ut*X+ft*st,Ot=4/3*(Math.sqrt(2*vt*Nt)-Nt)/(ut*st-ft*X),jt=ut-Ot*ft,zt=ft+Ot*ut,M=jt,Pt=-zt,ge=K+q,Qt=Math.cos(ge),St=Math.sin(ge);return{x1:P*Math.cos(q),y1:P*Math.sin(q),x2:jt*Qt-zt*St,y2:jt*St+zt*Qt,x3:M*Qt-Pt*St,y3:M*St+Pt*Qt,x4:P*Math.cos(z),y4:P*Math.sin(z)}},rt=function(P){return 180*P/Math.PI},ht=function(P,q,z,K,X,st){var ut=P+.5*(z-P),ft=q+.5*(K-q),vt=X+.5*(z-X),Nt=st+.5*(K-st),Ot=Math.min(P,X,ut,vt),jt=Math.max(P,X,ut,vt),zt=Math.min(q,st,ft,Nt),M=Math.max(q,st,ft,Nt);return new o(Ot,zt,jt-Ot,M-zt)},At=function(P,q,z,K,X,st,ut,ft){var vt,Nt,Ot,jt,zt,M,Pt,ge,Qt,St,ne,It,te,Jt,Ee=z-P,we=K-q,ce=X-z,_e=st-K,xe=ut-X,Bt=ft-st;for(Nt=0;Nt<41;Nt++)Qt=(Pt=(Ot=P+(vt=Nt/40)*Ee)+vt*((zt=z+vt*ce)-Ot))+vt*(zt+vt*(X+vt*xe-zt)-Pt),St=(ge=(jt=q+vt*we)+vt*((M=K+vt*_e)-jt))+vt*(M+vt*(st+vt*Bt-M)-ge),Nt==0?(ne=Qt,It=St,te=Qt,Jt=St):(ne=Math.min(ne,Qt),It=Math.min(It,St),te=Math.max(te,Qt),Jt=Math.max(Jt,St));return new o(Math.round(ne),Math.round(It),Math.round(te-ne),Math.round(Jt-It))},wt=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var P,q,z=(P=this.ctx.lineDash,q=this.ctx.lineDashOffset,JSON.stringify({lineDash:P,lineDashOffset:q}));this.prevLineDash!==z&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=z)}}})(Yt.API),function(n){var t=function(a){var o,l,c,h,p,g,d,v,y,x;for(l=[],c=0,h=(a+=o="\0\0\0\0".slice(a.length%4||4)).length;h>c;c+=4)(p=(a.charCodeAt(c)<<24)+(a.charCodeAt(c+1)<<16)+(a.charCodeAt(c+2)<<8)+a.charCodeAt(c+3))!==0?(g=(p=((p=((p=((p=(p-(x=p%85))/85)-(y=p%85))/85)-(v=p%85))/85)-(d=p%85))/85)%85,l.push(g+33,d+33,v+33,y+33,x+33)):l.push(122);return function(_,E){for(var O=E;O>0;O--)_.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},e=function(a){var o,l,c,h,p,g=String,d="length",v=255,y="charCodeAt",x="slice",_="replace";for(a[x](-2),a=a[x](0,-2)[_](/\s/g,"")[_]("z","!!!!!"),c=[],h=0,p=(a+=o="uuuuu"[x](a[d]%5||5))[d];p>h;h+=5)l=52200625*(a[y](h)-33)+614125*(a[y](h+1)-33)+7225*(a[y](h+2)-33)+85*(a[y](h+3)-33)+(a[y](h+4)-33),c.push(v&l>>24,v&l>>16,v&l>>8,v&l);return function(E,O){for(var T=O;T>0;T--)E.pop()}(c,o[d]),g.fromCharCode.apply(g,c)},i=function(a){return a.split("").map(function(o){return("0"+o.charCodeAt().toString(16)).slice(-2)}).join("")+">"},r=function(a){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),o.test(a)===!1)return"";for(var l="",c=0;c<a.length;c+=2)l+=String.fromCharCode("0x"+(a[c]+a[c+1]));return l},s=function(a){for(var o=new Uint8Array(a.length),l=a.length;l--;)o[l]=a.charCodeAt(l);return(o=Ru(o)).reduce(function(c,h){return c+String.fromCharCode(h)},"")};n.processDataByFilters=function(a,o){var l=0,c=a||"",h=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=e(c),h.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),h.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=r(c),h.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=i(c),h.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=s(c),h.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:h.reverse().join(" ")}}}(Yt.API),function(n){n.loadFile=function(t,e,i){return function(r,s,a){s=s!==!1,a=typeof a=="function"?a:function(){};var o=void 0;try{o=function(l,c,h){var p=new XMLHttpRequest,g=0,d=function(v){var y=v.length,x=[],_=String.fromCharCode;for(g=0;g<y;g+=1)x.push(_(255&v.charCodeAt(g)));return x.join("")};if(p.open("GET",l,!c),p.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(p.onload=function(){p.status===200?h(d(this.responseText)):h(void 0)}),p.send(null),c&&p.status===200)return d(p.responseText)}(r,s,a)}catch{}return o}(t,e,i)},n.allowFsRead=void 0,n.loadImageFile=n.loadFile}(Yt.API),function(n){function t(){return(oe.html2canvas?Promise.resolve(oe.html2canvas):Lh(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function e(){return(oe.DOMPurify?Promise.resolve(oe.DOMPurify):Lh(()=>import("./purify.es-B9ZVCkUG.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var i=function(o){var l=Fe(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},r=function(o,l){var c=document.createElement(o);for(var h in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[h]=l.style[h];return c},s=function o(l,c){for(var h=l.nodeType===3?document.createTextNode(l.nodeValue):l.cloneNode(!1),p=l.firstChild;p;p=p.nextSibling)c!==!0&&p.nodeType===1&&p.nodeName==="SCRIPT"||h.appendChild(o(p,c));return l.nodeType===1&&(l.nodeName==="CANVAS"?(h.width=l.width,h.height=l.height,h.getContext("2d").drawImage(l,0,0)):l.nodeName!=="TEXTAREA"&&l.nodeName!=="SELECT"||(h.value=l.value),h.addEventListener("load",function(){h.scrollTop=l.scrollTop,h.scrollLeft=l.scrollLeft},!0)),h},a=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),h=o.convert(Promise.resolve(),c);return(h=h.setProgress(1,o,1,[o])).set(l)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(o,l){return o.__proto__=l||a.prototype,o},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(c){switch(i(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o),l){case"string":return this.then(e).then(function(c){return this.set({src:r("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},a.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=r("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=r("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(r("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=this.opt.jsPDF,h=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,g=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete g.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=h,h)for(var d=0;d<h.length;++d){var v=h[d],y=v.src.find(function(x){return x.format==="truetype"});y&&c.addFont(y.url,v.ref.name,v.ref.style)}return g.windowHeight=g.windowHeight||0,g.windowHeight=g.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):g.windowHeight,c.context2d.save(!0),l(this.prop.container,g)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},a.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},a.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},a.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(o){if(i(o)!=="object")return this;var l=Object.keys(o||{}).map(function(c){if(c in a.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(l)})},a.prototype.get=function(o,l){return this.then(function(){var c=o in a.template.prop?this.prop[o]:this.opt[o];return l?l(c):c})},a.prototype.setMargin=function(o){return this.then(function(){switch(i(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},a.prototype.setPageSize=function(o){function l(c,h){return Math.floor(c*h/72*96)}return this.then(function(){(o=o||Yt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},a.prototype.setProgress=function(o,l,c,h){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),h!=null&&(this.progress.stack=h),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(o,l,c,h){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,h?this.progress.stack.concat(h):null)},a.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,function(h,p){return c.updateProgress(null,null,1,[h]),Promise.prototype.then.call(this,function(g){return c.updateProgress(null,h),g}).then(h,p).then(function(g){return c.updateProgress(1),g})})},a.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then;var h=this;o&&(o=o.bind(h)),l&&(l=l.bind(h));var p=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?h:a.convert(Object.assign({},h),Promise.prototype),g=c.call(p,o,l);return a.convert(g,h.__proto__)},a.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},a.prototype.thenList=function(o){var l=this;return o.forEach(function(c){l=l.thenCore(c)}),l},a.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return a.convert(l,this)},a.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},a.prototype.error=function(o){return this.then(function(){throw new Error(o)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,Yt.getPageSize=function(o,l,c){if(Fe(o)==="object"){var h=o;o=h.orientation,l=h.unit||l,c=h.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var p,g=(""+c).toLowerCase(),d={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+l}var v,y=0,x=0;if(d.hasOwnProperty(g))y=d[g][1]/p,x=d[g][0]/p;else try{y=c[1],x=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",x>y&&(v=x,x=y,y=v);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",y>x&&(v=x,x=y,y=v)}return{width:x,height:y,unit:l,k:p,orientation:o}},n.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(tu):null;var c=new a(l);return l.worker?c:c.from(o).doCallback()}}(Yt.API),Yt.API.addJS=function(n){var t,e,i=n;return this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(t+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+i+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){t!==void 0&&e!==void 0&&this.internal.out("/Names <</JavaScript "+t+" 0 R>>")}),this},function(n){var t;n.events.push(["postPutResources",function(){var e=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var r=e.outline.render().split(/\r\n/),s=0;s<r.length;s++){var a=r[s],o=i.exec(a);if(o!=null){var l=o[1];e.internal.newObjectDeferredBegin(l,!1)}e.internal.write(a)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,h=[];for(s=0;s<c;s++){var p=e.internal.newObject();h.push(p);var g=e.internal.getPageInfo(s+1);e.internal.write("<< /D["+g.objId+" 0 R /XYZ null null null]>> endobj")}var d=e.internal.newObject();for(e.internal.write("<< /Names [ "),s=0;s<h.length;s++)e.internal.write("(page_"+(s+1)+")"+h[s]+" 0 R");e.internal.write(" ] >>","endobj"),t=e.internal.newObject(),e.internal.write("<< /Dests "+d+" 0 R"),e.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){var e=this;e.outline.root.children.length>0&&(e.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&e.internal.write("/Names "+t+" 0 R"))}]),n.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(i,r,s){var a={title:r,options:s,children:[]};return i==null&&(i=this.root),i.children.push(a),a},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(i){i.id=e.internal.newObjectDeferred();for(var r=0;r<i.children.length;r++)this.genIds_r(i.children[r])},e.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},e.outline.renderItems=function(i){for(var r=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<i.children.length;s++){var a=i.children[s];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(i)),s>0&&this.line("/Prev "+this.makeRef(i.children[s-1])),s<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[s+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var o=this.count=this.count_r({count:0},a);if(o>0&&this.line("/Count "+o),a.options&&a.options.pageNumber){var l=e.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+r(0)+" 0]")}this.objEnd()}for(var c=0;c<i.children.length;c++)this.renderItems(i.children[c])},e.outline.line=function(i){this.ctx.val+=i+`\r
`},e.outline.makeRef=function(i){return i.id+" 0 R"},e.outline.makeString=function(i){return"("+e.internal.pdfEscape(i)+")"},e.outline.objStart=function(i){this.ctx.val+=`\r
`+i.id+` 0 obj\r
<<\r
`},e.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},e.outline.count_r=function(i,r){for(var s=0;s<r.children.length;s++)i.count++,this.count_r(i,r.children[s]);return i.count}}])}(Yt.API),function(n){var t=[192,193,194,195,196,197,198,199];n.processJPEG=function(e,i,r,s,a,o){var l,c=this.decode.DCT_DECODE,h=null;if(typeof e=="string"||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=a||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,l=function(p){for(var g,d=256*p.charCodeAt(4)+p.charCodeAt(5),v=p.length,y={width:0,height:0,numcomponents:1},x=4;x<v;x+=2){if(x+=d,t.indexOf(p.charCodeAt(x+1))!==-1){g=256*p.charCodeAt(x+5)+p.charCodeAt(x+6),y={width:256*p.charCodeAt(x+7)+p.charCodeAt(x+8),height:g,numcomponents:p.charCodeAt(x+9)};break}d=256*p.charCodeAt(x+2)+p.charCodeAt(x+3)}return y}(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e),l.numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}h={data:e,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:c,index:i,alias:r}}return h}}(Yt.API),Yt.API.processPNG=function(n,t,e,i){if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){var r,s=Xy(n,{checkCrc:!0}),a=s.width,o=s.height,l=s.channels,c=s.palette,h=s.depth;r=c&&l===1?function($){for(var D=$.width,Z=$.height,L=$.data,R=$.palette,H=$.depth,W=!1,et=[],ct=[],ot=void 0,rt=!1,ht=0,At=0;At<R.length;At++){var wt=Df(R[At],4),P=wt[0],q=wt[1],z=wt[2],K=wt[3];et.push(P,q,z),K!=null&&(K===0?(ht++,ct.length<1&&ct.push(At)):K<255&&(rt=!0))}if(rt||ht>1){W=!0,ct=void 0;var X=D*Z;ot=new Uint8Array(X);for(var st=new DataView(L.buffer),ut=0;ut<X;ut++){var ft=nu(st,ut,H),vt=Df(R[ft],4)[3];ot[ut]=vt}}else ht===0&&(ct=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:W?8:void 0,colorBytes:L,alphaBytes:ot,needSMask:W,palette:et,mask:ct}}(s):l===2||l===4?function($){for(var D=$.data,Z=$.width,L=$.height,R=$.channels,H=$.depth,W=R===2?"DeviceGray":"DeviceRGB",et=R-1,ct=Z*L,ot=et,rt=ct*ot,ht=1*ct,At=Math.ceil(rt*H/8),wt=Math.ceil(ht*H/8),P=new Uint8Array(At),q=new Uint8Array(wt),z=new DataView(D.buffer),K=new DataView(P.buffer),X=new DataView(q.buffer),st=!1,ut=0;ut<ct;ut++){for(var ft=ut*R,vt=0;vt<ot;vt++)Bp(K,nu(z,ft+vt,H),ut*ot+vt,H);var Nt=nu(z,ft+ot,H);Nt<(1<<H)-1&&(st=!0),Bp(X,Nt,1*ut,H)}return{colorSpace:W,colorsPerPixel:et,sMaskBitsPerComponent:st?H:void 0,colorBytes:P,alphaBytes:q,needSMask:st}}(s):function($){var D=$.data,Z=$.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:Z,colorsPerPixel:Z==="DeviceGray"?1:3,colorBytes:D instanceof Uint16Array?function(L){for(var R=L.length,H=new Uint8Array(2*R),W=new DataView(H.buffer,H.byteOffset,H.byteLength),et=0;et<R;et++)W.setUint16(2*et,L[et],!1);return H}(D):D,needSMask:!1}}(s);var p,g,d,v=r,y=v.colorSpace,x=v.colorsPerPixel,_=v.sMaskBitsPerComponent,E=v.colorBytes,O=v.alphaBytes,T=v.needSMask,V=v.palette,Q=v.mask,J=null;return i!==Yt.API.image_compression.NONE&&typeof Ru=="function"?(J=function($){var D;switch($){case Yt.API.image_compression.FAST:D=11;break;case Yt.API.image_compression.MEDIUM:D=13;break;case Yt.API.image_compression.SLOW:D=14;break;default:D=12}return D}(i),p=this.decode.FLATE_DECODE,g="/Predictor ".concat(J," /Colors ").concat(x," /BitsPerComponent ").concat(h," /Columns ").concat(a),n=Rp(E,Math.ceil(a*x*h/8),x,h,i),T&&(d=Rp(O,Math.ceil(a*_/8),1,_,i))):(p=void 0,g=void 0,n=E,T&&(d=O)),(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(d&&this.__addimage__.isArrayBuffer(d)||this.__addimage__.isArrayBufferView(d))&&(d=this.__addimage__.arrayBufferToBinaryString(d)),{alias:e,data:n,index:t,filter:p,decodeParameters:g,transparency:Q,palette:V,sMask:d,predictor:J,width:a,height:o,bitsPerComponent:h,sMaskBitsPerComponent:_,colorSpace:y}}},function(n){n.processGIF89A=function(t,e,i,r){var s=new vw(t),a=s.width,o=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:a,height:o},h=new iu(100).encode(c,100);return n.processJPEG.call(this,h,e,i,r)},n.processGIF87A=n.processGIF89A}(Yt.API),Bi.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var t=0;t<n;t++){var e=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:r,green:i,blue:e,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Bi.prototype.parseBGR=function(){this.pos=this.offset;var n="bit"+this.bitPP,t=this.width*this.height*4;if(t>536870912)throw new Error("Image dimensions exceed 512MB, which is too large.");this.data=new Uint8Array(t);try{this[n]()}catch(e){$e.log("bit decode error:"+e)}},Bi.prototype.bit1=function(){var n,t=Math.ceil(this.width/8),e=t%4;for(n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,r=0;r<t;r++)for(var s=this.datav.getUint8(this.pos++,!0),a=i*this.width*4+8*r*4,o=0;o<8&&8*r+o<this.width;o++){var l=this.palette[s>>7-o&1];this.data[a+4*o]=l.blue,this.data[a+4*o+1]=l.green,this.data[a+4*o+2]=l.red,this.data[a+4*o+3]=255}e!==0&&(this.pos+=4-e)}},Bi.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),t=n%4,e=this.height-1;e>=0;e--){for(var i=this.bottom_up?e:this.height-1-e,r=0;r<n;r++){var s=this.datav.getUint8(this.pos++,!0),a=i*this.width*4+2*r*4,o=s>>4,l=15&s,c=this.palette[o];if(this.data[a]=c.blue,this.data[a+1]=c.green,this.data[a+2]=c.red,this.data[a+3]=255,2*r+1>=this.width)break;c=this.palette[l],this.data[a+4]=c.blue,this.data[a+4+1]=c.green,this.data[a+4+2]=c.red,this.data[a+4+3]=255}t!==0&&(this.pos+=4-t)}},Bi.prototype.bit8=function(){for(var n=this.width%4,t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var r=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*i;if(r<this.palette.length){var a=this.palette[r];this.data[s]=a.red,this.data[s+1]=a.green,this.data[s+2]=a.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}n!==0&&(this.pos+=4-n)}},Bi.prototype.bit15=function(){for(var n=this.width%3,t=parseInt("11111",2),e=this.height-1;e>=0;e--){for(var i=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&t)/t*255|0,o=(s>>5&t)/t*255|0,l=(s>>10&t)/t*255|0,c=s>>15?255:0,h=i*this.width*4+4*r;this.data[h]=l,this.data[h+1]=o,this.data[h+2]=a,this.data[h+3]=c}this.pos+=n}},Bi.prototype.bit16=function(){for(var n=this.width%3,t=parseInt("11111",2),e=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var r=this.bottom_up?i:this.height-1-i,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&t)/t*255|0,l=(a>>5&e)/e*255|0,c=(a>>11)/t*255|0,h=r*this.width*4+4*s;this.data[h]=c,this.data[h+1]=l,this.data[h+2]=o,this.data[h+3]=255}this.pos+=n}},Bi.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var t=this.bottom_up?n:this.height-1-n,e=0;e<this.width;e++){var i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*e;this.data[a]=s,this.data[a+1]=r,this.data[a+2]=i,this.data[a+3]=255}this.pos+=this.width%4}},Bi.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var t=this.bottom_up?n:this.height-1-n,e=0;e<this.width;e++){var i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*e;this.data[o]=s,this.data[o+1]=r,this.data[o+2]=i,this.data[o+3]=a}},Bi.prototype.getData=function(){return this.data},function(n){n.processBMP=function(t,e,i,r){var s=new Bi(t,!1),a=s.width,o=s.height,l={data:s.getData(),width:a,height:o},c=new iu(100).encode(l,100);return n.processJPEG.call(this,c,e,i,r)}}(Yt.API),qp.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(t,e,i,r){var s=new qp(t),a=s.width,o=s.height,l={data:s.getData(),width:a,height:o},c=new iu(100).encode(l,100);return n.processJPEG.call(this,c,e,i,r)}}(Yt.API),Yt.API.processRGBA=function(n,t,e){for(var i=n.data,r=i.length,s=new Uint8Array(r/4*3),a=new Uint8Array(r/4),o=0,l=0,c=0;c<r;c+=4){var h=i[c],p=i[c+1],g=i[c+2],d=i[c+3];s[o++]=h,s[o++]=p,s[o++]=g,a[l++]=d}var v=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:v,index:t,alias:e,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},Yt.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},pa=Yt.API,Kl=pa.getCharWidthsArray=function(n,t){var e,i,r=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),a=t.charSpace||this.internal.getCharSpace(),o=t.widths?t.widths:r.metadata.Unicode.widths,l=o.fof?o.fof:1,c=t.kerning?t.kerning:r.metadata.Unicode.kerning,h=c.fof?c.fof:1,p=t.doKerning!==!1,g=0,d=n.length,v=0,y=o[0]||l,x=[];for(e=0;e<d;e++)i=n.charCodeAt(e),typeof r.metadata.widthOfString=="function"?x.push((r.metadata.widthOfGlyph(r.metadata.characterToGlyph(i))+a*(1e3/s)||0)/1e3):(g=p&&Fe(c[i])==="object"&&!isNaN(parseInt(c[i][v],10))?c[i][v]/h:0,x.push((o[i]||y)/l+g)),v=i;return x},Op=pa.getStringUnitWidth=function(n,t){var e=(t=t||{}).fontSize||this.internal.getFontSize(),i=t.font||this.internal.getFont(),r=t.charSpace||this.internal.getCharSpace();return pa.processArabic&&(n=pa.processArabic(n)),typeof i.metadata.widthOfString=="function"?i.metadata.widthOfString(n,e,r)/e:Kl.apply(this,arguments).reduce(function(s,a){return s+a},0)},jp=function(n,t,e,i){for(var r=[],s=0,a=n.length,o=0;s!==a&&o+t[s]<e;)o+=t[s],s++;r.push(n.slice(0,s));var l=s;for(o=0;s!==a;)o+t[s]>i&&(r.push(n.slice(l,s)),o=0,l=s),o+=t[s],s++;return l!==s&&r.push(n.slice(l,s)),r},Tp=function(n,t,e){e||(e={});var i,r,s,a,o,l,c,h=[],p=[h],g=e.textIndent||0,d=0,v=0,y=n.split(" "),x=Kl.apply(this,[" ",e])[0];if(l=e.lineIndent===-1?y[0].length+2:e.lineIndent||0){var _=Array(l).join(" "),E=[];y.map(function(T){(T=T.split(/\s*\n/)).length>1?E=E.concat(T.map(function(V,Q){return(Q&&V.length?`
`:"")+V})):E.push(T[0])}),y=E,l=Op.apply(this,[_,e])}for(s=0,a=y.length;s<a;s++){var O=0;if(i=y[s],l&&i[0]==`
`&&(i=i.substr(1),O=1),g+d+(v=(r=Kl.apply(this,[i,e])).reduce(function(T,V){return T+V},0))>t||O){if(v>t){for(o=jp.apply(this,[i,r,t-(g+d),t]),h.push(o.shift()),h=[o.pop()];o.length;)p.push([o.shift()]);v=r.slice(i.length-(h[0]?h[0].length:0)).reduce(function(T,V){return T+V},0)}else h=[i];p.push(h),g=v+l,d=x}else h.push(i),g+=d+v,d=x}return c=l?function(T,V){return(V?_:"")+T.join(" ")}:function(T){return T.join(" ")},p.map(c)},pa.splitTextToSize=function(n,t,e){var i,r=(e=e||{}).fontSize||this.internal.getFontSize(),s=(function(h){if(h.widths&&h.kerning)return{widths:h.widths,kerning:h.kerning};var p=this.internal.getFont(h.fontName,h.fontStyle),g="Unicode";return p.metadata[g]?{widths:p.metadata[g].widths||{0:1},kerning:p.metadata[g].kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,e);i=Array.isArray(n)?n:String(n).split(/\r?\n/);var a=1*this.internal.scaleFactor*t/r;s.textIndent=e.textIndent?1*e.textIndent*this.internal.scaleFactor/r:0,s.lineIndent=e.lineIndent;var o,l,c=[];for(o=0,l=i.length;o<l;o++)c=c.concat(Tp.apply(this,[i[o],a,s]));return c},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var t="0123456789abcdef",e="klmnopqrstuvwxyz",i={},r={},s=0;s<16;s++)i[e[s]]=t[s],r[t[s]]=e[s];var a=function(g){return"0x"+parseInt(g,10).toString(16)},o=n.__fontmetrics__.compress=function(g){var d,v,y,x,_=["{"];for(var E in g){if(d=g[E],isNaN(parseInt(E,10))?v="'"+E+"'":(E=parseInt(E,10),v=(v=a(E).slice(2)).slice(0,-1)+r[v.slice(-1)]),typeof d=="number")d<0?(y=a(d).slice(3),x="-"):(y=a(d).slice(2),x=""),y=x+y.slice(0,-1)+r[y.slice(-1)];else{if(Fe(d)!=="object")throw new Error("Don't know what to do with value type "+Fe(d)+".");y=o(d)}_.push(v+y)}return _.push("}"),_.join("")},l=n.__fontmetrics__.uncompress=function(g){if(typeof g!="string")throw new Error("Invalid argument passed to uncompress.");for(var d,v,y,x,_={},E=1,O=_,T=[],V="",Q="",J=g.length-1,$=1;$<J;$+=1)(x=g[$])=="'"?d?(y=d.join(""),d=void 0):d=[]:d?d.push(x):x=="{"?(T.push([O,y]),O={},y=void 0):x=="}"?((v=T.pop())[0][v[1]]=O,y=void 0,O=v[0]):x=="-"?E=-1:y===void 0?i.hasOwnProperty(x)?(V+=i[x],y=parseInt(V,16)*E,E=1,V=""):V+=x:i.hasOwnProperty(x)?(Q+=i[x],O[y]=parseInt(Q,16)*E,E=1,y=void 0,Q=""):Q+=x;return _},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},h={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},p={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(g){var d=g.font,v=p.Unicode[d.postScriptName];v&&(d.metadata.Unicode={},d.metadata.Unicode.widths=v.widths,d.metadata.Unicode.kerning=v.kerning);var y=h.Unicode[d.postScriptName];y&&(d.metadata.Unicode.encoding=y,d.encoding=y.codePages[0])}])}(Yt.API),function(n){var t=function(e){for(var i=e.length,r=new Uint8Array(i),s=0;s<i;s++)r[s]=e.charCodeAt(s);return r};n.API.events.push(["addFont",function(e){var i=void 0,r=e.font,s=e.instance;if(!r.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");if(typeof(i=s.existsFileInVFS(r.postScriptName)===!1?s.loadFile(r.postScriptName):s.getFileFromVFS(r.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");(function(a,o){o=/^\x00\x01\x00\x00/.test(o)?t(o):t(lc(o)),a.metadata=n.API.TTFFont.open(o),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(r,i)}}])}(Yt),Yt.API.addSvgAsImage=function(n,t,e,i,r,s,a,o){if(isNaN(t)||isNaN(e))throw $e.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(r))throw $e.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=i,l.height=r;var c=l.getContext("2d");c.fillStyle="#fff",c.fillRect(0,0,l.width,l.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return(oe.canvg?Promise.resolve(oe.canvg):Lh(()=>import("./index.es-CuwY592S.js"),__vite__mapDeps([0,1,2,3,4,5,6]))).catch(function(g){return Promise.reject(new Error("Could not load canvg: "+g))}).then(function(g){return g.default?g.default:g}).then(function(g){return g.fromString(c,n,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(g){return g.render(h)}).then(function(){p.addImage(l.toDataURL("image/jpeg",1),t,e,i,r,a,o)})},Yt.API.putTotalPages=function(n){var t,e=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(n,"g"),e=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),e=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var r=0;r<this.internal.pages[i].length;r++)this.internal.pages[i][r]=this.internal.pages[i][r].replace(t,e);return this},Yt.API.viewerPreferences=function(n,t){var e;n=n||{},t=t||!1;var i,r,s,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(a),l=[],c=0,h=0,p=0;function g(v,y){var x,_=!1;for(x=0;x<v.length;x+=1)v[x]===y&&(_=!0);return _}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),e=this.internal.viewerpreferences.configuration,n==="reset"||t===!0){var d=o.length;for(p=0;p<d;p+=1)e[o[p]].value=e[o[p]].defaultValue,e[o[p]].explicitSet=!1}if(Fe(n)==="object"){for(r in n)if(s=n[r],g(o,r)&&s!==void 0){if(e[r].type==="boolean"&&typeof s=="boolean")e[r].value=s;else if(e[r].type==="name"&&g(e[r].valueSet,s))e[r].value=s;else if(e[r].type==="integer"&&Number.isInteger(s))e[r].value=s;else if(e[r].type==="array"){for(c=0;c<s.length;c+=1)if(i=!0,s[c].length===1&&typeof s[c][0]=="number")l.push(String(s[c]-1));else if(s[c].length>1){for(h=0;h<s[c].length;h+=1)typeof s[c][h]!="number"&&(i=!1);i===!0&&l.push([s[c][0]-1,s[c][1]-1].join(" "))}e[r].value="["+l.join(" ")+"]"}else e[r].value=e[r].defaultValue;e[r].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var v,y=[];for(v in e)e[v].explicitSet===!0&&(e[v].type==="name"?y.push("/"+v+" /"+e[v].value):y.push("/"+v+" "+e[v].value));y.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+y.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=e,this},Yt.API.addMetadata=function(n,t){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceUri:t??"http://jspdf.default.namespaceuri/",rawXml:typeof t=="boolean"&&t},this.internal.events.subscribe("putCatalog",ww),this.internal.events.subscribe("postPutResources",yw)),this},function(n){var t=n.API,e=t.pdfEscape16=function(s,a){for(var o,l=a.metadata.Unicode.widths,c=["","0","00","000","0000"],h=[""],p=0,g=s.length;p<g;++p){if(o=a.metadata.characterToGlyph(s.charCodeAt(p)),a.metadata.glyIdsUsed.push(o),a.metadata.toUnicode[o]=s.charCodeAt(p),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(a.metadata.widthOfGlyph(o),10)])),o=="0")return h.join("");o=o.toString(16),h.push(c[4-o.length],o)}return h.join("")},i=function(s){var a,o,l,c,h,p,g;for(h=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],p=0,g=(o=Object.keys(s).sort(function(d,v){return d-v})).length;p<g;p++)a=o[p],l.length>=100&&(h+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[a]!==void 0&&s[a]!==null&&typeof s[a].toString=="function"&&(c=("0000"+s[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),l.push("<"+a+"><"+c+">"));return l.length&&(h+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),h+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(s){(function(a){var o=a.font,l=a.out,c=a.newObject,h=a.putStream;if(o.metadata instanceof n.API.TTFFont&&o.encoding==="Identity-H"){for(var p=o.metadata.Unicode.widths,g=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),d="",v=0;v<g.length;v++)d+=String.fromCharCode(g[v]);var y=c();h({data:d,addLength1:!0,objectId:y}),l("endobj");var x=c();h({data:i(o.metadata.toUnicode),addLength1:!0,objectId:x}),l("endobj");var _=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+_a(o.fontName)),l("/FontFile2 "+y+" 0 R"),l("/FontBBox "+n.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var E=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+_a(o.fontName)),l("/FontDescriptor "+_+" 0 R"),l("/W "+n.API.PDFObject.convert(p)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+x+" 0 R"),l("/BaseFont /"+_a(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+E+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(s)}]),t.events.push(["putFont",function(s){(function(a){var o=a.font,l=a.out,c=a.newObject,h=a.putStream;if(o.metadata instanceof n.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var p=o.metadata.rawData,g="",d=0;d<p.length;d++)g+=String.fromCharCode(p[d]);var v=c();h({data:g,addLength1:!0,objectId:v}),l("endobj");var y=c();h({data:i(o.metadata.toUnicode),addLength1:!0,objectId:y}),l("endobj");var x=c();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+v+" 0 R"),l("/Flags 96"),l("/FontBBox "+n.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+_a(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=c();for(var _=0;_<o.metadata.hmtx.widths.length;_++)o.metadata.hmtx.widths[_]=parseInt(o.metadata.hmtx.widths[_]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+y+" 0 R/BaseFont/"+_a(o.fontName)+"/FontDescriptor "+x+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(s)}]);var r=function(s){var a,o=s.text||"",l=s.x,c=s.y,h=s.options||{},p=s.mutex||{},g=p.pdfEscape,d=p.activeFontKey,v=p.fonts,y=d,x="",_=0,E="",O=v[y].encoding;if(v[y].encoding!=="Identity-H")return{text:o,x:l,y:c,options:h,mutex:p};for(E=o,y=d,Array.isArray(o)&&(E=o[0]),_=0;_<E.length;_+=1)v[y].metadata.hasOwnProperty("cmap")&&(a=v[y].metadata.cmap.unicode.codeMap[E[_].charCodeAt(0)]),a||E[_].charCodeAt(0)<256&&v[y].metadata.hasOwnProperty("Unicode")?x+=E[_]:x+="";var T="";return parseInt(y.slice(1))<14||O==="WinAnsiEncoding"?T=g(x,y).split("").map(function(V){return V.charCodeAt(0).toString(16)}).join(""):O==="Identity-H"&&(T=e(x,v[y])),p.isHex=!0,{text:T,x:l,y:c,options:h,mutex:p}};t.events.push(["postProcessText",function(s){var a=s.text||"",o=[],l={text:a,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(a)){var c=0;for(c=0;c<a.length;c+=1)Array.isArray(a[c])&&a[c].length===3?o.push([r(Object.assign({},l,{text:a[c][0]})).text,a[c][1],a[c][2]]):o.push(r(Object.assign({},l,{text:a[c]})).text);s.text=o}else s.text=r(Object.assign({},l,{text:a})).text}])}(Yt),function(n){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(e){return t.call(this),this.internal.vFS[e]!==void 0},n.addFileToVFS=function(e,i){return t.call(this),this.internal.vFS[e]=i,this},n.getFileFromVFS=function(e){return t.call(this),this.internal.vFS[e]!==void 0?this.internal.vFS[e]:null}}(Yt.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(i){var r,s,a,o,l,c,h,p=t,g=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],d=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],v={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},y={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},x=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],_=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),E=!1,O=0;this.__bidiEngine__={};var T=function(L){var R=L.charCodeAt(),H=R>>8,W=y[H];return W!==void 0?p[256*W+(255&R)]:H===252||H===253?"AL":_.test(H)?"L":H===8?"R":"N"},V=function(L){for(var R,H=0;H<L.length;H++){if((R=T(L.charAt(H)))==="L")return!1;if(R==="R")return!0}return!1},Q=function(L,R,H,W){var et,ct,ot,rt,ht=R[W];switch(ht){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":E=!1;break;case"N":case"AN":break;case"EN":E&&(ht="AN");break;case"AL":E=!0,ht="R";break;case"WS":case"BN":ht="N";break;case"CS":W<1||W+1>=R.length||(et=H[W-1])!=="EN"&&et!=="AN"||(ct=R[W+1])!=="EN"&&ct!=="AN"?ht="N":E&&(ct="AN"),ht=ct===et?ct:"N";break;case"ES":ht=(et=W>0?H[W-1]:"B")==="EN"&&W+1<R.length&&R[W+1]==="EN"?"EN":"N";break;case"ET":if(W>0&&H[W-1]==="EN"){ht="EN";break}if(E){ht="N";break}for(ot=W+1,rt=R.length;ot<rt&&R[ot]==="ET";)ot++;ht=ot<rt&&R[ot]==="EN"?"EN":"N";break;case"NSM":if(a&&!o){for(rt=R.length,ot=W+1;ot<rt&&R[ot]==="NSM";)ot++;if(ot<rt){var At=L[W],wt=At>=1425&&At<=2303||At===64286;if(et=R[ot],wt&&(et==="R"||et==="AL")){ht="R";break}}}ht=W<1||(et=R[W-1])==="B"?"N":H[W-1];break;case"B":E=!1,r=!0,ht=O;break;case"S":s=!0,ht="N"}return ht},J=function(L,R,H){var W=L.split("");return H&&$(W,H,{hiLevel:O}),W.reverse(),R&&R.reverse(),W.join("")},$=function(L,R,H){var W,et,ct,ot,rt,ht=-1,At=L.length,wt=0,P=[],q=O?d:g,z=[];for(E=!1,r=!1,s=!1,et=0;et<At;et++)z[et]=T(L[et]);for(ct=0;ct<At;ct++){if(rt=wt,P[ct]=Q(L,z,P,ct),W=240&(wt=q[rt][v[P[ct]]]),wt&=15,R[ct]=ot=q[wt][5],W>0)if(W===16){for(et=ht;et<ct;et++)R[et]=1;ht=-1}else ht=-1;if(q[wt][6])ht===-1&&(ht=ct);else if(ht>-1){for(et=ht;et<ct;et++)R[et]=ot;ht=-1}z[ct]==="B"&&(R[ct]=0),H.hiLevel|=ot}s&&function(K,X,st){for(var ut=0;ut<st;ut++)if(K[ut]==="S"){X[ut]=O;for(var ft=ut-1;ft>=0&&K[ft]==="WS";ft--)X[ft]=O}}(z,R,At)},D=function(L,R,H,W,et){if(!(et.hiLevel<L)){if(L===1&&O===1&&!r)return R.reverse(),void(H&&H.reverse());for(var ct,ot,rt,ht,At=R.length,wt=0;wt<At;){if(W[wt]>=L){for(rt=wt+1;rt<At&&W[rt]>=L;)rt++;for(ht=wt,ot=rt-1;ht<ot;ht++,ot--)ct=R[ht],R[ht]=R[ot],R[ot]=ct,H&&(ct=H[ht],H[ht]=H[ot],H[ot]=ct);wt=rt}wt++}}},Z=function(L,R,H){var W=L.split(""),et={hiLevel:O};return H||(H=[]),$(W,H,et),function(ct,ot,rt){if(rt.hiLevel!==0&&h)for(var ht,At=0;At<ct.length;At++)ot[At]===1&&(ht=x.indexOf(ct[At]))>=0&&(ct[At]=x[ht+1])}(W,H,et),D(2,W,R,H,et),D(1,W,R,H,et),W.join("")};return this.__bidiEngine__.doBidiReorder=function(L,R,H){if(function(et,ct){if(ct)for(var ot=0;ot<et.length;ot++)ct[ot]=ot;o===void 0&&(o=V(et)),c===void 0&&(c=V(et))}(L,R),a||!l||c)if(a&&l&&o^c)O=o?1:0,L=J(L,R,H);else if(!a&&l&&c)O=o?1:0,L=Z(L,R,H),L=J(L,R);else if(!a||o||l||c){if(a&&!l&&o^c)L=J(L,R),o?(O=0,L=Z(L,R,H)):(O=1,L=Z(L,R,H),L=J(L,R));else if(a&&o&&!l&&c)O=1,L=Z(L,R,H),L=J(L,R);else if(!a&&!l&&o^c){var W=h;o?(O=1,L=Z(L,R,H),O=0,h=!1,L=Z(L,R,H),h=W):(O=0,L=Z(L,R,H),L=J(L,R),O=1,h=!1,L=Z(L,R,H),h=W,L=J(L,R))}}else O=0,L=Z(L,R,H);else O=o?1:0,L=Z(L,R,H);return L},this.__bidiEngine__.setOptions=function(L){L&&(a=L.isInputVisual,l=L.isOutputVisual,o=L.isInputRtl,c=L.isOutputRtl,h=L.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],e=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(i){var r=i.text;i.x,i.y;var s=i.options||{};i.mutex,s.lang;var a=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,e.setOptions(s),Object.prototype.toString.call(r)==="[object Array]"){var o=0;for(a=[],o=0;o<r.length;o+=1)Object.prototype.toString.call(r[o])==="[object Array]"?a.push([e.doBidiReorder(r[o][0]),r[o][1],r[o][2]]):a.push([e.doBidiReorder(r[o])]);i.text=a}else i.text=e.doBidiReorder(r);e.setOptions({isInputVisual:!0})}])}(Yt),Yt.API.TTFFont=function(){function n(t){var e;if(this.rawData=t,e=this.contents=new ls(t),this.contents.pos=4,e.readString(4)==="ttcf")throw new Error("TTCF not supported.");e.pos=0,this.parse(),this.subset=new Iw(this),this.registerTTF()}return n.open=function(t){return new n(t)},n.prototype.parse=function(){return this.directory=new _w(this.contents),this.head=new Sw(this),this.name=new Pw(this),this.cmap=new bm(this),this.toUnicode={},this.hhea=new kw(this),this.maxp=new Cw(this),this.hmtx=new Ew(this),this.post=new Nw(this),this.os2=new Aw(this),this.loca=new Rw(this),this.glyf=new Ow(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var t,e,i,r,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,o,l,c;for(c=[],a=0,o=(l=this.bbox).length;a<o;a++)t=l[a],c.push(Math.round(t*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(i=255&(r=this.post.italic_angle),32768&(e=r>>16)&&(e=-(1+(65535^e))),this.italicAngle=+(e+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(t){var e;return((e=this.cmap.unicode)!=null?e.codeMap[t]:void 0)||0},n.prototype.widthOfGlyph=function(t){var e;return e=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*e},n.prototype.widthOfString=function(t,e,i){var r,s,a,o;for(a=0,s=0,o=(t=""+t).length;0<=o?s<o:s>o;s=0<=o?++s:--s)r=t.charCodeAt(s),a+=this.widthOfGlyph(this.characterToGlyph(r))+i*(1e3/e)||0;return a*(e/1e3)},n.prototype.lineHeight=function(t,e){var i;return e==null&&(e=!1),i=e?this.lineGap:0,(this.ascender+i-this.decender)/1e3*t},n}();var Wi,ls=function(){function n(t){this.data=t??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(t){return this.data[this.pos++]=t},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},n.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},n.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},n.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},n.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},n.prototype.readString=function(t){var e,i;for(i=[],e=0;0<=t?e<t:e>t;e=0<=t?++e:--e)i[e]=String.fromCharCode(this.readByte());return i.join("")},n.prototype.writeString=function(t){var e,i,r;for(r=[],e=0,i=t.length;0<=i?e<i:e>i;e=0<=i?++e:--e)r.push(this.writeByte(t.charCodeAt(e)));return r},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(t){return this.writeInt16(t)},n.prototype.readLongLong=function(){var t,e,i,r,s,a,o,l;return t=this.readByte(),e=this.readByte(),i=this.readByte(),r=this.readByte(),s=this.readByte(),a=this.readByte(),o=this.readByte(),l=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^e)+1099511627776*(255^i)+4294967296*(255^r)+16777216*(255^s)+65536*(255^a)+256*(255^o)+(255^l)+1):72057594037927940*t+281474976710656*e+1099511627776*i+4294967296*r+16777216*s+65536*a+256*o+l},n.prototype.writeLongLong=function(t){var e,i;return e=Math.floor(t/4294967296),i=4294967295&t,this.writeByte(e>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(t){return this.writeInt32(t)},n.prototype.read=function(t){var e,i;for(e=[],i=0;0<=t?i<t:i>t;i=0<=t?++i:--i)e.push(this.readByte());return e},n.prototype.write=function(t){var e,i,r,s;for(s=[],i=0,r=t.length;i<r;i++)e=t[i],s.push(this.writeByte(e));return s},n}(),_w=function(){var n;function t(e){var i,r,s;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},r=0,s=this.tableCount;0<=s?r<s:r>s;r=0<=s?++r:--r)i={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[i.tag]=i}return t.prototype.encode=function(e){var i,r,s,a,o,l,c,h,p,g,d,v,y;for(y in d=Object.keys(e).length,l=Math.log(2),p=16*Math.floor(Math.log(d)/l),a=Math.floor(p/l),h=16*d-p,(r=new ls).writeInt(this.scalarType),r.writeShort(d),r.writeShort(p),r.writeShort(a),r.writeShort(h),s=16*d,c=r.pos+s,o=null,v=[],e)for(g=e[y],r.writeString(y),r.writeInt(n(g)),r.writeInt(c),r.writeInt(g.length),v=v.concat(g),y==="head"&&(o=c),c+=g.length;c%4;)v.push(0),c++;return r.write(v),i=2981146554-n(r.data),r.pos=o+8,r.writeUInt32(i),r.data},n=function(e){var i,r,s,a;for(e=vm.call(e);e.length%4;)e.push(0);for(s=new ls(e),r=0,i=0,a=e.length;i<a;i=i+=4)r+=s.readUInt32();return 4294967295&r},t}(),xw={}.hasOwnProperty,lr=function(n,t){for(var e in t)xw.call(t,e)&&(n[e]=t[e]);function i(){this.constructor=n}return i.prototype=t.prototype,n.prototype=new i,n.__super__=t.prototype,n};Wi=function(){function n(t){var e;this.file=t,e=this.file.directory.tables[this.tag],this.exists=!!e,e&&(this.offset=e.offset,this.length=e.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var Sw=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return lr(n,Wi),n.prototype.tag="head",n.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},n.prototype.encode=function(t){var e;return(e=new ls).writeInt(this.version),e.writeInt(this.revision),e.writeInt(this.checkSumAdjustment),e.writeInt(this.magicNumber),e.writeShort(this.flags),e.writeShort(this.unitsPerEm),e.writeLongLong(this.created),e.writeLongLong(this.modified),e.writeShort(this.xMin),e.writeShort(this.yMin),e.writeShort(this.xMax),e.writeShort(this.yMax),e.writeShort(this.macStyle),e.writeShort(this.lowestRecPPEM),e.writeShort(this.fontDirectionHint),e.writeShort(t),e.writeShort(this.glyphDataFormat),e.data},n}(),zp=function(){function n(t,e){var i,r,s,a,o,l,c,h,p,g,d,v,y,x,_,E,O;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=e+t.readInt(),p=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=t.readByte();break;case 4:for(d=t.readUInt16(),g=d/2,t.pos+=6,s=function(){var T,V;for(V=[],l=T=0;0<=g?T<g:T>g;l=0<=g?++T:--T)V.push(t.readUInt16());return V}(),t.pos+=2,y=function(){var T,V;for(V=[],l=T=0;0<=g?T<g:T>g;l=0<=g?++T:--T)V.push(t.readUInt16());return V}(),c=function(){var T,V;for(V=[],l=T=0;0<=g?T<g:T>g;l=0<=g?++T:--T)V.push(t.readUInt16());return V}(),h=function(){var T,V;for(V=[],l=T=0;0<=g?T<g:T>g;l=0<=g?++T:--T)V.push(t.readUInt16());return V}(),r=(this.length-t.pos+this.offset)/2,o=function(){var T,V;for(V=[],l=T=0;0<=r?T<r:T>r;l=0<=r?++T:--T)V.push(t.readUInt16());return V}(),l=_=0,O=s.length;_<O;l=++_)for(x=s[l],i=E=v=y[l];v<=x?E<=x:E>=x;i=v<=x?++E:--E)h[l]===0?a=i+c[l]:(a=o[h[l]/2+(i-v)-(g-l)]||0)!==0&&(a+=c[l]),this.codeMap[i]=65535&a}t.pos=p}return n.encode=function(t,e){var i,r,s,a,o,l,c,h,p,g,d,v,y,x,_,E,O,T,V,Q,J,$,D,Z,L,R,H,W,et,ct,ot,rt,ht,At,wt,P,q,z,K,X,st,ut,ft,vt,Nt,Ot;switch(W=new ls,a=Object.keys(t).sort(function(jt,zt){return jt-zt}),e){case"macroman":for(y=0,x=function(){var jt=[];for(v=0;v<256;++v)jt.push(0);return jt}(),E={0:0},s={},et=0,ht=a.length;et<ht;et++)E[ft=t[r=a[et]]]==null&&(E[ft]=++y),s[r]={old:t[r],new:E[t[r]]},x[r]=E[t[r]];return W.writeUInt16(1),W.writeUInt16(0),W.writeUInt32(12),W.writeUInt16(0),W.writeUInt16(262),W.writeUInt16(0),W.write(x),{charMap:s,subtable:W.data,maxGlyphID:y+1};case"unicode":for(R=[],p=[],O=0,E={},i={},_=c=null,ct=0,At=a.length;ct<At;ct++)E[V=t[r=a[ct]]]==null&&(E[V]=++O),i[r]={old:V,new:E[V]},o=E[V]-r,_!=null&&o===c||(_&&p.push(_),R.push(r),c=o),_=r;for(_&&p.push(_),p.push(65535),R.push(65535),Z=2*(D=R.length),$=2*Math.pow(Math.log(D)/Math.LN2,2),g=Math.log($/2)/Math.LN2,J=2*D-$,l=[],Q=[],d=[],v=ot=0,wt=R.length;ot<wt;v=++ot){if(L=R[v],h=p[v],L===65535){l.push(0),Q.push(0);break}if(L-(H=i[L].new)>=32768)for(l.push(0),Q.push(2*(d.length+D-v)),r=rt=L;L<=h?rt<=h:rt>=h;r=L<=h?++rt:--rt)d.push(i[r].new);else l.push(H-L),Q.push(0)}for(W.writeUInt16(3),W.writeUInt16(1),W.writeUInt32(12),W.writeUInt16(4),W.writeUInt16(16+8*D+2*d.length),W.writeUInt16(0),W.writeUInt16(Z),W.writeUInt16($),W.writeUInt16(g),W.writeUInt16(J),st=0,P=p.length;st<P;st++)r=p[st],W.writeUInt16(r);for(W.writeUInt16(0),ut=0,q=R.length;ut<q;ut++)r=R[ut],W.writeUInt16(r);for(vt=0,z=l.length;vt<z;vt++)o=l[vt],W.writeUInt16(o);for(Nt=0,K=Q.length;Nt<K;Nt++)T=Q[Nt],W.writeUInt16(T);for(Ot=0,X=d.length;Ot<X;Ot++)y=d[Ot],W.writeUInt16(y);return{charMap:i,subtable:W.data,maxGlyphID:O+1}}},n}(),bm=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return lr(n,Wi),n.prototype.tag="cmap",n.prototype.parse=function(t){var e,i,r;for(t.pos=this.offset,this.version=t.readUInt16(),r=t.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)e=new zp(t,this.offset),this.tables.push(e),e.isUnicode&&this.unicode==null&&(this.unicode=e);return!0},n.encode=function(t,e){var i,r;return e==null&&(e="macroman"),i=zp.encode(t,e),(r=new ls).writeUInt16(0),r.writeUInt16(1),i.table=r.data.concat(i.subtable),i},n}(),kw=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return lr(n,Wi),n.prototype.tag="hhea",n.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},n}(),Aw=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return lr(n,Wi),n.prototype.tag="OS/2",n.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var e,i;for(i=[],e=0;e<10;++e)i.push(t.readByte());return i}(),this.charRange=function(){var e,i;for(i=[],e=0;e<4;++e)i.push(t.readInt());return i}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var e,i;for(i=[],e=0;e<2;e=++e)i.push(t.readInt());return i}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},n}(),Nw=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return lr(n,Wi),n.prototype.tag="post",n.prototype.parse=function(t){var e,i,r;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(i=t.readUInt16(),this.glyphNameIndex=[],s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],r=[];t.pos<this.offset+this.length;)e=t.readByte(),r.push(this.names.push(t.readString(e)));return r;case 151552:return i=t.readUInt16(),this.offsets=t.read(i);case 262144:return this.map=(function(){var a,o,l;for(l=[],s=a=0,o=this.file.maxp.numGlyphs;0<=o?a<o:a>o;s=0<=o?++a:--a)l.push(t.readUInt32());return l}).call(this)}},n}(),Lw=function(n,t){this.raw=n,this.length=n.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},Pw=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return lr(n,Wi),n.prototype.tag="name",n.prototype.parse=function(t){var e,i,r,s,a,o,l,c,h,p,g;for(t.pos=this.offset,t.readShort(),e=t.readShort(),o=t.readShort(),i=[],s=0;0<=e?s<e:s>e;s=0<=e?++s:--s)i.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+o+t.readShort()});for(l={},s=h=0,p=i.length;h<p;s=++h)r=i[s],t.pos=r.offset,c=t.readString(r.length),a=new Lw(c,r),l[g=r.nameID]==null&&(l[g]=[]),l[r.nameID].push(a);this.strings=l,this.copyright=l[0],this.fontFamily=l[1],this.fontSubfamily=l[2],this.uniqueSubfamily=l[3],this.fontName=l[4],this.version=l[5];try{this.postscriptName=l[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=l[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=l[7],this.manufacturer=l[8],this.designer=l[9],this.description=l[10],this.vendorUrl=l[11],this.designerUrl=l[12],this.license=l[13],this.licenseUrl=l[14],this.preferredFamily=l[15],this.preferredSubfamily=l[17],this.compatibleFull=l[18],this.sampleText=l[19]},n}(),Cw=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return lr(n,Wi),n.prototype.tag="maxp",n.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},n}(),Ew=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return lr(n,Wi),n.prototype.tag="hmtx",n.prototype.parse=function(t){var e,i,r,s,a,o,l;for(t.pos=this.offset,this.metrics=[],e=0,o=this.file.hhea.numberOfMetrics;0<=o?e<o:e>o;e=0<=o?++e:--e)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(r=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var c,h;for(h=[],e=c=0;0<=r?c<r:c>r;e=0<=r?++c:--c)h.push(t.readInt16());return h}(),this.widths=(function(){var c,h,p,g;for(g=[],c=0,h=(p=this.metrics).length;c<h;c++)s=p[c],g.push(s.advance);return g}).call(this),i=this.widths[this.widths.length-1],l=[],e=a=0;0<=r?a<r:a>r;e=0<=r?++a:--a)l.push(this.widths.push(i));return l},n.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},n}(),vm=[].slice,Ow=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return lr(n,Wi),n.prototype.tag="glyf",n.prototype.parse=function(){return this.cache={}},n.prototype.glyphFor=function(t){var e,i,r,s,a,o,l,c,h,p;return t in this.cache?this.cache[t]:(s=this.file.loca,e=this.file.contents,i=s.indexOf(t),(r=s.lengthOf(t))===0?this.cache[t]=null:(e.pos=this.offset+i,a=(o=new ls(e.read(r))).readShort(),c=o.readShort(),p=o.readShort(),l=o.readShort(),h=o.readShort(),this.cache[t]=a===-1?new Tw(o,c,p,l,h):new jw(o,a,c,p,l,h),this.cache[t]))},n.prototype.encode=function(t,e,i){var r,s,a,o,l;for(a=[],s=[],o=0,l=e.length;o<l;o++)r=t[e[o]],s.push(a.length),r&&(a=a.concat(r.encode(i)));return s.push(a.length),{table:a,offsets:s}},n}(),jw=function(){function n(t,e,i,r,s,a){this.raw=t,this.numberOfContours=e,this.xMin=i,this.yMin=r,this.xMax=s,this.yMax=a,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),Tw=function(){function n(t,e,i,r,s){var a,o;for(this.raw=t,this.xMin=e,this.yMin=i,this.xMax=r,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;o=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&o;)a.pos+=1&o?4:2,128&o?a.pos+=8:64&o?a.pos+=4:8&o&&(a.pos+=2)}return n.prototype.encode=function(){var t,e,i;for(e=new ls(vm.call(this.raw.data)),t=0,i=this.glyphIDs.length;t<i;++t)e.pos=this.glyphOffsets[t];return e.data},n}(),Rw=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return lr(n,Wi),n.prototype.tag="loca",n.prototype.parse=function(t){var e,i;return t.pos=this.offset,e=this.file.head.indexToLocFormat,this.offsets=e===0?(function(){var r,s;for(s=[],i=0,r=this.length;i<r;i+=2)s.push(2*t.readUInt16());return s}).call(this):(function(){var r,s;for(s=[],i=0,r=this.length;i<r;i+=4)s.push(t.readUInt32());return s}).call(this)},n.prototype.indexOf=function(t){return this.offsets[t]},n.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},n.prototype.encode=function(t,e){for(var i=new Uint32Array(this.offsets.length),r=0,s=0,a=0;a<i.length;++a)if(i[a]=r,s<e.length&&e[s]==a){++s,i[a]=r;var o=this.offsets[a],l=this.offsets[a+1]-o;l>0&&(r+=l)}for(var c=new Array(4*i.length),h=0;h<i.length;++h)c[4*h+3]=255&i[h],c[4*h+2]=(65280&i[h])>>8,c[4*h+1]=(16711680&i[h])>>16,c[4*h]=(4278190080&i[h])>>24;return c},n}(),Iw=function(){function n(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var t,e,i,r,s;for(e in r=this.font.cmap.tables[0].codeMap,t={},s=this.subset)i=s[e],t[e]=r[i];return t},n.prototype.glyphsFor=function(t){var e,i,r,s,a,o,l;for(r={},a=0,o=t.length;a<o;a++)r[s=t[a]]=this.font.glyf.glyphFor(s);for(s in e=[],r)(i=r[s])!=null&&i.compound&&e.push.apply(e,i.glyphIDs);if(e.length>0)for(s in l=this.glyphsFor(e))i=l[s],r[s]=i;return r},n.prototype.encode=function(t,e){var i,r,s,a,o,l,c,h,p,g,d,v,y,x,_;for(r in i=bm.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(t),d={0:0},_=i.charMap)d[(l=_[r]).old]=l.new;for(v in g=i.maxGlyphID,a)v in d||(d[v]=g++);return h=function(E){var O,T;for(O in T={},E)T[E[O]]=O;return T}(d),p=Object.keys(h).sort(function(E,O){return E-O}),y=function(){var E,O,T;for(T=[],E=0,O=p.length;E<O;E++)o=p[E],T.push(h[o]);return T}(),s=this.font.glyf.encode(a,y,d),c=this.font.loca.encode(s.offsets,y),x={cmap:this.font.cmap.raw(),glyf:s.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(e)},this.font.os2.exists&&(x["OS/2"]=this.font.os2.raw()),this.font.directory.encode(x)},n}();Yt.API.PDFObject=function(){var n;function t(){}return n=function(e,i){return(Array(i+1).join("0")+e).slice(-i)},t.convert=function(e){var i,r,s,a;if(Array.isArray(e))return"["+function(){var o,l,c;for(c=[],o=0,l=e.length;o<l;o++)i=e[o],c.push(t.convert(i));return c}().join(" ")+"]";if(typeof e=="string")return"/"+e;if(e!=null&&e.isString)return"("+e+")";if(e instanceof Date)return"(D:"+n(e.getUTCFullYear(),4)+n(e.getUTCMonth(),2)+n(e.getUTCDate(),2)+n(e.getUTCHours(),2)+n(e.getUTCMinutes(),2)+n(e.getUTCSeconds(),2)+"Z)";if({}.toString.call(e)==="[object Object]"){for(r in s=["<<"],e)a=e[r],s.push("/"+r+" "+t.convert(a));return s.push(">>"),s.join(`
`)}return""+e},t}();function ym(n,t,e,i,r){i=i||{};var s=1.15,a=r.internal.scaleFactor,o=r.internal.getFontSize()/a,l=r.getLineHeightFactor?r.getLineHeightFactor():s,c=o*l,h=/\r\n|\r|\n/g,p="",g=1;if((i.valign==="middle"||i.valign==="bottom"||i.halign==="center"||i.halign==="right")&&(p=typeof n=="string"?n.split(h):n,g=p.length||1),e+=o*(2-s),i.valign==="middle"?e-=g/2*c:i.valign==="bottom"&&(e-=g*c),i.halign==="center"||i.halign==="right"){var d=o;if(i.halign==="center"&&(d*=.5),p&&g>=1){for(var v=0;v<p.length;v++)r.text(p[v],t-r.getStringUnitWidth(p[v])*d,e),e+=c;return r}t-=r.getStringUnitWidth(n)*d}return i.halign==="justify"?r.text(n,t,e,{maxWidth:i.maxWidth||100,align:"justify"}):r.text(n,t,e),r}var $p={},Ca=function(){function n(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return n.setDefaults=function(t,e){e===void 0&&(e=null),e?e.__autoTableDocumentDefaults=t:$p=t},n.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},n.prototype.applyStyles=function(t,e){var i,r,s;e===void 0&&(e=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var a=this.jsPDFDocument.internal.getFont(),o=a.fontStyle,l=a.fontName;if(t.font&&(l=t.font),t.fontStyle){o=t.fontStyle;var c=this.getFontList()[l];c&&c.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(c[0]),o=c[0])}if(this.jsPDFDocument.setFont(l,o),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!e){var h=n.unifyColor(t.fillColor);h&&(i=this.jsPDFDocument).setFillColor.apply(i,h),h=n.unifyColor(t.textColor),h&&(r=this.jsPDFDocument).setTextColor.apply(r,h),h=n.unifyColor(t.lineColor),h&&(s=this.jsPDFDocument).setDrawColor.apply(s,h),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},n.prototype.splitTextToSize=function(t,e,i){return this.jsPDFDocument.splitTextToSize(t,e,i)},n.prototype.rect=function(t,e,i,r,s){return this.jsPDFDocument.rect(t,e,i,r,s)},n.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},n.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},n.prototype.getDocument=function(){return this.jsPDFDocument},n.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},n.prototype.addPage=function(){return this.jsPDFDocument.addPage()},n.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},n.prototype.getGlobalOptions=function(){return $p||{}},n.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},n.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},n.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},n.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},n.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},n.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},n}(),zu=function(n,t){return zu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])},zu(n,t)};function wm(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");zu(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var _m=function(n){wm(t,n);function t(e){var i=n.call(this)||this;return i._element=e,i}return t}(Array);function Dw(n){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/n,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function Mw(n){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[n]}function Lc(n,t,e){e.applyStyles(t,!0);var i=Array.isArray(n)?n:[n],r=i.map(function(s){return e.getTextWidth(s)}).reduce(function(s,a){return Math.max(s,a)},0);return r}function xm(n,t,e,i){var r=t.settings.tableLineWidth,s=t.settings.tableLineColor;n.applyStyles({lineWidth:r,lineColor:s});var a=Sm(r,!1);a&&n.rect(e.x,e.y,t.getWidth(n.pageSize().width),i.y-e.y,a)}function Sm(n,t){var e=n>0,i=t||t===0;return e&&i?"DF":e?"S":i?"F":null}function Hc(n,t){var e,i,r,s;if(n=n||t,Array.isArray(n)){if(n.length>=4)return{top:n[0],right:n[1],bottom:n[2],left:n[3]};if(n.length===3)return{top:n[0],right:n[1],bottom:n[2],left:n[1]};if(n.length===2)return{top:n[0],right:n[1],bottom:n[0],left:n[1]};n.length===1?n=n[0]:n=t}return typeof n=="object"?(typeof n.vertical=="number"&&(n.top=n.vertical,n.bottom=n.vertical),typeof n.horizontal=="number"&&(n.right=n.horizontal,n.left=n.horizontal),{left:(e=n.left)!==null&&e!==void 0?e:t,top:(i=n.top)!==null&&i!==void 0?i:t,right:(r=n.right)!==null&&r!==void 0?r:t,bottom:(s=n.bottom)!==null&&s!==void 0?s:t}):(typeof n!="number"&&(n=t),{top:n,right:n,bottom:n,left:n})}function km(n,t){var e=Hc(t.settings.margin,0);return n.pageSize().width-(e.left+e.right)}function Fw(n,t,e,i,r){var s={},a=1.3333333333333333,o=ru(t,function(O){return r.getComputedStyle(O).backgroundColor});o!=null&&(s.fillColor=o);var l=ru(t,function(O){return r.getComputedStyle(O).color});l!=null&&(s.textColor=l);var c=Uw(i,e);c&&(s.cellPadding=c);var h="borderTopColor",p=a*e,g=i.borderTopWidth;if(i.borderBottomWidth===g&&i.borderRightWidth===g&&i.borderLeftWidth===g){var d=(parseFloat(g)||0)/p;d&&(s.lineWidth=d)}else s.lineWidth={top:(parseFloat(i.borderTopWidth)||0)/p,right:(parseFloat(i.borderRightWidth)||0)/p,bottom:(parseFloat(i.borderBottomWidth)||0)/p,left:(parseFloat(i.borderLeftWidth)||0)/p},s.lineWidth.top||(s.lineWidth.right?h="borderRightColor":s.lineWidth.bottom?h="borderBottomColor":s.lineWidth.left&&(h="borderLeftColor"));var v=ru(t,function(O){return r.getComputedStyle(O)[h]});v!=null&&(s.lineColor=v);var y=["left","right","center","justify"];y.indexOf(i.textAlign)!==-1&&(s.halign=i.textAlign),y=["middle","bottom","top"],y.indexOf(i.verticalAlign)!==-1&&(s.valign=i.verticalAlign);var x=parseInt(i.fontSize||"");isNaN(x)||(s.fontSize=x/a);var _=Bw(i);_&&(s.fontStyle=_);var E=(i.fontFamily||"").toLowerCase();return n.indexOf(E)!==-1&&(s.font=E),s}function Bw(n){var t="";return(n.fontWeight==="bold"||n.fontWeight==="bolder"||parseInt(n.fontWeight)>=700)&&(t="bold"),(n.fontStyle==="italic"||n.fontStyle==="oblique")&&(t+="italic"),t}function ru(n,t){var e=Am(n,t);if(!e)return null;var i=e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!i||!Array.isArray(i))return null;var r=[parseInt(i[1]),parseInt(i[2]),parseInt(i[3])],s=parseInt(i[4]);return s===0||isNaN(r[0])||isNaN(r[1])||isNaN(r[2])?null:r}function Am(n,t){var e=t(n);return e==="rgba(0, 0, 0, 0)"||e==="transparent"||e==="initial"||e==="inherit"?n.parentElement==null?null:Am(n.parentElement,t):e}function Uw(n,t){var e=[n.paddingTop,n.paddingRight,n.paddingBottom,n.paddingLeft],i=96/(72/t),r=(parseInt(n.lineHeight)-parseInt(n.fontSize))/t/2,s=e.map(function(o){return parseInt(o||"0")/i}),a=Hc(s,0);return r>a.top&&(a.top=r),r>a.bottom&&(a.bottom=r),a}function Nm(n,t,e,i,r){var s,a;i===void 0&&(i=!1),r===void 0&&(r=!1);var o;typeof t=="string"?o=e.document.querySelector(t):o=t;var l=Object.keys(n.getFontList()),c=n.scaleFactor(),h=[],p=[],g=[];if(!o)return console.error("Html table could not be found with input: ",t),{head:h,body:p,foot:g};for(var d=0;d<o.rows.length;d++){var v=o.rows[d],y=(a=(s=v==null?void 0:v.parentElement)===null||s===void 0?void 0:s.tagName)===null||a===void 0?void 0:a.toLowerCase(),x=qw(l,c,e,v,i,r);x&&(y==="thead"?h.push(x):y==="tfoot"?g.push(x):p.push(x))}return{head:h,body:p,foot:g}}function qw(n,t,e,i,r,s){for(var a=new _m(i),o=0;o<i.cells.length;o++){var l=i.cells[o],c=e.getComputedStyle(l);if(r||c.display!=="none"){var h=void 0;s&&(h=Fw(n,l,t,c,e)),a.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:h,_element:l,content:zw(l)})}}var p=e.getComputedStyle(i);if(a.length>0&&(r||p.display!=="none"))return a}function zw(n){var t=n.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(e){return e.trim()}).join(`
`),t.innerText||t.textContent||""}function $w(n,t,e){for(var i=0,r=[n,t,e];i<r.length;i++){var s=r[i];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function jr(n,t,e,i,r){if(n==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(n),a=1;a<arguments.length;a++){var o=arguments[a];if(o!=null)for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(s[l]=o[l])}return s}function Lm(n,t){var e=new Ca(n),i=e.getDocumentOptions(),r=e.getGlobalOptions();$w(r,i,t);var s=jr({},r,i,t),a;typeof window<"u"&&(a=window);var o=Hw(r,i,t),l=Ww(r,i,t),c=Vw(e,s),h=Kw(e,s,a);return{id:t.tableId,content:h,hooks:l,styles:o,settings:c}}function Hw(n,t,e){for(var i={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},r=function(l){if(l==="columnStyles"){var c=n[l],h=t[l],p=e[l];i.columnStyles=jr({},c,h,p)}else{var g=[n,t,e],d=g.map(function(v){return v[l]||{}});i[l]=jr({},d[0],d[1],d[2])}},s=0,a=Object.keys(i);s<a.length;s++){var o=a[s];r(o)}return i}function Ww(n,t,e){for(var i=[n,t,e],r={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,a=i;s<a.length;s++){var o=a[s];o.didParseCell&&r.didParseCell.push(o.didParseCell),o.willDrawCell&&r.willDrawCell.push(o.willDrawCell),o.didDrawCell&&r.didDrawCell.push(o.didDrawCell),o.willDrawPage&&r.willDrawPage.push(o.willDrawPage),o.didDrawPage&&r.didDrawPage.push(o.didDrawPage)}return r}function Vw(n,t){var e,i,r,s,a,o,l,c,h,p,g,d,v=Hc(t.margin,40/n.scaleFactor()),y=(e=Gw(n,t.startY))!==null&&e!==void 0?e:v.top,x;t.showFoot===!0?x="everyPage":t.showFoot===!1?x="never":x=(i=t.showFoot)!==null&&i!==void 0?i:"everyPage";var _;t.showHead===!0?_="everyPage":t.showHead===!1?_="never":_=(r=t.showHead)!==null&&r!==void 0?r:"everyPage";var E=(s=t.useCss)!==null&&s!==void 0?s:!1,O=t.theme||(E?"plain":"striped"),T=!!t.horizontalPageBreak,V=(a=t.horizontalPageBreakRepeat)!==null&&a!==void 0?a:null;return{includeHiddenHtml:(o=t.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:E,theme:O,startY:y,margin:v,pageBreak:(l=t.pageBreak)!==null&&l!==void 0?l:"auto",rowPageBreak:(c=t.rowPageBreak)!==null&&c!==void 0?c:"auto",tableWidth:(h=t.tableWidth)!==null&&h!==void 0?h:"auto",showHead:_,showFoot:x,tableLineWidth:(p=t.tableLineWidth)!==null&&p!==void 0?p:0,tableLineColor:(g=t.tableLineColor)!==null&&g!==void 0?g:200,horizontalPageBreak:T,horizontalPageBreakRepeat:V,horizontalPageBreakBehaviour:(d=t.horizontalPageBreakBehaviour)!==null&&d!==void 0?d:"afterAllRows"}}function Gw(n,t){var e=n.getLastAutoTable(),i=n.scaleFactor(),r=n.pageNumber(),s=!1;if(e&&e.startPageNumber){var a=e.startPageNumber+e.pageNumber-1;s=a===r}return typeof t=="number"?t:(t==null||t===!1)&&s&&(e==null?void 0:e.finalY)!=null?e.finalY+20/i:null}function Kw(n,t,e){var i=t.head||[],r=t.body||[],s=t.foot||[];if(t.html){var a=t.includeHiddenHtml;if(e){var o=Nm(n,t.html,e,a,t.useCss)||{};i=o.head||i,r=o.body||i,s=o.foot||i}else console.error("Cannot parse html in non browser environment")}var l=t.columns||Yw(i,r,s);return{columns:l,head:i,body:r,foot:s}}function Yw(n,t,e){var i=n[0]||t[0]||e[0]||[],r=[];return Object.keys(i).filter(function(s){return s!=="_element"}).forEach(function(s){var a=1,o;Array.isArray(i)?o=i[parseInt(s)]:o=i[s],typeof o=="object"&&!Array.isArray(o)&&(a=(o==null?void 0:o.colSpan)||1);for(var l=0;l<a;l++){var c=void 0;Array.isArray(i)?c=r.length:c=s+(l>0?"_".concat(l):"");var h={dataKey:c};r.push(h)}}),r}var $u=function(){function n(t,e,i){this.table=e,this.pageNumber=e.pageNumber,this.settings=e.settings,this.cursor=i,this.doc=t.getDocument()}return n}(),Jw=function(n){wm(t,n);function t(e,i,r,s,a,o){var l=n.call(this,e,i,o)||this;return l.cell=r,l.row=s,l.column=a,l.section=s.section,l}return t}($u),Xw=function(){function n(t,e){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=e.columns,this.head=e.head,this.body=e.body,this.foot=e.foot}return n.prototype.getHeadHeight=function(t){return this.head.reduce(function(e,i){return e+i.getMaxCellHeight(t)},0)},n.prototype.getFootHeight=function(t){return this.foot.reduce(function(e,i){return e+i.getMaxCellHeight(t)},0)},n.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},n.prototype.callCellHooks=function(t,e,i,r,s,a){for(var o=0,l=e;o<l.length;o++){var c=l[o],h=new Jw(t,this,i,r,s,a),p=c(h)===!1;if(i.text=Array.isArray(i.text)?i.text:[i.text],p)return!1}return!0},n.prototype.callEndPageHooks=function(t,e){t.applyStyles(t.userStyles);for(var i=0,r=this.hooks.didDrawPage;i<r.length;i++){var s=r[i];s(new $u(t,this,e))}},n.prototype.callWillDrawPageHooks=function(t,e){for(var i=0,r=this.hooks.willDrawPage;i<r.length;i++){var s=r[i];s(new $u(t,this,e))}},n.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var e=this.columns.reduce(function(r,s){return r+s.wrappedWidth},0);return e}else{var i=this.settings.margin;return t-i.left-i.right}},n}(),Pm=function(){function n(t,e,i,r,s){s===void 0&&(s=!1),this.height=0,this.raw=t,t instanceof _m&&(this.raw=t._element,this.element=t._element),this.index=e,this.section=i,this.cells=r,this.spansMultiplePages=s}return n.prototype.getMaxCellHeight=function(t){var e=this;return t.reduce(function(i,r){var s;return Math.max(i,((s=e.cells[r.index])===null||s===void 0?void 0:s.height)||0)},0)},n.prototype.hasRowSpan=function(t){var e=this;return t.filter(function(i){var r=e.cells[i.index];return r?r.rowSpan>1:!1}).length>0},n.prototype.canEntireRowFit=function(t,e){return this.getMaxCellHeight(e)<=t},n.prototype.getMinimumRowHeight=function(t,e){var i=this;return t.reduce(function(r,s){var a=i.cells[s.index];if(!a)return 0;var o=e.getLineHeight(a.styles.fontSize),l=a.padding("vertical"),c=l+o;return c>r?c:r},0)},n}(),Cm=function(){function n(t,e,i){var r;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=e,this.section=i,this.raw=t;var s=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,s=(r=t.content)!==null&&r!==void 0?r:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var a=s!=null?""+s:"",o=/\r\n|\r|\n/g;this.text=a.split(o)}return n.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var e=this.height-this.padding("vertical");t=this.y+e/2+this.padding("top")}var i;if(this.styles.halign==="right")i=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var r=this.width-this.padding("horizontal");i=this.x+r/2+this.padding("left")}else i=this.x+this.padding("left");return{x:i,y:t}},n.prototype.getContentHeight=function(t,e){e===void 0&&(e=1.15);var i=Array.isArray(this.text)?this.text.length:1,r=this.styles.fontSize/t*e,s=i*r+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},n.prototype.padding=function(t){var e=Hc(this.styles.cellPadding,0);return t==="vertical"?e.top+e.bottom:t==="horizontal"?e.left+e.right:e[t]},n}(),Zw=function(){function n(t,e,i){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=e,this.index=i}return n.prototype.getMaxCustomCellWidth=function(t){for(var e=0,i=0,r=t.allRows();i<r.length;i++){var s=r[i],a=s.cells[this.index];a&&typeof a.styles.cellWidth=="number"&&(e=Math.max(e,a.styles.cellWidth))}return e},n}();function Qw(n,t){t_(n,t);var e=[],i=0;t.columns.forEach(function(s){var a=s.getMaxCustomCellWidth(t);a?s.width=a:(s.width=s.wrappedWidth,e.push(s)),i+=s.width});var r=t.getWidth(n.pageSize().width)-i;r&&(r=Hu(e,r,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),r&&(r=Hu(e,r,function(s){return s.minWidth})),r=Math.abs(r),!t.settings.horizontalPageBreak&&r>.1/n.scaleFactor()&&(r=r<1?r:Math.round(r),console.log("Of the table content, ".concat(r," units width could not fit page"))),n_(t),i_(t,n),e_(t)}function t_(n,t){var e=n.scaleFactor(),i=t.settings.horizontalPageBreak,r=km(n,t);t.allRows().forEach(function(s){for(var a=0,o=t.columns;a<o.length;a++){var l=o[a],c=s.cells[l.index];if(c){var h=t.hooks.didParseCell;t.callCellHooks(n,h,c,s,l,null);var p=c.padding("horizontal");c.contentWidth=Lc(c.text,c.styles,n)+p;var g=Lc(c.text.join(" ").split(/[^\S\u00A0]+/),c.styles,n);if(c.minReadableWidth=g+c.padding("horizontal"),typeof c.styles.cellWidth=="number")c.minWidth=c.styles.cellWidth,c.wrappedWidth=c.styles.cellWidth;else if(c.styles.cellWidth==="wrap"||i===!0)c.contentWidth>r?(c.minWidth=r,c.wrappedWidth=r):(c.minWidth=c.contentWidth,c.wrappedWidth=c.contentWidth);else{var d=10/e;c.minWidth=c.styles.minCellWidth||d,c.wrappedWidth=c.contentWidth,c.minWidth>c.wrappedWidth&&(c.wrappedWidth=c.minWidth)}}}}),t.allRows().forEach(function(s){for(var a=0,o=t.columns;a<o.length;a++){var l=o[a],c=s.cells[l.index];if(c&&c.colSpan===1)l.wrappedWidth=Math.max(l.wrappedWidth,c.wrappedWidth),l.minWidth=Math.max(l.minWidth,c.minWidth),l.minReadableWidth=Math.max(l.minReadableWidth,c.minReadableWidth);else{var h=t.styles.columnStyles[l.dataKey]||t.styles.columnStyles[l.index]||{},p=h.cellWidth||h.minCellWidth;p&&typeof p=="number"&&(l.minWidth=p,l.wrappedWidth=p)}c&&(c.colSpan>1&&!l.minWidth&&(l.minWidth=c.minWidth),c.colSpan>1&&!l.wrappedWidth&&(l.wrappedWidth=c.minWidth))}})}function Hu(n,t,e){for(var i=t,r=n.reduce(function(d,v){return d+v.wrappedWidth},0),s=0;s<n.length;s++){var a=n[s],o=a.wrappedWidth/r,l=i*o,c=a.width+l,h=e(a),p=c<h?h:c;t-=p-a.width,a.width=p}if(t=Math.round(t*1e10)/1e10,t){var g=n.filter(function(d){return t<0?d.width>e(d):!0});g.length&&(t=Hu(g,t,e))}return t}function e_(n){for(var t={},e=1,i=n.allRows(),r=0;r<i.length;r++)for(var s=i[r],a=0,o=n.columns;a<o.length;a++){var l=o[a],c=t[l.index];if(e>1)e--,delete s.cells[l.index];else if(c)c.cell.height+=s.height,e=c.cell.colSpan,delete s.cells[l.index],c.left--,c.left<=1&&delete t[l.index];else{var h=s.cells[l.index];if(!h)continue;if(h.height=s.height,h.rowSpan>1){var p=i.length-r,g=h.rowSpan>p?p:h.rowSpan;t[l.index]={cell:h,left:g,row:s}}}}}function n_(n){for(var t=n.allRows(),e=0;e<t.length;e++)for(var i=t[e],r=null,s=0,a=0,o=0;o<n.columns.length;o++){var l=n.columns[o];if(a-=1,a>1&&n.columns[o+1])s+=l.width,delete i.cells[l.index];else if(r){var c=r;delete i.cells[l.index],r=null,c.width=l.width+s}else{var c=i.cells[l.index];if(!c)continue;if(a=c.colSpan,s=0,c.colSpan>1){r=c,s+=l.width;continue}c.width=l.width+s}}}function i_(n,t){for(var e={count:0,height:0},i=0,r=n.allRows();i<r.length;i++){for(var s=r[i],a=0,o=n.columns;a<o.length;a++){var l=o[a],c=s.cells[l.index];if(c){t.applyStyles(c.styles,!0);var h=c.width-c.padding("horizontal");if(c.styles.overflow==="linebreak")c.text=t.splitTextToSize(c.text,h+1/t.scaleFactor(),{fontSize:c.styles.fontSize});else if(c.styles.overflow==="ellipsize")c.text=Hp(c.text,h,c.styles,t,"...");else if(c.styles.overflow==="hidden")c.text=Hp(c.text,h,c.styles,t,"");else if(typeof c.styles.overflow=="function"){var p=c.styles.overflow(c.text,h);typeof p=="string"?c.text=[p]:c.text=p}c.contentHeight=c.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var g=c.contentHeight/c.rowSpan;c.rowSpan>1&&e.count*e.height<g*c.rowSpan?e={height:g,count:c.rowSpan}:e&&e.count>0&&e.height>g&&(g=e.height),g>s.height&&(s.height=g)}}e.count--}}function Hp(n,t,e,i,r){return n.map(function(s){return r_(s,t,e,i,r)})}function r_(n,t,e,i,r){var s=1e4*i.scaleFactor();if(t=Math.ceil(t*s)/s,t>=Lc(n,e,i))return n;for(;t<Lc(n+r,e,i)&&!(n.length<=1);)n=n.substring(0,n.length-1);return n.trim()+r}function Em(n,t){var e=new Ca(n),i=s_(t,e.scaleFactor()),r=new Xw(t,i);return Qw(e,r),e.applyStyles(e.userStyles),r}function s_(n,t){var e=n.content,i=o_(e.columns);if(e.head.length===0){var r=Wp(i,"head");r&&e.head.push(r)}if(e.foot.length===0){var r=Wp(i,"foot");r&&e.foot.push(r)}var s=n.settings.theme,a=n.styles;return{columns:i,head:su("head",e.head,i,a,s,t),body:su("body",e.body,i,a,s,t),foot:su("foot",e.foot,i,a,s,t)}}function su(n,t,e,i,r,s){var a={},o=t.map(function(l,c){for(var h=0,p={},g=0,d=0,v=0,y=e;v<y.length;v++){var x=y[v];if(a[x.index]==null||a[x.index].left===0)if(d===0){var _=void 0;Array.isArray(l)?_=l[x.index-g-h]:_=l[x.dataKey];var E={};typeof _=="object"&&!Array.isArray(_)&&(E=(_==null?void 0:_.styles)||{});var O=l_(n,x,c,r,i,s,E),T=new Cm(_,O,n);p[x.dataKey]=T,p[x.index]=T,d=T.colSpan-1,a[x.index]={left:T.rowSpan-1,times:d}}else d--,g++;else a[x.index].left--,d=a[x.index].times,h++}return new Pm(l,c,n,p)});return o}function Wp(n,t){var e={};return n.forEach(function(i){if(i.raw!=null){var r=a_(t,i.raw);r!=null&&(e[i.dataKey]=r)}}),Object.keys(e).length>0?e:null}function a_(n,t){if(n==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(n==="foot"&&typeof t=="object")return t.footer;return null}function o_(n){return n.map(function(t,e){var i,r;return typeof t=="object"?r=(i=t.dataKey)!==null&&i!==void 0?i:e:r=e,new Zw(r,t,e)})}function l_(n,t,e,i,r,s,a){var o=Mw(i),l;n==="head"?l=r.headStyles:n==="body"?l=r.bodyStyles:n==="foot"&&(l=r.footStyles);var c=jr({},o.table,o[n],r.styles,l),h=r.columnStyles[t.dataKey]||r.columnStyles[t.index]||{},p=n==="body"?h:{},g=n==="body"&&e%2===0?jr({},o.alternateRow,r.alternateRowStyles):{},d=Dw(s),v=jr({},d,c,g,p);return jr(v,a)}function c_(n,t,e){var i;e===void 0&&(e={});var r=km(n,t),s=new Map,a=[],o=[],l=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?l=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(l=[t.settings.horizontalPageBreakRepeat]),l.forEach(function(g){var d=t.columns.find(function(v){return v.dataKey===g||v.index===g});d&&!s.has(d.index)&&(s.set(d.index,!0),a.push(d.index),o.push(t.columns[d.index]),r-=d.wrappedWidth)});for(var c=!0,h=(i=e==null?void 0:e.start)!==null&&i!==void 0?i:0;h<t.columns.length;){if(s.has(h)){h++;continue}var p=t.columns[h].wrappedWidth;if(c||r>=p)c=!1,a.push(h),o.push(t.columns[h]),r-=p;else break;h++}return{colIndexes:a,columns:o,lastIndex:h-1}}function h_(n,t){for(var e=[],i=0;i<t.columns.length;i++){var r=c_(n,t,{start:i});r.columns.length&&(e.push(r),i=r.lastIndex)}return e}function Om(n,t){var e=t.settings,i=e.startY,r=e.margin,s={x:r.left,y:i},a=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),o=i+r.bottom+a;if(e.pageBreak==="avoid"){var l=t.body,c=l.reduce(function(g,d){return g+d.height},0);o+=c}var h=new Ca(n);(e.pageBreak==="always"||e.startY!=null&&o>h.pageSize().height)&&(Tm(h),s.y=r.top),t.callWillDrawPageHooks(h,s);var p=jr({},s);t.startPageNumber=h.pageNumber(),e.horizontalPageBreak?u_(h,t,p,s):(h.applyStyles(h.userStyles),(e.showHead==="firstPage"||e.showHead==="everyPage")&&t.head.forEach(function(g){return Tr(h,t,g,s,t.columns)}),h.applyStyles(h.userStyles),t.body.forEach(function(g,d){var v=d===t.body.length-1;Pc(h,t,g,v,p,s,t.columns)}),h.applyStyles(h.userStyles),(e.showFoot==="lastPage"||e.showFoot==="everyPage")&&t.foot.forEach(function(g){return Tr(h,t,g,s,t.columns)})),xm(h,t,p,s),t.callEndPageHooks(h,s),t.finalY=s.y,n.lastAutoTable=t,h.applyStyles(h.userStyles)}function u_(n,t,e,i){var r=h_(n,t),s=t.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")r.forEach(function(c,h){n.applyStyles(n.userStyles),h>0?Eo(n,t,e,i,c.columns,!0):Vp(n,t,i,c.columns),d_(n,t,e,i,c.columns),au(n,t,i,c.columns)});else for(var a=-1,o=r[0],l=function(){var c=a;if(o){n.applyStyles(n.userStyles);var h=o.columns;a>=0?Eo(n,t,e,i,h,!0):Vp(n,t,i,h),c=Gp(n,t,a+1,i,h),au(n,t,i,h)}var p=c-a;r.slice(1).forEach(function(g){n.applyStyles(n.userStyles),Eo(n,t,e,i,g.columns,!0),Gp(n,t,a+1,i,g.columns,p),au(n,t,i,g.columns)}),a=c};a<t.body.length-1;)l()}function Vp(n,t,e,i){var r=t.settings;n.applyStyles(n.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(s){return Tr(n,t,s,e,i)})}function d_(n,t,e,i,r){n.applyStyles(n.userStyles),t.body.forEach(function(s,a){var o=a===t.body.length-1;Pc(n,t,s,o,e,i,r)})}function Gp(n,t,e,i,r,s){n.applyStyles(n.userStyles),s=s??t.body.length;var a=Math.min(e+s,t.body.length),o=-1;return t.body.slice(e,a).forEach(function(l,c){var h=e+c===t.body.length-1,p=jm(n,t,h,i);l.canEntireRowFit(p,r)&&(Tr(n,t,l,i,r),o=e+c)}),o}function au(n,t,e,i){var r=t.settings;n.applyStyles(n.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(s){return Tr(n,t,s,e,i)})}function f_(n,t,e){var i=e.getLineHeight(n.styles.fontSize),r=n.padding("vertical"),s=Math.floor((t-r)/i);return Math.max(0,s)}function p_(n,t,e,i){var r={};n.spansMultiplePages=!0,n.height=0;for(var s=0,a=0,o=e.columns;a<o.length;a++){var l=o[a],c=n.cells[l.index];if(c){Array.isArray(c.text)||(c.text=[c.text]);var h=new Cm(c.raw,c.styles,c.section);h=jr(h,c),h.text=[];var p=f_(c,t,i);c.text.length>p&&(h.text=c.text.splice(p,c.text.length));var g=i.scaleFactor(),d=i.getLineHeightFactor();c.contentHeight=c.getContentHeight(g,d),c.contentHeight>=t&&(c.contentHeight=t,h.styles.minCellHeight-=t),c.contentHeight>n.height&&(n.height=c.contentHeight),h.contentHeight=h.getContentHeight(g,d),h.contentHeight>s&&(s=h.contentHeight),r[l.index]=h}}var v=new Pm(n.raw,-1,n.section,r,!0);v.height=s;for(var y=0,x=e.columns;y<x.length;y++){var l=x[y],h=v.cells[l.index];h&&(h.height=v.height);var c=n.cells[l.index];c&&(c.height=n.height)}return v}function g_(n,t,e,i){var r=n.pageSize().height,s=i.settings.margin,a=s.top+s.bottom,o=r-a;t.section==="body"&&(o-=i.getHeadHeight(i.columns)+i.getFootHeight(i.columns));var l=t.getMinimumRowHeight(i.columns,n),c=l<e;if(l>o)return console.log("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!c)return!1;var h=t.hasRowSpan(i.columns),p=t.getMaxCellHeight(i.columns)>o;return p?(h&&console.log("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(h||i.settings.rowPageBreak==="avoid")}function Pc(n,t,e,i,r,s,a){var o=jm(n,t,i,s);if(e.canEntireRowFit(o,a))Tr(n,t,e,s,a);else if(g_(n,e,o,t)){var l=p_(e,o,t,n);Tr(n,t,e,s,a),Eo(n,t,r,s,a),Pc(n,t,l,i,r,s,a)}else Eo(n,t,r,s,a),Pc(n,t,e,i,r,s,a)}function Tr(n,t,e,i,r){i.x=t.settings.margin.left;for(var s=0,a=r;s<a.length;s++){var o=a[s],l=e.cells[o.index];if(!l){i.x+=o.width;continue}n.applyStyles(l.styles),l.x=i.x,l.y=i.y;var c=t.callCellHooks(n,t.hooks.willDrawCell,l,e,o,i);if(c===!1){i.x+=o.width;continue}m_(n,l,i);var h=l.getTextPos();ym(l.text,h.x,h.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},n.getDocument()),t.callCellHooks(n,t.hooks.didDrawCell,l,e,o,i),i.x+=o.width}i.y+=e.height}function m_(n,t,e){var i=t.styles;if(n.getDocument().setFillColor(n.getDocument().getFillColor()),typeof i.lineWidth=="number"){var r=Sm(i.lineWidth,i.fillColor);r&&n.rect(t.x,e.y,t.width,t.height,r)}else typeof i.lineWidth=="object"&&(i.fillColor&&n.rect(t.x,e.y,t.width,t.height,"F"),b_(n,t,e,i.lineWidth))}function b_(n,t,e,i){var r,s,a,o;i.top&&(r=e.x,s=e.y,a=e.x+t.width,o=e.y,i.right&&(a+=.5*i.right),i.left&&(r-=.5*i.left),l(i.top,r,s,a,o)),i.bottom&&(r=e.x,s=e.y+t.height,a=e.x+t.width,o=e.y+t.height,i.right&&(a+=.5*i.right),i.left&&(r-=.5*i.left),l(i.bottom,r,s,a,o)),i.left&&(r=e.x,s=e.y,a=e.x,o=e.y+t.height,i.top&&(s-=.5*i.top),i.bottom&&(o+=.5*i.bottom),l(i.left,r,s,a,o)),i.right&&(r=e.x+t.width,s=e.y,a=e.x+t.width,o=e.y+t.height,i.top&&(s-=.5*i.top),i.bottom&&(o+=.5*i.bottom),l(i.right,r,s,a,o));function l(c,h,p,g,d){n.getDocument().setLineWidth(c),n.getDocument().line(h,p,g,d,"S")}}function jm(n,t,e,i){var r=t.settings.margin.bottom,s=t.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&e)&&(r+=t.getFootHeight(t.columns)),n.pageSize().height-i.y-r}function Eo(n,t,e,i,r,s){r===void 0&&(r=[]),s===void 0&&(s=!1),n.applyStyles(n.userStyles),t.settings.showFoot==="everyPage"&&!s&&t.foot.forEach(function(o){return Tr(n,t,o,i,r)}),t.callEndPageHooks(n,i);var a=t.settings.margin;xm(n,t,e,i),Tm(n),t.pageNumber++,i.x=a.left,i.y=a.top,e.y=a.top,t.callWillDrawPageHooks(n,i),t.settings.showHead==="everyPage"&&(t.head.forEach(function(o){return Tr(n,t,o,i,r)}),n.applyStyles(n.userStyles))}function Tm(n){var t=n.pageNumber();n.setPage(t+1);var e=n.pageNumber();return e===t?(n.addPage(),!0):!1}function v_(n){n.API.autoTable=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t[0],r=Lm(this,i),s=Em(this,r);return Om(this,s),this},n.API.lastAutoTable=!1,n.API.autoTableText=function(t,e,i,r){ym(t,e,i,r,this)},n.API.autoTableSetDefaults=function(t){return Ca.setDefaults(t,this),this},n.autoTableSetDefaults=function(t,e){Ca.setDefaults(t,e)},n.API.autoTableHtmlToJson=function(t,e){var i;if(e===void 0&&(e=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var r=new Ca(this),s=Nm(r,t,window,e,!1),a=s.head,o=s.body,l=((i=a[0])===null||i===void 0?void 0:i.map(function(c){return c.content}))||[];return{columns:l,rows:o,data:o}}}var ou;function Kp(n,t){var e=Lm(n,t),i=Em(n,e);Om(n,i)}try{if(typeof window<"u"&&window){var Yp=window,Jp=Yp.jsPDF||((ou=Yp.jspdf)===null||ou===void 0?void 0:ou.jsPDF);Jp&&v_(Jp)}}catch(n){console.error("Could not apply autoTable plugin",n)}const y_=({isOpen:n,onClose:t,onExport:e,events:i=[]})=>{const[r,s]=ie.useState("excel"),[a,o]=ie.useState("current"),[l,c]=ie.useState(""),[h,p]=ie.useState(new Date().toISOString().slice(0,7));ie.useEffect(()=>{n&&(s("excel"),o("current"),i.length>0&&c(i[0].id))},[n,i]);const g=()=>{e({format:r,scope:a,value:a==="event"?l:a==="month"?h:null}),t()};return console.log("ExportModal Rendered. isOpen:",n),S.jsx(Ph,{children:n&&S.jsxs("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4",children:[S.jsx(Rl.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),S.jsxs(Rl.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"relative bg-white rounded-3xl shadow-2xl w-full max-w-md overflow-hidden",children:[S.jsxs("div",{className:"bg-gray-900 px-6 py-5 flex items-center justify-between",children:[S.jsx("h3",{className:"text-xl font-black text-white uppercase tracking-wider",children:"Export Data"}),S.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",children:""})]}),S.jsxs("div",{className:"p-6 space-y-6",children:[S.jsxs("div",{children:[S.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-3 block",children:"1. Pilih Format"}),S.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[S.jsxs("button",{onClick:()=>s("excel"),className:`relative p-4 rounded-xl border-2 flex flex-col items-center gap-2 transition-all ${r==="excel"?"border-[#079108] bg-[#079108]/5 text-[#079108]":"border-gray-100 hover:border-gray-200 text-gray-600"}`,children:[S.jsx(h0,{className:"text-2xl"}),S.jsx("span",{className:"font-bold text-sm",children:"Excel (.xlsx)"}),r==="excel"&&S.jsx("div",{className:"absolute top-2 right-2 w-2 h-2 rounded-full bg-[#079108]"})]}),S.jsxs("button",{onClick:()=>s("pdf"),className:`relative p-4 rounded-xl border-2 flex flex-col items-center gap-2 transition-all ${r==="pdf"?"border-red-500 bg-red-50 text-red-500":"border-gray-100 hover:border-gray-200 text-gray-600"}`,children:[S.jsx(c2,{className:"text-2xl"}),S.jsx("span",{className:"font-bold text-sm",children:"PDF Document"}),r==="pdf"&&S.jsx("div",{className:"absolute top-2 right-2 w-2 h-2 rounded-full bg-red-500"})]})]})]}),S.jsxs("div",{children:[S.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-3 block",children:"2. Filter Data"}),S.jsxs("div",{className:"space-y-3",children:[S.jsxs("label",{className:`flex items-center p-3 rounded-xl border-2 cursor-pointer transition-all ${a==="current"?"border-gray-800 bg-gray-50":"border-gray-100 hover:border-gray-200"}`,children:[S.jsx("input",{type:"radio",name:"scope",checked:a==="current",onChange:()=>o("current"),className:"w-4 h-4 text-gray-800 focus:ring-gray-800"}),S.jsxs("div",{className:"ml-3 flex items-center gap-2",children:[S.jsx(h2,{className:"text-gray-400"}),S.jsx("span",{className:"font-semibold text-sm",children:"Sesuai Filter di Layar"})]})]}),S.jsxs("label",{className:`flex items-center p-3 rounded-xl border-2 cursor-pointer transition-all ${a==="event"?"border-gray-800 bg-gray-50":"border-gray-100 hover:border-gray-200"}`,children:[S.jsx("input",{type:"radio",name:"scope",checked:a==="event",onChange:()=>o("event"),className:"w-4 h-4 text-gray-800 focus:ring-gray-800"}),S.jsxs("div",{className:"ml-3 flex items-center gap-2",children:[S.jsx(u2,{className:"text-gray-400"}),S.jsx("span",{className:"font-semibold text-sm",children:"Per Event Spesifik"})]})]}),S.jsx(Ph,{children:a==="event"&&S.jsx(Rl.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden pl-7",children:S.jsx("div",{className:"pt-2",children:S.jsx("select",{value:l,onChange:d=>c(d.target.value),className:"w-full bg-white border-2 border-gray-200 rounded-lg p-2 text-sm focus:border-gray-800 focus:outline-none",children:i.map(d=>S.jsxs("option",{value:d.id,children:[d.nama," (",d.tanggal," ",d.bulan," ",d.tahun,")"]},d.id))})})})}),S.jsxs("label",{className:`flex items-center p-3 rounded-xl border-2 cursor-pointer transition-all ${a==="month"?"border-gray-800 bg-gray-50":"border-gray-100 hover:border-gray-200"}`,children:[S.jsx("input",{type:"radio",name:"scope",checked:a==="month",onChange:()=>o("month"),className:"w-4 h-4 text-gray-800 focus:ring-gray-800"}),S.jsxs("div",{className:"ml-3 flex items-center gap-2",children:[S.jsx(d2,{className:"text-gray-400"}),S.jsx("span",{className:"font-semibold text-sm",children:"Per Bulan"})]})]}),S.jsx(Ph,{children:a==="month"&&S.jsx(Rl.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden pl-7",children:S.jsx("div",{className:"pt-2",children:S.jsx("input",{type:"month",value:h,onChange:d=>p(d.target.value),className:"w-full bg-white border-2 border-gray-200 rounded-lg p-2 text-sm focus:border-gray-800 focus:outline-none"})})})})]})]})]}),S.jsxs("div",{className:"px-6 py-4 bg-gray-50 flex items-center justify-end gap-3 border-t border-gray-100",children:[S.jsx("button",{onClick:t,className:"px-4 py-2 rounded-lg text-sm font-bold text-gray-500 hover:text-gray-700 hover:bg-gray-100 transition-colors",children:"Batal"}),S.jsxs("button",{onClick:g,className:`px-6 py-2 rounded-lg text-sm font-bold text-white shadow-lg transition-all transform hover:scale-105 ${r==="excel"?"bg-[#079108] shadow-[#079108]/20":"bg-red-500 shadow-red-500/20"}`,children:["Download ",r==="excel"?"Excel":"PDF"]})]})]})]})})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Xo(n){return n+.5|0}const is=(n,t,e)=>Math.max(Math.min(n,e),t);function xo(n){return is(Xo(n*2.55),0,255)}function as(n){return is(Xo(n*255),0,255)}function Or(n){return is(Xo(n/2.55)/100,0,1)}function Xp(n){return is(Xo(n*100),0,100)}const Si={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Wu=[..."0123456789ABCDEF"],w_=n=>Wu[n&15],__=n=>Wu[(n&240)>>4]+Wu[n&15],Yl=n=>(n&240)>>4===(n&15),x_=n=>Yl(n.r)&&Yl(n.g)&&Yl(n.b)&&Yl(n.a);function S_(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&Si[n[1]]*17,g:255&Si[n[2]]*17,b:255&Si[n[3]]*17,a:t===5?Si[n[4]]*17:255}:(t===7||t===9)&&(e={r:Si[n[1]]<<4|Si[n[2]],g:Si[n[3]]<<4|Si[n[4]],b:Si[n[5]]<<4|Si[n[6]],a:t===9?Si[n[7]]<<4|Si[n[8]]:255})),e}const k_=(n,t)=>n<255?t(n):"";function A_(n){var t=x_(n)?w_:__;return n?"#"+t(n.r)+t(n.g)+t(n.b)+k_(n.a,t):void 0}const N_=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Rm(n,t,e){const i=t*Math.min(e,1-e),r=(s,a=(s+n/30)%12)=>e-i*Math.max(Math.min(a-3,9-a,1),-1);return[r(0),r(8),r(4)]}function L_(n,t,e){const i=(r,s=(r+n/60)%6)=>e-e*t*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function P_(n,t,e){const i=Rm(n,1,.5);let r;for(t+e>1&&(r=1/(t+e),t*=r,e*=r),r=0;r<3;r++)i[r]*=1-t-e,i[r]+=t;return i}function C_(n,t,e,i,r){return n===r?(t-e)/i+(t<e?6:0):t===r?(e-n)/i+2:(n-t)/i+4}function ad(n){const e=n.r/255,i=n.g/255,r=n.b/255,s=Math.max(e,i,r),a=Math.min(e,i,r),o=(s+a)/2;let l,c,h;return s!==a&&(h=s-a,c=o>.5?h/(2-s-a):h/(s+a),l=C_(e,i,r,h,s),l=l*60+.5),[l|0,c||0,o]}function od(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(as)}function ld(n,t,e){return od(Rm,n,t,e)}function E_(n,t,e){return od(P_,n,t,e)}function O_(n,t,e){return od(L_,n,t,e)}function Im(n){return(n%360+360)%360}function j_(n){const t=N_.exec(n);let e=255,i;if(!t)return;t[5]!==i&&(e=t[6]?xo(+t[5]):as(+t[5]));const r=Im(+t[2]),s=+t[3]/100,a=+t[4]/100;return t[1]==="hwb"?i=E_(r,s,a):t[1]==="hsv"?i=O_(r,s,a):i=ld(r,s,a),{r:i[0],g:i[1],b:i[2],a:e}}function T_(n,t){var e=ad(n);e[0]=Im(e[0]+t),e=ld(e),n.r=e[0],n.g=e[1],n.b=e[2]}function R_(n){if(!n)return;const t=ad(n),e=t[0],i=Xp(t[1]),r=Xp(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${r}%, ${Or(n.a)})`:`hsl(${e}, ${i}%, ${r}%)`}const Zp={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Qp={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function I_(){const n={},t=Object.keys(Qp),e=Object.keys(Zp);let i,r,s,a,o;for(i=0;i<t.length;i++){for(a=o=t[i],r=0;r<e.length;r++)s=e[r],o=o.replace(s,Zp[s]);s=parseInt(Qp[a],16),n[o]=[s>>16&255,s>>8&255,s&255]}return n}let Jl;function D_(n){Jl||(Jl=I_(),Jl.transparent=[0,0,0,0]);const t=Jl[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const M_=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function F_(n){const t=M_.exec(n);let e=255,i,r,s;if(t){if(t[7]!==i){const a=+t[7];e=t[8]?xo(a):is(a*255,0,255)}return i=+t[1],r=+t[3],s=+t[5],i=255&(t[2]?xo(i):is(i,0,255)),r=255&(t[4]?xo(r):is(r,0,255)),s=255&(t[6]?xo(s):is(s,0,255)),{r:i,g:r,b:s,a:e}}}function B_(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Or(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const lu=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,ga=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function U_(n,t,e){const i=ga(Or(n.r)),r=ga(Or(n.g)),s=ga(Or(n.b));return{r:as(lu(i+e*(ga(Or(t.r))-i))),g:as(lu(r+e*(ga(Or(t.g))-r))),b:as(lu(s+e*(ga(Or(t.b))-s))),a:n.a+e*(t.a-n.a)}}function Xl(n,t,e){if(n){let i=ad(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,t===0?360:1)),i=ld(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function Dm(n,t){return n&&Object.assign(t||{},n)}function tg(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=as(n[3]))):(t=Dm(n,{r:0,g:0,b:0,a:1}),t.a=as(t.a)),t}function q_(n){return n.charAt(0)==="r"?F_(n):j_(n)}class Ho{constructor(t){if(t instanceof Ho)return t;const e=typeof t;let i;e==="object"?i=tg(t):e==="string"&&(i=S_(t)||D_(t)||q_(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=Dm(this._rgb);return t&&(t.a=Or(t.a)),t}set rgb(t){this._rgb=tg(t)}rgbString(){return this._valid?B_(this._rgb):void 0}hexString(){return this._valid?A_(this._rgb):void 0}hslString(){return this._valid?R_(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,r=t.rgb;let s;const a=e===s?.5:e,o=2*a-1,l=i.a-r.a,c=((o*l===-1?o:(o+l)/(1+o*l))+1)/2;s=1-c,i.r=255&c*i.r+s*r.r+.5,i.g=255&c*i.g+s*r.g+.5,i.b=255&c*i.b+s*r.b+.5,i.a=a*i.a+(1-a)*r.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=U_(this._rgb,t._rgb,e)),this}clone(){return new Ho(this.rgb)}alpha(t){return this._rgb.a=as(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=Xo(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Xl(this._rgb,2,t),this}darken(t){return Xl(this._rgb,2,-t),this}saturate(t){return Xl(this._rgb,1,t),this}desaturate(t){return Xl(this._rgb,1,-t),this}rotate(t){return T_(this._rgb,t),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Nr(){}const z_=(()=>{let n=0;return()=>n++})();function He(n){return n==null}function Pn(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function je(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Ni(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function nr(n,t){return Ni(n)?n:t}function Oe(n,t){return typeof n>"u"?t:n}const $_=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function Ye(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function Me(n,t,e,i){let r,s,a;if(Pn(n))for(s=n.length,r=0;r<s;r++)t.call(e,n[r],r);else if(je(n))for(a=Object.keys(n),s=a.length,r=0;r<s;r++)t.call(e,n[a[r]],a[r])}function Cc(n,t){let e,i,r,s;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(r=n[e],s=t[e],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function Ec(n){if(Pn(n))return n.map(Ec);if(je(n)){const t=Object.create(null),e=Object.keys(n),i=e.length;let r=0;for(;r<i;++r)t[e[r]]=Ec(n[e[r]]);return t}return n}function Mm(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function H_(n,t,e,i){if(!Mm(n))return;const r=t[n],s=e[n];je(r)&&je(s)?Wo(r,s,i):t[n]=Ec(s)}function Wo(n,t,e){const i=Pn(t)?t:[t],r=i.length;if(!je(n))return n;e=e||{};const s=e.merger||H_;let a;for(let o=0;o<r;++o){if(a=i[o],!je(a))continue;const l=Object.keys(a);for(let c=0,h=l.length;c<h;++c)s(l[c],n,a,e)}return n}function Oo(n,t){return Wo(n,t,{merger:W_})}function W_(n,t,e){if(!Mm(n))return;const i=t[n],r=e[n];je(i)&&je(r)?Oo(i,r):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=Ec(r))}const eg={"":n=>n,x:n=>n.x,y:n=>n.y};function V_(n){const t=n.split("."),e=[];let i="";for(const r of t)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function G_(n){const t=V_(n);return e=>{for(const i of t){if(i==="")break;e=e&&e[i]}return e}}function ja(n,t){return(eg[t]||(eg[t]=G_(t)))(n)}function cd(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Vo=n=>typeof n<"u",cs=n=>typeof n=="function",ng=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0};function K_(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const Je=Math.PI,Yn=2*Je,Oc=Number.POSITIVE_INFINITY,Y_=Je/180,Mn=Je/2,Ps=Je/4,ig=Je*2/3,Fm=Math.log10,os=Math.sign;function fc(n,t,e){return Math.abs(n-t)<e}function rg(n){const t=Math.round(n);n=fc(n,t,n/1e3)?t:n;const e=Math.pow(10,Math.floor(Fm(n))),i=n/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function J_(n){const t=[],e=Math.sqrt(n);let i;for(i=1;i<e;i++)n%i===0&&(t.push(i),t.push(n/i));return e===(e|0)&&t.push(e),t.sort((r,s)=>r-s).pop(),t}function X_(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function jc(n){return!X_(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function Z_(n,t){const e=Math.round(n);return e-t<=n&&e+t>=n}function Q_(n,t,e){let i,r,s;for(i=0,r=n.length;i<r;i++)s=n[i][e],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function Fs(n){return n*(Je/180)}function tx(n){return n*(180/Je)}function sg(n){if(!Ni(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function Bm(n,t){const e=t.x-n.x,i=t.y-n.y,r=Math.sqrt(e*e+i*i);let s=Math.atan2(i,e);return s<-.5*Je&&(s+=Yn),{angle:s,distance:r}}function ex(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function ar(n){return(n%Yn+Yn)%Yn}function Um(n,t,e,i){const r=ar(n),s=ar(t),a=ar(e),o=ar(s-r),l=ar(a-r),c=ar(r-s),h=ar(r-a);return r===s||r===a||i||o>l&&c<h}function ni(n,t,e){return Math.max(t,Math.min(e,n))}function nx(n){return ni(n,-32768,32767)}function Bs(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function hd(n,t,e){e=e||(a=>n[a]<t);let i=n.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,e(s)?r=s:i=s;return{lo:r,hi:i}}const Vu=(n,t,e,i)=>hd(n,e,i?r=>{const s=n[r][t];return s<e||s===e&&n[r+1][t]===e}:r=>n[r][t]<e),ix=(n,t,e)=>hd(n,e,i=>n[i][t]>=e);function rx(n,t,e){let i=0,r=n.length;for(;i<r&&n[i]<t;)i++;for(;r>i&&n[r-1]>e;)r--;return i>0||r<n.length?n.slice(i,r):n}const qm=["push","pop","shift","splice","unshift"];function sx(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),qm.forEach(e=>{const i="_onData"+cd(e),r=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...s){const a=r.apply(this,s);return n._chartjs.listeners.forEach(o=>{typeof o[i]=="function"&&o[i](...s)}),a}})})}function ag(n,t){const e=n._chartjs;if(!e)return;const i=e.listeners,r=i.indexOf(t);r!==-1&&i.splice(r,1),!(i.length>0)&&(qm.forEach(s=>{delete n[s]}),delete n._chartjs)}function zm(n){const t=new Set(n);return t.size===n.length?n:Array.from(t)}const $m=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function Hm(n,t){let e=[],i=!1;return function(...r){e=r,i||(i=!0,$m.call(window,()=>{i=!1,n.apply(t,e)}))}}function ax(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}const ud=n=>n==="start"?"left":n==="end"?"right":"center",$n=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,ox=(n,t,e,i)=>n===(i?"left":"right")?e:n==="center"?(t+e)/2:t,Zl=n=>n===0||n===1,og=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*Yn/e)),lg=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*Yn/e)+1,jo={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Mn)+1,easeOutSine:n=>Math.sin(n*Mn),easeInOutSine:n=>-.5*(Math.cos(Je*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>Zl(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Zl(n)?n:og(n,.075,.3),easeOutElastic:n=>Zl(n)?n:lg(n,.075,.3),easeInOutElastic(n){return Zl(n)?n:n<.5?.5*og(n*2,.1125,.45):.5+.5*lg(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-jo.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?jo.easeInBounce(n*2)*.5:jo.easeOutBounce(n*2-1)*.5+.5};function Wm(n){if(n&&typeof n=="object"){const t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function cg(n){return Wm(n)?n:new Ho(n)}function cu(n){return Wm(n)?n:new Ho(n).saturate(.5).darken(.1).hexString()}const lx=["x","y","borderWidth","radius","tension"],cx=["color","borderColor","backgroundColor"];function hx(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:cx},numbers:{type:"number",properties:lx}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function ux(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const hg=new Map;function dx(n,t){t=t||{};const e=n+JSON.stringify(t);let i=hg.get(e);return i||(i=new Intl.NumberFormat(n,t),hg.set(e,i)),i}function Vm(n,t,e){return dx(t,e).format(n)}const fx={values(n){return Pn(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";const i=this.chart.options.locale;let r,s=n;if(e.length>1){const c=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),s=px(n,e)}const a=Fm(Math.abs(s)),o=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:r,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),Vm(n,i,l)}};function px(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var Gm={formatters:fx};function gx(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Gm.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Hs=Object.create(null),Gu=Object.create(null);function To(n,t){if(!t)return n;const e=t.split(".");for(let i=0,r=e.length;i<r;++i){const s=e[i];n=n[s]||(n[s]=Object.create(null))}return n}function hu(n,t,e){return typeof t=="string"?Wo(To(n,t),e):Wo(To(n,""),t)}class mx{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>cu(r.backgroundColor),this.hoverBorderColor=(i,r)=>cu(r.borderColor),this.hoverColor=(i,r)=>cu(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return hu(this,t,e)}get(t){return To(this,t)}describe(t,e){return hu(Gu,t,e)}override(t,e){return hu(Hs,t,e)}route(t,e,i,r){const s=To(this,t),a=To(this,i),o="_"+e;Object.defineProperties(s,{[o]:{value:s[e],writable:!0},[e]:{enumerable:!0,get(){const l=this[o],c=a[r];return je(l)?Object.assign({},c,l):Oe(l,c)},set(l){this[o]=l}}})}apply(t){t.forEach(e=>e(this))}}var gn=new mx({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[hx,ux,gx]);function bx(n){return!n||He(n.size)||He(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function ug(n,t,e,i,r){let s=t[r];return s||(s=t[r]=n.measureText(r).width,e.push(r)),s>i&&(i=s),i}function Cs(n,t,e){const i=n.currentDevicePixelRatio,r=e!==0?Math.max(e/2,.5):0;return Math.round((t-r)*i)/i+r}function dg(n,t){!t&&!n||(t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function fg(n,t,e,i){Km(n,t,e,i,null)}function Km(n,t,e,i,r){let s,a,o,l,c,h,p,g;const d=t.pointStyle,v=t.rotation,y=t.radius;let x=(v||0)*Y_;if(d&&typeof d=="object"&&(s=d.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){n.save(),n.translate(e,i),n.rotate(x),n.drawImage(d,-d.width/2,-d.height/2,d.width,d.height),n.restore();return}if(!(isNaN(y)||y<=0)){switch(n.beginPath(),d){default:r?n.ellipse(e,i,r/2,y,0,0,Yn):n.arc(e,i,y,0,Yn),n.closePath();break;case"triangle":h=r?r/2:y,n.moveTo(e+Math.sin(x)*h,i-Math.cos(x)*y),x+=ig,n.lineTo(e+Math.sin(x)*h,i-Math.cos(x)*y),x+=ig,n.lineTo(e+Math.sin(x)*h,i-Math.cos(x)*y),n.closePath();break;case"rectRounded":c=y*.516,l=y-c,a=Math.cos(x+Ps)*l,p=Math.cos(x+Ps)*(r?r/2-c:l),o=Math.sin(x+Ps)*l,g=Math.sin(x+Ps)*(r?r/2-c:l),n.arc(e-p,i-o,c,x-Je,x-Mn),n.arc(e+g,i-a,c,x-Mn,x),n.arc(e+p,i+o,c,x,x+Mn),n.arc(e-g,i+a,c,x+Mn,x+Je),n.closePath();break;case"rect":if(!v){l=Math.SQRT1_2*y,h=r?r/2:l,n.rect(e-h,i-l,2*h,2*l);break}x+=Ps;case"rectRot":p=Math.cos(x)*(r?r/2:y),a=Math.cos(x)*y,o=Math.sin(x)*y,g=Math.sin(x)*(r?r/2:y),n.moveTo(e-p,i-o),n.lineTo(e+g,i-a),n.lineTo(e+p,i+o),n.lineTo(e-g,i+a),n.closePath();break;case"crossRot":x+=Ps;case"cross":p=Math.cos(x)*(r?r/2:y),a=Math.cos(x)*y,o=Math.sin(x)*y,g=Math.sin(x)*(r?r/2:y),n.moveTo(e-p,i-o),n.lineTo(e+p,i+o),n.moveTo(e+g,i-a),n.lineTo(e-g,i+a);break;case"star":p=Math.cos(x)*(r?r/2:y),a=Math.cos(x)*y,o=Math.sin(x)*y,g=Math.sin(x)*(r?r/2:y),n.moveTo(e-p,i-o),n.lineTo(e+p,i+o),n.moveTo(e+g,i-a),n.lineTo(e-g,i+a),x+=Ps,p=Math.cos(x)*(r?r/2:y),a=Math.cos(x)*y,o=Math.sin(x)*y,g=Math.sin(x)*(r?r/2:y),n.moveTo(e-p,i-o),n.lineTo(e+p,i+o),n.moveTo(e+g,i-a),n.lineTo(e-g,i+a);break;case"line":a=r?r/2:Math.cos(x)*y,o=Math.sin(x)*y,n.moveTo(e-a,i-o),n.lineTo(e+a,i+o);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(x)*(r?r/2:y),i+Math.sin(x)*y);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function Ym(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function dd(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function fd(n){n.restore()}function vx(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),He(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function yx(n,t,e,i,r){if(r.strikethrough||r.underline){const s=n.measureText(i),a=t-s.actualBoundingBoxLeft,o=t+s.actualBoundingBoxRight,l=e-s.actualBoundingBoxAscent,c=e+s.actualBoundingBoxDescent,h=r.strikethrough?(l+c)/2:c;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=r.decorationWidth||2,n.moveTo(a,h),n.lineTo(o,h),n.stroke()}}function wx(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function Go(n,t,e,i,r,s={}){const a=Pn(t)?t:[t],o=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(n.save(),n.font=r.string,vx(n,s),l=0;l<a.length;++l)c=a[l],s.backdrop&&wx(n,s.backdrop),o&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),He(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(c,e,i,s.maxWidth)),n.fillText(c,e,i,s.maxWidth),yx(n,e,i,c,s),i+=Number(r.lineHeight);n.restore()}function Tc(n,t){const{x:e,y:i,w:r,h:s,radius:a}=t;n.arc(e+a.topLeft,i+a.topLeft,a.topLeft,1.5*Je,Je,!0),n.lineTo(e,i+s-a.bottomLeft),n.arc(e+a.bottomLeft,i+s-a.bottomLeft,a.bottomLeft,Je,Mn,!0),n.lineTo(e+r-a.bottomRight,i+s),n.arc(e+r-a.bottomRight,i+s-a.bottomRight,a.bottomRight,Mn,0,!0),n.lineTo(e+r,i+a.topRight),n.arc(e+r-a.topRight,i+a.topRight,a.topRight,0,-Mn,!0),n.lineTo(e+a.topLeft,i)}const _x=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,xx=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Sx(n,t){const e=(""+n).match(_x);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}const kx=n=>+n||0;function pd(n,t){const e={},i=je(t),r=i?Object.keys(t):t,s=je(n)?i?a=>Oe(n[a],n[t[a]]):a=>n[a]:()=>n;for(const a of r)e[a]=kx(s(a));return e}function Jm(n){return pd(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Ea(n){return pd(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Li(n){const t=Jm(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Hn(n,t){n=n||{},t=t||gn.font;let e=Oe(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let i=Oe(n.style,t.style);i&&!(""+i).match(xx)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:Oe(n.family,t.family),lineHeight:Sx(Oe(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:Oe(n.weight,t.weight),string:""};return r.string=bx(r),r}function Ql(n,t,e,i){let r,s,a;for(r=0,s=n.length;r<s;++r)if(a=n[r],a!==void 0&&a!==void 0)return a}function Ax(n,t,e){const{min:i,max:r}=n,s=$_(t,(r-i)/2),a=(o,l)=>e&&o===0?0:o+l;return{min:a(i,-Math.abs(s)),max:a(r,s)}}function Da(n,t){return Object.assign(Object.create(n),t)}function gd(n,t=[""],e,i,r=()=>n[0]){const s=e||n;typeof i>"u"&&(i=t1("_fallback",n));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:i,_getTarget:r,override:o=>gd([o,...n],t,s,i)};return new Proxy(a,{deleteProperty(o,l){return delete o[l],delete o._keys,delete n[0][l],!0},get(o,l){return Zm(o,l,()=>Tx(l,t,n,o))},getOwnPropertyDescriptor(o,l){return Reflect.getOwnPropertyDescriptor(o._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(o,l){return gg(o).includes(l)},ownKeys(o){return gg(o)},set(o,l,c){const h=o._storage||(o._storage=r());return o[l]=h[l]=c,delete o._keys,!0}})}function Ta(n,t,e,i){const r={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:Xm(n,i),setContext:s=>Ta(n,s,e,i),override:s=>Ta(n.override(s),t,e,i)};return new Proxy(r,{deleteProperty(s,a){return delete s[a],delete n[a],!0},get(s,a,o){return Zm(s,a,()=>Lx(s,a,o))},getOwnPropertyDescriptor(s,a){return s._descriptors.allKeys?Reflect.has(n,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,a)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(s,a){return Reflect.has(n,a)},ownKeys(){return Reflect.ownKeys(n)},set(s,a,o){return n[a]=o,delete s[a],!0}})}function Xm(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:r=t.allKeys}=n;return{allKeys:r,scriptable:e,indexable:i,isScriptable:cs(e)?e:()=>e,isIndexable:cs(i)?i:()=>i}}const Nx=(n,t)=>n?n+cd(t):t,md=(n,t)=>je(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function Zm(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||t==="constructor")return n[t];const i=e();return n[t]=i,i}function Lx(n,t,e){const{_proxy:i,_context:r,_subProxy:s,_descriptors:a}=n;let o=i[t];return cs(o)&&a.isScriptable(t)&&(o=Px(t,o,n,e)),Pn(o)&&o.length&&(o=Cx(t,o,n,a.isIndexable)),md(t,o)&&(o=Ta(o,r,s&&s[t],a)),o}function Px(n,t,e,i){const{_proxy:r,_context:s,_subProxy:a,_stack:o}=e;if(o.has(n))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+n);o.add(n);let l=t(s,a||i);return o.delete(n),md(n,l)&&(l=bd(r._scopes,r,n,l)),l}function Cx(n,t,e,i){const{_proxy:r,_context:s,_subProxy:a,_descriptors:o}=e;if(typeof s.index<"u"&&i(n))return t[s.index%t.length];if(je(t[0])){const l=t,c=r._scopes.filter(h=>h!==l);t=[];for(const h of l){const p=bd(c,r,n,h);t.push(Ta(p,s,a&&a[n],o))}}return t}function Qm(n,t,e){return cs(n)?n(t,e):n}const Ex=(n,t)=>n===!0?t:typeof n=="string"?ja(t,n):void 0;function Ox(n,t,e,i,r){for(const s of t){const a=Ex(e,s);if(a){n.add(a);const o=Qm(a._fallback,e,r);if(typeof o<"u"&&o!==e&&o!==i)return o}else if(a===!1&&typeof i<"u"&&e!==i)return null}return!1}function bd(n,t,e,i){const r=t._rootScopes,s=Qm(t._fallback,e,i),a=[...n,...r],o=new Set;o.add(i);let l=pg(o,a,e,s||e,i);return l===null||typeof s<"u"&&s!==e&&(l=pg(o,a,s,l,i),l===null)?!1:gd(Array.from(o),[""],r,s,()=>jx(t,e,i))}function pg(n,t,e,i,r){for(;e;)e=Ox(n,t,e,i,r);return e}function jx(n,t,e){const i=n._getTarget();t in i||(i[t]={});const r=i[t];return Pn(r)&&je(e)?e:r||{}}function Tx(n,t,e,i){let r;for(const s of t)if(r=t1(Nx(s,n),e),typeof r<"u")return md(n,r)?bd(e,i,n,r):r}function t1(n,t){for(const e of t){if(!e)continue;const i=e[n];if(typeof i<"u")return i}}function gg(n){let t=n._keys;return t||(t=n._keys=Rx(n._scopes)),t}function Rx(n){const t=new Set;for(const e of n)for(const i of Object.keys(e).filter(r=>!r.startsWith("_")))t.add(i);return Array.from(t)}function vd(){return typeof window<"u"&&typeof document<"u"}function yd(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Rc(n,t,e){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*t.parentNode[e])):i=n,i}const Wc=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function Ix(n,t){return Wc(n).getPropertyValue(t)}const Dx=["top","right","bottom","left"];function qs(n,t,e){const i={};e=e?"-"+e:"";for(let r=0;r<4;r++){const s=Dx[r];i[s]=parseFloat(n[t+"-"+s+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const Mx=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function Fx(n,t){const e=n.touches,i=e&&e.length?e[0]:n,{offsetX:r,offsetY:s}=i;let a=!1,o,l;if(Mx(r,s,n.target))o=r,l=s;else{const c=t.getBoundingClientRect();o=i.clientX-c.left,l=i.clientY-c.top,a=!0}return{x:o,y:l,box:a}}function Ts(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:i}=t,r=Wc(e),s=r.boxSizing==="border-box",a=qs(r,"padding"),o=qs(r,"border","width"),{x:l,y:c,box:h}=Fx(n,e),p=a.left+(h&&o.left),g=a.top+(h&&o.top);let{width:d,height:v}=t;return s&&(d-=a.width+o.width,v-=a.height+o.height),{x:Math.round((l-p)/d*e.width/i),y:Math.round((c-g)/v*e.height/i)}}function Bx(n,t,e){let i,r;if(t===void 0||e===void 0){const s=n&&yd(n);if(!s)t=n.clientWidth,e=n.clientHeight;else{const a=s.getBoundingClientRect(),o=Wc(s),l=qs(o,"border","width"),c=qs(o,"padding");t=a.width-c.width-l.width,e=a.height-c.height-l.height,i=Rc(o.maxWidth,s,"clientWidth"),r=Rc(o.maxHeight,s,"clientHeight")}}return{width:t,height:e,maxWidth:i||Oc,maxHeight:r||Oc}}const rs=n=>Math.round(n*10)/10;function Ux(n,t,e,i){const r=Wc(n),s=qs(r,"margin"),a=Rc(r.maxWidth,n,"clientWidth")||Oc,o=Rc(r.maxHeight,n,"clientHeight")||Oc,l=Bx(n,t,e);let{width:c,height:h}=l;if(r.boxSizing==="content-box"){const g=qs(r,"border","width"),d=qs(r,"padding");c-=d.width+g.width,h-=d.height+g.height}return c=Math.max(0,c-s.width),h=Math.max(0,i?c/i:h-s.height),c=rs(Math.min(c,a,l.maxWidth)),h=rs(Math.min(h,o,l.maxHeight)),c&&!h&&(h=rs(c/2)),(t!==void 0||e!==void 0)&&i&&l.height&&h>l.height&&(h=l.height,c=rs(Math.floor(h*i))),{width:c,height:h}}function mg(n,t,e){const i=t||1,r=rs(n.height*i),s=rs(n.width*i);n.height=rs(n.height),n.width=rs(n.width);const a=n.canvas;return a.style&&(e||!a.style.height&&!a.style.width)&&(a.style.height=`${n.height}px`,a.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||a.height!==r||a.width!==s?(n.currentDevicePixelRatio=i,a.height=r,a.width=s,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const qx=function(){let n=!1;try{const t={get passive(){return n=!0,!1}};vd()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n}();function bg(n,t){const e=Ix(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}const zx=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,i){return e-i},leftForLtr(e,i){return e-i}}},$x=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function Oa(n,t,e){return n?zx(t,e):$x()}function e1(n,t){let e,i;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function n1(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function tc(n,t,e){return n.options.clip?n[e]:t[e]}function Hx(n,t){const{xScale:e,yScale:i}=n;return e&&i?{left:tc(e,t,"left"),right:tc(e,t,"right"),top:tc(i,t,"top"),bottom:tc(i,t,"bottom")}:t}function Wx(n,t){const e=t._clip;if(e.disabled)return!1;const i=Hx(t,n.chartArea);return{left:e.left===!1?0:i.left-(e.left===!0?0:e.left),right:e.right===!1?n.width:i.right+(e.right===!0?0:e.right),top:e.top===!1?0:i.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?n.height:i.bottom+(e.bottom===!0?0:e.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Vx{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,r){const s=e.listeners[r],a=e.duration;s.forEach(o=>o({chart:t,initial:e.initial,numSteps:a,currentStep:Math.min(i-e.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=$m.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const s=i.items;let a=s.length-1,o=!1,l;for(;a>=0;--a)l=s[a],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(t),o=!0):(s[a]=s[s.length-1],s.pop());o&&(r.draw(),this._notify(r,i,t,"progress")),s.length||(i.running=!1,this._notify(r,i,t,"complete"),i.initial=!1),e+=s.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Lr=new Vx;const vg="transparent",Gx={boolean(n,t,e){return e>.5?t:n},color(n,t,e){const i=cg(n||vg),r=i.valid&&cg(t||vg);return r&&r.valid?r.mix(i,e).hexString():t},number(n,t,e){return n+(t-n)*e}};class Kx{constructor(t,e,i,r){const s=e[i];r=Ql([t.to,r,s,t.from]);const a=Ql([t.from,s,r]);this._active=!0,this._fn=t.fn||Gx[t.type||typeof a],this._easing=jo[t.easing]||jo.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=a,this._to=r,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const r=this._target[this._prop],s=i-this._start,a=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(a,t.duration)),this._total+=s,this._loop=!!t.loop,this._to=Ql([t.to,e,r,t.from]),this._from=Ql([t.from,r,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,r=this._prop,s=this._from,a=this._loop,o=this._to;let l;if(this._active=s!==o&&(a||e<i),!this._active){this._target[r]=o,this._notify(!0);return}if(e<0){this._target[r]=s;return}l=e/i%2,l=a&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(s,o,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][e]()}}class i1{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!je(t))return;const e=Object.keys(gn.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const s=t[r];if(!je(s))return;const a={};for(const o of e)a[o]=s[o];(Pn(s.properties)&&s.properties||[r]).forEach(o=>{(o===r||!i.has(o))&&i.set(o,a)})})}_animateOptions(t,e){const i=e.options,r=Jx(t,i);if(!r)return[];const s=this._createAnimations(r,i);return i.$shared&&Yx(t.options.$animations,i).then(()=>{t.options=i},()=>{}),s}_createAnimations(t,e){const i=this._properties,r=[],s=t.$animations||(t.$animations={}),a=Object.keys(e),o=Date.now();let l;for(l=a.length-1;l>=0;--l){const c=a[l];if(c.charAt(0)==="$")continue;if(c==="options"){r.push(...this._animateOptions(t,e));continue}const h=e[c];let p=s[c];const g=i.get(c);if(p)if(g&&p.active()){p.update(g,h,o);continue}else p.cancel();if(!g||!g.duration){t[c]=h;continue}s[c]=p=new Kx(g,t,c,h),r.push(p)}return r}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const i=this._createAnimations(t,e);if(i.length)return Lr.add(this._chart,i),!0}}function Yx(n,t){const e=[],i=Object.keys(t);for(let r=0;r<i.length;r++){const s=n[i[r]];s&&s.active()&&e.push(s.wait())}return Promise.all(e)}function Jx(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function yg(n,t){const e=n&&n.options||{},i=e.reverse,r=e.min===void 0?t:0,s=e.max===void 0?t:0;return{start:i?s:r,end:i?r:s}}function Xx(n,t,e){if(e===!1)return!1;const i=yg(n,e),r=yg(t,e);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function Zx(n){let t,e,i,r;return je(n)?(t=n.top,e=n.right,i=n.bottom,r=n.left):t=e=i=r=n,{top:t,right:e,bottom:i,left:r,disabled:n===!1}}function r1(n,t){const e=[],i=n._getSortedDatasetMetas(t);let r,s;for(r=0,s=i.length;r<s;++r)e.push(i[r].index);return e}function wg(n,t,e,i={}){const r=n.keys,s=i.mode==="single";let a,o,l,c;if(t===null)return;let h=!1;for(a=0,o=r.length;a<o;++a){if(l=+r[a],l===e){if(h=!0,i.all)continue;break}c=n.values[l],Ni(c)&&(s||t===0||os(t)===os(c))&&(t+=c)}return!h&&!i.all?0:t}function Qx(n,t){const{iScale:e,vScale:i}=t,r=e.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",a=Object.keys(n),o=new Array(a.length);let l,c,h;for(l=0,c=a.length;l<c;++l)h=a[l],o[l]={[r]:h,[s]:n[h]};return o}function uu(n,t){const e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function t3(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function e3(n){const{min:t,max:e,minDefined:i,maxDefined:r}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:r?e:Number.POSITIVE_INFINITY}}function n3(n,t,e){const i=n[t]||(n[t]={});return i[e]||(i[e]={})}function _g(n,t,e,i){for(const r of t.getMatchingVisibleMetas(i).reverse()){const s=n[r.index];if(e&&s>0||!e&&s<0)return r.index}return null}function xg(n,t){const{chart:e,_cachedMeta:i}=n,r=e._stacks||(e._stacks={}),{iScale:s,vScale:a,index:o}=i,l=s.axis,c=a.axis,h=t3(s,a,i),p=t.length;let g;for(let d=0;d<p;++d){const v=t[d],{[l]:y,[c]:x}=v,_=v._stacks||(v._stacks={});g=_[c]=n3(r,h,y),g[o]=x,g._top=_g(g,a,!0,i.type),g._bottom=_g(g,a,!1,i.type);const E=g._visualValues||(g._visualValues={});E[o]=x}}function du(n,t){const e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function i3(n,t){return Da(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function r3(n,t,e){return Da(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function mo(n,t){const e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(const r of t){const s=r._stacks;if(!s||s[i]===void 0||s[i][e]===void 0)return;delete s[i][e],s[i]._visualValues!==void 0&&s[i]._visualValues[e]!==void 0&&delete s[i]._visualValues[e]}}}const fu=n=>n==="reset"||n==="none",Sg=(n,t)=>t?n:Object.assign({},n),s3=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:r1(e,!0),values:null};class Ro{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=uu(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&mo(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),r=(p,g,d,v)=>p==="x"?g:p==="r"?v:d,s=e.xAxisID=Oe(i.xAxisID,du(t,"x")),a=e.yAxisID=Oe(i.yAxisID,du(t,"y")),o=e.rAxisID=Oe(i.rAxisID,du(t,"r")),l=e.indexAxis,c=e.iAxisID=r(l,s,a,o),h=e.vAxisID=r(l,a,s,o);e.xScale=this.getScaleForId(s),e.yScale=this.getScaleForId(a),e.rScale=this.getScaleForId(o),e.iScale=this.getScaleForId(c),e.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&ag(this._data,this),t._stacked&&mo(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(je(e)){const r=this._cachedMeta;this._data=Qx(e,r)}else if(i!==e){if(i){ag(i,this);const r=this._cachedMeta;mo(r),r._parsed=[]}e&&Object.isExtensible(e)&&sx(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const s=e._stacked;e._stacked=uu(e.vScale,e),e.stack!==i.stack&&(r=!0,mo(e),e.stack=i.stack),this._resyncElements(t),(r||s!==e._stacked)&&(xg(this,e._parsed),e._stacked=uu(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:r}=this,{iScale:s,_stacked:a}=i,o=s.axis;let l=t===0&&e===r.length?!0:i._sorted,c=t>0&&i._parsed[t-1],h,p,g;if(this._parsing===!1)i._parsed=r,i._sorted=!0,g=r;else{Pn(r[t])?g=this.parseArrayData(i,r,t,e):je(r[t])?g=this.parseObjectData(i,r,t,e):g=this.parsePrimitiveData(i,r,t,e);const d=()=>p[o]===null||c&&p[o]<c[o];for(h=0;h<e;++h)i._parsed[h+t]=p=g[h],l&&(d()&&(l=!1),c=p);i._sorted=l}a&&xg(this,g)}parsePrimitiveData(t,e,i,r){const{iScale:s,vScale:a}=t,o=s.axis,l=a.axis,c=s.getLabels(),h=s===a,p=new Array(r);let g,d,v;for(g=0,d=r;g<d;++g)v=g+i,p[g]={[o]:h||s.parse(c[v],v),[l]:a.parse(e[v],v)};return p}parseArrayData(t,e,i,r){const{xScale:s,yScale:a}=t,o=new Array(r);let l,c,h,p;for(l=0,c=r;l<c;++l)h=l+i,p=e[h],o[l]={x:s.parse(p[0],h),y:a.parse(p[1],h)};return o}parseObjectData(t,e,i,r){const{xScale:s,yScale:a}=t,{xAxisKey:o="x",yAxisKey:l="y"}=this._parsing,c=new Array(r);let h,p,g,d;for(h=0,p=r;h<p;++h)g=h+i,d=e[g],c[h]={x:s.parse(ja(d,o),g),y:a.parse(ja(d,l),g)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const r=this.chart,s=this._cachedMeta,a=e[t.axis],o={keys:r1(r,!0),values:e._stacks[t.axis]._visualValues};return wg(o,a,s.index,{mode:i})}updateRangeFromParsed(t,e,i,r){const s=i[e.axis];let a=s===null?NaN:s;const o=r&&i._stacks[e.axis];r&&o&&(r.values=o,a=wg(r,s,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,e){const i=this._cachedMeta,r=i._parsed,s=i._sorted&&t===i.iScale,a=r.length,o=this._getOtherScale(t),l=s3(e,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:p}=e3(o);let g,d;function v(){d=r[g];const y=d[o.axis];return!Ni(d[t.axis])||h>y||p<y}for(g=0;g<a&&!(!v()&&(this.updateRangeFromParsed(c,t,d,l),s));++g);if(s){for(g=a-1;g>=0;--g)if(!v()){this.updateRangeFromParsed(c,t,d,l);break}}return c}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let r,s,a;for(r=0,s=e.length;r<s;++r)a=e[r][t.axis],Ni(a)&&i.push(a);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,r=e.vScale,s=this.getParsed(t);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=Zx(Oe(this.options.clip,Xx(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,r=i.data||[],s=e.chartArea,a=[],o=this._drawStart||0,l=this._drawCount||r.length-o,c=this.options.drawActiveElementsOnTop;let h;for(i.dataset&&i.dataset.draw(t,s,o,l),h=o;h<o+l;++h){const p=r[h];p.hidden||(p.active&&c?a.push(p):p.draw(t,s))}for(h=0;h<a.length;++h)a[h].draw(t,s)}getStyle(t,e){const i=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const r=this.getDataset();let s;if(t>=0&&t<this._cachedMeta.data.length){const a=this._cachedMeta.data[t];s=a.$context||(a.$context=r3(this.getContext(),t,a)),s.parsed=this.getParsed(t),s.raw=r.data[t],s.index=s.dataIndex=t}else s=this.$context||(this.$context=i3(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!e,s.mode=i,s}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const r=e==="active",s=this._cachedDataOpts,a=t+"-"+e,o=s[a],l=this.enableOptionSharing&&Vo(i);if(o)return Sg(o,l);const c=this.chart.config,h=c.datasetElementScopeKeys(this._type,t),p=r?[`${t}Hover`,"hover",t,""]:[t,""],g=c.getOptionScopes(this.getDataset(),h),d=Object.keys(gn.elements[t]),v=()=>this.getContext(i,r,e),y=c.resolveNamedOptions(g,d,v,p);return y.$shared&&(y.$shared=l,s[a]=Object.freeze(Sg(y,l))),y}_resolveAnimations(t,e,i){const r=this.chart,s=this._cachedDataOpts,a=`animation-${e}`,o=s[a];if(o)return o;let l;if(r.options.animation!==!1){const h=this.chart.config,p=h.datasetAnimationScopeKeys(this._type,e),g=h.getOptionScopes(this.getDataset(),p);l=h.createResolver(g,this.getContext(t,i,e))}const c=new i1(r,l&&l.animations);return l&&l._cacheable&&(s[a]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||fu(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),r=this._sharedOptions,s=this.getSharedOptions(i),a=this.includeOptions(e,s)||s!==r;return this.updateSharedOptions(s,e,i),{sharedOptions:s,includeOptions:a}}updateElement(t,e,i,r){fu(r)?Object.assign(t,i):this._resolveAnimations(e,r).update(t,i)}updateSharedOptions(t,e,i){t&&!fu(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,r){t.active=r;const s=this.getStyle(e,r);this._resolveAnimations(e,i,r).update(t,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[o,l,c]of this._syncList)this[o](l,c);this._syncList=[];const r=i.length,s=e.length,a=Math.min(s,r);a&&this.parse(0,a),s>r?this._insertElements(r,s-r,t):s<r&&this._removeElements(s,r-s)}_insertElements(t,e,i=!0){const r=this._cachedMeta,s=r.data,a=t+e;let o;const l=c=>{for(c.length+=e,o=c.length-1;o>=a;o--)c[o]=c[o-e]};for(l(s),o=t;o<a;++o)s[o]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(t,e),i&&this.updateElements(s,t,e,"reset")}updateElements(t,e,i,r){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(t,e);i._stacked&&mo(i,r)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,r]=t;this[e](i,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Rt(Ro,"defaults",{}),Rt(Ro,"datasetElementType",null),Rt(Ro,"dataElementType",null);function a3(n,t){if(!n._cache.$bar){const e=n.getMatchingVisibleMetas(t);let i=[];for(let r=0,s=e.length;r<s;r++)i=i.concat(e[r].controller.getAllParsedValues(n));n._cache.$bar=zm(i.sort((r,s)=>r-s))}return n._cache.$bar}function o3(n){const t=n.iScale,e=a3(t,n.type);let i=t._length,r,s,a,o;const l=()=>{a===32767||a===-32768||(Vo(o)&&(i=Math.min(i,Math.abs(a-o)||i)),o=a)};for(r=0,s=e.length;r<s;++r)a=t.getPixelForValue(e[r]),l();for(o=void 0,r=0,s=t.ticks.length;r<s;++r)a=t.getPixelForTick(r),l();return i}function l3(n,t,e,i){const r=e.barThickness;let s,a;return He(r)?(s=t.min*e.categoryPercentage,a=e.barPercentage):(s=r*i,a=1),{chunk:s/i,ratio:a,start:t.pixels[n]-s/2}}function c3(n,t,e,i){const r=t.pixels,s=r[n];let a=n>0?r[n-1]:null,o=n<r.length-1?r[n+1]:null;const l=e.categoryPercentage;a===null&&(a=s-(o===null?t.end-t.start:o-s)),o===null&&(o=s+s-a);const c=s-(s-Math.min(a,o))/2*l;return{chunk:Math.abs(o-a)/2*l/i,ratio:e.barPercentage,start:c}}function h3(n,t,e,i){const r=e.parse(n[0],i),s=e.parse(n[1],i),a=Math.min(r,s),o=Math.max(r,s);let l=a,c=o;Math.abs(a)>Math.abs(o)&&(l=o,c=a),t[e.axis]=c,t._custom={barStart:l,barEnd:c,start:r,end:s,min:a,max:o}}function s1(n,t,e,i){return Pn(n)?h3(n,t,e,i):t[e.axis]=e.parse(n,i),t}function kg(n,t,e,i){const r=n.iScale,s=n.vScale,a=r.getLabels(),o=r===s,l=[];let c,h,p,g;for(c=e,h=e+i;c<h;++c)g=t[c],p={},p[r.axis]=o||r.parse(a[c],c),l.push(s1(g,p,s,c));return l}function pu(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function u3(n,t,e){return n!==0?os(n):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function d3(n){let t,e,i,r,s;return n.horizontal?(t=n.base>n.x,e="left",i="right"):(t=n.base<n.y,e="bottom",i="top"),t?(r="end",s="start"):(r="start",s="end"),{start:e,end:i,reverse:t,top:r,bottom:s}}function f3(n,t,e,i){let r=t.borderSkipped;const s={};if(!r){n.borderSkipped=s;return}if(r===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:a,end:o,reverse:l,top:c,bottom:h}=d3(n);r==="middle"&&e&&(n.enableBorderRadius=!0,(e._top||0)===i?r=c:(e._bottom||0)===i?r=h:(s[Ag(h,a,o,l)]=!0,r=c)),s[Ag(r,a,o,l)]=!0,n.borderSkipped=s}function Ag(n,t,e,i){return i?(n=p3(n,t,e),n=Ng(n,e,t)):n=Ng(n,t,e),n}function p3(n,t,e){return n===t?e:n===e?t:n}function Ng(n,t,e){return n==="start"?t:n==="end"?e:n}function g3(n,{inflateAmount:t},e){n.inflateAmount=t==="auto"?e===1?.33:0:t}class pc extends Ro{parsePrimitiveData(t,e,i,r){return kg(t,e,i,r)}parseArrayData(t,e,i,r){return kg(t,e,i,r)}parseObjectData(t,e,i,r){const{iScale:s,vScale:a}=t,{xAxisKey:o="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?o:l,h=a.axis==="x"?o:l,p=[];let g,d,v,y;for(g=i,d=i+r;g<d;++g)y=e[g],v={},v[s.axis]=s.parse(ja(y,c),g),p.push(s1(ja(y,h),v,a,g));return p}updateRangeFromParsed(t,e,i,r){super.updateRangeFromParsed(t,e,i,r);const s=i._custom;s&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,s.min),t.max=Math.max(t.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:i,vScale:r}=e,s=this.getParsed(t),a=s._custom,o=pu(a)?"["+a.start+", "+a.end+"]":""+r.getLabelForValue(s[r.axis]);return{label:""+i.getLabelForValue(s[i.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,i,r){const s=r==="reset",{index:a,_cachedMeta:{vScale:o}}=this,l=o.getBasePixel(),c=o.isHorizontal(),h=this._getRuler(),{sharedOptions:p,includeOptions:g}=this._getSharedOptions(e,r);for(let d=e;d<e+i;d++){const v=this.getParsed(d),y=s||He(v[o.axis])?{base:l,head:l}:this._calculateBarValuePixels(d),x=this._calculateBarIndexPixels(d,h),_=(v._stacks||{})[o.axis],E={horizontal:c,base:y.base,enableBorderRadius:!_||pu(v._custom)||a===_._top||a===_._bottom,x:c?y.head:x.center,y:c?x.center:y.head,height:c?x.size:Math.abs(y.size),width:c?Math.abs(y.size):x.size};g&&(E.options=p||this.resolveDataElementOptions(d,t[d].active?"active":r));const O=E.options||t[d].options;f3(E,O,_,a),g3(E,O,h.ratio),this.updateElement(t[d],d,E,r)}}_getStacks(t,e){const{iScale:i}=this._cachedMeta,r=i.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),s=i.options.stacked,a=[],o=this._cachedMeta.controller.getParsed(e),l=o&&o[i.axis],c=h=>{const p=h._parsed.find(d=>d[i.axis]===l),g=p&&p[h.vScale.axis];if(He(g)||isNaN(g))return!0};for(const h of r)if(!(e!==void 0&&c(h))&&((s===!1||a.indexOf(h.stack)===-1||s===void 0&&h.stack===void 0)&&a.push(h.stack),h.index===t))break;return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,e=this.chart.options.indexAxis;return Object.keys(t).filter(i=>t[i].axis===e).shift()}_getAxis(){const t={},e=this.getFirstScaleIdForIndexAxis();for(const i of this.chart.data.datasets)t[Oe(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,e)]=!0;return Object.keys(t)}_getStackIndex(t,e,i){const r=this._getStacks(t,i),s=e!==void 0?r.indexOf(e):-1;return s===-1?r.length-1:s}_getRuler(){const t=this.options,e=this._cachedMeta,i=e.iScale,r=[];let s,a;for(s=0,a=e.data.length;s<a;++s)r.push(i.getPixelForValue(this.getParsed(s)[i.axis],s));const o=t.barThickness;return{min:o||o3(e),pixels:r,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:o?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:i,index:r},options:{base:s,minBarLength:a}}=this,o=s||0,l=this.getParsed(t),c=l._custom,h=pu(c);let p=l[e.axis],g=0,d=i?this.applyStack(e,l,i):p,v,y;d!==p&&(g=d-p,d=p),h&&(p=c.barStart,d=c.barEnd-c.barStart,p!==0&&os(p)!==os(c.barEnd)&&(g=0),g+=p);const x=!He(s)&&!h?s:g;let _=e.getPixelForValue(x);if(this.chart.getDataVisibility(t)?v=e.getPixelForValue(g+d):v=_,y=v-_,Math.abs(y)<a){y=u3(y,e,o)*a,p===o&&(_-=y/2);const E=e.getPixelForDecimal(0),O=e.getPixelForDecimal(1),T=Math.min(E,O),V=Math.max(E,O);_=Math.max(Math.min(_,V),T),v=_+y,i&&!h&&(l._stacks[e.axis]._visualValues[r]=e.getValueForPixel(v)-e.getValueForPixel(_))}if(_===e.getPixelForValue(o)){const E=os(y)*e.getLineWidthForValue(o)/2;_+=E,y-=E}return{size:y,base:_,head:v,center:v+y/2}}_calculateBarIndexPixels(t,e){const i=e.scale,r=this.options,s=r.skipNull,a=Oe(r.maxBarThickness,1/0);let o,l;const c=this._getAxisCount();if(e.grouped){const h=s?this._getStackCount(t):e.stackCount,p=r.barThickness==="flex"?c3(t,e,r,h*c):l3(t,e,r,h*c),g=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,d=this._getAxis().indexOf(Oe(g,this.getFirstScaleIdForIndexAxis())),v=this._getStackIndex(this.index,this._cachedMeta.stack,s?t:void 0)+d;o=p.start+p.chunk*v+p.chunk/2,l=Math.min(a,p.chunk*p.ratio)}else o=i.getPixelForValue(this.getParsed(t)[i.axis],t),l=Math.min(a,e.min*e.ratio);return{base:o-l/2,head:o+l/2,center:o,size:l}}draw(){const t=this._cachedMeta,e=t.vScale,i=t.data,r=i.length;let s=0;for(;s<r;++s)this.getParsed(s)[e.axis]!==null&&!i[s].hidden&&i[s].draw(this._ctx)}}Rt(pc,"id","bar"),Rt(pc,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Rt(pc,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function Es(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class wd{constructor(t){Rt(this,"options");this.options=t||{}}static override(t){Object.assign(wd.prototype,t)}init(){}formats(){return Es()}parse(){return Es()}format(){return Es()}add(){return Es()}diff(){return Es()}startOf(){return Es()}endOf(){return Es()}}var m3={_date:wd};function b3(n,t,e,i){const{controller:r,data:s,_sorted:a}=n,o=r._cachedMeta.iScale,l=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(o&&t===o.axis&&t!=="r"&&a&&s.length){const c=o._reversePixels?ix:Vu;if(i){if(r._sharedOptions){const h=s[0],p=typeof h.getRange=="function"&&h.getRange(t);if(p){const g=c(s,t,e-p),d=c(s,t,e+p);return{lo:g.lo,hi:d.hi}}}}else{const h=c(s,t,e);if(l){const{vScale:p}=r._cachedMeta,{_parsed:g}=n,d=g.slice(0,h.lo+1).reverse().findIndex(y=>!He(y[p.axis]));h.lo-=Math.max(0,d);const v=g.slice(h.hi).findIndex(y=>!He(y[p.axis]));h.hi+=Math.max(0,v)}return h}}return{lo:0,hi:s.length-1}}function Vc(n,t,e,i,r){const s=n.getSortedVisibleDatasetMetas(),a=e[t];for(let o=0,l=s.length;o<l;++o){const{index:c,data:h}=s[o],{lo:p,hi:g}=b3(s[o],t,a,r);for(let d=p;d<=g;++d){const v=h[d];v.skip||i(v,c,d)}}}function v3(n){const t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(i,r){const s=t?Math.abs(i.x-r.x):0,a=e?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(a,2))}}function gu(n,t,e,i,r){const s=[];return!r&&!n.isPointInArea(t)||Vc(n,e,t,function(o,l,c){!r&&!Ym(o,n.chartArea,0)||o.inRange(t.x,t.y,i)&&s.push({element:o,datasetIndex:l,index:c})},!0),s}function y3(n,t,e,i){let r=[];function s(a,o,l){const{startAngle:c,endAngle:h}=a.getProps(["startAngle","endAngle"],i),{angle:p}=Bm(a,{x:t.x,y:t.y});Um(p,c,h)&&r.push({element:a,datasetIndex:o,index:l})}return Vc(n,e,t,s),r}function w3(n,t,e,i,r,s){let a=[];const o=v3(e);let l=Number.POSITIVE_INFINITY;function c(h,p,g){const d=h.inRange(t.x,t.y,r);if(i&&!d)return;const v=h.getCenterPoint(r);if(!(!!s||n.isPointInArea(v))&&!d)return;const x=o(t,v);x<l?(a=[{element:h,datasetIndex:p,index:g}],l=x):x===l&&a.push({element:h,datasetIndex:p,index:g})}return Vc(n,e,t,c),a}function mu(n,t,e,i,r,s){return!s&&!n.isPointInArea(t)?[]:e==="r"&&!i?y3(n,t,e,r):w3(n,t,e,i,r,s)}function Lg(n,t,e,i,r){const s=[],a=e==="x"?"inXRange":"inYRange";let o=!1;return Vc(n,e,t,(l,c,h)=>{l[a]&&l[a](t[e],r)&&(s.push({element:l,datasetIndex:c,index:h}),o=o||l.inRange(t.x,t.y,r))}),i&&!o?[]:s}var _3={modes:{index(n,t,e,i){const r=Ts(t,n),s=e.axis||"x",a=e.includeInvisible||!1,o=e.intersect?gu(n,r,s,i,a):mu(n,r,s,!1,i,a),l=[];return o.length?(n.getSortedVisibleDatasetMetas().forEach(c=>{const h=o[0].index,p=c.data[h];p&&!p.skip&&l.push({element:p,datasetIndex:c.index,index:h})}),l):[]},dataset(n,t,e,i){const r=Ts(t,n),s=e.axis||"xy",a=e.includeInvisible||!1;let o=e.intersect?gu(n,r,s,i,a):mu(n,r,s,!1,i,a);if(o.length>0){const l=o[0].datasetIndex,c=n.getDatasetMeta(l).data;o=[];for(let h=0;h<c.length;++h)o.push({element:c[h],datasetIndex:l,index:h})}return o},point(n,t,e,i){const r=Ts(t,n),s=e.axis||"xy",a=e.includeInvisible||!1;return gu(n,r,s,i,a)},nearest(n,t,e,i){const r=Ts(t,n),s=e.axis||"xy",a=e.includeInvisible||!1;return mu(n,r,s,e.intersect,i,a)},x(n,t,e,i){const r=Ts(t,n);return Lg(n,r,"x",e.intersect,i)},y(n,t,e,i){const r=Ts(t,n);return Lg(n,r,"y",e.intersect,i)}}};const a1=["left","top","right","bottom"];function bo(n,t){return n.filter(e=>e.pos===t)}function Pg(n,t){return n.filter(e=>a1.indexOf(e.pos)===-1&&e.box.axis===t)}function vo(n,t){return n.sort((e,i)=>{const r=t?i:e,s=t?e:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function x3(n){const t=[];let e,i,r,s,a,o;for(e=0,i=(n||[]).length;e<i;++e)r=n[e],{position:s,options:{stack:a,stackWeight:o=1}}=r,t.push({index:e,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:a&&s+a,stackWeight:o});return t}function S3(n){const t={};for(const e of n){const{stack:i,pos:r,stackWeight:s}=e;if(!i||!a1.includes(r))continue;const a=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=s}return t}function k3(n,t){const e=S3(n),{vBoxMaxWidth:i,hBoxMaxHeight:r}=t;let s,a,o;for(s=0,a=n.length;s<a;++s){o=n[s];const{fullSize:l}=o.box,c=e[o.stack],h=c&&o.stackWeight/c.weight;o.horizontal?(o.width=h?h*i:l&&t.availableWidth,o.height=r):(o.width=i,o.height=h?h*r:l&&t.availableHeight)}return e}function A3(n){const t=x3(n),e=vo(t.filter(c=>c.box.fullSize),!0),i=vo(bo(t,"left"),!0),r=vo(bo(t,"right")),s=vo(bo(t,"top"),!0),a=vo(bo(t,"bottom")),o=Pg(t,"x"),l=Pg(t,"y");return{fullSize:e,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(a).concat(o),chartArea:bo(t,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(a).concat(o)}}function Cg(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function o1(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function N3(n,t,e,i){const{pos:r,box:s}=e,a=n.maxPadding;if(!je(r)){e.size&&(n[r]-=e.size);const p=i[e.stack]||{size:0,count:1};p.size=Math.max(p.size,e.horizontal?s.height:s.width),e.size=p.size/p.count,n[r]+=e.size}s.getPadding&&o1(a,s.getPadding());const o=Math.max(0,t.outerWidth-Cg(a,n,"left","right")),l=Math.max(0,t.outerHeight-Cg(a,n,"top","bottom")),c=o!==n.w,h=l!==n.h;return n.w=o,n.h=l,e.horizontal?{same:c,other:h}:{same:h,other:c}}function L3(n){const t=n.maxPadding;function e(i){const r=Math.max(t[i]-n[i],0);return n[i]+=r,r}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function P3(n,t){const e=t.maxPadding;function i(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(a=>{s[a]=Math.max(t[a],e[a])}),s}return i(n?["left","right"]:["top","bottom"])}function So(n,t,e,i){const r=[];let s,a,o,l,c,h;for(s=0,a=n.length,c=0;s<a;++s){o=n[s],l=o.box,l.update(o.width||t.w,o.height||t.h,P3(o.horizontal,t));const{same:p,other:g}=N3(t,e,o,i);c|=p&&r.length,h=h||g,l.fullSize||r.push(o)}return c&&So(r,t,e,i)||h}function ec(n,t,e,i,r){n.top=e,n.left=t,n.right=t+i,n.bottom=e+r,n.width=i,n.height=r}function Eg(n,t,e,i){const r=e.padding;let{x:s,y:a}=t;for(const o of n){const l=o.box,c=i[o.stack]||{placed:0,weight:1},h=o.stackWeight/c.weight||1;if(o.horizontal){const p=t.w*h,g=c.size||l.height;Vo(c.start)&&(a=c.start),l.fullSize?ec(l,r.left,a,e.outerWidth-r.right-r.left,g):ec(l,t.left+c.placed,a,p,g),c.start=a,c.placed+=p,a=l.bottom}else{const p=t.h*h,g=c.size||l.width;Vo(c.start)&&(s=c.start),l.fullSize?ec(l,s,r.top,g,e.outerHeight-r.bottom-r.top):ec(l,s,t.top+c.placed,g,p),c.start=s,c.placed+=p,s=l.right}}t.x=s,t.y=a}var ki={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;const r=Li(n.options.layout.padding),s=Math.max(t-r.width,0),a=Math.max(e-r.height,0),o=A3(n.boxes),l=o.vertical,c=o.horizontal;Me(n.boxes,y=>{typeof y.beforeLayout=="function"&&y.beforeLayout()});const h=l.reduce((y,x)=>x.box.options&&x.box.options.display===!1?y:y+1,0)||1,p=Object.freeze({outerWidth:t,outerHeight:e,padding:r,availableWidth:s,availableHeight:a,vBoxMaxWidth:s/2/h,hBoxMaxHeight:a/2}),g=Object.assign({},r);o1(g,Li(i));const d=Object.assign({maxPadding:g,w:s,h:a,x:r.left,y:r.top},r),v=k3(l.concat(c),p);So(o.fullSize,d,p,v),So(l,d,p,v),So(c,d,p,v)&&So(l,d,p,v),L3(d),Eg(o.leftAndTop,d,p,v),d.x+=d.w,d.y+=d.h,Eg(o.rightAndBottom,d,p,v),n.chartArea={left:d.left,top:d.top,right:d.left+d.w,bottom:d.top+d.h,height:d.h,width:d.w},Me(o.chartArea,y=>{const x=y.box;Object.assign(x,n.chartArea),x.update(d.w,d.h,{left:0,top:0,right:0,bottom:0})})}};class l1{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,r){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):i)}}isAttached(t){return!0}updateConfig(t){}}class C3 extends l1{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const gc="$chartjs",E3={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Og=n=>n===null||n==="";function O3(n,t){const e=n.style,i=n.getAttribute("height"),r=n.getAttribute("width");if(n[gc]={initial:{height:i,width:r,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",Og(r)){const s=bg(n,"width");s!==void 0&&(n.width=s)}if(Og(i))if(n.style.height==="")n.height=n.width/(t||2);else{const s=bg(n,"height");s!==void 0&&(n.height=s)}return n}const c1=qx?{passive:!0}:!1;function j3(n,t,e){n&&n.addEventListener(t,e,c1)}function T3(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,c1)}function R3(n,t){const e=E3[n.type]||n.type,{x:i,y:r}=Ts(n,t);return{type:e,chart:t,native:n,x:i!==void 0?i:null,y:r!==void 0?r:null}}function Ic(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function I3(n,t,e){const i=n.canvas,r=new MutationObserver(s=>{let a=!1;for(const o of s)a=a||Ic(o.addedNodes,i),a=a&&!Ic(o.removedNodes,i);a&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}function D3(n,t,e){const i=n.canvas,r=new MutationObserver(s=>{let a=!1;for(const o of s)a=a||Ic(o.removedNodes,i),a=a&&!Ic(o.addedNodes,i);a&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}const Ko=new Map;let jg=0;function h1(){const n=window.devicePixelRatio;n!==jg&&(jg=n,Ko.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function M3(n,t){Ko.size||window.addEventListener("resize",h1),Ko.set(n,t)}function F3(n){Ko.delete(n),Ko.size||window.removeEventListener("resize",h1)}function B3(n,t,e){const i=n.canvas,r=i&&yd(i);if(!r)return;const s=Hm((o,l)=>{const c=r.clientWidth;e(o,l),c<r.clientWidth&&e()},window),a=new ResizeObserver(o=>{const l=o[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||s(c,h)});return a.observe(r),M3(n,s),a}function bu(n,t,e){e&&e.disconnect(),t==="resize"&&F3(n)}function U3(n,t,e){const i=n.canvas,r=Hm(s=>{n.ctx!==null&&e(R3(s,n))},n);return j3(i,t,r),r}class q3 extends l1{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(O3(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[gc])return!1;const i=e[gc].initial;["height","width"].forEach(s=>{const a=i[s];He(a)?e.removeAttribute(s):e.setAttribute(s,a)});const r=i.style||{};return Object.keys(r).forEach(s=>{e.style[s]=r[s]}),e.width=e.width,delete e[gc],!0}addEventListener(t,e,i){this.removeEventListener(t,e);const r=t.$proxies||(t.$proxies={}),a={attach:I3,detach:D3,resize:B3}[e]||U3;r[e]=a(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),r=i[e];if(!r)return;({attach:bu,detach:bu,resize:bu}[e]||T3)(t,e,r),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,r){return Ux(t,e,i,r)}isAttached(t){const e=t&&yd(t);return!!(e&&e.isConnected)}}function z3(n){return!vd()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?C3:q3}class Rr{constructor(){Rt(this,"x");Rt(this,"y");Rt(this,"active",!1);Rt(this,"options");Rt(this,"$animations")}tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return jc(this.x)&&jc(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const r={};return t.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}}Rt(Rr,"defaults",{}),Rt(Rr,"defaultRoutes");function $3(n,t){const e=n.options.ticks,i=H3(n),r=Math.min(e.maxTicksLimit||i,i),s=e.major.enabled?V3(t):[],a=s.length,o=s[0],l=s[a-1],c=[];if(a>r)return G3(t,c,s,a/r),c;const h=W3(s,t,r);if(a>0){let p,g;const d=a>1?Math.round((l-o)/(a-1)):null;for(nc(t,c,h,He(d)?0:o-d,o),p=0,g=a-1;p<g;p++)nc(t,c,h,s[p],s[p+1]);return nc(t,c,h,l,He(d)?t.length:l+d),c}return nc(t,c,h),c}function H3(n){const t=n.options.offset,e=n._tickSize(),i=n._length/e+(t?0:1),r=n._maxLength/e;return Math.floor(Math.min(i,r))}function W3(n,t,e){const i=K3(n),r=t.length/e;if(!i)return Math.max(r,1);const s=J_(i);for(let a=0,o=s.length-1;a<o;a++){const l=s[a];if(l>r)return l}return Math.max(r,1)}function V3(n){const t=[];let e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}function G3(n,t,e,i){let r=0,s=e[0],a;for(i=Math.ceil(i),a=0;a<n.length;a++)a===s&&(t.push(n[a]),r++,s=e[r*i])}function nc(n,t,e,i,r){const s=Oe(i,0),a=Math.min(Oe(r,n.length),n.length);let o=0,l,c,h;for(e=Math.ceil(e),r&&(l=r-i,e=l/Math.floor(l/e)),h=s;h<0;)o++,h=Math.round(s+o*e);for(c=Math.max(s,0);c<a;c++)c===h&&(t.push(n[c]),o++,h=Math.round(s+o*e))}function K3(n){const t=n.length;let e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}const Y3=n=>n==="left"?"right":n==="right"?"left":n,Tg=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,Rg=(n,t)=>Math.min(t||n,n);function Ig(n,t){const e=[],i=n.length/t,r=n.length;let s=0;for(;s<r;s+=i)e.push(n[Math.floor(s)]);return e}function J3(n,t,e){const i=n.ticks.length,r=Math.min(t,i-1),s=n._startPixel,a=n._endPixel,o=1e-6;let l=n.getPixelForTick(r),c;if(!(e&&(i===1?c=Math.max(l-s,a-l):t===0?c=(n.getPixelForTick(1)-l)/2:c=(l-n.getPixelForTick(r-1))/2,l+=r<t?c:-c,l<s-o||l>a+o)))return l}function X3(n,t){Me(n,e=>{const i=e.gc,r=i.length/2;let s;if(r>t){for(s=0;s<r;++s)delete e.data[i[s]];i.splice(0,r)}})}function yo(n){return n.drawTicks?n.tickLength:0}function Dg(n,t){if(!n.display)return 0;const e=Hn(n.font,t),i=Li(n.padding);return(Pn(n.text)?n.text.length:1)*e.lineHeight+i.height}function Z3(n,t){return Da(n,{scale:t,type:"scale"})}function Q3(n,t,e){return Da(n,{tick:e,index:t,type:"tick"})}function t4(n,t,e){let i=ud(n);return(e&&t!=="right"||!e&&t==="right")&&(i=Y3(i)),i}function e4(n,t,e,i){const{top:r,left:s,bottom:a,right:o,chart:l}=n,{chartArea:c,scales:h}=l;let p=0,g,d,v;const y=a-r,x=o-s;if(n.isHorizontal()){if(d=$n(i,s,o),je(e)){const _=Object.keys(e)[0],E=e[_];v=h[_].getPixelForValue(E)+y-t}else e==="center"?v=(c.bottom+c.top)/2+y-t:v=Tg(n,e,t);g=o-s}else{if(je(e)){const _=Object.keys(e)[0],E=e[_];d=h[_].getPixelForValue(E)-x+t}else e==="center"?d=(c.left+c.right)/2-x+t:d=Tg(n,e,t);v=$n(i,a,r),p=e==="left"?-Mn:Mn}return{titleX:d,titleY:v,maxWidth:g,rotation:p}}class Ma extends Rr{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:r}=this;return t=nr(t,Number.POSITIVE_INFINITY),e=nr(e,Number.NEGATIVE_INFINITY),i=nr(i,Number.POSITIVE_INFINITY),r=nr(r,Number.NEGATIVE_INFINITY),{min:nr(t,i),max:nr(e,r),minDefined:Ni(t),maxDefined:Ni(e)}}getMinMax(t){let{min:e,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),a;if(r&&s)return{min:e,max:i};const o=this.getMatchingVisibleMetas();for(let l=0,c=o.length;l<c;++l)a=o[l].controller.getMinMax(this,t),r||(e=Math.min(e,a.min)),s||(i=Math.max(i,a.max));return e=s&&e>i?i:e,i=r&&e>i?e:i,{min:nr(e,nr(i,e)),max:nr(i,nr(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ye(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:r,grace:s,ticks:a}=this.options,o=a.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Ax(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=o<this.ticks.length;this._convertTicksToLabels(l?Ig(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=$3(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ye(this.options.afterUpdate,[this])}beforeSetDimensions(){Ye(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ye(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Ye(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ye(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i],s.label=Ye(e.callback,[s.value,i,t],this)}afterTickToLabelConversion(){Ye(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ye(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=Rg(this.ticks.length,t.ticks.maxTicksLimit),r=e.minRotation||0,s=e.maxRotation;let a=r,o,l,c;if(!this._isVisible()||!e.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const h=this._getLabelSizes(),p=h.widest.width,g=h.highest.height,d=ni(this.chart.width-p,0,this.maxWidth);o=t.offset?this.maxWidth/i:d/(i-1),p+6>o&&(o=d/(i-(t.offset?.5:1)),l=this.maxHeight-yo(t.grid)-e.padding-Dg(t.title,this.chart.options.font),c=Math.sqrt(p*p+g*g),a=tx(Math.min(Math.asin(ni((h.highest.height+6)/o,-1,1)),Math.asin(ni(l/c,-1,1))-Math.asin(ni(g/c,-1,1)))),a=Math.max(r,Math.min(s,a))),this.labelRotation=a}afterCalculateLabelRotation(){Ye(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ye(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:r,grid:s}}=this,a=this._isVisible(),o=this.isHorizontal();if(a){const l=Dg(r,e.options.font);if(o?(t.width=this.maxWidth,t.height=yo(s)+l):(t.height=this.maxHeight,t.width=yo(s)+l),i.display&&this.ticks.length){const{first:c,last:h,widest:p,highest:g}=this._getLabelSizes(),d=i.padding*2,v=Fs(this.labelRotation),y=Math.cos(v),x=Math.sin(v);if(o){const _=i.mirror?0:x*p.width+y*g.height;t.height=Math.min(this.maxHeight,t.height+_+d)}else{const _=i.mirror?0:y*p.width+x*g.height;t.width=Math.min(this.maxWidth,t.width+_+d)}this._calculatePadding(c,h,x,y)}}this._handleMargins(),o?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,r){const{ticks:{align:s,padding:a},position:o}=this.options,l=this.labelRotation!==0,c=o!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,p=this.right-this.getPixelForTick(this.ticks.length-1);let g=0,d=0;l?c?(g=r*t.width,d=i*e.height):(g=i*t.height,d=r*e.width):s==="start"?d=e.width:s==="end"?g=t.width:s!=="inner"&&(g=t.width/2,d=e.width/2),this.paddingLeft=Math.max((g-h+a)*this.width/(this.width-h),0),this.paddingRight=Math.max((d-p+a)*this.width/(this.width-p),0)}else{let h=e.height/2,p=t.height/2;s==="start"?(h=0,p=t.height):s==="end"&&(h=e.height,p=0),this.paddingTop=h+a,this.paddingBottom=p+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ye(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,i;for(e=0,i=t.length;e<i;e++)He(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=Ig(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:r,_longestTextCache:s}=this,a=[],o=[],l=Math.floor(e/Rg(e,i));let c=0,h=0,p,g,d,v,y,x,_,E,O,T,V;for(p=0;p<e;p+=l){if(v=t[p].label,y=this._resolveTickFontOptions(p),r.font=x=y.string,_=s[x]=s[x]||{data:{},gc:[]},E=y.lineHeight,O=T=0,!He(v)&&!Pn(v))O=ug(r,_.data,_.gc,O,v),T=E;else if(Pn(v))for(g=0,d=v.length;g<d;++g)V=v[g],!He(V)&&!Pn(V)&&(O=ug(r,_.data,_.gc,O,V),T+=E);a.push(O),o.push(T),c=Math.max(O,c),h=Math.max(T,h)}X3(s,e);const Q=a.indexOf(c),J=o.indexOf(h),$=D=>({width:a[D]||0,height:o[D]||0});return{first:$(0),last:$(e-1),widest:$(Q),highest:$(J),widths:a,heights:o}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return nx(this._alignToPixels?Cs(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=Q3(this.getContext(),t,i))}return this.$context||(this.$context=Z3(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=Fs(this.labelRotation),i=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),s=this._getLabelSizes(),a=t.autoSkipPadding||0,o=s?s.widest.width+a:0,l=s?s.highest.height+a:0;return this.isHorizontal()?l*i>o*r?o/i:l/r:l*r<o*i?l/i:o/r}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,r=this.options,{grid:s,position:a,border:o}=r,l=s.offset,c=this.isHorizontal(),p=this.ticks.length+(l?1:0),g=yo(s),d=[],v=o.setContext(this.getContext()),y=v.display?v.width:0,x=y/2,_=function(ct){return Cs(i,ct,y)};let E,O,T,V,Q,J,$,D,Z,L,R,H;if(a==="top")E=_(this.bottom),J=this.bottom-g,D=E-x,L=_(t.top)+x,H=t.bottom;else if(a==="bottom")E=_(this.top),L=t.top,H=_(t.bottom)-x,J=E+x,D=this.top+g;else if(a==="left")E=_(this.right),Q=this.right-g,$=E-x,Z=_(t.left)+x,R=t.right;else if(a==="right")E=_(this.left),Z=t.left,R=_(t.right)-x,Q=E+x,$=this.left+g;else if(e==="x"){if(a==="center")E=_((t.top+t.bottom)/2+.5);else if(je(a)){const ct=Object.keys(a)[0],ot=a[ct];E=_(this.chart.scales[ct].getPixelForValue(ot))}L=t.top,H=t.bottom,J=E+x,D=J+g}else if(e==="y"){if(a==="center")E=_((t.left+t.right)/2);else if(je(a)){const ct=Object.keys(a)[0],ot=a[ct];E=_(this.chart.scales[ct].getPixelForValue(ot))}Q=E-x,$=Q-g,Z=t.left,R=t.right}const W=Oe(r.ticks.maxTicksLimit,p),et=Math.max(1,Math.ceil(p/W));for(O=0;O<p;O+=et){const ct=this.getContext(O),ot=s.setContext(ct),rt=o.setContext(ct),ht=ot.lineWidth,At=ot.color,wt=rt.dash||[],P=rt.dashOffset,q=ot.tickWidth,z=ot.tickColor,K=ot.tickBorderDash||[],X=ot.tickBorderDashOffset;T=J3(this,O,l),T!==void 0&&(V=Cs(i,T,ht),c?Q=$=Z=R=V:J=D=L=H=V,d.push({tx1:Q,ty1:J,tx2:$,ty2:D,x1:Z,y1:L,x2:R,y2:H,width:ht,color:At,borderDash:wt,borderDashOffset:P,tickWidth:q,tickColor:z,tickBorderDash:K,tickBorderDashOffset:X}))}return this._ticksLength=p,this._borderValue=E,d}_computeLabelItems(t){const e=this.axis,i=this.options,{position:r,ticks:s}=i,a=this.isHorizontal(),o=this.ticks,{align:l,crossAlign:c,padding:h,mirror:p}=s,g=yo(i.grid),d=g+h,v=p?-h:d,y=-Fs(this.labelRotation),x=[];let _,E,O,T,V,Q,J,$,D,Z,L,R,H="middle";if(r==="top")Q=this.bottom-v,J=this._getXAxisLabelAlignment();else if(r==="bottom")Q=this.top+v,J=this._getXAxisLabelAlignment();else if(r==="left"){const et=this._getYAxisLabelAlignment(g);J=et.textAlign,V=et.x}else if(r==="right"){const et=this._getYAxisLabelAlignment(g);J=et.textAlign,V=et.x}else if(e==="x"){if(r==="center")Q=(t.top+t.bottom)/2+d;else if(je(r)){const et=Object.keys(r)[0],ct=r[et];Q=this.chart.scales[et].getPixelForValue(ct)+d}J=this._getXAxisLabelAlignment()}else if(e==="y"){if(r==="center")V=(t.left+t.right)/2-d;else if(je(r)){const et=Object.keys(r)[0],ct=r[et];V=this.chart.scales[et].getPixelForValue(ct)}J=this._getYAxisLabelAlignment(g).textAlign}e==="y"&&(l==="start"?H="top":l==="end"&&(H="bottom"));const W=this._getLabelSizes();for(_=0,E=o.length;_<E;++_){O=o[_],T=O.label;const et=s.setContext(this.getContext(_));$=this.getPixelForTick(_)+s.labelOffset,D=this._resolveTickFontOptions(_),Z=D.lineHeight,L=Pn(T)?T.length:1;const ct=L/2,ot=et.color,rt=et.textStrokeColor,ht=et.textStrokeWidth;let At=J;a?(V=$,J==="inner"&&(_===E-1?At=this.options.reverse?"left":"right":_===0?At=this.options.reverse?"right":"left":At="center"),r==="top"?c==="near"||y!==0?R=-L*Z+Z/2:c==="center"?R=-W.highest.height/2-ct*Z+Z:R=-W.highest.height+Z/2:c==="near"||y!==0?R=Z/2:c==="center"?R=W.highest.height/2-ct*Z:R=W.highest.height-L*Z,p&&(R*=-1),y!==0&&!et.showLabelBackdrop&&(V+=Z/2*Math.sin(y))):(Q=$,R=(1-L)*Z/2);let wt;if(et.showLabelBackdrop){const P=Li(et.backdropPadding),q=W.heights[_],z=W.widths[_];let K=R-P.top,X=0-P.left;switch(H){case"middle":K-=q/2;break;case"bottom":K-=q;break}switch(J){case"center":X-=z/2;break;case"right":X-=z;break;case"inner":_===E-1?X-=z:_>0&&(X-=z/2);break}wt={left:X,top:K,width:z+P.width,height:q+P.height,color:et.backdropColor}}x.push({label:T,font:D,textOffset:R,options:{rotation:y,color:ot,strokeColor:rt,strokeWidth:ht,textAlign:At,textBaseline:H,translation:[V,Q],backdrop:wt}})}return x}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-Fs(this.labelRotation))return t==="top"?"left":"right";let r="center";return e.align==="start"?r="left":e.align==="end"?r="right":e.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,a=this._getLabelSizes(),o=t+s,l=a.widest.width;let c,h;return e==="left"?r?(h=this.right+s,i==="near"?c="left":i==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-o,i==="near"?c="right":i==="center"?(c="center",h-=l/2):(c="left",h=this.left)):e==="right"?r?(h=this.left+s,i==="near"?c="right":i==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+o,i==="near"?c="left":i==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:r,width:s,height:a}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,r,s,a),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const r=this.ticks.findIndex(s=>s.value===t);return r>=0?e.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let s,a;const o=(l,c,h)=>{!h.width||!h.color||(i.save(),i.lineWidth=h.width,i.strokeStyle=h.color,i.setLineDash(h.borderDash||[]),i.lineDashOffset=h.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(e.display)for(s=0,a=r.length;s<a;++s){const l=r[s];e.drawOnChartArea&&o({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),e.drawTicks&&o({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),a=i.display?s.width:0;if(!a)return;const o=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,h,p,g;this.isHorizontal()?(c=Cs(t,this.left,a)-a/2,h=Cs(t,this.right,o)+o/2,p=g=l):(p=Cs(t,this.top,a)-a/2,g=Cs(t,this.bottom,o)+o/2,c=h=l),e.save(),e.lineWidth=s.width,e.strokeStyle=s.color,e.beginPath(),e.moveTo(c,p),e.lineTo(h,g),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&dd(i,r);const s=this.getLabelItems(t);for(const a of s){const o=a.options,l=a.font,c=a.label,h=a.textOffset;Go(i,c,0,h,l,o)}r&&fd(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:r}}=this;if(!i.display)return;const s=Hn(i.font),a=Li(i.padding),o=i.align;let l=s.lineHeight/2;e==="bottom"||e==="center"||je(e)?(l+=a.bottom,Pn(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=a.top;const{titleX:c,titleY:h,maxWidth:p,rotation:g}=e4(this,l,e,o);Go(t,i.text,0,0,s,{color:i.color,maxWidth:p,rotation:g,textAlign:t4(o,e,r),textBaseline:"middle",translation:[c,h]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=Oe(t.grid&&t.grid.z,-1),r=Oe(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Ma.prototype.draw?[{z:e,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:e,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let s,a;for(s=0,a=e.length;s<a;++s){const o=e[s];o[i]===this.id&&(!t||o.type===t)&&r.push(o)}return r}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return Hn(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class ic{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;r4(e)&&(i=this.register(e));const r=this.items,s=t.id,a=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+t);return s in r||(r[s]=t,n4(t,a,i),this.override&&gn.override(t.id,t.overrides)),a}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,r=this.scope;i in e&&delete e[i],r&&i in gn[r]&&(delete gn[r][i],this.override&&delete Hs[i])}}function n4(n,t,e){const i=Wo(Object.create(null),[e?gn.get(e):{},gn.get(t),n.defaults]);gn.set(t,i),n.defaultRoutes&&i4(t,n.defaultRoutes),n.descriptors&&gn.describe(t,n.descriptors)}function i4(n,t){Object.keys(t).forEach(e=>{const i=e.split("."),r=i.pop(),s=[n].concat(i).join("."),a=t[e].split("."),o=a.pop(),l=a.join(".");gn.route(s,r,l,o)})}function r4(n){return"id"in n&&"defaults"in n}class s4{constructor(){this.controllers=new ic(Ro,"datasets",!0),this.elements=new ic(Rr,"elements"),this.plugins=new ic(Object,"plugins"),this.scales=new ic(Ma,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(r=>{const s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(t,s,r):Me(r,a=>{const o=i||this._getRegistryForType(a);this._exec(t,o,a)})})}_exec(t,e,i){const r=cd(t);Ye(i["before"+r],[],i),e[t](i),Ye(i["after"+r],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const r=e.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return r}}var sr=new s4;class a4{constructor(){this._init=void 0}notify(t,e,i,r){if(e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const s=r?this._descriptors(t).filter(r):this._descriptors(t),a=this._notify(s,t,e,i);return e==="afterDestroy"&&(this._notify(s,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),a}_notify(t,e,i,r){r=r||{};for(const s of t){const a=s.plugin,o=a[i],l=[e,r,s.options];if(Ye(o,l,a)===!1&&r.cancelable)return!1}return!0}invalidate(){He(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,r=Oe(i.options&&i.options.plugins,{}),s=o4(i);return r===!1&&!e?[]:c4(t,s,r,e)}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,r=(s,a)=>s.filter(o=>!a.some(l=>o.plugin.id===l.plugin.id));this._notify(r(e,i),t,"stop"),this._notify(r(i,e),t,"start")}}function o4(n){const t={},e=[],i=Object.keys(sr.plugins.items);for(let s=0;s<i.length;s++)e.push(sr.getPlugin(i[s]));const r=n.plugins||[];for(let s=0;s<r.length;s++){const a=r[s];e.indexOf(a)===-1&&(e.push(a),t[a.id]=!0)}return{plugins:e,localIds:t}}function l4(n,t){return!t&&n===!1?null:n===!0?{}:n}function c4(n,{plugins:t,localIds:e},i,r){const s=[],a=n.getContext();for(const o of t){const l=o.id,c=l4(i[l],r);c!==null&&s.push({plugin:o,options:h4(n.config,{plugin:o,local:e[l]},c,a)})}return s}function h4(n,{plugin:t,local:e},i,r){const s=n.pluginScopeKeys(t),a=n.getOptionScopes(i,s);return e&&t.defaults&&a.push(t.defaults),n.createResolver(a,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Ku(n,t){const e=gn.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function u4(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function d4(n,t){return n===t?"_index_":"_value_"}function Mg(n){if(n==="x"||n==="y"||n==="r")return n}function f4(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function Yu(n,...t){if(Mg(n))return n;for(const e of t){const i=e.axis||f4(e.position)||n.length>1&&Mg(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function Fg(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function p4(n,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(e.length)return Fg(n,"x",e[0])||Fg(n,"y",e[0])}return{}}function g4(n,t){const e=Hs[n.type]||{scales:{}},i=t.scales||{},r=Ku(n.type,t),s=Object.create(null);return Object.keys(i).forEach(a=>{const o=i[a];if(!je(o))return console.error(`Invalid scale configuration for scale: ${a}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const l=Yu(a,o,p4(a,n),gn.scales[o.type]),c=d4(l,r),h=e.scales||{};s[a]=Oo(Object.create(null),[{axis:l},o,h[l],h[c]])}),n.data.datasets.forEach(a=>{const o=a.type||n.type,l=a.indexAxis||Ku(o,t),h=(Hs[o]||{}).scales||{};Object.keys(h).forEach(p=>{const g=u4(p,l),d=a[g+"AxisID"]||g;s[d]=s[d]||Object.create(null),Oo(s[d],[{axis:g},i[d],h[p]])})}),Object.keys(s).forEach(a=>{const o=s[a];Oo(o,[gn.scales[o.type],gn.scale])}),s}function u1(n){const t=n.options||(n.options={});t.plugins=Oe(t.plugins,{}),t.scales=g4(n,t)}function d1(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function m4(n){return n=n||{},n.data=d1(n.data),u1(n),n}const Bg=new Map,f1=new Set;function rc(n,t){let e=Bg.get(n);return e||(e=t(),Bg.set(n,e),f1.add(e)),e}const wo=(n,t,e)=>{const i=ja(t,e);i!==void 0&&n.add(i)};class b4{constructor(t){this._config=m4(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=d1(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),u1(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return rc(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return rc(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return rc(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,i=this.type;return rc(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const i=this._scopeCache;let r=i.get(t);return(!r||e)&&(r=new Map,i.set(t,r)),r}getOptionScopes(t,e,i){const{options:r,type:s}=this,a=this._cachedScopes(t,i),o=a.get(e);if(o)return o;const l=new Set;e.forEach(h=>{t&&(l.add(t),h.forEach(p=>wo(l,t,p))),h.forEach(p=>wo(l,r,p)),h.forEach(p=>wo(l,Hs[s]||{},p)),h.forEach(p=>wo(l,gn,p)),h.forEach(p=>wo(l,Gu,p))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),f1.has(e)&&a.set(e,c),c}chartOptionScopes(){const{options:t,type:e}=this;return[t,Hs[e]||{},gn.datasets[e]||{},{type:e},gn,Gu]}resolveNamedOptions(t,e,i,r=[""]){const s={$shared:!0},{resolver:a,subPrefixes:o}=Ug(this._resolverCache,t,r);let l=a;if(y4(a,e)){s.$shared=!1,i=cs(i)?i():i;const c=this.createResolver(t,i,o);l=Ta(a,i,c)}for(const c of e)s[c]=l[c];return s}createResolver(t,e,i=[""],r){const{resolver:s}=Ug(this._resolverCache,t,i);return je(e)?Ta(s,e,void 0,r):s}}function Ug(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));const r=e.join();let s=i.get(r);return s||(s={resolver:gd(t,e),subPrefixes:e.filter(o=>!o.toLowerCase().includes("hover"))},i.set(r,s)),s}const v4=n=>je(n)&&Object.getOwnPropertyNames(n).some(t=>cs(n[t]));function y4(n,t){const{isScriptable:e,isIndexable:i}=Xm(n);for(const r of t){const s=e(r),a=i(r),o=(a||s)&&n[r];if(s&&(cs(o)||v4(o))||a&&Pn(o))return!0}return!1}var w4="4.5.1";const _4=["top","bottom","left","right","chartArea"];function qg(n,t){return n==="top"||n==="bottom"||_4.indexOf(n)===-1&&t==="x"}function zg(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function $g(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),Ye(e&&e.onComplete,[n],t)}function x4(n){const t=n.chart,e=t.options.animation;Ye(e&&e.onProgress,[n],t)}function p1(n){return vd()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const mc={},Hg=n=>{const t=p1(n);return Object.values(mc).filter(e=>e.canvas===t).pop()};function S4(n,t,e){const i=Object.keys(n);for(const r of i){const s=+r;if(s>=t){const a=n[r];delete n[r],(e>0||s>t)&&(n[s+e]=a)}}}function k4(n,t,e,i){return!e||n.type==="mouseout"?null:i?t:n}var Qr;let Gc=(Qr=class{static register(...t){sr.add(...t),Wg()}static unregister(...t){sr.remove(...t),Wg()}constructor(t,e){const i=this.config=new b4(e),r=p1(t),s=Hg(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const a=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||z3(r)),this.platform.updateConfig(i);const o=this.platform.acquireContext(r,a.aspectRatio),l=o&&o.canvas,c=l&&l.height,h=l&&l.width;if(this.id=z_(),this.ctx=o,this.canvas=l,this.width=h,this.height=c,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new a4,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=ax(p=>this.update(p),a.resizeDelay||0),this._dataChanges=[],mc[this.id]=this,!o||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Lr.listen(this,"complete",$g),Lr.listen(this,"progress",x4),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:r,_aspectRatio:s}=this;return He(t)?e&&s?s:r?i/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return sr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():mg(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return dg(this.canvas,this.ctx),this}stop(){return Lr.stop(this),this}resize(t,e){Lr.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,r=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(r,t,e,s),o=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,mg(this,o,!0)&&(this.notifyPlugins("resize",{size:a}),Ye(i.onResize,[this,a],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};Me(e,(i,r)=>{i.id=r})}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,r=Object.keys(i).reduce((a,o)=>(a[o]=!1,a),{});let s=[];e&&(s=s.concat(Object.keys(e).map(a=>{const o=e[a],l=Yu(a,o),c=l==="r",h=l==="x";return{options:o,dposition:c?"chartArea":h?"bottom":"left",dtype:c?"radialLinear":h?"category":"linear"}}))),Me(s,a=>{const o=a.options,l=o.id,c=Yu(l,o),h=Oe(o.type,a.dtype);(o.position===void 0||qg(o.position,c)!==qg(a.dposition))&&(o.position=a.dposition),r[l]=!0;let p=null;if(l in i&&i[l].type===h)p=i[l];else{const g=sr.getScale(h);p=new g({id:l,type:h,ctx:this.ctx,chart:this}),i[p.id]=p}p.init(o,t)}),Me(r,(a,o)=>{a||delete i[o]}),Me(i,a=>{ki.configure(this,a,a.options),ki.addBox(this,a)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((r,s)=>r.index-s.index),i>e){for(let r=e;r<i;++r)this._destroyDatasetMeta(r);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(zg("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((i,r)=>{e.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=e.length;i<r;i++){const s=e[i];let a=this.getDatasetMeta(i);const o=s.type||this.config.type;if(a.type&&a.type!==o&&(this._destroyDatasetMeta(i),a=this.getDatasetMeta(i)),a.type=o,a.indexAxis=s.indexAxis||Ku(o,this.options),a.order=s.order||0,a.index=i,a.label=""+s.label,a.visible=this.isDatasetVisible(i),a.controller)a.controller.updateIndex(i),a.controller.linkScales();else{const l=sr.getController(o),{datasetElementType:c,dataElementType:h}=gn.datasets[o];Object.assign(l,{dataElementType:sr.getElement(h),datasetElementType:c&&sr.getElement(c)}),a.controller=new l(this,i),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){Me(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let c=0,h=this.data.datasets.length;c<h;c++){const{controller:p}=this.getDatasetMeta(c),g=!r&&s.indexOf(p)===-1;p.buildOrUpdateElements(g),a=Math.max(+p.getMaxOverflow(),a)}a=this._minPadding=i.layout.autoPadding?a:0,this._updateLayout(a),r||Me(s,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(zg("z","_idx"));const{_active:o,_lastEvent:l}=this;l?this._eventHandler(l,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){Me(this.scales,t=>{ki.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!ng(e,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:s}of e){const a=i==="_removeElements"?-s:s;S4(t,r,a)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=s=>new Set(t.filter(a=>a[0]===s).map((a,o)=>o+","+a.splice(1).join(","))),r=i(0);for(let s=1;s<e;s++)if(!ng(r,i(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ki.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],Me(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,i=this.data.datasets.length;e<i;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,cs(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),r={meta:i,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(e),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Lr.has(this)?this.attached&&!Lr.running(this)&&Lr.start(this):(this.draw(),$g({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let r,s;for(r=0,s=e.length;r<s;++r){const a=e[r];(!t||a.visible)&&i.push(a)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i={meta:t,index:t.index,cancelable:!0},r=Wx(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(r&&dd(e,r),t.controller.draw(),r&&fd(e),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return Ym(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,r){const s=_3.modes[e];return typeof s=="function"?s(this,t,i,r):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let r=i.filter(s=>s&&s._dataset===e).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=Da(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!e.hidden}setDatasetVisibility(t,e){const i=this.getDatasetMeta(t);i.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const r=i?"show":"hide",s=this.getDatasetMeta(t),a=s.controller._resolveAnimations(void 0,r);Vo(e)?(s.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),a.update(s,{visible:i}),this.update(o=>o.datasetIndex===t?r:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),Lr.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),dg(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete mc[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(s,a)=>{e.addEventListener(this,s,a),t[s]=a},r=(s,a,o)=>{s.offsetX=a,s.offsetY=o,this._eventHandler(s)};Me(this.options.events,s=>i(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(l,c)=>{e.addEventListener(this,l,c),t[l]=c},r=(l,c)=>{t[l]&&(e.removeEventListener(this,l,c),delete t[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let a;const o=()=>{r("attach",o),this.attached=!0,this.resize(),i("resize",s),i("detach",a)};a=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),i("attach",o)},e.isAttached(this.canvas)?o():a()}unbindEvents(){Me(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},Me(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const r=i?"set":"remove";let s,a,o,l;for(e==="dataset"&&(s=this.getDatasetMeta(t[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),o=0,l=t.length;o<l;++o){a=t[o];const c=a&&this.getDatasetMeta(a.datasetIndex).controller;c&&c[r+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map(({datasetIndex:s,index:a})=>{const o=this.getDatasetMeta(s);if(!o)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:o.data[a],index:a}});!Cc(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,i){const r=this.options.hover,s=(l,c)=>l.filter(h=>!c.some(p=>h.datasetIndex===p.datasetIndex&&h.index===p.index)),a=s(e,t),o=i?t:s(t,e);a.length&&this.updateHoverStyle(a,r.mode,!1),o.length&&r.mode&&this.updateHoverStyle(o,r.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},r=a=>(a.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const s=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(s||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:r=[],options:s}=this,a=e,o=this._getActiveElements(t,r,i,a),l=K_(t),c=k4(t,this._lastEvent,i,l);i&&(this._lastEvent=null,Ye(s.onHover,[t,o,this],this),l&&Ye(s.onClick,[t,o,this],this));const h=!Cc(o,r);return(h||e)&&(this._active=o,this._updateHoverStyles(o,r,e)),this._lastEvent=c,h}_getActiveElements(t,e,i,r){if(t.type==="mouseout")return[];if(!i)return e;const s=this.options.hover;return this.getElementsAtEventForMode(t,s.mode,s,r)}},Rt(Qr,"defaults",gn),Rt(Qr,"instances",mc),Rt(Qr,"overrides",Hs),Rt(Qr,"registry",sr),Rt(Qr,"version",w4),Rt(Qr,"getChart",Hg),Qr);function Wg(){return Me(Gc.instances,n=>n._plugins.invalidate())}function A4(n,t,e){const{startAngle:i,x:r,y:s,outerRadius:a,innerRadius:o,options:l}=t,{borderWidth:c,borderJoinStyle:h}=l,p=Math.min(c/a,ar(i-e));if(n.beginPath(),n.arc(r,s,a-c/2,i+p/2,e-p/2),o>0){const g=Math.min(c/o,ar(i-e));n.arc(r,s,o+c/2,e-g/2,i+g/2,!0)}else{const g=Math.min(c/2,a*ar(i-e));if(h==="round")n.arc(r,s,g,e-Je/2,i+Je/2,!0);else if(h==="bevel"){const d=2*g*g,v=-d*Math.cos(e+Je/2)+r,y=-d*Math.sin(e+Je/2)+s,x=d*Math.cos(i+Je/2)+r,_=d*Math.sin(i+Je/2)+s;n.lineTo(v,y),n.lineTo(x,_)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function N4(n,t,e){const{startAngle:i,pixelMargin:r,x:s,y:a,outerRadius:o,innerRadius:l}=t;let c=r/o;n.beginPath(),n.arc(s,a,o,i-c,e+c),l>r?(c=r/l,n.arc(s,a,l,e+c,i-c,!0)):n.arc(s,a,r,e+Mn,i-Mn),n.closePath(),n.clip()}function L4(n){return pd(n,["outerStart","outerEnd","innerStart","innerEnd"])}function P4(n,t,e,i){const r=L4(n.options.borderRadius),s=(e-t)/2,a=Math.min(s,i*t/2),o=l=>{const c=(e-Math.min(s,l))*i/2;return ni(l,0,Math.min(s,c))};return{outerStart:o(r.outerStart),outerEnd:o(r.outerEnd),innerStart:ni(r.innerStart,0,a),innerEnd:ni(r.innerEnd,0,a)}}function ma(n,t,e,i){return{x:e+n*Math.cos(t),y:i+n*Math.sin(t)}}function Dc(n,t,e,i,r,s){const{x:a,y:o,startAngle:l,pixelMargin:c,innerRadius:h}=t,p=Math.max(t.outerRadius+i+e-c,0),g=h>0?h+i+e+c:0;let d=0;const v=r-l;if(i){const et=h>0?h-i:0,ct=p>0?p-i:0,ot=(et+ct)/2,rt=ot!==0?v*ot/(ot+i):v;d=(v-rt)/2}const y=Math.max(.001,v*p-e/Je)/p,x=(v-y)/2,_=l+x+d,E=r-x-d,{outerStart:O,outerEnd:T,innerStart:V,innerEnd:Q}=P4(t,g,p,E-_),J=p-O,$=p-T,D=_+O/J,Z=E-T/$,L=g+V,R=g+Q,H=_+V/L,W=E-Q/R;if(n.beginPath(),s){const et=(D+Z)/2;if(n.arc(a,o,p,D,et),n.arc(a,o,p,et,Z),T>0){const ht=ma($,Z,a,o);n.arc(ht.x,ht.y,T,Z,E+Mn)}const ct=ma(R,E,a,o);if(n.lineTo(ct.x,ct.y),Q>0){const ht=ma(R,W,a,o);n.arc(ht.x,ht.y,Q,E+Mn,W+Math.PI)}const ot=(E-Q/g+(_+V/g))/2;if(n.arc(a,o,g,E-Q/g,ot,!0),n.arc(a,o,g,ot,_+V/g,!0),V>0){const ht=ma(L,H,a,o);n.arc(ht.x,ht.y,V,H+Math.PI,_-Mn)}const rt=ma(J,_,a,o);if(n.lineTo(rt.x,rt.y),O>0){const ht=ma(J,D,a,o);n.arc(ht.x,ht.y,O,_-Mn,D)}}else{n.moveTo(a,o);const et=Math.cos(D)*p+a,ct=Math.sin(D)*p+o;n.lineTo(et,ct);const ot=Math.cos(Z)*p+a,rt=Math.sin(Z)*p+o;n.lineTo(ot,rt)}n.closePath()}function C4(n,t,e,i,r){const{fullCircles:s,startAngle:a,circumference:o}=t;let l=t.endAngle;if(s){Dc(n,t,e,i,l,r);for(let c=0;c<s;++c)n.fill();isNaN(o)||(l=a+(o%Yn||Yn))}return Dc(n,t,e,i,l,r),n.fill(),l}function E4(n,t,e,i,r){const{fullCircles:s,startAngle:a,circumference:o,options:l}=t,{borderWidth:c,borderJoinStyle:h,borderDash:p,borderDashOffset:g,borderRadius:d}=l,v=l.borderAlign==="inner";if(!c)return;n.setLineDash(p||[]),n.lineDashOffset=g,v?(n.lineWidth=c*2,n.lineJoin=h||"round"):(n.lineWidth=c,n.lineJoin=h||"bevel");let y=t.endAngle;if(s){Dc(n,t,e,i,y,r);for(let x=0;x<s;++x)n.stroke();isNaN(o)||(y=a+(o%Yn||Yn))}v&&N4(n,t,y),l.selfJoin&&y-a>=Je&&d===0&&h!=="miter"&&A4(n,t,y),s||(Dc(n,t,e,i,y,r),n.stroke())}class ko extends Rr{constructor(e){super();Rt(this,"circumference");Rt(this,"endAngle");Rt(this,"fullCircles");Rt(this,"innerRadius");Rt(this,"outerRadius");Rt(this,"pixelMargin");Rt(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,i,r){const s=this.getProps(["x","y"],r),{angle:a,distance:o}=Bm(s,{x:e,y:i}),{startAngle:l,endAngle:c,innerRadius:h,outerRadius:p,circumference:g}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),d=(this.options.spacing+this.options.borderWidth)/2,v=Oe(g,c-l),y=Um(a,l,c)&&l!==c,x=v>=Yn||y,_=Bs(o,h+d,p+d);return x&&_}getCenterPoint(e){const{x:i,y:r,startAngle:s,endAngle:a,innerRadius:o,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:c,spacing:h}=this.options,p=(s+a)/2,g=(o+l+h+c)/2;return{x:i+Math.cos(p)*g,y:r+Math.sin(p)*g}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:i,circumference:r}=this,s=(i.offset||0)/4,a=(i.spacing||0)/2,o=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=r>Yn?Math.floor(r/Yn):0,r===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const l=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(l)*s,Math.sin(l)*s);const c=1-Math.sin(Math.min(Je,r||0)),h=s*c;e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,C4(e,this,h,a,o),E4(e,this,h,a,o),e.restore()}}Rt(ko,"id","arc"),Rt(ko,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),Rt(ko,"defaultRoutes",{backgroundColor:"backgroundColor"}),Rt(ko,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"});function g1(n,t){const{x:e,y:i,base:r,width:s,height:a}=n.getProps(["x","y","base","width","height"],t);let o,l,c,h,p;return n.horizontal?(p=a/2,o=Math.min(e,r),l=Math.max(e,r),c=i-p,h=i+p):(p=s/2,o=e-p,l=e+p,c=Math.min(i,r),h=Math.max(i,r)),{left:o,top:c,right:l,bottom:h}}function ss(n,t,e,i){return n?0:ni(t,e,i)}function O4(n,t,e){const i=n.options.borderWidth,r=n.borderSkipped,s=Jm(i);return{t:ss(r.top,s.top,0,e),r:ss(r.right,s.right,0,t),b:ss(r.bottom,s.bottom,0,e),l:ss(r.left,s.left,0,t)}}function j4(n,t,e){const{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),r=n.options.borderRadius,s=Ea(r),a=Math.min(t,e),o=n.borderSkipped,l=i||je(r);return{topLeft:ss(!l||o.top||o.left,s.topLeft,0,a),topRight:ss(!l||o.top||o.right,s.topRight,0,a),bottomLeft:ss(!l||o.bottom||o.left,s.bottomLeft,0,a),bottomRight:ss(!l||o.bottom||o.right,s.bottomRight,0,a)}}function T4(n){const t=g1(n),e=t.right-t.left,i=t.bottom-t.top,r=O4(n,e/2,i/2),s=j4(n,e/2,i/2);return{outer:{x:t.left,y:t.top,w:e,h:i,radius:s},inner:{x:t.left+r.l,y:t.top+r.t,w:e-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function vu(n,t,e,i){const r=t===null,s=e===null,o=n&&!(r&&s)&&g1(n,i);return o&&(r||Bs(t,o.left,o.right))&&(s||Bs(e,o.top,o.bottom))}function R4(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function I4(n,t){n.rect(t.x,t.y,t.w,t.h)}function yu(n,t,e={}){const i=n.x!==e.x?-t:0,r=n.y!==e.y?-t:0,s=(n.x+n.w!==e.x+e.w?t:0)-i,a=(n.y+n.h!==e.y+e.h?t:0)-r;return{x:n.x+i,y:n.y+r,w:n.w+s,h:n.h+a,radius:n.radius}}class bc extends Rr{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:i,backgroundColor:r}}=this,{inner:s,outer:a}=T4(this),o=R4(a.radius)?Tc:I4;t.save(),(a.w!==s.w||a.h!==s.h)&&(t.beginPath(),o(t,yu(a,e,s)),t.clip(),o(t,yu(s,-e,a)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),o(t,yu(s,e)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,e,i){return vu(this,t,e,i)}inXRange(t,e){return vu(this,t,null,e)}inYRange(t,e){return vu(this,null,t,e)}getCenterPoint(t){const{x:e,y:i,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],t);return{x:s?(e+r)/2:e,y:s?i:(i+r)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}Rt(bc,"id","bar"),Rt(bc,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Rt(bc,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const Vg=(n,t)=>{let{boxHeight:e=t,boxWidth:i=t}=n;return n.usePointStyle&&(e=Math.min(e,t),i=n.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}},D4=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index;class Gg extends Rr{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=Ye(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,r)=>t.sort(i,r,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,r=Hn(i.font),s=r.size,a=this._computeTitleHeight(),{boxWidth:o,itemHeight:l}=Vg(i,s);let c,h;e.font=r.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(a,s,o,l)+10):(h=this.maxHeight,c=this._fitCols(a,r,o,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(h,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,r){const{ctx:s,maxWidth:a,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=r+o;let p=t;s.textAlign="left",s.textBaseline="middle";let g=-1,d=-h;return this.legendItems.forEach((v,y)=>{const x=i+e/2+s.measureText(v.text).width;(y===0||c[c.length-1]+x+2*o>a)&&(p+=h,c[c.length-(y>0?0:1)]=0,d+=h,g++),l[y]={left:0,top:d,row:g,width:x,height:r},c[c.length-1]+=x+o}),p}_fitCols(t,e,i,r){const{ctx:s,maxHeight:a,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=a-t;let p=o,g=0,d=0,v=0,y=0;return this.legendItems.forEach((x,_)=>{const{itemWidth:E,itemHeight:O}=M4(i,e,s,x,r);_>0&&d+O+2*o>h&&(p+=g+o,c.push({width:g,height:d}),v+=g+o,y++,g=d=0),l[_]={left:v,top:d,col:y,width:E,height:O},g=Math.max(g,E),d+=O+o}),p+=g,c.push({width:g,height:d}),p}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:r},rtl:s}}=this,a=Oa(s,this.left,this.width);if(this.isHorizontal()){let o=0,l=$n(i,this.left+r,this.right-this.lineWidths[o]);for(const c of e)o!==c.row&&(o=c.row,l=$n(i,this.left+r,this.right-this.lineWidths[o])),c.top+=this.top+t+r,c.left=a.leftForLtr(a.x(l),c.width),l+=c.width+r}else{let o=0,l=$n(i,this.top+t+r,this.bottom-this.columnSizes[o].height);for(const c of e)c.col!==o&&(o=c.col,l=$n(i,this.top+t+r,this.bottom-this.columnSizes[o].height)),c.top=l,c.left+=this.left+r,c.left=a.leftForLtr(a.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;dd(t,this),this._draw(),fd(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:r}=this,{align:s,labels:a}=t,o=gn.color,l=Oa(t.rtl,this.left,this.width),c=Hn(a.font),{padding:h}=a,p=c.size,g=p/2;let d;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;const{boxWidth:v,boxHeight:y,itemHeight:x}=Vg(a,p),_=function(Q,J,$){if(isNaN(v)||v<=0||isNaN(y)||y<0)return;r.save();const D=Oe($.lineWidth,1);if(r.fillStyle=Oe($.fillStyle,o),r.lineCap=Oe($.lineCap,"butt"),r.lineDashOffset=Oe($.lineDashOffset,0),r.lineJoin=Oe($.lineJoin,"miter"),r.lineWidth=D,r.strokeStyle=Oe($.strokeStyle,o),r.setLineDash(Oe($.lineDash,[])),a.usePointStyle){const Z={radius:y*Math.SQRT2/2,pointStyle:$.pointStyle,rotation:$.rotation,borderWidth:D},L=l.xPlus(Q,v/2),R=J+g;Km(r,Z,L,R,a.pointStyleWidth&&v)}else{const Z=J+Math.max((p-y)/2,0),L=l.leftForLtr(Q,v),R=Ea($.borderRadius);r.beginPath(),Object.values(R).some(H=>H!==0)?Tc(r,{x:L,y:Z,w:v,h:y,radius:R}):r.rect(L,Z,v,y),r.fill(),D!==0&&r.stroke()}r.restore()},E=function(Q,J,$){Go(r,$.text,Q,J+x/2,c,{strikethrough:$.hidden,textAlign:l.textAlign($.textAlign)})},O=this.isHorizontal(),T=this._computeTitleHeight();O?d={x:$n(s,this.left+h,this.right-i[0]),y:this.top+h+T,line:0}:d={x:this.left+h,y:$n(s,this.top+T+h,this.bottom-e[0].height),line:0},e1(this.ctx,t.textDirection);const V=x+h;this.legendItems.forEach((Q,J)=>{r.strokeStyle=Q.fontColor,r.fillStyle=Q.fontColor;const $=r.measureText(Q.text).width,D=l.textAlign(Q.textAlign||(Q.textAlign=a.textAlign)),Z=v+g+$;let L=d.x,R=d.y;l.setWidth(this.width),O?J>0&&L+Z+h>this.right&&(R=d.y+=V,d.line++,L=d.x=$n(s,this.left+h,this.right-i[d.line])):J>0&&R+V>this.bottom&&(L=d.x=L+e[d.line].width+h,d.line++,R=d.y=$n(s,this.top+T+h,this.bottom-e[d.line].height));const H=l.x(L);if(_(H,R,Q),L=ox(D,L+v+g,O?L+Z:this.right,t.rtl),E(l.x(L),R,Q),O)d.x+=Z+h;else if(typeof Q.text!="string"){const W=c.lineHeight;d.y+=m1(Q,W)+h}else d.y+=V}),n1(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=Hn(e.font),r=Li(e.padding);if(!e.display)return;const s=Oa(t.rtl,this.left,this.width),a=this.ctx,o=e.position,l=i.size/2,c=r.top+l;let h,p=this.left,g=this.width;if(this.isHorizontal())g=Math.max(...this.lineWidths),h=this.top+c,p=$n(t.align,p,this.right-g);else{const v=this.columnSizes.reduce((y,x)=>Math.max(y,x.height),0);h=c+$n(t.align,this.top,this.bottom-v-t.labels.padding-this._computeTitleHeight())}const d=$n(o,p,p+g);a.textAlign=s.textAlign(ud(o)),a.textBaseline="middle",a.strokeStyle=e.color,a.fillStyle=e.color,a.font=i.string,Go(a,e.text,d,h,i)}_computeTitleHeight(){const t=this.options.title,e=Hn(t.font),i=Li(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,r,s;if(Bs(t,this.left,this.right)&&Bs(e,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],Bs(t,r.left,r.left+r.width)&&Bs(e,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(t){const e=this.options;if(!U4(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const r=this._hoveredItem,s=D4(r,i);r&&!s&&Ye(e.onLeave,[t,r,this],this),this._hoveredItem=i,i&&!s&&Ye(e.onHover,[t,i,this],this)}else i&&Ye(e.onClick,[t,i,this],this)}}function M4(n,t,e,i,r){const s=F4(i,n,t,e),a=B4(r,i,t.lineHeight);return{itemWidth:s,itemHeight:a}}function F4(n,t,e,i){let r=n.text;return r&&typeof r!="string"&&(r=r.reduce((s,a)=>s.length>a.length?s:a)),t+e.size/2+i.measureText(r).width}function B4(n,t,e){let i=n;return typeof t.text!="string"&&(i=m1(t,e)),i}function m1(n,t){const e=n.text?n.text.length:0;return t*e}function U4(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var q4={id:"legend",_element:Gg,start(n,t,e){const i=n.legend=new Gg({ctx:n.ctx,options:e,chart:n});ki.configure(n,i,e),ki.addBox(n,i)},stop(n){ki.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const i=n.legend;ki.configure(n,i,e),i.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const i=t.datasetIndex,r=e.chart;r.isDatasetVisible(i)?(r.hide(i),t.hidden=!0):(r.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:r,color:s,useBorderRadius:a,borderRadius:o}}=n.legend.options;return n._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(e?0:void 0),h=Li(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:a&&(o||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class b1 extends Rr{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;const r=Pn(i.text)?i.text.length:1;this._padding=Li(i.padding);const s=r*Hn(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:e,left:i,bottom:r,right:s,options:a}=this,o=a.align;let l=0,c,h,p;return this.isHorizontal()?(h=$n(o,i,s),p=e+t,c=s-i):(a.position==="left"?(h=i+t,p=$n(o,r,e),l=Je*-.5):(h=s-t,p=$n(o,e,r),l=Je*.5),c=r-e),{titleX:h,titleY:p,maxWidth:c,rotation:l}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const i=Hn(e.font),s=i.lineHeight/2+this._padding.top,{titleX:a,titleY:o,maxWidth:l,rotation:c}=this._drawArgs(s);Go(t,e.text,0,0,i,{color:e.color,maxWidth:l,rotation:c,textAlign:ud(e.align),textBaseline:"middle",translation:[a,o]})}}function z4(n,t){const e=new b1({ctx:n.ctx,options:t,chart:n});ki.configure(n,e,t),ki.addBox(n,e),n.titleBlock=e}var $4={id:"title",_element:b1,start(n,t,e){z4(n,e)},stop(n){const t=n.titleBlock;ki.removeBox(n,t),delete n.titleBlock},beforeUpdate(n,t,e){const i=n.titleBlock;ki.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ao={average(n){if(!n.length)return!1;let t,e,i=new Set,r=0,s=0;for(t=0,e=n.length;t<e;++t){const o=n[t].element;if(o&&o.hasValue()){const l=o.tooltipPosition();i.add(l.x),r+=l.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((o,l)=>o+l)/i.size,y:r/s}},nearest(n,t){if(!n.length)return!1;let e=t.x,i=t.y,r=Number.POSITIVE_INFINITY,s,a,o;for(s=0,a=n.length;s<a;++s){const l=n[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),h=ex(t,c);h<r&&(r=h,o=l)}}if(o){const l=o.tooltipPosition();e=l.x,i=l.y}return{x:e,y:i}}};function rr(n,t){return t&&(Pn(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function Pr(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function H4(n,t){const{element:e,datasetIndex:i,index:r}=t,s=n.getDatasetMeta(i).controller,{label:a,value:o}=s.getLabelAndValue(r);return{chart:n,label:a,parsed:s.getParsed(r),raw:n.data.datasets[i].data[r],formattedValue:o,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:e}}function Kg(n,t){const e=n.chart.ctx,{body:i,footer:r,title:s}=n,{boxWidth:a,boxHeight:o}=t,l=Hn(t.bodyFont),c=Hn(t.titleFont),h=Hn(t.footerFont),p=s.length,g=r.length,d=i.length,v=Li(t.padding);let y=v.height,x=0,_=i.reduce((T,V)=>T+V.before.length+V.lines.length+V.after.length,0);if(_+=n.beforeBody.length+n.afterBody.length,p&&(y+=p*c.lineHeight+(p-1)*t.titleSpacing+t.titleMarginBottom),_){const T=t.displayColors?Math.max(o,l.lineHeight):l.lineHeight;y+=d*T+(_-d)*l.lineHeight+(_-1)*t.bodySpacing}g&&(y+=t.footerMarginTop+g*h.lineHeight+(g-1)*t.footerSpacing);let E=0;const O=function(T){x=Math.max(x,e.measureText(T).width+E)};return e.save(),e.font=c.string,Me(n.title,O),e.font=l.string,Me(n.beforeBody.concat(n.afterBody),O),E=t.displayColors?a+2+t.boxPadding:0,Me(i,T=>{Me(T.before,O),Me(T.lines,O),Me(T.after,O)}),E=0,e.font=h.string,Me(n.footer,O),e.restore(),x+=v.width,{width:x,height:y}}function W4(n,t){const{y:e,height:i}=t;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}function V4(n,t,e,i){const{x:r,width:s}=i,a=e.caretSize+e.caretPadding;if(n==="left"&&r+s+a>t.width||n==="right"&&r-s-a<0)return!0}function G4(n,t,e,i){const{x:r,width:s}=e,{width:a,chartArea:{left:o,right:l}}=n;let c="center";return i==="center"?c=r<=(o+l)/2?"left":"right":r<=s/2?c="left":r>=a-s/2&&(c="right"),V4(c,n,t,e)&&(c="center"),c}function Yg(n,t,e){const i=e.yAlign||t.yAlign||W4(n,e);return{xAlign:e.xAlign||t.xAlign||G4(n,t,e,i),yAlign:i}}function K4(n,t){let{x:e,width:i}=n;return t==="right"?e-=i:t==="center"&&(e-=i/2),e}function Y4(n,t,e){let{y:i,height:r}=n;return t==="top"?i+=e:t==="bottom"?i-=r+e:i-=r/2,i}function Jg(n,t,e,i){const{caretSize:r,caretPadding:s,cornerRadius:a}=n,{xAlign:o,yAlign:l}=e,c=r+s,{topLeft:h,topRight:p,bottomLeft:g,bottomRight:d}=Ea(a);let v=K4(t,o);const y=Y4(t,l,c);return l==="center"?o==="left"?v+=c:o==="right"&&(v-=c):o==="left"?v-=Math.max(h,g)+r:o==="right"&&(v+=Math.max(p,d)+r),{x:ni(v,0,i.width-t.width),y:ni(y,0,i.height-t.height)}}function sc(n,t,e){const i=Li(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-i.right:n.x+i.left}function Xg(n){return rr([],Pr(n))}function J4(n,t,e){return Da(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function Zg(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}const v1={beforeTitle:Nr,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:Nr,beforeBody:Nr,beforeLabel:Nr,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return He(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:Nr,afterBody:Nr,beforeFooter:Nr,footer:Nr,afterFooter:Nr};function Qn(n,t,e,i){const r=n[t].call(e,i);return typeof r>"u"?v1[t].call(e,i):r}class Ju extends Rr{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&e.options.animation&&i.animations,s=new i1(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=J4(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:i}=e,r=Qn(i,"beforeTitle",this,t),s=Qn(i,"title",this,t),a=Qn(i,"afterTitle",this,t);let o=[];return o=rr(o,Pr(r)),o=rr(o,Pr(s)),o=rr(o,Pr(a)),o}getBeforeBody(t,e){return Xg(Qn(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:i}=e,r=[];return Me(t,s=>{const a={before:[],lines:[],after:[]},o=Zg(i,s);rr(a.before,Pr(Qn(o,"beforeLabel",this,s))),rr(a.lines,Qn(o,"label",this,s)),rr(a.after,Pr(Qn(o,"afterLabel",this,s))),r.push(a)}),r}getAfterBody(t,e){return Xg(Qn(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:i}=e,r=Qn(i,"beforeFooter",this,t),s=Qn(i,"footer",this,t),a=Qn(i,"afterFooter",this,t);let o=[];return o=rr(o,Pr(r)),o=rr(o,Pr(s)),o=rr(o,Pr(a)),o}_createItems(t){const e=this._active,i=this.chart.data,r=[],s=[],a=[];let o=[],l,c;for(l=0,c=e.length;l<c;++l)o.push(H4(this.chart,e[l]));return t.filter&&(o=o.filter((h,p,g)=>t.filter(h,p,g,i))),t.itemSort&&(o=o.sort((h,p)=>t.itemSort(h,p,i))),Me(o,h=>{const p=Zg(t.callbacks,h);r.push(Qn(p,"labelColor",this,h)),s.push(Qn(p,"labelPointStyle",this,h)),a.push(Qn(p,"labelTextColor",this,h))}),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=a,this.dataPoints=o,o}update(t,e){const i=this.options.setContext(this.getContext()),r=this._active;let s,a=[];if(!r.length)this.opacity!==0&&(s={opacity:0});else{const o=Ao[i.position].call(this,r,this._eventPosition);a=this._createItems(i),this.title=this.getTitle(a,i),this.beforeBody=this.getBeforeBody(a,i),this.body=this.getBody(a,i),this.afterBody=this.getAfterBody(a,i),this.footer=this.getFooter(a,i);const l=this._size=Kg(this,i),c=Object.assign({},o,l),h=Yg(this.chart,i,c),p=Jg(i,c,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,s={opacity:1,x:p.x,y:p.y,width:l.width,height:l.height,caretX:o.x,caretY:o.y}}this._tooltipItems=a,this.$context=void 0,s&&this._resolveAnimations().update(this,s),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,r){const s=this.getCaretPosition(t,i,r);e.lineTo(s.x1,s.y1),e.lineTo(s.x2,s.y2),e.lineTo(s.x3,s.y3)}getCaretPosition(t,e,i){const{xAlign:r,yAlign:s}=this,{caretSize:a,cornerRadius:o}=i,{topLeft:l,topRight:c,bottomLeft:h,bottomRight:p}=Ea(o),{x:g,y:d}=t,{width:v,height:y}=e;let x,_,E,O,T,V;return s==="center"?(T=d+y/2,r==="left"?(x=g,_=x-a,O=T+a,V=T-a):(x=g+v,_=x+a,O=T-a,V=T+a),E=x):(r==="left"?_=g+Math.max(l,h)+a:r==="right"?_=g+v-Math.max(c,p)-a:_=this.caretX,s==="top"?(O=d,T=O-a,x=_-a,E=_+a):(O=d+y,T=O+a,x=_+a,E=_-a),V=O),{x1:x,x2:_,x3:E,y1:O,y2:T,y3:V}}drawTitle(t,e,i){const r=this.title,s=r.length;let a,o,l;if(s){const c=Oa(i.rtl,this.x,this.width);for(t.x=sc(this,i.titleAlign,i),e.textAlign=c.textAlign(i.titleAlign),e.textBaseline="middle",a=Hn(i.titleFont),o=i.titleSpacing,e.fillStyle=i.titleColor,e.font=a.string,l=0;l<s;++l)e.fillText(r[l],c.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+o,l+1===s&&(t.y+=i.titleMarginBottom-o)}}_drawColorBox(t,e,i,r,s){const a=this.labelColors[i],o=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=s,h=Hn(s.bodyFont),p=sc(this,"left",s),g=r.x(p),d=l<h.lineHeight?(h.lineHeight-l)/2:0,v=e.y+d;if(s.usePointStyle){const y={radius:Math.min(c,l)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},x=r.leftForLtr(g,c)+c/2,_=v+l/2;t.strokeStyle=s.multiKeyBackground,t.fillStyle=s.multiKeyBackground,fg(t,y,x,_),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,fg(t,y,x,_)}else{t.lineWidth=je(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;const y=r.leftForLtr(g,c),x=r.leftForLtr(r.xPlus(g,1),c-2),_=Ea(a.borderRadius);Object.values(_).some(E=>E!==0)?(t.beginPath(),t.fillStyle=s.multiKeyBackground,Tc(t,{x:y,y:v,w:c,h:l,radius:_}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),Tc(t,{x,y:v+1,w:c-2,h:l-2,radius:_}),t.fill()):(t.fillStyle=s.multiKeyBackground,t.fillRect(y,v,c,l),t.strokeRect(y,v,c,l),t.fillStyle=a.backgroundColor,t.fillRect(x,v+1,c-2,l-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:r}=this,{bodySpacing:s,bodyAlign:a,displayColors:o,boxHeight:l,boxWidth:c,boxPadding:h}=i,p=Hn(i.bodyFont);let g=p.lineHeight,d=0;const v=Oa(i.rtl,this.x,this.width),y=function($){e.fillText($,v.x(t.x+d),t.y+g/2),t.y+=g+s},x=v.textAlign(a);let _,E,O,T,V,Q,J;for(e.textAlign=a,e.textBaseline="middle",e.font=p.string,t.x=sc(this,x,i),e.fillStyle=i.bodyColor,Me(this.beforeBody,y),d=o&&x!=="right"?a==="center"?c/2+h:c+2+h:0,T=0,Q=r.length;T<Q;++T){for(_=r[T],E=this.labelTextColors[T],e.fillStyle=E,Me(_.before,y),O=_.lines,o&&O.length&&(this._drawColorBox(e,t,T,v,i),g=Math.max(p.lineHeight,l)),V=0,J=O.length;V<J;++V)y(O[V]),g=p.lineHeight;Me(_.after,y)}d=0,g=p.lineHeight,Me(this.afterBody,y),t.y-=s}drawFooter(t,e,i){const r=this.footer,s=r.length;let a,o;if(s){const l=Oa(i.rtl,this.x,this.width);for(t.x=sc(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=l.textAlign(i.footerAlign),e.textBaseline="middle",a=Hn(i.footerFont),e.fillStyle=i.footerColor,e.font=a.string,o=0;o<s;++o)e.fillText(r[o],l.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+i.footerSpacing}}drawBackground(t,e,i,r){const{xAlign:s,yAlign:a}=this,{x:o,y:l}=t,{width:c,height:h}=i,{topLeft:p,topRight:g,bottomLeft:d,bottomRight:v}=Ea(r.cornerRadius);e.fillStyle=r.backgroundColor,e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.beginPath(),e.moveTo(o+p,l),a==="top"&&this.drawCaret(t,e,i,r),e.lineTo(o+c-g,l),e.quadraticCurveTo(o+c,l,o+c,l+g),a==="center"&&s==="right"&&this.drawCaret(t,e,i,r),e.lineTo(o+c,l+h-v),e.quadraticCurveTo(o+c,l+h,o+c-v,l+h),a==="bottom"&&this.drawCaret(t,e,i,r),e.lineTo(o+d,l+h),e.quadraticCurveTo(o,l+h,o,l+h-d),a==="center"&&s==="left"&&this.drawCaret(t,e,i,r),e.lineTo(o,l+p),e.quadraticCurveTo(o,l,o+p,l),e.closePath(),e.fill(),r.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,r=i&&i.x,s=i&&i.y;if(r||s){const a=Ao[t.position].call(this,this._active,this._eventPosition);if(!a)return;const o=this._size=Kg(this,t),l=Object.assign({},a,this._size),c=Yg(e,t,l),h=Jg(t,l,c,e);(r._to!==h.x||s._to!==h.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=o.width,this.height=o.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const a=Li(e.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&o&&(t.save(),t.globalAlpha=i,this.drawBackground(s,t,r,e),e1(t,e.textDirection),s.y+=a.top,this.drawTitle(s,t,e),this.drawBody(s,t,e),this.drawFooter(s,t,e),n1(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,r=t.map(({datasetIndex:o,index:l})=>{const c=this.chart.getDatasetMeta(o);if(!c)throw new Error("Cannot find a dataset at index "+o);return{datasetIndex:o,element:c.data[l],index:l}}),s=!Cc(i,r),a=this._positionChanged(r,e);(s||a)&&(this._active=r,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],a=this._getActiveElements(t,s,e,i),o=this._positionChanged(a,t),l=e||!Cc(a,s)||o;return l&&(this._active=a,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),l}_getActiveElements(t,e,i,r){const s=this.options;if(t.type==="mouseout")return[];if(!r)return e.filter(o=>this.chart.data.datasets[o.datasetIndex]&&this.chart.getDatasetMeta(o.datasetIndex).controller.getParsed(o.index)!==void 0);const a=this.chart.getElementsAtEventForMode(t,s.mode,s,i);return s.reverse&&a.reverse(),a}_positionChanged(t,e){const{caretX:i,caretY:r,options:s}=this,a=Ao[s.position].call(this,t,e);return a!==!1&&(i!==a.x||r!==a.y)}}Rt(Ju,"positioners",Ao);var X4={id:"tooltip",_element:Ju,positioners:Ao,afterInit(n,t,e){e&&(n.tooltip=new Ju({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){const e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:v1},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const Z4=(n,t,e,i)=>(typeof t=="string"?(e=n.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function Q4(n,t,e,i){const r=n.indexOf(t);if(r===-1)return Z4(n,t,e,i);const s=n.lastIndexOf(t);return r!==s?e:r}const tS=(n,t)=>n===null?null:ni(Math.round(n),0,t);function Qg(n){const t=this.getLabels();return n>=0&&n<t.length?t[n]:n}class Xu extends Ma{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const i=this.getLabels();for(const{index:r,label:s}of e)i[r]===s&&i.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(He(t))return null;const i=this.getLabels();return e=isFinite(e)&&i[e]===t?e:Q4(i,t,Oe(e,t),this._addedLabels),tS(e,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),e||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const t=this.min,e=this.max,i=this.options.offset,r=[];let s=this.getLabels();s=t===0&&e===s.length-1?s:s.slice(t,e+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let a=t;a<=e;a++)r.push({value:a});return r}getLabelForValue(t){return Qg.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}Rt(Xu,"id","category"),Rt(Xu,"defaults",{ticks:{callback:Qg}});function eS(n,t){const e=[],{bounds:r,step:s,min:a,max:o,precision:l,count:c,maxTicks:h,maxDigits:p,includeBounds:g}=n,d=s||1,v=h-1,{min:y,max:x}=t,_=!He(a),E=!He(o),O=!He(c),T=(x-y)/(p+1);let V=rg((x-y)/v/d)*d,Q,J,$,D;if(V<1e-14&&!_&&!E)return[{value:y},{value:x}];D=Math.ceil(x/V)-Math.floor(y/V),D>v&&(V=rg(D*V/v/d)*d),He(l)||(Q=Math.pow(10,l),V=Math.ceil(V*Q)/Q),r==="ticks"?(J=Math.floor(y/V)*V,$=Math.ceil(x/V)*V):(J=y,$=x),_&&E&&s&&Z_((o-a)/s,V/1e3)?(D=Math.round(Math.min((o-a)/V,h)),V=(o-a)/D,J=a,$=o):O?(J=_?a:J,$=E?o:$,D=c-1,V=($-J)/D):(D=($-J)/V,fc(D,Math.round(D),V/1e3)?D=Math.round(D):D=Math.ceil(D));const Z=Math.max(sg(V),sg(J));Q=Math.pow(10,He(l)?Z:l),J=Math.round(J*Q)/Q,$=Math.round($*Q)/Q;let L=0;for(_&&(g&&J!==a?(e.push({value:a}),J<a&&L++,fc(Math.round((J+L*V)*Q)/Q,a,t0(a,T,n))&&L++):J<a&&L++);L<D;++L){const R=Math.round((J+L*V)*Q)/Q;if(E&&R>o)break;e.push({value:R})}return E&&g&&$!==o?e.length&&fc(e[e.length-1].value,o,t0(o,T,n))?e[e.length-1].value=o:e.push({value:o}):(!E||$===o)&&e.push({value:$}),e}function t0(n,t,{horizontal:e,minRotation:i}){const r=Fs(i),s=(e?Math.sin(r):Math.cos(r))||.001,a=.75*t*(""+n).length;return Math.min(t/s,a)}class nS extends Ma{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return He(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this;const a=l=>r=e?r:l,o=l=>s=i?s:l;if(t){const l=os(r),c=os(s);l<0&&c<0?o(0):l>0&&c>0&&a(0)}if(r===s){let l=s===0?1:Math.abs(s*.05);o(s+l),t||a(r-l)}this.min=r,this.max=s}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:i}=t,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),e=e||11),e&&(r=Math.min(e,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},s=this._range||this,a=eS(r,s);return t.bounds==="ticks"&&Q_(a,this,"value"),t.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const r=(i-e)/Math.max(t.length-1,1)/2;e-=r,i+=r}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return Vm(t,this.chart.options.locale,this.options.ticks.format)}}class Zu extends nS{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Ni(t)?t:0,this.max=Ni(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=Fs(this.options.ticks.minRotation),r=(t?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,s.lineHeight/r))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}Rt(Zu,"id","linear"),Rt(Zu,"defaults",{ticks:{callback:Gm.formatters.numeric}});const Kc={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ei=Object.keys(Kc);function e0(n,t){return n-t}function n0(n,t){if(He(t))return null;const e=n._adapter,{parser:i,round:r,isoWeekday:s}=n._parseOpts;let a=t;return typeof i=="function"&&(a=i(a)),Ni(a)||(a=typeof i=="string"?e.parse(a,i):e.parse(a)),a===null?null:(r&&(a=r==="week"&&(jc(s)||s===!0)?e.startOf(a,"isoWeek",s):e.startOf(a,r)),+a)}function i0(n,t,e,i){const r=ei.length;for(let s=ei.indexOf(n);s<r-1;++s){const a=Kc[ei[s]],o=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((e-t)/(o*a.size))<=i)return ei[s]}return ei[r-1]}function iS(n,t,e,i,r){for(let s=ei.length-1;s>=ei.indexOf(e);s--){const a=ei[s];if(Kc[a].common&&n._adapter.diff(r,i,a)>=t-1)return a}return ei[e?ei.indexOf(e):0]}function rS(n){for(let t=ei.indexOf(n)+1,e=ei.length;t<e;++t)if(Kc[ei[t]].common)return ei[t]}function r0(n,t,e){if(!e)n[t]=!0;else if(e.length){const{lo:i,hi:r}=hd(e,t),s=e[i]>=t?e[i]:e[r];n[s]=!0}}function sS(n,t,e,i){const r=n._adapter,s=+r.startOf(t[0].value,i),a=t[t.length-1].value;let o,l;for(o=s;o<=a;o=+r.add(o,1,i))l=e[o],l>=0&&(t[l].major=!0);return t}function s0(n,t,e){const i=[],r={},s=t.length;let a,o;for(a=0;a<s;++a)o=t[a],r[o]=a,i.push({value:o,major:!1});return s===0||!e?i:sS(n,i,r,e)}class Mc extends Ma{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const i=t.time||(t.time={}),r=this._adapter=new m3._date(t.adapters.date);r.init(e),Oo(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:n0(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:r,max:s,minDefined:a,maxDefined:o}=this.getUserBounds();function l(c){!a&&!isNaN(c.min)&&(r=Math.min(r,c.min)),!o&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!a||!o)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=Ni(r)&&!isNaN(r)?r:+e.startOf(Date.now(),i),s=Ni(s)&&!isNaN(s)?s:+e.endOf(Date.now(),i)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,a=this.max,o=rx(r,s,a);return this._unit=e.unit||(i.autoSkip?i0(e.minUnit,this.min,this.max,this._getLabelCapacity(s)):iS(this,o.length,e.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:rS(this._unit),this.initOffsets(r),t.reverse&&o.reverse(),s0(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,i=0,r,s;this.options.offset&&t.length&&(r=this.getDecimalForValue(t[0]),t.length===1?e=1-r:e=(this.getDecimalForValue(t[1])-r)/2,s=this.getDecimalForValue(t[t.length-1]),t.length===1?i=s:i=(s-this.getDecimalForValue(t[t.length-2]))/2);const a=t.length<3?.5:.25;e=ni(e,0,a),i=ni(i,0,a),this._offsets={start:e,end:i,factor:1/(e+1+i)}}_generate(){const t=this._adapter,e=this.min,i=this.max,r=this.options,s=r.time,a=s.unit||i0(s.minUnit,e,i,this._getLabelCapacity(e)),o=Oe(r.ticks.stepSize,1),l=a==="week"?s.isoWeekday:!1,c=jc(l)||l===!0,h={};let p=e,g,d;if(c&&(p=+t.startOf(p,"isoWeek",l)),p=+t.startOf(p,c?"day":a),t.diff(i,e,a)>1e5*o)throw new Error(e+" and "+i+" are too far apart with stepSize of "+o+" "+a);const v=r.ticks.source==="data"&&this.getDataTimestamps();for(g=p,d=0;g<i;g=+t.add(g,o,a),d++)r0(h,g,v);return(g===i||r.bounds==="ticks"||d===1)&&r0(h,g,v),Object.keys(h).sort(e0).map(y=>+y)}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){const r=this.options.time.displayFormats,s=this._unit,a=e||r[s];return this._adapter.format(t,a)}_tickFormatFunction(t,e,i,r){const s=this.options,a=s.ticks.callback;if(a)return Ye(a,[t,e,i],this);const o=s.time.displayFormats,l=this._unit,c=this._majorUnit,h=l&&o[l],p=c&&o[c],g=i[e],d=c&&p&&g&&g.major;return this._adapter.format(t,r||(d?p:h))}generateTickLabels(t){let e,i,r;for(e=0,i=t.length;e<i;++e)r=t[e],r.label=this._tickFormatFunction(r.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,r=Fs(this.isHorizontal()?e.maxRotation:e.minRotation),s=Math.cos(r),a=Math.sin(r),o=this._resolveTickFontOptions(0).size;return{w:i*s+o*a,h:i*a+o*s}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,r=i[e.unit]||i.millisecond,s=this._tickFormatFunction(t,0,s0(this,[t],this._majorUnit),r),a=this._getLabelSize(s),o=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return o>0?o:1}getDataTimestamps(){let t=this._cache.data||[],e,i;if(t.length)return t;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,i=r.length;e<i;++e)t=t.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const r=this.getLabels();for(e=0,i=r.length;e<i;++e)t.push(n0(this,r[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return zm(t.sort(e0))}}Rt(Mc,"id","time"),Rt(Mc,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function ac(n,t,e){let i=0,r=n.length-1,s,a,o,l;e?(t>=n[i].pos&&t<=n[r].pos&&({lo:i,hi:r}=Vu(n,"pos",t)),{pos:s,time:o}=n[i],{pos:a,time:l}=n[r]):(t>=n[i].time&&t<=n[r].time&&({lo:i,hi:r}=Vu(n,"time",t)),{time:s,pos:o}=n[i],{time:a,pos:l}=n[r]);const c=a-s;return c?o+(l-o)*(t-s)/c:o}class a0 extends Mc{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=ac(e,this.min),this._tableRange=ac(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,r=[],s=[];let a,o,l,c,h;for(a=0,o=t.length;a<o;++a)c=t[a],c>=e&&c<=i&&r.push(c);if(r.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(a=0,o=r.length;a<o;++a)h=r[a+1],l=r[a-1],c=r[a],Math.round((h+l)/2)!==c&&s.push({time:c,pos:a/(o-1)});return s}_generate(){const t=this.min,e=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(e)||i.length===1)&&i.push(e),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?t=this.normalize(e.concat(i)):t=e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(ac(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return ac(this._table,i*this._tableRange+this._minPos,!0)}}Rt(a0,"id","timeseries"),Rt(a0,"defaults",Mc.defaults);const y1="label";function o0(n,t){typeof n=="function"?n(t):n&&(n.current=t)}function aS(n,t){const e=n.options;e&&t&&Object.assign(e,t)}function w1(n,t){n.labels=t}function _1(n,t,e=y1){const i=[];n.datasets=t.map(r=>{const s=n.datasets.find(a=>a[e]===r[e]);return!s||!r.data||i.includes(s)?{...r}:(i.push(s),Object.assign(s,r),s)})}function oS(n,t=y1){const e={labels:[],datasets:[]};return w1(e,n.labels),_1(e,n.datasets,t),e}function lS(n,t){const{height:e=150,width:i=300,redraw:r=!1,datasetIdKey:s,type:a,data:o,options:l,plugins:c=[],fallbackContent:h,updateMode:p,...g}=n,d=ie.useRef(null),v=ie.useRef(null),y=()=>{d.current&&(v.current=new Gc(d.current,{type:a,data:oS(o,s),options:l&&{...l},plugins:c}),o0(t,v.current))},x=()=>{o0(t,null),v.current&&(v.current.destroy(),v.current=null)};return ie.useEffect(()=>{!r&&v.current&&l&&aS(v.current,l)},[r,l]),ie.useEffect(()=>{!r&&v.current&&w1(v.current.config.data,o.labels)},[r,o.labels]),ie.useEffect(()=>{!r&&v.current&&o.datasets&&_1(v.current.config.data,o.datasets,s)},[r,o.datasets]),ie.useEffect(()=>{v.current&&(r?(x(),setTimeout(y)):v.current.update(p))},[r,l,o.labels,o.datasets,p]),ie.useEffect(()=>{v.current&&(x(),setTimeout(y))},[a]),ie.useEffect(()=>(y(),()=>x()),[]),S.jsx("canvas",{ref:d,role:"img",height:e,width:i,...g,children:h})}const cS=ie.forwardRef(lS);function hS(n,t){return Gc.register(t),ie.forwardRef((e,i)=>S.jsx(cS,{...e,ref:i,type:n}))}const l0=hS("bar",pc);Gc.register(Xu,Zu,bc,$4,X4,q4,ko);const uS=()=>{const n=o2(),[t,e]=ie.useState("orders"),[i,r]=ie.useState("all"),[s,a]=ie.useState([]),[o,l]=ie.useState([]),[c,h]=ie.useState([]),[p,g]=ie.useState(!0),[d,v]=ie.useState({}),[y,x]=ie.useState(!1),[_,E]=ie.useState("25000"),[O,T]=ie.useState("30000"),[V,Q]=ie.useState(!1),[J,$]=ie.useState("all"),[D,Z]=ie.useState("all"),[L,R]=ie.useState("all"),[H,W]=ie.useState("all"),[et,ct]=ie.useState("all"),[ot,rt]=ie.useState(""),[ht,At]=ie.useState(""),[wt,P]=ie.useState(""),[q,z]=ie.useState(!1),[K,X]=ie.useState(!1),[st,ut]=ie.useState(!1),[ft,vt]=ie.useState(!1),[Nt,Ot]=ie.useState(null),[jt,zt]=ie.useState(null);ie.useEffect(()=>{M(),Pt(),ge(),Qt(),St();const pt=Ef.channel("public:orders").on("postgres_changes",{event:"*",schema:"public",table:"orders"},Lt=>{if(console.log(" Realtime update:",Lt),Pt(),Lt.eventType==="INSERT"){const dt=Lt.new;dt.created_by==="customer"&&Ce.fire({toast:!0,position:"top-end",icon:"info",title:"Order Baru Masuk!",text:`${dt.nama_lengkap} (${dt.order_number})`,showConfirmButton:!1,timer:5e3})}}).subscribe();return()=>{Ef.removeChannel(pt)}},[]),ie.useEffect(()=>{t==="orders"&&Pt()},[J,D,L,et,ot,t,i]);const M=()=>{localStorage.getItem("admin_token")||n("/admin/login")},Pt=async()=>{var pt;try{g(!0);const Lt={};if(J!=="all"&&(Lt.status=J),i==="ots"?Lt.is_ots="true":i==="po"?Lt.is_ots="false":D!=="all"&&(Lt.is_ots=D),L!=="all"&&(Lt.event_id=L),ot&&(Lt.search=ot),console.log("Fetch orders params:",Lt),et==="week"){const Xt=new Date;Xt.setDate(Xt.getDate()-7),Lt.dateFrom=Xt.toISOString()}else if(et==="month"){const Xt=new Date;Xt.setMonth(Xt.getMonth()-1),Lt.dateFrom=Xt.toISOString()}else et==="custom"&&ht&&(Lt.dateFrom=new Date(ht).toISOString(),wt&&(Lt.dateTo=new Date(wt).toISOString()));const dt=await ti.get("/orders",{params:Lt});a(dt.data.data||[])}catch(Lt){console.error("Error fetching orders:",Lt),((pt=Lt.response)==null?void 0:pt.status)===401&&n("/admin/login")}finally{g(!1)}},ge=async()=>{try{const pt=await ti.get("/members");l(pt.data.data||[])}catch(pt){console.error("Error fetching members:",pt)}},Qt=async()=>{try{const pt=await ti.get("/events");console.log("Events fetched:",pt.data),h(pt.data.data||[])}catch(pt){console.error("Error fetching events:",pt)}},St=async()=>{try{const Lt=(await ti.get("/config")).data.data||{};v(Lt),Lt.harga_cheki_per_member&&E(Lt.harga_cheki_per_member),Lt.harga_cheki_grup&&T(Lt.harga_cheki_grup)}catch(pt){console.error("Error fetching config:",pt)}},ne=async pt=>{var Lt,dt;try{x(!0),await ti.patch("/config",pt),Ce.fire({icon:"success",title:"Berhasil!",text:"Konfigurasi berhasil diupdate",confirmButtonColor:"#079108"}),St()}catch(Xt){console.error("Error updating config:",Xt),Ce.fire({icon:"error",title:"Gagal!",text:((dt=(Lt=Xt.response)==null?void 0:Lt.data)==null?void 0:dt.error)||"Gagal update konfigurasi",confirmButtonColor:"#079108"})}finally{x(!1)}},It=()=>{Ce.fire({title:"Logout?",text:"Anda yakin ingin keluar?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#079108",cancelButtonColor:"#d33",confirmButtonText:"Ya, Logout",cancelButtonText:"Batal"}).then(pt=>{pt.isConfirmed&&(localStorage.removeItem("admin_token"),localStorage.removeItem("admin_user"),n("/admin/login"))})},te=async(pt,Lt)=>{var dt,Xt;try{await ti.patch(`/orders/${pt}/status`,{status:Lt}),Ce.fire({toast:!0,position:"top-end",icon:"success",title:"Status updated!",showConfirmButton:!1,timer:1500}),Pt()}catch(Et){console.error("Error updating status:",Et),Ce.fire({icon:"error",title:"Gagal Update Status",text:((Xt=(dt=Et.response)==null?void 0:dt.data)==null?void 0:Xt.error)||Et.message,confirmButtonColor:"#079108"})}},Jt=async pt=>{Ce.fire({title:"Hapus Order?",text:"Data tidak bisa dikembalikan!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#6c757d",confirmButtonText:"Ya, Hapus!",cancelButtonText:"Batal"}).then(async Lt=>{if(Lt.isConfirmed)try{await ti.delete(`/orders/${pt}`),Ce.fire("Deleted!","Order telah dihapus.","success"),Pt()}catch(dt){Ce.fire("Error!",dt.message,"error")}})},Ee=async(pt,Lt={})=>{var dt,Xt;try{const Et=await ti.post("/orders/bulk-delete",{deleteType:pt,...Lt});Ce.fire({icon:"success",title:"Berhasil!",text:Et.data.message,toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3}),Pt(),vt(!1)}catch(Et){Ce.fire("Error!",((Xt=(dt=Et.response)==null?void 0:dt.data)==null?void 0:Xt.error)||Et.message,"error")}},we=pt=>{zt(pt),X(!0)},ce=async(pt,Lt)=>{Ce.fire({title:"Hapus Event?",text:`Apakah Anda yakin ingin menghapus event "${Lt}"? Semua order terkait akan kehilangan referensi event.`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#6c757d",confirmButtonText:"Ya, Hapus!",cancelButtonText:"Batal"}).then(async dt=>{var Xt,Et;if(dt.isConfirmed)try{await ti.delete(`/events/${pt}`),Ce.fire({icon:"success",title:"Berhasil!",text:"Event berhasil dihapus",toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3}),Qt()}catch(Ht){Ce.fire("Error!",((Et=(Xt=Ht.response)==null?void 0:Xt.data)==null?void 0:Et.error)||Ht.message,"error")}})},_e=pt=>{Ot(pt),ut(!0)},xe=async({scope:pt,value:Lt})=>{try{const dt={};if(pt==="current")J!=="all"&&(dt.status=J),D!=="all"&&(dt.is_ots=D),L!=="all"&&(dt.event_id=L),ot&&(dt.search=ot),et==="custom"&&ht&&(dt.dateFrom=new Date(ht).toISOString(),wt&&(dt.dateTo=new Date(wt).toISOString()));else if(pt==="event")dt.event_id=Lt;else if(pt==="month"){const Zt=new Date(Lt),Ze=new Date(Zt.getFullYear(),Zt.getMonth(),1),Jn=new Date(Zt.getFullYear(),Zt.getMonth()+1,0);dt.dateFrom=Ze.toISOString(),dt.dateTo=Jn.toISOString()}const Xt=new URLSearchParams(dt).toString(),Et=localStorage.getItem("admin_token"),Ht="/api";Ce.fire({title:"Downloading Excel...",allowOutsideClick:!1,didOpen:()=>Ce.showLoading()});const Se=await fetch(`${Ht}/orders/export/excel?${Xt}`,{headers:{Authorization:`Bearer ${Et}`}});if(!Se.ok)throw new Error("Export gagal");const ee=await Se.blob(),Gt=window.URL.createObjectURL(ee),Tt=document.createElement("a");Tt.href=Gt;const on=pt==="event"?`Event_${Lt}`:pt==="month"?`Month_${Lt}`:"Filtered";Tt.download=`RefreshBreeze_Orders_${on}_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(Tt),Tt.click(),window.URL.revokeObjectURL(Gt),document.body.removeChild(Tt),Ce.fire({icon:"success",title:"Excel berhasil didownload!",timer:2e3,showConfirmButton:!1})}catch(dt){console.error("Error exporting:",dt),Ce.fire({icon:"error",title:"Export Gagal",text:dt.message})}},Bt=async({scope:pt,value:Lt})=>{try{Ce.fire({title:"Generating PDF...",allowOutsideClick:!1,didOpen:()=>Ce.showLoading()});const dt={};if(pt==="current")J!=="all"&&(dt.status=J),D!=="all"&&(dt.is_ots=D),L!=="all"&&(dt.event_id=L),ot&&(dt.search=ot);else if(pt==="event")dt.event_id=Lt;else if(pt==="month"){const he=new Date(Lt),Be=new Date(he.getFullYear(),he.getMonth(),1),Te=new Date(he.getFullYear(),he.getMonth()+1,0);dt.dateFrom=Be.toISOString(),dt.dateTo=Te.toISOString()}const Et=(await ti.get("/orders",{params:dt})).data.data;if(!Et||Et.length===0)throw new Error("Tidak ada data untuk diexport.");const Ht=he=>String(he||"").replace(/[\u{1F300}-\u{1FFFF}]|[\u{2600}-\u{26FF}]|[\u{2700}-\u{27BF}]/gu,"").trim();let Se="";if(pt==="event"&&Lt){const he=c.find(Be=>Be.id===Lt);Se=he?`${he.nama} - ${he.bulan} ${he.tahun}`:"Event"}const ee=Et.filter(he=>he.status==="checked"||he.status==="completed");let Gt=0,Tt=0;const on={};ee.forEach(he=>{var Be;Gt+=he.total_harga||0,(Be=he.order_items)==null||Be.forEach(Te=>{Tt+=Te.quantity||0;let Ue=Ht(Te.item_name.replace("Cheki ","").replace(" (Pre-Order)",""));(Ue.toLowerCase().includes("all member")||Ue.toLowerCase().includes("group"))&&(Ue="Group"),on[Ue]||(on[Ue]=0),on[Ue]+=Te.quantity||0})});const Zt=new Yt;Zt.setFillColor(7,145,8),Zt.rect(0,0,210,24,"F"),Zt.setTextColor(255,255,255),Zt.setFontSize(16),Zt.setFont("helvetica","bold"),Zt.text("REFRESH BREEZE - LAPORAN PENJUALAN",105,16,{align:"center"}),Zt.setTextColor(0,0,0),Zt.setFontSize(10),Zt.setFont("helvetica","normal"),Zt.text(`Tanggal Export: ${new Date().toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})}`,14,35);let Ze="Sesuai Filter Aktif";if(pt==="event")Ze=Se;else if(pt==="month"){const[he,Be]=Lt.split("-");Ze=`${["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"][parseInt(Be)-1]} ${he}`}Zt.text(`Cakupan Data: ${Ze}`,14,40),Zt.setFillColor(240,253,244),Zt.roundedRect(14,45,182,35,3,3,"F"),Zt.setDrawColor(34,197,94),Zt.roundedRect(14,45,182,35,3,3,"S"),Zt.setFontSize(11),Zt.setFont("helvetica","bold"),Zt.setTextColor(22,101,52),Zt.text("RINGKASAN (Checked/Completed Orders)",20,55),Zt.setFontSize(10),Zt.setFont("helvetica","normal"),Zt.setTextColor(0,0,0),Zt.text(`Total Omzet: Rp ${Gt.toLocaleString("id-ID")}`,20,65),Zt.text(`Order Terbayar: ${ee.length} dari ${Et.length}`,100,65),Zt.text(`Total Cheki: ${Tt} pcs`,20,72);const Jn=Object.entries(on).sort((he,Be)=>Be[1]-he[1]).map(([he,Be])=>[Ht(he),`${Be} pcs`]);Kp(Zt,{startY:85,head:[["Member","Qty Terjual"]],body:Jn,theme:"striped",headStyles:{fillColor:[34,197,94],textColor:255},styles:{fontSize:9,cellPadding:2},columnStyles:{0:{cellWidth:60},1:{cellWidth:30}},tableWidth:100,margin:{left:14}});const re=Zt.lastAutoTable&&Zt.lastAutoTable.finalY||120,Pi=Et.map((he,Be)=>{var Vi;const Te=((Vi=he.order_items)==null?void 0:Vi.map(Ei=>`${Ht(Ei.item_name)} x${Ei.quantity}`).join(", "))||"-",Ue=he.status==="pending"?"Unchecked":he.status==="checked"?"Checked":"Completed",wn=he.status==="pending"?"-":`Rp ${(he.total_harga||0).toLocaleString("id-ID")}`;return[Be+1,he.order_number,Ht(he.nama_lengkap||""),he.is_ots?"OTS":"PO",Te,wn,Ue]});Kp(Zt,{startY:re+10,head:[["#","Order ID","Nama","Tipe","Items","Total","Status"]],body:Pi,theme:"grid",headStyles:{fillColor:[7,145,8],textColor:255,fontStyle:"bold"},styles:{fontSize:8,cellPadding:2,overflow:"linebreak"},columnStyles:{0:{cellWidth:10},1:{cellWidth:32},2:{cellWidth:28},3:{cellWidth:12},4:{cellWidth:55},5:{cellWidth:25},6:{cellWidth:20}}});const Ci=Ze.replace(/[^a-zA-Z0-9 ]/g,"").replace(/ /g,"_");Zt.save(`Laporan_${Ci}_${new Date().toISOString().slice(0,10)}.pdf`),Ce.fire({icon:"success",title:"PDF Berhasil Dibuat!",timer:1500,showConfirmButton:!1})}catch(dt){console.error(dt),Ce.fire({icon:"error",title:"Gagal Membuat PDF",text:dt.message})}},de=()=>{const pt=s.filter(dt=>dt.is_ots),Lt=s.filter(dt=>!dt.is_ots);return S.jsxs("div",{className:"space-y-6",children:[S.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:S.jsxs("div",{className:"flex border-b",children:[S.jsx("button",{onClick:()=>r("all"),className:`flex-1 px-6 py-4 font-semibold transition-colors ${i==="all"?"bg-custom-green text-white border-b-4 border-green-700":"bg-gray-50 text-gray-600 hover:bg-gray-100"}`,children:S.jsxs("span",{className:"flex items-center justify-center gap-2",children:[S.jsx(Ch,{}),"Semua Order"]})}),S.jsx("button",{onClick:()=>r("ots"),className:`flex-1 px-6 py-4 font-semibold transition-colors ${i==="ots"?"bg-orange-500 text-white border-b-4 border-orange-700":"bg-gray-50 text-gray-600 hover:bg-gray-100"}`,children:S.jsx("span",{className:"flex items-center justify-center gap-2",children:" Order OTS"})}),S.jsx("button",{onClick:()=>r("po"),className:`flex-1 px-6 py-4 font-semibold transition-colors ${i==="po"?"bg-blue-500 text-white border-b-4 border-blue-700":"bg-gray-50 text-gray-600 hover:bg-gray-100"}`,children:S.jsx("span",{className:"flex items-center justify-center gap-2",children:" Pre-Order"})})]})}),S.jsxs("div",{className:"bg-blue-50 border border-blue-200 p-4 rounded-xl flex flex-col md:flex-row gap-4 items-start md:items-center text-sm text-blue-800",children:[S.jsx("span",{className:"font-bold whitespace-nowrap",children:"Panduan Status:"}),S.jsxs("div",{className:"flex flex-wrap gap-4",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("span",{className:"w-3 h-3 rounded-full bg-white border border-gray-300"}),S.jsxs("span",{children:[S.jsx("strong",{children:"Unchecked:"})," Order baru (Belum dicek/verifikasi)"]})]}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("span",{className:"w-3 h-3 rounded-full bg-blue-100 border border-blue-400"}),S.jsxs("span",{children:[S.jsx("strong",{children:"Checked:"})," Pembayaran valid (Lunas)"]})]}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("span",{className:"w-3 h-3 rounded-full bg-green-100 border border-green-400"}),S.jsxs("span",{children:[S.jsx("strong",{children:"Completed:"})," Selesai (Tiket diambil/Done)"]})]})]})]}),S.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[S.jsx("input",{type:"text",placeholder:"Cari nama, email, order number...",value:ot,onChange:dt=>rt(dt.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-custom-green"}),S.jsxs("select",{value:J,onChange:dt=>$(dt.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-custom-green",children:[S.jsx("option",{value:"all",children:"Semua Status"}),S.jsx("option",{value:"pending",children:"Unchecked"}),S.jsx("option",{value:"checked",children:"Checked"}),S.jsx("option",{value:"completed",children:"Completed"})]}),S.jsxs("select",{value:L,onChange:dt=>R(dt.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-custom-green bg-white",children:[S.jsx("option",{value:"all",children:"Semua Event"}),c.map(dt=>S.jsxs("option",{value:dt.id,children:[dt.nama," - ",dt.bulan," ",dt.tahun]},dt.id))]}),S.jsxs("select",{value:et,onChange:dt=>ct(dt.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-custom-green",children:[S.jsx("option",{value:"all",children:"Semua Waktu"}),S.jsx("option",{value:"week",children:"Minggu Ini"}),S.jsx("option",{value:"month",children:"Bulan Ini"}),S.jsx("option",{value:"custom",children:"Custom Range"})]})]}),et==="custom"&&S.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4 mb-4",children:[S.jsx("input",{type:"date",value:ht,onChange:dt=>At(dt.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg"}),S.jsx("input",{type:"date",value:wt,onChange:dt=>P(dt.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg"})]}),S.jsxs("div",{className:"flex gap-3 justify-end border-t pt-4",children:[S.jsxs("button",{onClick:async()=>{const{value:dt}=await Ce.fire({title:"Export Data",input:"radio",inputOptions:{excel:" Excel (.xlsx)",pdf:" PDF Document"},inputValidator:ee=>{if(!ee)return"Pilih format export!"},confirmButtonText:"Lanjut ",confirmButtonColor:"#079108",showCancelButton:!0,cancelButtonText:"Batal"});if(!dt)return;const Xt={current:" Sesuai Filter di Layar"};c.forEach(ee=>{Xt[`event_${ee.id}`]=` ${ee.nama} (${ee.bulan} ${ee.tahun})`});const{value:Et}=await Ce.fire({title:"Pilih Cakupan Data",input:"radio",inputOptions:Xt,inputValidator:ee=>{if(!ee)return"Pilih cakupan data!"},confirmButtonText:dt==="excel"?" Download Excel":" Download PDF",confirmButtonColor:dt==="excel"?"#079108":"#EF4444",showCancelButton:!0,cancelButtonText:"Batal"});if(!Et)return;const Ht=Et.startsWith("event_"),Se=Ht?Et.replace("event_",""):null;dt==="excel"?await xe({scope:Ht?"event":"current",value:Se}):await Bt({scope:Ht?"event":"current",value:Se})},className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-emerald-500 to-teal-500 text-white rounded-lg hover:shadow-lg transition-all text-sm font-bold active:scale-95",children:[S.jsx(h0,{})," Export Data"]}),S.jsxs("button",{onClick:()=>vt(!0),className:"bg-red-600 text-white px-6 py-2 rounded-lg font-semibold hover:bg-red-700 transition-colors flex items-center gap-2",children:[S.jsx(vc,{})," Hapus Data"]})]})]}),(i==="all"||i==="ots")&&S.jsx(c0,{data:pt,title:"Order OTS (On The Spot)",icon:S.jsx("span",{className:"text-xl",children:""}),emptyMessage:"Tidak ada data OTS",loading:p,onView:_e,onDelete:Jt,onStatusChange:te,action:S.jsxs("button",{onClick:()=>z(!0),className:"bg-custom-green text-white px-4 py-2 rounded-lg font-semibold hover:bg-green-700 transition-colors flex items-center gap-2 text-sm",children:[S.jsx(af,{})," Order OTS"]})}),(i==="all"||i==="po")&&S.jsx(c0,{data:Lt,title:"Pre-Order (Online)",icon:S.jsx("span",{className:"text-xl",children:""}),emptyMessage:"Tidak ada data Pre-Order",loading:p,onView:_e,onDelete:Jt,onStatusChange:te})]})},$t=()=>{const pt=H==="all"?s:s.filter(Tt=>Tt.event_id===H),Lt=pt.reduce((Tt,on)=>Tt+(on.total_harga||0),0),dt={};pt.forEach(Tt=>{var on;(on=Tt.order_items)==null||on.forEach(Zt=>{let Ze=Zt.item_name.replace("Cheki ","").replace(" (Pre-Order)","").trim();(Ze.toLowerCase().includes("all member")||Ze.toLowerCase().includes("group"))&&(Ze="All Member (Group)"),dt[Ze]||(dt[Ze]={quantity:0,revenue:0}),dt[Ze].quantity+=Zt.quantity||0,dt[Ze].revenue+=(Zt.price||0)*(Zt.quantity||0)})});const Xt=Object.keys(dt),Et=Xt.map(Tt=>dt[Tt].quantity),Ht=Xt.map(Tt=>dt[Tt].revenue),Se={responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"Statistik Penjualan per Member"}},scales:{x:{beginAtZero:!0}}},ee={labels:Xt,datasets:[{label:"Jumlah Cheki Terjual",data:Et,backgroundColor:"rgba(53, 162, 235, 0.7)",borderColor:"rgb(53, 162, 235)",borderWidth:1}]},Gt={labels:Xt,datasets:[{label:"Total Pendapatan (Rp)",data:Ht,backgroundColor:"rgba(75, 192, 192, 0.7)",borderColor:"rgb(75, 192, 192)",borderWidth:1}]};return S.jsxs("div",{className:"space-y-8 animate-fade-in",children:[S.jsxs("div",{className:"flex justify-between items-center",children:[S.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Rekapitulasi Penjualan"}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx(m2,{className:"text-gray-500"}),S.jsxs("select",{value:H,onChange:Tt=>W(Tt.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-custom-green bg-white",children:[S.jsx("option",{value:"all",children:"Semua Event"}),c.map(Tt=>S.jsxs("option",{value:Tt.id,children:[Tt.nama," - ",Tt.bulan," ",Tt.tahun]},Tt.id))]})]})]}),S.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[{label:"Total Orders",value:pt.length,color:"bg-blue-500",icon:S.jsx(Ch,{})},{label:"Order OTS",value:pt.filter(Tt=>Tt.is_ots).length,color:"bg-orange-500",icon:S.jsx("span",{className:"text-xl",children:""})},{label:"Pre-Order",value:pt.filter(Tt=>!Tt.is_ots).length,color:"bg-blue-600",icon:S.jsx("span",{className:"text-xl",children:""})},{label:"Unchecked",value:pt.filter(Tt=>Tt.status==="pending").length,color:"bg-gray-400",icon:S.jsx("span",{className:"text-xl",children:""})},{label:"Completed",value:pt.filter(Tt=>Tt.status==="completed").length,color:"bg-green-600",icon:S.jsx(b2,{})},{label:"Total Pemasukan",value:`Rp ${Lt.toLocaleString("id-ID")}`,color:"bg-custom-green",icon:S.jsx("span",{className:"text-xl font-bold",children:"Rp"}),wide:!0}].map((Tt,on)=>S.jsxs("div",{className:`bg-white p-4 rounded-xl shadow-md ${Tt.wide?"col-span-2 md:col-span-1 lg:col-span-1":""}`,children:[S.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[S.jsx("div",{className:`w-10 h-10 ${Tt.color} rounded-full flex items-center justify-center text-white`,children:Tt.icon}),S.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:Tt.label})]}),S.jsx("div",{className:`${typeof Tt.value=="string"&&Tt.value.length>10?"text-xl":"text-3xl"} font-bold text-gray-800`,children:Tt.value})]},on))}),S.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[S.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[S.jsx("h3",{className:"text-lg font-bold text-gray-700 mb-4 text-center",children:"Total Cheki per Member"}),S.jsx(l0,{options:Se,data:ee})]}),S.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[S.jsx("h3",{className:"text-lg font-bold text-gray-700 mb-4 text-center",children:"Total Rupiah per Member"}),S.jsx(l0,{options:{...Se,plugins:{...Se.plugins,title:{display:!1}}},data:Gt})]})]})]})},tn=async(pt,Lt)=>{try{await ti.patch(`/events/${pt}`,{is_past:!Lt}),Qt(),Ce.fire({icon:"success",title:Lt?"Event diaktifkan kembali!":"Event ditandai selesai!",timer:1500,showConfirmButton:!1})}catch(dt){Ce.fire({icon:"error",title:"Gagal",text:dt.message})}},ke=()=>S.jsxs("div",{className:"space-y-6",children:[S.jsxs("div",{className:"flex justify-between items-center",children:[S.jsx("h2",{className:"text-2xl font-bold",children:"Event Management"}),S.jsxs("button",{onClick:()=>{zt(null),X(!0)},className:"bg-custom-green text-white px-6 py-2 rounded-lg font-semibold hover:bg-green-700 transition-colors flex items-center gap-2",children:[S.jsx(af,{})," Tambah Event"]})]}),S.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:S.jsx("div",{className:"overflow-x-auto",children:S.jsxs("table",{className:"w-full",children:[S.jsx("thead",{className:"bg-gray-50 border-b",children:S.jsxs("tr",{children:[S.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase",children:"Event"}),S.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase",children:"Tanggal"}),S.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase",children:"Lokasi"}),S.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase",children:"Lineup"}),S.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold text-gray-600 uppercase",children:"Status"}),S.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold text-gray-600 uppercase",children:"Actions"})]})}),S.jsx("tbody",{children:c.length===0?S.jsx("tr",{children:S.jsx("td",{colSpan:"6",className:"text-center py-8 text-gray-400",children:"Belum ada event"})}):c.map(pt=>{var Lt;return S.jsxs("tr",{className:"border-b hover:bg-gray-50 transition-colors",children:[S.jsxs("td",{className:"px-4 py-3",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("span",{className:"font-bold text-gray-800",children:pt.nama}),pt.is_special&&S.jsx("span",{className:"px-2 py-0.5 rounded-full text-white text-[10px] font-bold",style:{backgroundColor:pt.theme_color||"#FF6B9D"},children:pt.theme_name||"Special"})]}),pt.event_time&&S.jsx("p",{className:"text-xs text-gray-500",children:pt.event_time})]}),S.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600",children:[pt.tanggal," ",pt.bulan," ",pt.tahun]}),S.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:pt.lokasi}),S.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600",children:[((Lt=pt.event_lineup)==null?void 0:Lt.length)||0," member"]}),S.jsx("td",{className:"px-4 py-3 text-center",children:S.jsx("button",{onClick:()=>tn(pt.id,pt.is_past),className:`px-3 py-1 rounded-full text-xs font-bold transition-all ${pt.is_past?"bg-gray-200 text-gray-600 hover:bg-green-100 hover:text-green-700":"bg-green-100 text-green-700 hover:bg-gray-200 hover:text-gray-600"}`,title:pt.is_past?"Klik untuk aktifkan":"Klik untuk tandai selesai",children:pt.is_past?" Selesai":" Aktif"})}),S.jsx("td",{className:"px-4 py-3",children:S.jsxs("div",{className:"flex items-center justify-center gap-2",children:[S.jsx("button",{onClick:()=>we(pt),className:"text-blue-600 hover:text-blue-800 p-2 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit",children:S.jsx(sf,{})}),S.jsx("button",{onClick:()=>ce(pt.id,pt.nama),className:"text-red-600 hover:text-red-800 p-2 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:S.jsx(vc,{})})]})})]},pt.id)})})]})})})]}),be=()=>{const pt=()=>{ne({harga_cheki_per_member:_,harga_cheki_grup:O})};return S.jsx("div",{className:"max-w-2xl mx-auto",children:S.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:[S.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Pengaturan Harga"}),S.jsxs("div",{className:"space-y-6",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Harga Cheki Per Member"}),S.jsxs("div",{className:"relative",children:[S.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 font-medium",children:"Rp"}),S.jsx("input",{type:"number",value:_,onChange:Lt=>E(Lt.target.value),className:"w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:border-custom-green focus:outline-none transition-colors",placeholder:"25000"})]}),S.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Harga untuk cheki per member individual"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Harga Cheki Grup (All Member)"}),S.jsxs("div",{className:"relative",children:[S.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 font-medium",children:"Rp"}),S.jsx("input",{type:"number",value:O,onChange:Lt=>T(Lt.target.value),className:"w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:border-custom-green focus:outline-none transition-colors",placeholder:"30000"})]}),S.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Harga untuk cheki grup (semua member)"})]}),S.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border-2 border-gray-200",children:[S.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Preview Harga:"}),S.jsxs("div",{className:"space-y-1 text-sm",children:[S.jsxs("div",{className:"flex justify-between",children:[S.jsx("span",{className:"text-gray-600",children:"Per Member:"}),S.jsx("span",{className:"font-bold text-custom-green",children:parseInt(_||0).toLocaleString("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0})})]}),S.jsxs("div",{className:"flex justify-between",children:[S.jsx("span",{className:"text-gray-600",children:"Grup:"}),S.jsx("span",{className:"font-bold text-custom-green",children:parseInt(O||0).toLocaleString("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0})})]})]})]}),S.jsx("button",{onClick:pt,disabled:y,className:"w-full bg-gradient-to-r from-custom-green to-green-600 text-white py-4 rounded-xl font-bold text-lg shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:y?"Menyimpan...":"Simpan Pengaturan"})]})]})})};return S.jsxs("div",{className:"min-h-screen bg-gray-100",children:[S.jsx("header",{className:"bg-white shadow-md sticky top-0 z-40",children:S.jsxs("div",{className:"container mx-auto px-4 py-4 flex justify-between items-center",children:[S.jsx("h1",{className:"text-lg md:text-2xl font-extrabold text-custom-green",children:"REFRESH BREEZE - Admin CMS"}),S.jsxs("button",{onClick:It,className:"bg-red-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-red-700 transition-colors flex items-center gap-2",children:[S.jsx(f2,{})," Logout"]})]})}),S.jsx("div",{className:"bg-white border-b",children:S.jsx("div",{className:"container mx-auto px-4 overflow-x-auto",children:S.jsx("div",{className:"flex gap-4",children:[{id:"orders",label:"Orders",icon:Ch},{id:"recap",label:"Rekap",icon:p2},{id:"events",label:"Events",icon:g2},{id:"settings",label:"Settings",icon:sf}].map(pt=>S.jsxs("button",{onClick:()=>e(pt.id),className:`px-4 py-3 md:px-6 md:py-4 font-semibold transition-colors flex items-center gap-2 border-b-2 whitespace-nowrap ${t===pt.id?"text-custom-green border-custom-green":"text-gray-500 border-transparent hover:text-custom-green"}`,children:[S.jsx(pt.icon,{})," ",pt.label]},pt.id))})})}),S.jsxs("main",{className:"container mx-auto px-4 py-8 pb-20",children:[t==="orders"&&de(),t==="recap"&&$t(),t==="events"&&ke(),t==="settings"&&be()]}),st&&Nt&&S.jsx(dS,{order:Nt,onClose:()=>{ut(!1),Ot(null)}}),q&&S.jsx(fS,{members:o,events:c,onClose:()=>z(!1),onSuccess:()=>{z(!1),Pt()}}),ft&&S.jsx(gS,{events:c,onClose:()=>vt(!1),onConfirm:Ee}),K&&S.jsx(pS,{members:o,editingEvent:jt,onClose:()=>{X(!1),zt(null)},onSuccess:()=>{X(!1),zt(null),Qt()}})]})},c0=({data:n,title:t,icon:e,emptyMessage:i,action:r,loading:s,onView:a,onDelete:o,onStatusChange:l})=>{const c=l2.useRef(null),[h,p]=ie.useState(0),g=v=>{if(c.current){const y=v.target.value,x=c.current.scrollWidth-c.current.clientWidth;c.current.scrollLeft=y/100*x,p(y)}},d=()=>{if(c.current){const{scrollLeft:v,scrollWidth:y,clientWidth:x}=c.current,_=y-x;_>0&&p(v/_*100)}};return S.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden mb-6",children:[S.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-gray-50",children:[S.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[e," ",t,S.jsxs("span",{className:"text-sm font-normal text-gray-500 ml-2",children:["(",n.length," items)"]})]}),r]}),S.jsxs("div",{className:"relative",children:[S.jsxs("div",{className:"md:hidden px-4 py-2 bg-gray-50 border-b",children:[S.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-1",children:[S.jsx("span",{children:"Geser untuk melihat detail"}),S.jsx("span",{className:"flex-1 border-t border-gray-300"})]}),S.jsx("input",{type:"range",min:"0",max:"100",value:h,onChange:g,className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-custom-green"})]}),S.jsx("div",{ref:c,className:"overflow-x-auto",onScroll:d,children:S.jsxs("table",{className:"w-full min-w-[1000px]",children:[S.jsx("thead",{className:"bg-custom-green text-white",children:S.jsxs("tr",{children:[S.jsx("th",{className:"px-4 py-3 text-left text-sm font-bold",children:"Order #"}),S.jsx("th",{className:"px-4 py-3 text-left text-sm font-bold",children:"Nama"}),S.jsx("th",{className:"px-4 py-3 text-left text-sm font-bold",children:"Items"}),S.jsx("th",{className:"px-4 py-3 text-left text-sm font-bold",children:"Bukti Bayar"}),S.jsx("th",{className:"px-4 py-3 text-left text-sm font-bold",children:"Total"}),S.jsx("th",{className:"px-4 py-3 text-left text-sm font-bold",children:"Status"}),S.jsx("th",{className:"px-4 py-3 text-left text-sm font-bold",children:"Tanggal"}),S.jsx("th",{className:"px-4 py-3 text-center text-sm font-bold",children:"Actions"})]})}),S.jsx("tbody",{children:s?S.jsx("tr",{children:S.jsx("td",{colSpan:"8",className:"text-center py-8",children:S.jsx("i",{className:"fas fa-spinner animate-spin text-3xl text-custom-green"})})}):n.length===0?S.jsx("tr",{children:S.jsx("td",{colSpan:"8",className:"text-center py-8 text-gray-400",children:i})}):n.map(v=>{var y,x;return S.jsxs("tr",{className:"border-b hover:bg-gray-50 transition-colors",children:[S.jsx("td",{className:"px-4 py-3 text-sm font-mono",children:v.order_number}),S.jsxs("td",{className:"px-4 py-3 text-sm",children:[S.jsx("div",{className:"font-semibold",children:v.nama_lengkap}),S.jsx("div",{className:"text-xs text-gray-500",children:v.email})]}),S.jsx("td",{className:"px-4 py-3 text-sm",children:S.jsx("div",{className:"space-y-1",children:((y=v.order_items)==null?void 0:y.map((_,E)=>S.jsxs("div",{className:"text-xs",children:[S.jsx("span",{className:"font-medium",children:_.item_name}),S.jsxs("span",{className:"text-gray-500",children:[" x",_.quantity]})]},E)))||S.jsx("span",{className:"text-gray-400",children:"No items"})})}),S.jsx("td",{className:"px-4 py-3 text-sm",children:!v.is_ots&&v.payment_proof_url?S.jsxs("a",{href:v.payment_proof_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 flex items-center gap-1 text-xs",children:[S.jsx(v2,{})," Lihat"]}):v.is_ots?S.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded ${v.payment_proof_url==="QR"?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"}`,children:v.payment_proof_url||"Cash"}):S.jsx("span",{className:"text-gray-400 text-xs",children:"-"})}),S.jsxs("td",{className:"px-4 py-3 text-sm font-bold text-custom-green",children:["Rp ",(x=v.total_harga)==null?void 0:x.toLocaleString("id-ID")]}),S.jsx("td",{className:"px-4 py-3",children:S.jsxs("select",{value:v.status,onChange:_=>l(v.id,_.target.value),className:`px-3 py-1 rounded-full text-xs font-bold border-2 cursor-pointer ${v.status==="pending"?"bg-white text-gray-600 border-gray-300":v.status==="checked"?"bg-blue-100 text-blue-700 border-blue-400":"bg-green-100 text-green-700 border-green-400"}`,children:[S.jsx("option",{value:"pending",children:"Unchecked"}),S.jsx("option",{value:"checked",children:"Checked"}),S.jsx("option",{value:"completed",children:"Completed"})]})}),S.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:new Date(v.created_at).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric"})}),S.jsx("td",{className:"px-4 py-3",children:S.jsxs("div",{className:"flex items-center justify-center gap-2",children:[S.jsx("button",{onClick:()=>a(v),className:"text-blue-600 hover:text-blue-800 p-2",title:"Detail",children:S.jsx(u0,{})}),S.jsx("button",{onClick:()=>o(v.id),className:"text-red-600 hover:text-red-800 p-2",title:"Delete",children:S.jsx(vc,{})})]})})]},v.id)})})]})})]})]})},dS=({order:n,onClose:t})=>{var e,i;return S.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:S.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[S.jsxs("div",{className:"p-6 border-b flex justify-between items-center bg-custom-green text-white",children:[S.jsxs("h3",{className:"text-xl font-bold",children:["Detail Order - ",n.order_number]}),S.jsx("button",{onClick:t,className:"text-2xl hover:text-gray-200",children:S.jsx(Io,{})})]}),S.jsxs("div",{className:"p-6 space-y-4",children:[S.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[S.jsxs("div",{children:[S.jsx("p",{className:"text-sm text-gray-500",children:"Nama Lengkap"}),S.jsx("p",{className:"font-semibold",children:n.nama_lengkap})]}),S.jsxs("div",{children:[S.jsx("p",{className:"text-sm text-gray-500",children:"WhatsApp"}),S.jsx("p",{className:"font-semibold",children:n.whatsapp})]}),S.jsxs("div",{children:[S.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),S.jsx("p",{className:"font-semibold",children:n.email})]}),S.jsxs("div",{children:[S.jsx("p",{className:"text-sm text-gray-500",children:"Instagram"}),S.jsx("p",{className:"font-semibold",children:n.instagram||"-"})]})]}),S.jsxs("div",{className:"border-t pt-4",children:[S.jsx("h4",{className:"font-bold mb-2",children:"Order Items:"}),S.jsx("div",{className:"space-y-2",children:(e=n.order_items)==null?void 0:e.map((r,s)=>S.jsxs("div",{className:"flex justify-between items-center bg-gray-50 p-3 rounded",children:[S.jsxs("span",{children:[r.item_name," x ",r.quantity]}),S.jsxs("span",{className:"font-bold text-custom-green",children:["Rp ",(r.price*r.quantity).toLocaleString("id-ID")]})]},s))}),S.jsxs("div",{className:"mt-4 pt-4 border-t flex justify-between items-center",children:[S.jsx("span",{className:"font-bold text-lg",children:"Total:"}),S.jsxs("span",{className:"font-extrabold text-2xl text-custom-green",children:["Rp ",(i=n.total_harga)==null?void 0:i.toLocaleString("id-ID")]})]})]}),n.payment_proof_url&&S.jsxs("div",{className:"border-t pt-4",children:[S.jsx("h4",{className:"font-bold mb-2",children:"Bukti Transfer:"}),S.jsx("a",{href:n.payment_proof_url,target:"_blank",rel:"noopener noreferrer",className:"block",children:S.jsx("img",{src:n.payment_proof_url,alt:"Payment Proof",className:"w-full max-w-md mx-auto rounded-lg border shadow-md hover:shadow-xl transition-shadow cursor-pointer"})}),S.jsxs("a",{href:n.payment_proof_url,target:"_blank",rel:"noopener noreferrer",className:"mt-2 inline-block text-blue-600 hover:text-blue-800 text-sm",children:[S.jsx(u0,{className:"inline mr-1"})," Lihat di Google Drive"]})]})]})]})})},fS=({members:n,events:t,onClose:e,onSuccess:i})=>{const[r,s]=ie.useState({nama_lengkap:"",event_id:"",payment_method:"Cash",items:[]}),[a,o]=ie.useState(!1),l=g=>{const v=g.member_id==="group"?3e4:25e3,y=r.items.find(x=>x.member_id===g.id);s(y?{...r,items:r.items.map(x=>x.member_id===g.id?{...x,quantity:x.quantity+1}:x)}:{...r,items:[...r.items,{member_id:g.id,name:`Cheki ${wu(g.nama_panggung)}`,price:v,quantity:1}]})},c=g=>{s({...r,items:r.items.filter((d,v)=>v!==g)})},h=async g=>{var d,v;g.preventDefault(),o(!0);try{await ti.post("/orders/ots",r),Ce.fire({icon:"success",title:"Order OTS Berhasil!",confirmButtonColor:"#079108"}),i()}catch(y){Ce.fire({icon:"error",title:"Gagal",text:((v=(d=y.response)==null?void 0:d.data)==null?void 0:v.error)||y.message,confirmButtonColor:"#079108"})}finally{o(!1)}},p=r.items.reduce((g,d)=>g+d.price*d.quantity,0);return S.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:S.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[S.jsxs("div",{className:"p-6 border-b flex justify-between items-center bg-custom-green text-white",children:[S.jsx("h3",{className:"text-xl font-bold",children:"Order OTS (On The Spot)"}),S.jsx("button",{onClick:e,className:"text-2xl hover:text-gray-200",children:S.jsx(Io,{})})]}),S.jsxs("form",{onSubmit:h,className:"p-6",children:[S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[S.jsxs("div",{className:"space-y-4",children:[S.jsxs("select",{value:r.event_id,onChange:g=>s({...r,event_id:g.target.value}),className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-custom-green",required:!0,children:[S.jsx("option",{value:"",children:"-- Pilih Event *--"}),t.filter(g=>!g.is_special).map(g=>S.jsxs("option",{value:g.id,children:[g.nama," - ",g.tanggal," ",g.bulan," ",g.tahun]},g.id))]}),S.jsx("input",{type:"text",placeholder:"Nama Lengkap *",value:r.nama_lengkap,onChange:g=>s({...r,nama_lengkap:g.target.value}),className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-custom-green",required:!0}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Metode Pembayaran *"}),S.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[S.jsx("button",{type:"button",onClick:()=>s({...r,payment_method:"Cash"}),className:`px-4 py-3 rounded-lg font-semibold border-2 transition-all ${r.payment_method==="Cash"?"bg-custom-green text-white border-custom-green":"bg-white text-gray-700 border-gray-300 hover:border-custom-green"}`,children:" Cash"}),S.jsx("button",{type:"button",onClick:()=>s({...r,payment_method:"QR"}),className:`px-4 py-3 rounded-lg font-semibold border-2 transition-all ${r.payment_method==="QR"?"bg-custom-green text-white border-custom-green":"bg-white text-gray-700 border-gray-300 hover:border-custom-green"}`,children:" QR Code"})]})]}),S.jsxs("div",{className:"border-t pt-4",children:[S.jsx("h4",{className:"font-bold mb-2",children:"Items:"}),r.items.length===0?S.jsx("p",{className:"text-gray-400 text-sm",children:"Pilih member di sebelah kanan"}):S.jsxs("div",{className:"space-y-2",children:[S.jsx("div",{className:"max-h-[120px] overflow-y-auto space-y-2 pr-2",children:r.items.map((g,d)=>S.jsxs("div",{className:"flex justify-between items-center bg-gray-50 p-2 rounded",children:[S.jsxs("span",{className:"text-sm",children:[g.name," x ",g.quantity]}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsxs("span",{className:"text-sm font-semibold",children:["Rp ",(g.price*g.quantity).toLocaleString("id-ID")]}),S.jsx("button",{type:"button",onClick:()=>c(d),className:"text-red-600 hover:text-red-800",children:S.jsx(Io,{})})]})]},d))}),S.jsxs("div",{className:"pt-2 border-t flex justify-between font-bold",children:[S.jsx("span",{children:"Total:"}),S.jsxs("span",{className:"text-custom-green",children:["Rp ",p.toLocaleString("id-ID")]})]})]})]})]}),S.jsxs("div",{className:"border-l pl-6",children:[S.jsx("h4",{className:"font-bold mb-4",children:"Pilih Member:"}),S.jsx("div",{className:"grid grid-cols-2 gap-3 max-h-96 overflow-y-auto",children:n.map(g=>S.jsxs("button",{type:"button",onClick:()=>l(g),className:"p-3 border rounded-lg hover:border-custom-green hover:bg-custom-mint/20 transition-colors text-left",children:[S.jsx("div",{className:"text-sm font-semibold",children:wu(g.nama_panggung)}),S.jsxs("div",{className:"text-xs text-gray-500",children:["Rp ",(g.member_id==="group"?3e4:25e3).toLocaleString("id-ID")]})]},g.id))})]})]}),S.jsxs("div",{className:"mt-6 flex flex-col-reverse md:flex-row gap-3",children:[S.jsx("button",{type:"button",onClick:e,className:"flex-1 bg-gray-200 text-gray-700 px-6 py-3 rounded-lg font-semibold hover:bg-gray-300",children:"Batal"}),S.jsx("button",{type:"submit",disabled:a||r.items.length===0,className:"flex-1 bg-custom-green text-white px-6 py-3 rounded-lg font-semibold hover:bg-green-700 disabled:bg-gray-400",children:a?"Menyimpan...":"Simpan Order"})]})]})]})})},pS=({members:n,onClose:t,onSuccess:e,editingEvent:i})=>{var d;const[r,s]=ie.useState(i!=null&&i.is_special?"special":"regular"),[a,o]=ie.useState(()=>{var v;if(i){const y=((v=i.event_lineup)==null?void 0:v.map(x=>x.member_id))||[];return{...i,lineup:y,is_special:i.is_special||!1,theme_name:i.theme_name||"",theme_color:i.theme_color||"#FF6B9D"}}return{nama:"",tanggal:"",bulan:"",tahun:new Date().getFullYear(),lokasi:"",event_time:"",cheki_time:"",is_past:!1,is_special:!1,theme_name:"",theme_color:"#FF6B9D",lineup:[]}}),[l,c]=ie.useState(!1),h=["#FF6B9D","#EF4444","#F97316","#F59E0B","#10B981","#3B82F6","#8B5CF6"],p=v=>{o(y=>({...y,lineup:y.lineup.includes(v)?y.lineup.filter(x=>x!==v):[...y.lineup,v]}))};ie.useEffect(()=>{o(v=>({...v,is_special:r==="special"}))},[r]);const g=async v=>{var y,x;v.preventDefault(),c(!0);try{if(i){const _={...a};delete _.event_gallery,delete _.event_lineup,delete _.created_at,delete _.id,await ti.patch(`/events/${i.id}`,_),Ce.fire({icon:"success",title:"Event Updated!",timer:1500,showConfirmButton:!1})}else await ti.post("/events",a),Ce.fire({icon:"success",title:"Event Created!",timer:1500,showConfirmButton:!1});e()}catch(_){Ce.fire({icon:"error",title:"Gagal",text:((x=(y=_.response)==null?void 0:y.data)==null?void 0:x.error)||_.message})}finally{c(!1)}};return S.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:S.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-lg w-full max-h-[85vh] overflow-hidden flex flex-col",children:[S.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-custom-green text-white",children:[S.jsx("h3",{className:"text-lg font-bold",children:i?"Edit Event":"Tambah Event"}),S.jsx("button",{onClick:t,className:"text-xl hover:text-gray-200",children:S.jsx(Io,{})})]}),S.jsxs("div",{className:"flex border-b bg-gray-50",children:[S.jsx("button",{type:"button",onClick:()=>s("regular"),className:`flex-1 py-3 text-sm font-semibold transition-colors ${r==="regular"?"bg-white border-b-2 border-custom-green text-custom-green":"text-gray-500 hover:text-gray-700"}`,children:" Event Regular"}),S.jsx("button",{type:"button",onClick:()=>s("special"),className:`flex-1 py-3 text-sm font-semibold transition-colors ${r==="special"?"bg-white border-b-2 border-pink-500 text-pink-600":"text-gray-500 hover:text-gray-700"}`,children:" Event Spesial"})]}),S.jsxs("form",{onSubmit:g,className:"p-4 space-y-3 overflow-y-auto flex-1",children:[S.jsx("input",{type:"text",placeholder:"Nama Event *",value:a.nama,onChange:v=>o({...a,nama:v.target.value}),className:"w-full px-3 py-2 border rounded-lg text-sm",required:!0}),S.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[S.jsx("input",{type:"number",placeholder:"Tgl",value:a.tanggal,onChange:v=>o({...a,tanggal:v.target.value}),className:"w-full px-3 py-2 border rounded-lg text-sm",min:"1",max:"31",required:!0}),S.jsxs("select",{value:a.bulan,onChange:v=>o({...a,bulan:v.target.value}),className:"w-full px-3 py-2 border rounded-lg text-sm",required:!0,children:[S.jsx("option",{value:"",children:"Bulan"}),["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agu","Sep","Okt","Nov","Des"].map((v,y)=>S.jsx("option",{value:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"][y],children:v},v))]}),S.jsx("input",{type:"number",placeholder:"Tahun",value:a.tahun,onChange:v=>o({...a,tahun:parseInt(v.target.value)}),className:"w-full px-3 py-2 border rounded-lg text-sm",required:!0})]}),r==="regular"&&S.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[S.jsx("input",{type:"text",placeholder:"Lokasi *",value:a.lokasi,onChange:v=>o({...a,lokasi:v.target.value}),className:"w-full px-3 py-2 border rounded-lg text-sm",required:!0}),S.jsx("input",{type:"text",placeholder:"Jam (14:00 WIB)",value:a.event_time,onChange:v=>o({...a,event_time:v.target.value}),className:"w-full px-3 py-2 border rounded-lg text-sm"})]}),r==="special"&&S.jsxs("div",{className:"bg-pink-50 border border-pink-200 rounded-lg p-3 space-y-2",children:[S.jsx("input",{type:"text",placeholder:"Nama Tema (Valentine Edition)",value:a.theme_name,onChange:v=>o({...a,theme_name:v.target.value}),className:"w-full px-3 py-2 border border-pink-200 rounded-lg text-sm",required:!0}),S.jsxs("div",{className:"flex items-center gap-1",children:[S.jsx("span",{className:"text-xs text-gray-600 mr-1",children:"Warna:"}),h.map(v=>S.jsx("button",{type:"button",onClick:()=>o({...a,theme_color:v}),className:`w-6 h-6 rounded-full ${a.theme_color===v?"ring-2 ring-offset-1 ring-gray-800":""}`,style:{backgroundColor:v}},v))]}),S.jsx("p",{className:"text-xs text-pink-600",children:" Event spesial hanya tersedia untuk Pre-Order"})]}),S.jsxs("div",{children:[S.jsxs("label",{className:"text-xs font-bold text-gray-600 block mb-1",children:["Lineup (",((d=a.lineup)==null?void 0:d.length)||0,")"]}),S.jsx("div",{className:"grid grid-cols-4 gap-1 max-h-20 overflow-y-auto border rounded-lg p-2 bg-gray-50",children:n.filter(v=>v.member_id!=="group").map(v=>{var y;return S.jsxs("label",{className:"flex items-center gap-1 text-xs cursor-pointer",children:[S.jsx("input",{type:"checkbox",checked:((y=a.lineup)==null?void 0:y.includes(v.id))||!1,onChange:()=>p(v.id),className:"w-3 h-3"}),wu(v.nama_panggung)]},v.id)})})]}),S.jsxs("div",{className:"flex gap-2 pt-2",children:[S.jsx("button",{type:"button",onClick:t,className:"flex-1 bg-gray-200 px-4 py-2 rounded-lg text-sm font-semibold hover:bg-gray-300",children:"Batal"}),S.jsx("button",{type:"submit",disabled:l,className:`flex-1 text-white px-4 py-2 rounded-lg text-sm font-semibold disabled:bg-gray-400 ${r==="special"?"bg-pink-500 hover:bg-pink-600":"bg-custom-green hover:bg-green-700"}`,children:l?"Menyimpan...":"Simpan"})]})]})]})})},gS=({events:n,onClose:t,onConfirm:e})=>{const[i,r]=ie.useState("all"),[s,a]=ie.useState(""),[o,l]=ie.useState(1),[c,h]=ie.useState(1),p=()=>{let g="",d={};switch(i){case"all":g="Hapus SEMUA data pembelian? Ini akan menghapus seluruh orders dan tidak bisa dikembalikan!";break;case"event":if(!s){Ce.fire("Error","Pilih event terlebih dahulu","error");return}const v=n.find(y=>y.id===s);g=`Hapus semua data pembelian dari event "${v==null?void 0:v.nama}"?`,d={eventId:s};break;case"weeks":g=`Hapus data pembelian ${o} minggu terakhir?`,d={weeks:o};break;case"months":g=`Hapus data pembelian ${c} bulan terakhir?`,d={months:c};break}Ce.fire({title:"Konfirmasi Hapus",text:g,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#6c757d",confirmButtonText:"Ya, Hapus!",cancelButtonText:"Batal"}).then(v=>{v.isConfirmed&&e(i,d)})};return S.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:[S.jsxs("div",{className:"bg-white rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[S.jsx("div",{className:"sticky top-0 bg-white border-b p-6",children:S.jsxs("div",{className:"flex justify-between items-center",children:[S.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Hapus Data Pembelian"}),S.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:S.jsx(Io,{size:24})})]})}),S.jsxs("div",{className:"p-6 space-y-4",children:[S.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:S.jsxs("p",{className:"text-red-700 text-sm",children:[" ",S.jsx("strong",{children:"Perhatian:"})," Data yang dihapus tidak bisa dikembalikan!"]})}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Pilih Jenis Hapus"}),S.jsxs("select",{value:i,onChange:g=>r(g.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500",children:[S.jsx("option",{value:"all",children:"Hapus Semua Data"}),S.jsx("option",{value:"event",children:"Hapus Per Event"}),S.jsx("option",{value:"weeks",children:"Hapus Per Minggu"}),S.jsx("option",{value:"months",children:"Hapus Per Bulan"})]})]}),i==="event"&&S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Pilih Event"}),S.jsxs("select",{value:s,onChange:g=>a(g.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500",children:[S.jsx("option",{value:"",children:"-- Pilih Event --"}),n.map(g=>S.jsxs("option",{value:g.id,children:[g.nama," - ",g.bulan," ",g.tahun]},g.id))]})]}),i==="weeks"&&S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Jumlah Minggu Terakhir"}),S.jsx("input",{type:"number",min:"1",max:"52",value:o,onChange:g=>l(parseInt(g.target.value)),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500"}),S.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Akan menghapus data ",o," minggu terakhir"]})]}),i==="months"&&S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Jumlah Bulan Terakhir"}),S.jsx("input",{type:"number",min:"1",max:"12",value:c,onChange:g=>h(parseInt(g.target.value)),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500"}),S.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Akan menghapus data ",c," bulan terakhir"]})]}),S.jsxs("div",{className:"flex gap-3 pt-4",children:[S.jsx("button",{onClick:t,className:"flex-1 bg-gray-200 text-gray-700 px-6 py-3 rounded-lg font-semibold hover:bg-gray-300",children:"Batal"}),S.jsxs("button",{onClick:p,className:"flex-1 bg-red-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-red-700 flex items-center justify-center gap-2",children:[S.jsx(vc,{})," Hapus Data"]})]})]})]}),S.jsx(y_,{isOpen:showExportModal,onClose:()=>setShowExportModal(!1),onExport:handleExport,events:n})]})},SS=Object.freeze(Object.defineProperty({__proto__:null,default:uS},Symbol.toStringTag,{value:"Module"}));export{SS as A,Fe as _};
